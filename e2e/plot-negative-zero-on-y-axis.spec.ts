/*
    #347 -0 value can be calculated in y-axis labels
    https://github.com/kerssdead/charts/issues/347
 */

import { expect, test } from '@playwright/test'
import { Screenshot } from './utils/Screenshot'
import { BrowserResult } from './utils/BrowserResult'
import { Utils } from './utils/Utils'

test('Zero y-axis label shouldn`t be negative', async ({ page, browserName }) => {
    await Utils.goto(page)

    const chartType = page.locator('#chart-type'),
        disableInitAnimation = page.locator('#init-animation'),
        enableNegativeValues = page.locator('#negative-values-in-plot'),
        seed = page.locator('#seed'),
        valuesCount = page.locator('#values-count'),
        pointsCount = page.locator('#points-count')

    await disableInitAnimation.setChecked(true)

    await enableNegativeValues.click()
    await valuesCount.fill('1')
    await pointsCount.fill('6')

    await chartType.selectOption('0')

    await seed.fill('179')

    const frame = await Screenshot.get(page, {
        x: 38,
        y: 338,
        width: 39,
        height: 23,
    })

    const result: BrowserResult = {
        chromium: '/9j/4AAQSkZJRgABAQAAAQABAAD/4gHYSUNDX1BST0ZJTEUAAQEAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAASQBuAGMALgAgADIAMAAxADb/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAXACcDASIAAhEBAxEB/8QAGwABAAEFAQAAAAAAAAAAAAAAAAECBAUGBwj/xAAnEAACAQQCAQMEAwAAAAAAAAABAgMABAUREjEGBxNBFCFCUSIycv/EABQBAQAAAAAAAAAAAAAAAAAAAAD/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwD1He3UFjaTXV5KkNvCpeSRzpVUdkmrPDZ3HZkzDHXHuPDr3I2Ro3UHolWAOjo6OtHVYj1Pilk8KvjDG0vtPBNJGo2WjSZHf7f5U1ibPO4m48yynkNvexvh7TFw2892m2i5mVmC7HZUEb11yFBs+S8nw+MvvpL6+SKcBS44sVjDHSl2A0m/jkRS+8nw9hkPobu+SO4BUMOLFYy39Q7AcU38ciN1z/yO+trGP1BxV+QMnlNGxhI/ndB7dI4xGPy06kHXWqtMlNDY4HzTxzISBs3f3AFpCQed0JIokjZB+QDKd664ndB2OlUxKUjRSxYgAEn5pQVVCqFGlAA/QpSgFQSCQCR0f1QqCwYgch0ddUpQTSlKD//Z',
        firefox: '/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAXACcDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD6e1fUbbSNMuL++cpbQLucgEn0AAHUk4AHqapaL4gt9UvLizNtd2V7Aiytb3SBXMbEhXGCQQSCOuQRziqfxEsrq/8ACN5FYRNPcxvDcLEvWTy5UkKj3IUge9ZNlqBufE2peJY9M1UWVvp0doitaOs07+YzsFjIDELlRnHUnHSgDX1fxhp+l3l3DLDeSx2QQ3lxDFujtgwyN5znoQTtBwCCabqXjLTbC6uUkju5La0ZFuryKMNDblgCNzZz0YE4BwDziuW8QLe2n/Ca6QNNvrqfXDusZYoGeNvMhWIhnA2psK5O4jjmquoWV5YaV4q8MLp99c3Oqzg2c6QM8TpJFHGWaT7q7ChzuI4AxnNAHrFFNjQRxqgzhQAM0UAOooooAKKKKACiiigD/9k=',
        webkit: '/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSgBBwcHCggKEwoKEygaFhooKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKP/AABEIAC4ATgMBEQACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APqmgAoAKACgAoAKACgAoAKACgAoAgvruCwtXubp/LhTG5sE4ycDge5oAwdI8c+HdYvRaadqPnXB6J5Ei9iepUDoDQB0tAFTU9RtdLtWub6XyoVxltpbGSB0AJ6kUAZOheM9A165FvpN/wDaJj/D5Midif4lHoaANLWNXsdGtvP1KfyYv72xm7gdgfUUAUfD/i3RPELFdHvftBHX906ev95R6GgDdoAKACgDyb4xD+1vEnhrQWb/AEe5+0+euPvbUR154I5HY0AP+N3hyxt/Ad1f2kGyez2+W29jjfLGp6nHTNAHoHhW/fU9AtbuU5eTdk/RyPQelAHnPjyJPEXxT8P6Fd/NZL9o8xOnWBXHIweqjvQBD8ddIg03RbbV9Pi8q5td2H3FsbmjXoTjoT2oAZeCLxZ8X7e0vx5tnYbv3XK/ft89Rg9VB70AN+M9lD4f1PQ9a0yPyZ4/P8xtxbOVRBwcjoT2oA9noAKACgDyD4yt/ZHinw1rb8QQ/afMb+7lEQcck8nsKAL3xx160fwHc6fbyb7i+2+UNpGdksbN1GOnrigDsYL3T/DGmWNnqE/kl9/ljYzZw2T0z/eFAHnvjyVfDvxb8P63eHZaS/aMtjPS3VOgyerDtQBP8c9Rgv8ASbbRLV99zebtowR9xo37jHQeooAqag8Phr43R3d2fKsr7OHwW+5bAdBk9W9qALXxcu7fWtd0LQrVvNnk8/zFwV24VHHXAPA9aAPXKACgAoAp6xpdnrFhJZajD51tJjcm4rnBBHIIPUCgDmPD/wANfDGhagt9YafsuU+4/nSnbkEHguQeCaANvX/DWk+IJLV9XtPtDW27yj5jpt3Y3fdIznA60ATa/oen6/YPZatb/aLZ8ZTeyZwQeqkHqBQBieGPh74d8N3i3emWPl3S9JPNkOOCOhYjoxoA1fEvhvS/EtoLbWbb7REOg8x0xyD/AAkf3RQBn+FPAug+F5DNpNn5U7fefzZGz1A4ZiOjGgDqKACgAoAKACgAoAKACgAoAKACgAoA/wD/2Q=='
    }

    expect(frame).toBe(result[browserName])
})