(()=>{"use strict";var t={5:function(t,e,i){var s,n,a,r,o,l,h,d=this&&this.__createBinding||(Object.create?function(t,e,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(e,i);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,s,n)}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),c=this&&this.__importStar||(s=function(t){return s=Object.getOwnPropertyNames||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[e.length]=i);return e},s(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i=s(t),n=0;n<i.length;n++)"default"!==i[n]&&d(e,t,i[n]);return u(e,t),e}),f=this&&this.__classPrivateFieldSet||function(t,e,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,i):n?n.value=i:e.set(t,i),i},p=this&&this.__classPrivateFieldGet||function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)};Object.defineProperty(e,"__esModule",{value:!0});const v=i(869),g=c(i(797));class m{constructor(){n.add(this),r.set(this,void 0),f(this,r,new Map,"f")}handle(t,e,i){const s=p(this,n,"m",l).call(this,t,e);p(this,r,"f").has(s)||p(this,r,"f").set(s,i),p(this,n,"m",o).call(this,s)}contains(t,e){return p(this,r,"f").has(p(this,n,"m",l).call(this,t,e))}reload(t,e){this.contains(t,e)&&(p(this,r,"f").get(p(this,n,"m",l).call(this,t,e)).timer=new Date)}clear(){p(this,r,"f").forEach((t,e)=>!p(this,n,"m",h).call(this,e,v.AnimationType.Init)&&p(this,r,"f").delete(e))}reverse(t,e){if(this.contains(t,e)){let i=p(this,r,"f").get(p(this,n,"m",l).call(this,t,e)),s=new Date,a=s.getTime()-(i.timer??s).getTime(),o=a>i.duration?1:i.duration-a;i.timer=new Date((new Date).getTime()-o),i.backward=!i.backward}}isBackward(t,e){return p(this,r,"f").get(p(this,n,"m",l).call(this,t,e))?.backward??!1}isEnd(t,e){let i=p(this,r,"f").get(p(this,n,"m",l).call(this,t,e)),s=new Date;return s.getTime()-(i.timer??s).getTime()>=i.duration}end(t,e){let i=p(this,r,"f").get(p(this,n,"m",l).call(this,t,e));i&&(i.timer=g.Dates.minDate)}static initializeTransitions(){for(let t=0;t<22820;t++){const e=(t+1)/22820;let i=0*Math.pow(1-e,3)+3*Math.pow(1-e,2)*.77*e+3*(1-e)*Math.pow(e,2)*.23+1*Math.pow(e,3),s=0*Math.pow(1-e,3)+3*Math.pow(1-e,2)*.23*e+3*(1-e)*Math.pow(e,2)*.77+1*Math.pow(e,3);a.transitionCurve.set(+i.toFixed(4),s)}a.transitionCurve.set(0,0)}static getTransition(t){return a.transitionCurve.get(+t.toFixed(4))??0}}a=m,r=new WeakMap,n=new WeakSet,o=function(t){const e=p(this,r,"f").get(t),i=new Date,s=i.getTime()-(e.timer??i).getTime(),n=a.getTransition(s>e.duration?1:s/e.duration),o=!e.before||e.before();!e.timer&&o&&(e.timer=i),o&&e.body(e.backward?1-n:n),1!=n||o&&!e.continuous||p(this,r,"f").delete(t)},l=function(t,e){return t+"_"+e},h=function(t,e){return t.endsWith("_"+e)},m.transitionCurve=new Map,e.default=m},10:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.adjustColor=function(t,e){return"#"+t.replace(/^#/,"").replace(/../g,t=>("0"+Math.min(255,Math.max(0,parseInt(t,16)+e)).toString(16)).slice(-2))},e.grayScale=function(t){return"#"+Array(4).join(Math.round([.3,.59,.11].reduce((e,i,s)=>e+i*parseInt(t[2*s+1]+t[2*s+2],16),0)/3).toString(16).padStart(2,"0"))},e.randomColor=function(){let t="#";for(let e=0;e<6;e++)t+="0123456789ABCDEF"[Math.floor(16*Math.random())];return t},e.stringWidth=function(t,e){if(!t)return 0;const i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.559375,.2765625,.3546875,.5546875,.5546875,.8890625,.665625,.190625,.3328125,.3328125,.3890625,.5828125,.2765625,.3328125,.2765625,.3015625,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.5546875,.2765625,.2765625,.584375,.5828125,.584375,.5546875,1.0140625,.665625,.665625,.721875,.721875,.665625,.609375,.7765625,.721875,.2765625,.5,.665625,.5546875,.8328125,.721875,.7765625,.665625,.7765625,.721875,.665625,.609375,.721875,.665625,.94375,.665625,.665625,.609375,.2765625,.3546875,.2765625,.4765625,.5546875,.3328125,.5546875,.5546875,.5,.5546875,.5546875,.2765625,.5546875,.5546875,.221875,.240625,.5,.221875,.8328125,.5546875,.5546875,.5546875,.5546875,.3328125,.5,.2765625,.5546875,.5,.721875,.5,.5,.5,.3546875,.259375,.353125,.5890625];return Array.from(String(t)).reduce((t,e)=>t+(i[e.charCodeAt(0)]??.5279276315789471),0)*(e||14)},e.guid=function(){const t=()=>(65536*(1+Math.random())|0).toString(16).substring(1);return(t()+t()+"-"+t()+"-4"+t().slice(0,3)+"-"+t()+"-"+t()+t()+t()).toLowerCase()},e.isColorVisible=function(t,e){const i=d(t),s=d(e);return(i.r+i.g+i.b)/(s.r+s.g+s.b)<.77},e.getColor=h,e.hexToRgb=d,e.isISOString=function(t){return/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+/.test(t)},e.getHexValues=u,e.getShortHexValues=c,e.applyAlpha=function(t,e){function i(t){const e=u(t);return e?h(e[1],e[2],e[3]):new n.default}const s=i(t),r=i(a.default.canvasBackground),o=1-(e/=255);return function(t,e,i){function s(t){let e=t.toString(16);return 1==e.length?"0"+e:e}return"#"+s(t)+s(e)+s(i)}(Math.round(255*(e*(s.r/255)+o*(r.r/255))),Math.round(255*(e*(s.g/255)+o*(r.g/255))),Math.round(255*(e*(s.b/255)+o*(r.b/255))))},e.closestDigitOrder=function(t,e,i){const s=Math.max(...e),n=e.length>10?10:e.length,a=Math.round(s/(n-i)).toString(),r=a.length;let o=a[0];for(let t=0;t<r-1;t++)o+=0;const l=+o;let h=Math.ceil(t/l)*l;for(;;){if(h>s)return h;h+=l}},e.getRoundedValues=function(t){let e=Math.min(...t),i=Math.max(...t);e>0&&(e=0);const s=t.filter(t=>t<0).length>0;let n=t.length;t.includes(0)||n++,n>l.Plot.maxLabelsCount&&(n=l.Plot.maxLabelsCount),n%2==0&&n++,s&&n++;const a=t=>{const e=[10,7.5,5,2.5,2];let i=0;t=Math.abs(t);for(const s of e)i+=t%s==0?1:0;return i>=4},h=t=>t.length==n,d=Math.abs(e)+Math.abs(i);Math.abs(Math.abs(e)-Math.abs(i));let u=d/n,c=0,f=0,p=1;const v=Math.abs(e)<10&&Math.abs(i)<10;v?p=.1:f=Math.round(u);const g=t=>Math.round(100*(t+Number.EPSILON))/100;let m=0,y=n+m;if(s){const t=Math.abs(e)/d;m=-Math.floor(n*t),y=n+m,i>0&&y<=1&&(m++,y++)}for(;;){if(!isFinite(f))return[];if(a(f)||v){let t=[];for(let e=m;e<y;e++)t.push(g(f*e));if((t[0]>e||t[t.length-1]<=i)&&(t=[]),h(t))return console.log(m,y),t}if(f=g(f+p),c=g(c+p),c>d)throw r.default.throw(o.ErrorType.MaxCallsReach)}};const n=s(i(125)),a=s(i(409)),r=s(i(39)),o=i(869),l=i(797);function h(t,e,i){return{r:parseInt(t,16),g:parseInt(e,16),b:parseInt(i,16)}}function d(t){if(t.length>4){const e=u(t);if(e)return h(e[1],e[2],e[3])}else{const e=c(t);if(e)return h(e[1]+e[1],e[2]+e[2],e[3]+e[3])}return new n.default}function u(t){return/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t)}function c(t){return/^#?([a-f\d])([a-f\d])([a-f\d])$/i.exec(t)}},12:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t,e){this.text=t,this.color=e}}},39:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class i{static throw(t){throw new Error(t)}static throwIsUndefined(t,e){null==t&&i.throw(e)}}e.default=i},88:function(t,e,i){var s,n,a,r,o,l,h,d,u,c,f,p=this&&this.__classPrivateFieldGet||function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)},v=this&&this.__classPrivateFieldSet||function(t,e,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,i):n?n.value=i:e.set(t,i),i},g=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const m=g(i(927)),y=g(i(557)),b=g(i(801)),w=g(i(690)),x=g(i(5)),M=g(i(409)),T=g(i(283)),P=i(869),_=g(i(427));n=new WeakMap,a=new WeakMap,r=new WeakMap,o=new WeakMap,s=new WeakSet,l=function(){if(this.settings.enableTooltip=!this.settings.disableInteractions&&this.settings.enableTooltip,null==p(this,n,"f")||this.settings.type!=p(this,o,"f"))switch(p(this,n,"f")?.destroy(),this.settings.type){case P.ChartType.Plot:v(this,n,new y.default(this),"f"),v(this,o,P.ChartType.Plot,"f");break;case P.ChartType.Circular:v(this,n,new _.default(this),"f"),v(this,o,P.ChartType.Circular,"f");break;case P.ChartType.Gauge:v(this,n,new b.default(this),"f"),v(this,o,P.ChartType.Gauge,"f");break;case P.ChartType.TreeMap:v(this,n,new w.default(this),"f"),v(this,o,P.ChartType.TreeMap,"f")}else p(this,n,"f").applySettings(this.settings);p(this,n,"f").prepareSettings(),this.settings.disableInteractions||(p(this,n,"f").initDropdown(),p(this,n,"f").initAnimations()),p(this,n,"f").resize()},h=function(){p(this,n,"f").refresh(),p(this,a,"f")?.refresh()},d=function(){p(this,n,"f").resize(),p(this,a,"f")?.resize()},u=function(t){M.default.initialize(()=>p(this,s,"m",d).call(this),t.isDarkThemeFunction),x.default.initializeTransitions()},c=function(){this.node.style.display=T.default.Display.Flex,this.node.style.flexDirection=T.default.FlexDirection.Column,this.node.style.alignItems=T.default.AlignItems.Center,this.node.style.justifyContent=T.default.JustifyContent.Center,this.node.style.height="100%"},f=function(){null==p(this,r,"f")&&(v(this,r,new ResizeObserver(()=>{p(this,n,"f").canvas?p(this,s,"m",d).call(this):this.destroy()}),"f"),p(this,r,"f").observe(this.node))},e.default=class{constructor(t,e){s.add(this),n.set(this,void 0),a.set(this,void 0),r.set(this,void 0),o.set(this,void 0),this.node=t,this.applySettings(e),p(this,s,"m",c).call(this),document.addEventListener(P.Events.VisibilityChanged,()=>p(this,n,"f").resetMouse()),window.addEventListener(P.Events.Blur,()=>p(this,n,"f").resetMouse()),window.addEventListener(P.Events.Click,t=>{t.target!=p(this,n,"f").canvas&&p(this,n,"f").closeDropdowns()})}render(){p(this,n,"f").render(),p(this,a,"f")?.render(),p(this,s,"m",f).call(this),p(this,s,"m",h).call(this)}destroy(){p(this,n,"f").destroy(),p(this,a,"f")?.destroy(),p(this,r,"f").disconnect()}highlight(t){p(this,n,"f").highlight(t)}reset(){M.default.reset(),p(this,s,"m",u).call(this,this.settings)}applySettings(t){this.settings=t,this.reset();const e=this.settings.type!=p(this,o,"f");p(this,s,"m",l).call(this),this.settings.enableLegend&&null!=p(this,a,"f")&&p(this,a,"f").applySettings(t),this.settings.enableLegend&&null==p(this,a,"f")&&(v(this,a,new m.default(this),"f"),p(this,a,"f").render()),this.settings.enableLegend||null==p(this,a,"f")||(p(this,a,"f").destroy(),v(this,a,void 0,"f")),e&&p(this,n,"f").render(),p(this,s,"m",f).call(this)}}},125:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{}},126:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Animations=void 0;class i{}e.Animations=i,i.circular=335,i.legend=500,i.tree=250,i.tooltip=120,i.button=200},129:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(527));class a extends n.default{constructor(t){super(),Object.assign(this,t)}inverse(){const t=this.x;this.x=this.y,this.y=t}}e.default=a},138:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(527));class a extends n.default{constructor(t){super(),Object.assign(this,t),this.baseColor=this.color,this.canRenderLabel=!1,this.isMouseInside=!1}toggle(t){super.toggle(t),this.disabled?this.current=this.value*(1-t):this.current=this.value*t}checkCondition(){return super.checkCondition(),0==this.current&&!this.disabled||0!=this.value}reset(){super.reset(),this.current=this.value}}e.default=a},147:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class i{}i.exportPNG="Save as image...",i.decomposeToTable="Show as table...",i.reset="Reset",i.exportCSV="Save as table...",i.menu="Menu",i.allDataIsHidden="All data is hidden",i.other="Other",i.thousandShort="K",i.millionShort="M",i.billionShort="B",i.show="Show...",i.noLabel="No Label",i.treeMapIsEmpty="Tree Map is empty",i.dataAsTable="Data as table",e.default=i},166:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Plot=void 0;class i{}e.Plot=i,i.maxLabelsCount=6},168:function(t,e,i){var s,n=this&&this.__createBinding||(Object.create?function(t,e,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(e,i);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,s,n)}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||(s=function(t){return s=Object.getOwnPropertyNames||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[e.length]=i);return e},s(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i=s(t),r=0;r<i.length;r++)"default"!==i[r]&&n(e,t,i[r]);return a(e,t),e}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const l=o(i(39)),h=i(869),d=o(i(409)),u=r(i(10));class c{static getContext(t){return t.getContext("2d",{willReadFrequently:!0})??l.default.throw(h.ErrorType.NullContext)}static isPixelBusy(t){return null!=t&&t-d.default.canvasBackgroundInt!=0}static isCanRender(t,e,i,s,n,a){const r="number"==typeof s?s:u.stringWidth(s),o=a?{x:e,y:i+n/2}:{x:e-r/2,y:i-n/2},l=a?new Uint32Array(t.getImageData(o.x-r,o.y-n,r,n).data.buffer):new Uint32Array(t.getImageData(o.x,o.y,r,n).data.buffer);for(let t=0;t<l.length;t++)if(c.isPixelBusy(l[t]))return!1;return!0}}e.default=c},183:function(t,e,i){var s,n,a,r,o,l,h,d,u,c,f,p,v,g,m=this&&this.__createBinding||(Object.create?function(t,e,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(e,i);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,s,n)}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),y=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),b=this&&this.__importStar||(s=function(t){return s=Object.getOwnPropertyNames||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[e.length]=i);return e},s(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i=s(t),n=0;n<i.length;n++)"default"!==i[n]&&m(e,t,i[n]);return y(e,t),e}),w=this&&this.__classPrivateFieldSet||function(t,e,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,i):n?n.value=i:e.set(t,i),i},x=this&&this.__classPrivateFieldGet||function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)},M=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const T=M(i(409)),P=M(i(601)),_=b(i(10)),O=M(i(168)),A=b(i(797)),C=M(i(283)),D=i(869);a=new WeakMap,r=new WeakMap,o=new WeakMap,l=new WeakMap,h=new WeakMap,d=new WeakMap,u=new WeakMap,c=new WeakMap,n=new WeakSet,f=function(t){const e=O.default.getContext(this.canvas),i=Math.max(...x(this,c,"f").map(t=>_.stringWidth(t.text??"")+(t.color?8:0)));let s=t.clientX-x(this,o,"f").x+10,a=t.clientY-x(this,o,"f").y+scrollY+10;s+i+25>x(this,o,"f").width&&(s=x(this,o,"f").width-(i+25)),a+15+18*x(this,c,"f").length>x(this,o,"f").height&&(a=x(this,o,"f").height-15-18*x(this,c,"f").length),e.beginPath(),e.roundRect(s,a,i+24,16+16*x(this,c,"f").length,6);let r=Math.round(255*x(this,n,"m",g).call(this)).toString(16),l=Math.round(207*x(this,n,"m",g).call(this)).toString(16);1==r.length&&(r="0"+r),1==l.length&&(l="0"+l),e.strokeStyle=T.default.dropdownBorder+l,e.lineWidth=1,e.fillStyle=T.default.background+l,e.stroke(),e.fill();for(let t of x(this,c,"f")){let i=0;t.color&&(i=12,e.beginPath(),e.fillStyle=t.color+r,e.arc(s+16,a+17,5,0,2*Math.PI),e.fill()),P.default.tooltip(e),e.fillStyle=T.default.text+r,e.fillText(t.text??"",s+i+12,a+21),a+=16}},p=function(t,e){if(null==e)return;const i=x(this,l,"f").id+e.id;let s=document.getElementById(i);const a=()=>{x(this,n,"m",v).call(this),s.style.visibility=C.default.Visibility.Visible};if(!s){const t=/\${[^}]*}/gm;let n=x(this,l,"f").cloneNode(!0);s=document.createElement(D.Tag.Div),s.innerHTML=n.innerHTML,s.id=i,s.style.position=C.default.Position.Absolute,s.style.pointerEvents=C.default.PointerEvents.None,s.style.visibility=C.default.Visibility.Visible,s.setAttribute(D.Attribute.Name,x(this,l,"f").id);const r=[...s.innerHTML.matchAll(t)];let o=s.innerHTML;for(const t of r){const i=t[0].replace("${","").replace("}","").replaceAll(" ","");o=o.replaceAll(t[0],e.data[i])}s.innerHTML=o,document.body.appendChild(s),s.position=s.getBoundingClientRect(),a()}s.style.visibility==C.default.Visibility.Hidden&&a(),0==s.position.height&&(s.position=s.getBoundingClientRect());const r=10;let h="1",d=t.clientX,u=t.clientY+scrollY;d+s.position.width-x(this,o,"f").x>x(this,o,"f").width-r&&(d=x(this,o,"f").width-s.position.width+x(this,o,"f").x-r,h=".67"),u+s.position.height-x(this,o,"f").y>x(this,o,"f").height-r&&(u=x(this,o,"f").height-s.position.height+x(this,o,"f").y-r,h=".67"),0==d&&0==u&&(h="0"),s.style.left=d+r+"px",s.style.top=u+r+"px",s.style.opacity=h},v=function(){if(!x(this,r,"f"))return;const t=document.querySelectorAll(`[name="${x(this,l,"f").id}"]`);for(let e of t)e.style.visibility=C.default.Visibility.Hidden},g=function(){if(!x(this,u,"f"))return 0;let t=x(this,d,"f")?1-((new Date).getTime()-x(this,u,"f").getTime())/A.Animations.tooltip:((new Date).getTime()-x(this,u,"f").getTime())/A.Animations.tooltip;return t>1&&(t=1),t<0&&(t=0),t},e.default=class{constructor(t,e){n.add(this),a.set(this,void 0),r.set(this,void 0),o.set(this,void 0),l.set(this,void 0),h.set(this,void 0),d.set(this,void 0),u.set(this,void 0),c.set(this,void 0),this.canvas=t,this.data=e.data,w(this,a,e.enableTooltip,"f"),w(this,r,!!e.templateId,"f"),x(this,r,"f")&&w(this,l,document.getElementById(e.templateId),"f"),this.refresh()}render(t,e,i,s){if(x(this,n,"m",v).call(this),x(this,a,"f")&&e)if(t||x(this,h,"f")||x(this,d,"f")){t&&w(this,c,i,"f"),x(this,u,"f")||w(this,u,new Date,"f"),x(this,d,"f")?x(this,h,"f")&&w(this,u,new Date,"f"):w(this,h,!0,"f"),x(this,r,"f")?x(this,n,"m",p).call(this,e,s):x(this,n,"m",f).call(this,e);const a=x(this,n,"m",g).call(this);x(this,d,"f")&&a>=1&&(w(this,h,!1,"f"),w(this,d,!1,"f")),x(this,d,"f")&&a<=0&&(w(this,h,!1,"f"),w(this,d,!1,"f"),w(this,u,void 0,"f")),t||null==x(this,u,"f")||w(this,d,!0,"f")}else w(this,u,void 0,"f")}refresh(){w(this,o,this.canvas.getBoundingClientRect(),"f"),x(this,o,"f").x+=scrollX,x(this,o,"f").y+=scrollY}}},226:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class i{}i.colors=["#000000","#ffffff"],i.backgrounds=["#f7f7f7","#222222"],i.lines=["#000000","#eeeeee"],i.lineAxes=["#e0e0e0","#434343"],i.lineActives=["#898989","#898989"],i.dropdownBorders=["#bcbcbc","#7e7e7e"],i.canvasBackgrounds=["#ffffff","#222222"],e.default=i},230:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t,...e){this.args=e,this.type=t,this.base=JSON.parse(JSON.stringify(e))}}},268:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(828)),a=i(869);e.default=class{static getRows(t){let e=[],i=[];for(const s of t.values){let r=new Map;for(const i of s.values)r.set(i.x.toString(),i.y),e.push({value:i.x.toString(),display:t.xType==a.PlotAxisType.Date?n.default.date(new Date(i.x)):i.x.toString()});i.push({name:s.label,values:r})}const s=new Set,r=e.filter(t=>!s.has(t.display)&&s.add(t.display));return t.xType==a.PlotAxisType.Date&&r.sort((t,e)=>new Date(t.value).getTime()-new Date(e.value).getTime()),{headers:r,values:i}}}},281:(t,e)=>{Number.prototype.isAnyEquals=function(...t){return t.includes(this)},Date.prototype.addDays=function(t){let e=new Date(this);return e.setDate(e.getDate()+t),e},Date.prototype.addMilliseconds=function(t){let e=new Date(this);return e.setMilliseconds(e.getMilliseconds()+t),e},Map.prototype.trySet=function(t,e){this.has(t)||this.set(t,e)},Array.prototype.sum=function(t){return this.reduce((e,i)=>e+t(i),0)},CanvasRenderingContext2D.prototype.resetLine=function(){this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt"}},283:(t,e)=>{var i;Object.defineProperty(e,"__esModule",{value:!0}),function(t){class e{}e.Default="default",e.Pointer="pointer",t.Cursor=e;class i{}i.Flex="flex",t.Display=i;class s{}s.Column="column",s.ColumnReverse="column-reverse",s.Row="row",s.RowReverse="row-reverse",t.FlexDirection=s;class n{}n.Center="center",t.AlignItems=n;class a{}a.Visible="visible",a.Hidden="hidden",t.Visibility=a;class r{}r.Absolute="absolute",t.Position=r;class o{}o.None="none",t.PointerEvents=o;class l{}l.Center="center",t.JustifyContent=l;class h{}h.Pixelated="pixelated",t.ImageRendering=h}(i||(i={})),e.default=i},308:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{set(t,e){this.width=t,this.height=e}}},332:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{}},359:function(t,e,i){var s,n,a,r,o,l,h,d,u,c,f,p=this&&this.__createBinding||(Object.create?function(t,e,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(e,i);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,s,n)}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),v=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),g=this&&this.__importStar||(s=function(t){return s=Object.getOwnPropertyNames||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[e.length]=i);return e},s(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i=s(t),n=0;n<i.length;n++)"default"!==i[n]&&p(e,t,i[n]);return v(e,t),e}),m=this&&this.__classPrivateFieldSet||function(t,e,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,i):n?n.value=i:e.set(t,i),i},y=this&&this.__classPrivateFieldGet||function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)},b=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const w=b(i(409)),x=b(i(5)),M=g(i(10)),T=b(i(601)),P=b(i(168)),_=i(869),O=g(i(797)),A=b(i(283));a=new WeakMap,r=new WeakMap,o=new WeakMap,l=new WeakMap,h=new WeakMap,d=new WeakMap,n=new WeakSet,u=function(){m(this,o,y(this,d,"f").getBoundingClientRect(),"f"),y(this,o,"f").x+=scrollX,y(this,o,"f").y+=scrollY},c=function(t,e,i,s,n){if(!t)return!1;let a=t.clientX-y(this,o,"f").x+scrollX,r=t.clientY-y(this,o,"f").y+scrollY;return a>=e&&a<=e+s&&r>=i&&r<=i+n},f=function(){const t=y(this,h,"f")?0:M.stringWidth(y(this,r,"f").text??"")+12,e=y(this,h,"f")?0:20;m(this,l,{x:y(this,r,"f").x+t>y(this,d,"f").width?y(this,d,"f").width-t:y(this,r,"f").x<0?y(this,d,"f").width+y(this,r,"f").x-t:y(this,r,"f").x,y:y(this,r,"f").y+e>y(this,d,"f").height?y(this,d,"f").height-e:y(this,r,"f").y<0?y(this,d,"f").height+y(this,r,"f").y-e:y(this,r,"f").y,width:t,height:e},"f")},e.default=class{constructor(t,e){n.add(this),this.isActive=!1,a.set(this,void 0),r.set(this,void 0),o.set(this,void 0),l.set(this,void 0),h.set(this,void 0),d.set(this,void 0),m(this,d,t,"f"),m(this,r,e,"f"),y(this,r,"f").icon&&(y(this,r,"f").text=y(this,r,"f").icon),m(this,h,null==y(this,r,"f").text,"f"),this.animations=new x.default}render(t,e){y(this,a,"f")||y(this,n,"m",u).call(this),y(this,h,"f")&&(this.isActive=!0);const i=P.default.getContext(y(this,d,"f"));let s=y(this,l,"f").x,o=y(this,l,"f").y,f=y(this,l,"f").width,p=y(this,l,"f").height;if(i.beginPath(),!y(this,h,"f")){const a=(t,e)=>{this.animations.reload("animation-dropdown",e),i.fillStyle=M.adjustColor(w.default.canvasBackground,-Math.round(25*t))};y(this,n,"m",c).call(this,t,s,o,f,p)?(y(this,d,"f").style.cursor=A.default.Cursor.Pointer,e&&t.x==e.x&&t.y==e.y&&(this.isActive=!this.isActive,e=void 0),this.isActive?i.fillStyle=M.adjustColor(w.default.canvasBackground,-25):this.animations.handle("animation-dropdown",_.AnimationType.MouseOver,{duration:300,body:t=>{a(t,_.AnimationType.MouseLeave)}})):(y(this,d,"f").style.cursor=A.default.Cursor.Default,this.isActive?i.fillStyle=M.adjustColor(w.default.canvasBackground,-25):this.animations.handle("animation-dropdown",_.AnimationType.MouseLeave,{timer:O.Dates.minDate,duration:300,backward:!0,body:t=>{a(t,_.AnimationType.MouseOver)}})),i.roundRect(s,o,f,p,4),i.fill(),T.default.regular(i),y(this,r,"f").icon&&(i.font="20px sans-serif");const l=y(this,r,"f").icon?"Win32"!=navigator.platform?1:-1:0;i.fillText(y(this,r,"f").text??"",s+f/2,o+p/2-l)}if(this.isActive){const a=6,l=6;o+=p;const h=y(this,r,"f").items.filter(t=>t.text),u=y(this,r,"f").items.filter(t=>!t.text);let f=Math.max(...h.map(t=>M.stringWidth(t.text)))+4*a;s+f>y(this,d,"f").width-4&&(s-=s+f-y(this,d,"f").width+4);const v="bb",g=127,m=w.default.dropdownItemHoverColor,b=w.default.dropdownBorder;i.beginPath();const x={x:s,y:o,width:f,height:26*h.length+4*u.length+(1==h.length?a:0)+(2==h.length&&1==u.length?a:0)};i.roundRect(x.x,x.y,x.width,x.height,l),i.fillStyle=w.default.background+v,i.setLineDash([]),i.lineWidth=1,i.strokeStyle=b+v,i.fill(),i.stroke(),i.beginPath(),o+=6;for(const h of y(this,r,"f").items){if(i.beginPath(),1==h.isDivider){o+=2,i.moveTo(s+a,o),i.lineTo(s+f-a,o),i.lineWidth=.5,i.stroke(),o+=4;continue}i.fillStyle="transparent";const r="animation-dropdown"+h.text,u=(t,e,s)=>{if(this.animations.reload(r,e),s&&1==t)return;let n=Math.round(g*t).toString(16);1==n.length&&(n="0"+n),i.fillStyle=m+n};y(this,n,"m",c).call(this,t,s,o,f,20)?(this.animations.handle(r,_.AnimationType.MouseOver,{duration:300,body:t=>{u(t,_.AnimationType.MouseLeave)}}),y(this,d,"f").style.cursor=A.default.Cursor.Pointer,e&&(h.action(),e=void 0,this.isActive=!1)):this.animations.handle(r,_.AnimationType.MouseLeave,{timer:O.Dates.minDate,duration:300,backward:!0,body:t=>{u(t,_.AnimationType.MouseOver,!0)}}),i.roundRect(s+a,o,f-2*a,20,l),i.fill(),T.default.regular(i),i.fillStyle=w.default.text,i.textAlign="left",i.textBaseline="hanging",i.fillText(h.text,s+2*a,o+5),o+=22}}return i.lineWidth=1,!y(this,h,"f")&&null!=e&&this.isActive&&(this.isActive=!1,e=void 0),m(this,a,!0,"f"),y(this,h,"f")&&e&&t.x==e.x&&t.y==e.y&&(this.isActive=!this.isActive,e=void 0),e}refresh(){m(this,a,!1,"f")}resize(){y(this,n,"m",u).call(this),y(this,n,"m",f).call(this)}close(){this.isActive=!1}}},409:function(t,e,i){var s,n=this&&this.__createBinding||(Object.create?function(t,e,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(e,i);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,s,n)}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||(s=function(t){return s=Object.getOwnPropertyNames||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[e.length]=i);return e},s(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i=s(t),r=0;r<i.length;r++)"default"!==i[r]&&n(e,t,i[r]);return a(e,t),e}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const l=r(i(10)),h=o(i(226)),d=i(869);class u{static initialize(t,e){!u.function&&e&&(u.function=e),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(!u.function||u.function())?u.setTheme(1):u.setTheme(0),window.matchMedia("(prefers-color-scheme: dark)").addEventListener(d.Events.Change,e=>{u.setTheme(!e.matches||u.function&&!u.function()?0:1),t()})}static setTheme(t){u.currentTheme=t,u.text=h.default.colors[t],u.background=h.default.backgrounds[t],u.line=h.default.lines[t],u.lineAxis=h.default.lineAxes[t],u.lineActive=h.default.lineActives[t],u.dropdownItemHoverColor=l.adjustColor(u.background,0==t?-50:50),u.dropdownBorder=h.default.dropdownBorders[t],u.canvasBackground=h.default.canvasBackgrounds[t],u.canvasBackgroundInt=Number(`0xff${u.canvasBackground.slice(1)}`)}static reset(){this.function=void 0}}u.currentTheme=0,e.default=u},427:function(t,e,i){var s,n=this&&this.__createBinding||(Object.create?function(t,e,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(e,i);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,s,n)}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||(s=function(t){return s=Object.getOwnPropertyNames||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[e.length]=i);return e},s(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i=s(t),r=0;r<i.length;r++)"default"!==i[r]&&n(e,t,i[r]);return a(e,t),e}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const l=o(i(459)),h=o(i(510)),d=o(i(138)),u=o(i(332)),c=r(i(10)),f=o(i(359)),p=o(i(409)),v=o(i(601)),g=o(i(12)),m=o(i(743)),y=o(i(804)),b=o(i(147)),w=o(i(897)),x=o(i(168)),M=o(i(828)),T=i(869),P=r(i(797)),_=o(i(283)),O=o(i(230));class A extends l.default{constructor(t){super(t),this.startAngle=Math.PI/4,this.isMousePositionChanged=!1,this.prevMousePos=new u.default,this.moveEvent=new MouseEvent(T.Events.MouseMove)}calculateAngles(){const t=this.data.values.sum(t=>t.current);let e=this.startAngle;this.angles=this.data.values.flatMap(i=>{const s=i.current/t*2*Math.PI;return{id:i.id,value:s,sum:(e+=s)-s}}).reverse()}getAngle(t){return this.angles.find(e=>e.id==t.id)?.value??0}getAccumulator(t){return this.angles.find(e=>e.id==t.id)?.sum??this.startAngle}calculatePoint(t){let e=this.getAccumulator(t);const i=(t,i,s)=>({x:s.x+t*Math.cos(e+i),y:s.y+t*Math.sin(e+i)}),s=i(this.radius,0,this.center),n=this.getAngle(t);let a=i(this.radius,n,this.center),r=[];if(t.direction=e+n/2,n>0){if(t.current>0){let e=i(this.radius+10,n/2,this.center),s=i(this.radius+20,n/2,this.center);const a=e.x>this.center.x?1:-1;let r={x:s.x+10*a,y:s.y};t.labelPoints=[new O.default(T.DrawPointType.Move,e.x,e.y),new O.default(T.DrawPointType.QuadraticCurve,s.x,s.y,r.x,r.y)]}this.isDonut||r.push(new O.default(T.DrawPointType.Move,this.center.x,this.center.y)),r.push(new O.default(T.DrawPointType.Move,s.x,s.y));let o=0,l=n;for(;l>0;){let t=l-Math.PI/2>0?Math.PI/2:l;a=i(this.radius,o+t,this.center);const s=Math.PI-t,n=i(this.radius/Math.sin(s/2),o+t/2,this.center);r.push(new O.default(T.DrawPointType.ArcTo,n.x,n.y,a.x,a.y,this.radius)),o+=t,1==this.data.values.length&&(e+=o),l-=Math.PI/2}if(this.isDonut||0!=t.innerRadius){const e=this.radius*(t.innerRadius/100),s={x:a.x-(this.radius-e)*(a.x-this.center.x)/this.radius,y:a.y-(this.radius-e)*(a.y-this.center.y)/this.radius};for(r.push(new O.default(T.DrawPointType.Line,s.x,s.y)),l=0,o=n;l<n;){let t=l+Math.PI/2<n?Math.PI/2:n-l;a=i(e,o-t,this.center);const s=Math.PI-t,h=i(e/Math.sin(s/2),o-t/2,this.center);r.push(new O.default(T.DrawPointType.ArcTo,h.x,h.y,a.x,a.y,e)),o-=t,l+=Math.PI/2}}else r.push(new O.default(T.DrawPointType.Line,this.center.x,this.center.y));e+=n}return t.points=r,t}scale(t,e,i){const s=this.center.x+this.radius/2*Math.cos(t.direction),n=this.center.y+this.radius/2*Math.sin(t.direction),a=t=>{for(let a of t)if(a.type!=T.DrawPointType.SemiCircle)for(let t=0;t<a.args.length;t+=2){const r=a.base[t],o=a.base[t+1],l=Math.sqrt(Math.pow(r-s,2)+Math.pow(o-n,2)),h=(l*e+l*(1-e)*i)/l,d=h*r+(1-h)*s,u=h*o+(1-h)*n;isNaN(d)||isNaN(u)?(a.args[t]=a.base[t]*e+a.base[t]*(1-e)*i,a.args[t+1]=a.base[t+1]*e+a.base[t+1]*(1-e)*i):(a.args[t]=d,a.args[t+1]=u)}else a.args[2]=a.base[2]*e+a.base[2]*(1-e)*i};a(t.points),a(t.labelPoints)}focus(t,e,i){t.color=c.applyAlpha(t.baseColor,255-255*e*i),t.textColor=c.applyAlpha(p.default.text,255-255*e*i)}translate(t,e,i){const s=(this.center.x+this.radius*Math.cos(t.direction)-this.center.x)*e,n=(this.center.y+this.radius*Math.sin(t.direction)-this.center.y)*e;t.translate={x:s*i,y:n*i};const a=e=>{for(let i of e)switch(i.type){case T.DrawPointType.SemiCircle:i.args[0]=i.base[0]+t.translate.x,i.args[1]=i.base[1]+t.translate.y;break;case T.DrawPointType.ArcTo:i.args[0]=i.base[0]+t.translate.x,i.args[1]=i.base[1]+t.translate.y,i.args[2]=i.base[2]+t.translate.x,i.args[3]=i.base[3]+t.translate.y;break;default:for(let e=0;e<i.args.length;e+=2)i.args[e]=i.base[e]+t.translate.x,i.args[e+1]=i.base[e+1]+t.translate.y}};a(t.points),a(t.labelPoints)}outline(t,e,i){t.lineStyles=0==i?{lineWidth:1,lineJoin:"miter",lineCap:"butt"}:{lineWidth:this.getAngle(t)>Math.PI/6?e*i:1,lineJoin:"round",lineCap:"round"}}canRenderLabel(t,e){if(t.state==T.AnimationType.None&&null!=t.canRenderLabel)return t.canRenderLabel;if(0==t.current)return t.canRenderLabel=!1;if(t.state==T.AnimationType.None&&t.canRenderLabel)return t.canRenderLabel;const i=t.labelPoints[0].args[0]<t.labelPoints[1].args[0]?1:-1;let s=!1;const n=t.labelPoints[1].args[0],a=t.labelPoints[1].args[1],r=c.stringWidth(t.label),o=1==i?n+12:n-r-12+(t.translate?t.translate.x:0),l=a-12+(t.translate?t.translate.y:0),h=new Uint32Array(e.getImageData(o,l,r,28).data.buffer);if((o<0||o+r>this.canvas.width||a-12<0||a+12>this.canvas.height)&&(s=!0),!s)for(let t=0;t<h.length;t++)if(x.default.isPixelBusy(h[t])){s=!0;break}return t.canRenderLabel=!s}drawLabel(t,e){if(!this.canRenderLabel(t,e))return;e.beginPath(),e.moveTo(t.labelPoints[0].args[0],t.labelPoints[0].args[1]),e.quadraticCurveTo(t.labelPoints[1].args[0],t.labelPoints[1].args[1],t.labelPoints[1].args[2],t.labelPoints[1].args[3]),e.strokeStyle=t.textColor,0!=t.current&&t.current!=t.value&&(e.strokeStyle=c.applyAlpha(t.textColor,Math.round(t.current/t.value*255))),e.resetLine(),e.stroke(),e.fillStyle=t.textColor,0!=t.current&&t.current!=t.value&&(e.fillStyle=c.applyAlpha(t.textColor,Math.round(t.current/t.value*255)));const i=t.labelPoints[0].args[0]<t.labelPoints[1].args[0]?1:-1;v.default.circularLabel(e,1==i),e.fillText(t.label,t.labelPoints[1].args[0]+16*i,t.labelPoints[1].args[1]+4)}drawSector(t,e){e.beginPath(),t.lineStyles?(e.lineWidth=t.lineStyles.lineWidth,e.lineJoin=t.lineStyles.lineJoin,e.lineCap=t.lineStyles.lineCap):e.resetLine();for(const i of t.points)switch(i.type){case T.DrawPointType.Move:e.moveTo(i.args[0],i.args[1]);break;case T.DrawPointType.Line:e.lineTo(i.args[0],i.args[1]);break;case T.DrawPointType.QuadraticCurve:e.quadraticCurveTo(i.args[0],i.args[1],i.args[2],i.args[3]);break;case T.DrawPointType.ArcTo:e.arcTo(i.args[0],i.args[1],i.args[2],i.args[3],i.args[4]);break;case T.DrawPointType.SemiCircle:e.arc(i.args[0],i.args[1],i.args[2],i.args[3],i.args[4],i.args[5])}e.fillStyle=t.color,e.strokeStyle=t.color,e.closePath(),e.fill(),e.stroke()}animate(t){this.animations.handle(t.id,T.AnimationType.Init,{duration:P.Animations.circular+(this.data.values.indexOf(t)+1)/this.data.values.length*P.Animations.circular,continuous:!0,before:()=>t.state==T.AnimationType.Init,body:e=>{this.scale(t,.7,e),this.focus(t,1,1-e),1==e&&(t.state=T.AnimationType.None)}}),this.animations.handle(t.id,T.AnimationType.Click,{duration:0,before:()=>t.state==T.AnimationType.Click,body:e=>{this.translate(t,.1,1),this.outline(t,8,1)}}),this.animations.handle(t.id,T.AnimationType.MouseOver,{duration:P.Animations.circular,before:()=>t.state.isAnyEquals(T.AnimationType.MouseOver,T.AnimationType.MouseLeave),body:e=>{t.color!=t.baseColor&&this.focus(t,.5,e),this.translate(t,.1,e),this.outline(t,8,e),t.state==T.AnimationType.MouseLeave&&this.data.values.filter(t=>t.state==T.AnimationType.MouseOver).length>0&&this.animations.end(t.id,T.AnimationType.AnotherItemOver)}}),this.animations.handle(t.id,T.AnimationType.AnotherItemOver,{duration:P.Animations.circular,before:()=>t.state.isAnyEquals(T.AnimationType.AnotherItemOver,T.AnimationType.AnotherItemLeave),body:e=>{this.focus(t,.5,e)}})}handle(t){if(t.disabled)return;if(t.state==T.AnimationType.None&&!this.isInsideCircle)return;const e=this.isInsideSector(this.moveEvent,t,this.center),i=!!this.clickEvent&&this.isInsideSector(this.clickEvent,t,this.center);if(this.moveEvent&&e&&this.hover?.push(t.id),1!=this.data.values.filter(t=>!t.disabled).length){if(i)return t.state=T.AnimationType.Click,this.pinned.includes(t.id)?this.pinned=this.pinned.filter(e=>e!=t.id):this.pinned.push(t.id),void(this.clickEvent=void 0);if(!this.pinned.includes(t.id)){if(e)return t.state=T.AnimationType.MouseOver,void(this.animations.isBackward(t.id,T.AnimationType.MouseOver)&&this.animations.reverse(t.id,T.AnimationType.MouseOver));if(t.state==T.AnimationType.MouseOver&&!e)return t.state=T.AnimationType.MouseLeave,void(this.animations.isBackward(t.id,T.AnimationType.MouseOver)||this.animations.reverse(t.id,T.AnimationType.MouseOver));if(t.state==T.AnimationType.MouseLeave&&this.animations.isEnd(t.id,T.AnimationType.MouseOver))t.state=T.AnimationType.None;else if(t.state!=T.AnimationType.MouseLeave)return this.data.values.filter(t=>t.state==T.AnimationType.MouseOver).length>0?(t.state=T.AnimationType.AnotherItemOver,void(this.animations.isBackward(t.id,T.AnimationType.AnotherItemOver)&&this.animations.reverse(t.id,T.AnimationType.AnotherItemOver))):this.data.values.filter(t=>t.state==T.AnimationType.MouseLeave).length>0?(t.state=T.AnimationType.AnotherItemLeave,void(this.animations.isBackward(t.id,T.AnimationType.AnotherItemOver)||this.animations.reverse(t.id,T.AnimationType.AnotherItemOver))):void(t.state==T.AnimationType.AnotherItemLeave&&this.animations.isEnd(t.id,T.AnimationType.AnotherItemOver)&&(t.state=T.AnimationType.None))}}}render(){super.render();const t=this.data.values.filter(t=>t.value!=t.current&&0!=t.current).length>0;if(this.isMousePositionChanged=this.prevMousePos.x!=this.moveEvent.clientX||this.prevMousePos.y!=this.moveEvent.clientY,this.isMousePositionChanged){const t=this.getMousePosition(this.moveEvent);this.isInsideCircle=this.isWithinRadius({x:t.x-this.center.x,y:t.y-this.center.y})}if(this.prevMousePos={x:this.moveEvent.clientX,y:this.moveEvent.clientY},t){this.calculateAngles();for(let t of this.data.values)t=this.calculatePoint(t)}if(0==this.data.values.filter(t=>!t.disabled).length)return void this.empty();this.hover=[];const e=x.default.getContext(this.canvas);for(const t of this.data.values)this.animate(t),this.drawSector(t,e),this.drawLabel(t,e),t.state!=T.AnimationType.Init&&this.handle(t);super.renderDropdown();const i=this.data.values.find(t=>t.id==this.hover[0]),s=this.hover.length>0;s||this.contextMenu?this.renderContextMenu(i?.data??{}):this.menuEvent=void 0,this.tooltip.render(s&&!this.dropdown?.isActive,this.moveEvent,[new g.default(`${i?.label}: ${M.default.format(i?.current,T.PlotAxisType.Number,this.settings.valuePostfix)}`)],i),this.innerTitle(),this.canvas.style.cursor=s?_.default.Cursor.Pointer:_.default.Cursor.Default,this.isDestroy||requestAnimationFrame(this.render.bind(this))}isWithinRadius(t){return t.x*t.x+t.y*t.y<=this.radius*this.radius}isInsideSector(t,e,i){if(!this.isMousePositionChanged)return e.isMouseInside;const s=this.getMousePosition(t);return e.isMouseInside=(t=>{let s=Math.atan2(t.y-i.y,t.x-i.x);s<0&&(s+=2*Math.PI),s<this.startAngle&&(s=2*Math.PI-Math.abs(this.startAngle-s)+this.startAngle);let n=this.angles.findIndex(t=>t.id==e.id),a=this.angles[n].sum;return!this.dropdown?.isActive&&a<=s&&a+this.angles[n].value-s>=0})(s)&&this.isInsideCircle}empty(){const t=x.default.getContext(this.canvas);t.beginPath(),t.arc(this.center.x,this.center.y,this.radius,0,2*Math.PI),t.strokeStyle=p.default.text,t.stroke(),v.default.regular(t),t.fillText(b.default.allDataIsHidden,this.center.x,this.center.y),requestAnimationFrame(this.render.bind(this))}innerTitle(){if(this.canRenderInnerTitle){const t=x.default.getContext(this.canvas);this.innerTitleStyle(t),t.fillText(this.data.innerTitle,this.center.x,this.center.y)}}calculateSizes(){const t=this.settings.title?P.Values.titleOffset:0,e=this.canvas.width>this.canvas.height-2*t?this.canvas.height-2*t:this.canvas.width;this.center={x:this.canvas.width/2,y:t+this.canvas.height/2};let i=0;for(const t of this.data.values){const e=c.stringWidth(t.label);e>i&&(i=e)}this.radius=e/2-(i+50),this.radius<e/2-50&&(this.radius=e/2-50),this.radius<0&&(this.radius=0),null!=this.data.innerTitle&&""!=this.data.innerTitle&&(this.innerTitleStyle=v.default.large,this.canRenderInnerTitle=c.stringWidth(this.data.innerTitle,16)<this.data.innerRadius/100*this.radius*2,this.canRenderInnerTitle||(this.innerTitleStyle=v.default.regular,this.canRenderInnerTitle=c.stringWidth(this.data.innerTitle,14)<this.data.innerRadius/100*this.radius*2),this.canRenderInnerTitle||console.warn("Inner title is declared, but can't be rendered"))}refresh(){super.refresh(),this.dropdown?.refresh()}resize(){super.resize(),this.initAnimations(),this.calculateSizes(),this.dropdown?.resize();for(let t of this.data.values)t.canRenderLabel=void 0,t=this.calculatePoint(t)}prepareSettings(){super.prepareSettings(),this.calculateSizes(),this.data.values=this.data.values.map(t=>new d.default(t)),this.settings.enableOther&&(this.settings.contextMenu?this.settings.contextMenu.push({isDivider:!0}):this.settings.contextMenu=[],this.settings.contextMenu.push({text:b.default.show,condition:t=>t?._other,action:()=>{new w.default(m.default.toChart(this.settings,this.other),{width:.8*window.innerWidth,height:.8*window.innerHeight},b.default.other).open()}})),this.pinned=[],this.isDonut=0!=(this.data.innerRadius??0);for(let t of this.data.values)t.disabled=!t.value,t.value??=0,t.current=t.value,t.innerRadius??=this.data.innerRadius??0,t.value<0&&console.warn(`"${t.label}" has negative value (${t.value}) and will not be render`);if(this.data.values=this.data.values.filter(t=>t.value>=0),this.settings.enableOther&&this.data.values.length>20){this.other=this.data.values.splice(20);const t=this.other.sum(t=>t.current);this.data.values=this.data.values.slice(0,20),this.data.values.push(new d.default({value:t,current:t,label:b.default.other,id:c.guid(),color:this.other[this.other.length-1].color,innerRadius:this.data.innerRadius,data:{_other:!0}}))}this.calculateAngles();for(let t of this.data.values)t=this.calculatePoint(t),t.textColor=p.default.text,t.state=this.settings.disableInitAnimation?T.AnimationType.None:T.AnimationType.Init}initDropdown(){super.initDropdown(),this.dropdown=new f.default(this.canvas,{x:-10,y:10,icon:T.Icon.ThreeLines,items:[{text:b.default.exportPNG,action:()=>{y.default.asPng(this.canvas,this.settings.title)}},{text:b.default.exportCSV,action:()=>{y.default.asCsv(m.default.toTable(h.default.getRows(this.data)),this.settings.title)}},{isDivider:!0},{text:b.default.decomposeToTable,action:()=>{new w.default(m.default.toTable(h.default.getRows(this.data)),void 0,this.settings.title??b.default.dataAsTable).open()}}]})}}e.default=A},459:function(t,e,i){var s,n,a,r=this&&this.__createBinding||(Object.create?function(t,e,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(e,i);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,s,n)}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),l=this&&this.__importStar||(s=function(t){return s=Object.getOwnPropertyNames||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[e.length]=i);return e},s(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i=s(t),n=0;n<i.length;n++)"default"!==i[n]&&r(e,t,i[n]);return o(e,t),e}),h=this&&this.__classPrivateFieldGet||function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)},d=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const u=d(i(688)),c=l(i(10)),f=d(i(927)),p=d(i(359)),v=d(i(147)),g=d(i(168)),m=d(i(601)),y=i(869),b=l(i(797));class w extends u.default{constructor(t){super(t),n.add(this),this.isDestroy=!1,this.highlightItems=[],this.state=this.settings.disableInitAnimation?y.RenderState.Idle:y.RenderState.Init}render(){super.render(),this.renderTitle()}destroy(){this.isDestroy=!0,this.canvas.remove()}renderDropdown(){this.clickEvent=this.dropdown?.render(this.moveEvent,this.clickEvent)}resize(){h(this,n,"m",a).call(this),this.tooltip.refresh(),this.dropdown?.resize()}prepareSettings(){this.data=this.settings.data;const t=this.node.parentElement.getBoundingClientRect();this.settings.minWidth=isNaN(+this.settings.width)?0:+this.settings.width,this.settings.minHeight=isNaN(+this.settings.height)?0:+this.settings.height,this.settings.width=0!=this.settings.minWidth&&t.width<this.settings.minWidth?this.settings.minWidth:t.width,this.settings.height=0!=this.settings.minHeight&&t.height<this.settings.minHeight?this.settings.minHeight:t.height,this.canvas.width=this.settings.width,this.canvas.height=this.settings.height;for(let t of this.settings.data.values)t.id=c.guid(),t.label??=v.default.noLabel;this.calculateColors();for(let t of this.settings.contextMenu??[])null!=t.id&&(t.action=e=>this.node.dispatchEvent(new CustomEvent(t.id??"",{detail:e})))}calculateColors(t=!1){const e=c.adjustColor(this.settings.baseColor??c.randomColor(),-67);let i=0;for(let s of this.settings.data.values){if(null==s.color||t){let t=Math.round(i/this.settings.data.values.length*134);s.color=c.adjustColor(e,t)}i++}}initDropdown(){}renderContextMenu(t){if(this.dropdown?.isActive)return this.menuEvent=void 0,!1;if(null!=this.menuEvent&&0!=this.settings.contextMenu?.length){if(null==this.contextMenu&&null!=this.settings.contextMenu){let e=[];for(const i of this.settings.contextMenu)i.condition&&!i.condition(t)||e.push({id:i.id,text:i.text,isDivider:i.isDivider,action:()=>{i.action(t),this.menuEvent=void 0,this.contextMenu=void 0}});this.contextMenu=new p.default(this.canvas,{x:this.menuEvent.x-this.canvasPosition.x,y:this.menuEvent.y-this.canvasPosition.y,items:e,data:t}),this.contextMenu.resize(),this.clickEvent=void 0}const e=null!=this.clickEvent;if(this.clickEvent=this.contextMenu?.render(this.moveEvent,this.clickEvent),null==this.clickEvent&&e)return this.contextMenu=void 0,this.menuEvent=void 0,!0}return!1}highlight(t){this.highlightItems=t?[t.id]:[]}closeDropdowns(){this.dropdown?.close(),this.menuEvent=void 0}renderTitle(){const t=g.default.getContext(this.canvas);this.settings.title&&(m.default.title(t),t.fillText(this.settings.title,this.canvas.width/2,b.Values.titleOffset))}getMousePosition(t){return{x:t.clientX-this.canvasPosition.x+scrollX,y:t.clientY-this.canvasPosition.y+scrollY}}applySettings(t){this.settings=t}}n=new WeakSet,a=function(){let t=this.node.getBoundingClientRect();this.settings.width=this.settings.minWidth&&t.width<this.settings.minWidth?this.settings.minWidth:t.width,this.settings.height=this.settings.minHeight&&t.height<this.settings.minHeight?this.settings.minHeight:t.height,this.canvas.width=this.settings.width,this.canvas.height=this.settings.height,this.settings.enableLegend&&(null!=this.settings.legendPlace&&this.settings.legendPlace!=y.LegendPlace.Top&&this.settings.legendPlace!=y.LegendPlace.Bottom||(this.canvas.height-=f.default.getLegendHeight(this.settings.data.values,this.canvas.width)),this.settings.legendPlace!=y.LegendPlace.Left&&this.settings.legendPlace!=y.LegendPlace.Right||(this.canvas.width-=500))},e.default=w},495:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static getRows(t){const e="Value";let i=[];for(const s of t.values)i.push({name:s.label,values:new Map([[e,s.value]])});return{headers:[{value:e,display:e}],values:i}}}},510:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static getRows(t){const e="Value";let i=[];for(const s of t.values)i.push({name:s.label,values:new Map([[e,s.value]])});return{headers:[{value:e,display:e}],values:i}}}},527:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{toggle(t){0==t&&(this.disabled=!this.disabled)}checkCondition(){return!1}reset(){this.disabled=!1}}},557:function(t,e,i){var s,n,a,r,o,l,h,d,u,c,f,p=this&&this.__createBinding||(Object.create?function(t,e,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(e,i);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,s,n)}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),v=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),g=this&&this.__importStar||(s=function(t){return s=Object.getOwnPropertyNames||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[e.length]=i);return e},s(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i=s(t),n=0;n<i.length;n++)"default"!==i[n]&&p(e,t,i[n]);return v(e,t),e}),m=this&&this.__classPrivateFieldGet||function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)},y=this&&this.__classPrivateFieldSet||function(t,e,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,i):n?n.value=i:e.set(t,i),i},b=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const w=b(i(268)),x=b(i(459)),M=g(i(10)),T=b(i(906)),P=b(i(359)),_=b(i(902)),O=b(i(183)),A=b(i(409)),C=b(i(12)),D=b(i(804)),S=b(i(743)),k=b(i(897)),j=b(i(147)),E=b(i(828)),I=b(i(168)),L=i(869),R=g(i(797)),W=b(i(601)),B=b(i(308));class N extends x.default{constructor(t){super(t),n.add(this),a.set(this,void 0),r.set(this,void 0),o.set(this,void 0),l.set(this,void 0),h.set(this,void 0),d.set(this,void 0),u.set(this,void 0),this.plot=new B.default}render(){super.render(),this.empty(),this.base.render(),this.series(),this.animate(),this.interact(),this.tooltip2(),this.dropdown2(),this.state=L.RenderState.Idle,this.nextFrame()}empty(){}series(){const t=I.default.getContext(this.canvas),e=this.paddings,i=this.canvas;t.lineJoin="round";const s=this.data.values.map(t=>new V(t));for(const t of s)t.render();let p=[];const v=A.default.lineActive;let g=0,b=0,w=0,x=0,T=0;const P=this.data.values.filter(t=>!t.disabled);let _=0,O=P.filter(t=>t.type==L.PlotType.Column).length,D=0,S=P.filter(t=>t.type==L.PlotType.Bar).length,k=[];for(let t=0;t<m(this,d,"f").length;t++)k.push(0);for(const s of P){t.beginPath(),t.strokeStyle=s.color,t.fillStyle=s.color,t.lineWidth=s.width,t.lineCap="round";const P=0!=this.highlightItems.length;if(!this.animations.contains(s.id,L.AnimationType.Init)){const e=(e,i)=>{if(this.animations.reload(s.id,i),0==e)return;let n=Math.round(255-127*e).toString(16);n.length<2&&(n=0+n),t.fillStyle=s.color+n,t.strokeStyle=s.color+n};P&&!this.highlightItems.includes(s.id)?this.animations.handle(s.id,L.AnimationType.AnotherItemOver,{duration:R.Animations.circular,body:t=>{e(t,L.AnimationType.AnotherItemLeave)}}):P||this.animations.handle(s.id,L.AnimationType.AnotherItemLeave,{timer:R.Dates.minDate,duration:R.Animations.circular,backward:!0,body:t=>{e(t,L.AnimationType.AnotherItemOver)}})}switch(s.lineType){case L.LineType.Dash:t.setLineDash([3*s.width,2*s.width]);break;case L.LineType.Dotted:t.setLineDash([s.width,s.width]);case L.LineType.Solid:}for(const v of s.values){let M=s.values.indexOf(v),P=m(this,h,"f").indexOf(this.data.xType==L.PlotAxisType.Date?v.x?.toString():v.x),A=m(this,d,"f").indexOf(v.y);const j=()=>({x:E.default.format(v.x,this.data.xType),y:E.default.format(v.y,this.data.xType,this.settings.valuePostfix)});switch(g=e.left,s.type!=L.PlotType.Bar&&(g+=P*m(this,a,"f").step),s.type==L.PlotType.Line&&(g-=m(this,a,"f").step/2-m(this,a,"f").step),s.type){case L.PlotType.Line:b=e.top+this.plot.height-v.y/m(this,r,"f").unit*m(this,r,"f").step-Math.abs(m(this,r,"f").min/m(this,r,"f").unit*m(this,r,"f").step);const h=1500/s.values.length*1.2;if(this.state==L.RenderState.Init||this.animations.contains(v.id,L.AnimationType.Init))this.animations.handle(v.id,L.AnimationType.Init,{timer:new Date(Date.now()).addMilliseconds(h*M),duration:h,continuous:!0,body:i=>{if(0==M)return;g=e.left+(P-.5)*m(this,a,"f").step,b=e.top+this.plot.height-v.y/m(this,r,"f").unit*m(this,r,"f").step-Math.abs(m(this,r,"f").min/m(this,r,"f").unit*m(this,r,"f").step);const n=s.values[M-1],o={x:e.left+(P-.5)*m(this,a,"f").step,y:e.top+this.plot.height-n.y/m(this,r,"f").unit*m(this,r,"f").step-Math.abs(m(this,r,"f").min/m(this,r,"f").unit*m(this,r,"f").step)},l={x:o.x+(m(this,a,"f").step+(g-o.x))*i,y:o.y+(b-o.y)*i};o.x!=l.x&&o.y!=l.y&&(t.moveTo(o.x,o.y),t.lineTo(l.x,l.y))}});else if(t.lineTo(g,b),m(this,n,"m",f).call(this,g)){const t=this.getMousePosition(this.moveEvent);Math.abs(t.y-b)<5&&(y(this,u,{x:g,y:b,index:M,data:v.data,series:s},"f"),p.push(new C.default(`${s.label}: ${j().y}`,s.color)),y(this,o,g-m(this,a,"f").step/2,"f"))}break;case L.PlotType.AttentionLine:w=i.height-e.bottom-v.y/m(this,r,"f").unit*m(this,r,"f").step,t.moveTo(e.left,w),this.state==L.RenderState.Init||this.animations.contains(v.id,L.AnimationType.Init)?this.animations.handle(v.id,L.AnimationType.Init,{duration:1500,continuous:!0,body:s=>{t.lineTo(e.left+(i.width-e.left-e.right)*s,i.height-e.bottom-v.y/m(this,r,"f").unit*m(this,r,"f").step)}}):t.lineTo(i.width-e.right,w);break;case L.PlotType.Column:w=v.y>this.data.yMax?this.data.yMax:v.y,b=this.plot.height*w/m(this,r,"f").max,b<m(this,r,"f").minStep&&(b=m(this,r,"f").minStep),T=m(this,a,"f").step*(s.width?s.width/100:.5)/O,t.beginPath(),this.state==L.RenderState.Init||this.animations.contains(v.id+_,L.AnimationType.Init)?this.animations.handle(v.id+_,L.AnimationType.Init,{duration:800,continuous:!0,body:n=>{w=v.y>this.data.yMax?this.data.yMax:v.y,g=e.left+P*m(this,a,"f").step,b=this.plot.height*w/m(this,r,"f").max*n,b<m(this,r,"f").minStep&&(b=m(this,r,"f").minStep*n),_=this.data.values.filter(t=>t.type==L.PlotType.Column).indexOf(s),t.roundRect(g+_*T+(m(this,a,"f").step-O*T)/2,i.height-e.bottom-b,T,b,[6,6,0,0]),t.fill()}}):(!m(this,n,"m",c).call(this,g+_*T+(m(this,a,"f").step-O*T)/2,i.height-e.bottom-b,T,b)||null!=this.contextMenu?.isActive&&0!=this.contextMenu?.isActive||(y(this,u,{x:g,y:b,index:M,data:v.data,series:s},"f"),p.push(new C.default(`${s.label}: ${j().y}`,s.color)),y(this,o,g,"f")),t.roundRect(g+_*T+(m(this,a,"f").step-O*T)/2,i.height-e.bottom-b,T,b,[6,6,0,0]),t.fill());break;case L.PlotType.Bar:b=e.top+A*m(this,r,"f").step+m(this,r,"f").step/2+(100-s.width)*m(this,r,"f").step/100/2;const d=s.width*m(this,r,"f").step/100/S;this.state==L.RenderState.Init||this.animations.contains(v.id+D,L.AnimationType.Init)?this.animations.handle(v.id+D,L.AnimationType.Init,{duration:800,continuous:!0,body:i=>{b=e.top+A*m(this,r,"f").step+m(this,r,"f").step/2+(100-s.width)*m(this,r,"f").step/100/2,D=this.data.values.filter(t=>t.type==L.PlotType.Bar).indexOf(s),t.fillRect(g,b-m(this,r,"f").step/2+D*d,v.x/m(this,a,"f").unit*m(this,a,"f").step*i,d)}}):(m(this,n,"m",c).call(this,g,b-m(this,r,"f").step/2+D*d,v.x/m(this,a,"f").unit*m(this,a,"f").step,d)&&(y(this,u,{x:g,y:b,index:M,data:v.data,series:s},"f"),p.push(new C.default(`${s.label}: ${j().x}`,s.color)),y(this,l,b-m(this,r,"f").step/2,"f")),t.fillRect(g,b-m(this,r,"f").step/2+D*d,v.x/m(this,a,"f").unit*m(this,a,"f").step,d));break;case L.PlotType.StackingColumn:if(b=i.height-e.bottom-v.y/m(this,r,"f").unit*m(this,r,"f").step,T=m(this,a,"f").step*(s.width?s.width/100:.5),this.state==L.RenderState.Init||this.animations.contains(v.id+M,L.AnimationType.Init))this.animations.handle(v.id+M,L.AnimationType.Init,{duration:800,continuous:!0,body:n=>{_=this.data.values.filter(t=>t.type==L.PlotType.StackingColumn&&t.values.filter(t=>this.data.xType==L.PlotAxisType.Date?t.x.getTime()==v.x.getTime():t.x==v.x).length>0).indexOf(s),g=e.left+P*m(this,a,"f").step,b=i.height-e.bottom-v.y/m(this,r,"f").unit*m(this,r,"f").step,0==_&&(k[P]=0);let o=null!=k[P]?k[P]:0;w=i.height-e.bottom+o,x=(b-i.height+e.bottom)*n,w>e.top&&(w+x<e.top&&(x-=w+x-e.top),t.fillRect(g+(m(this,a,"f").step-T)/2,w,T,x)),k[P]+=(b-i.height+e.bottom)*n}});else{0==_&&(k[P]=0);let r=null!=k[P]?k[P]:0;w=i.height-e.bottom+r,x=b-i.height+e.bottom,w>e.top&&(w+x<e.top&&(x-=w+x-e.top),m(this,n,"m",c).call(this,g+(m(this,a,"f").step-T)/2,w+x,T,Math.abs(x))&&(y(this,u,{x:g,y:b,index:P,data:v.data,series:s},"f"),p.push(new C.default(`${s.label}: ${j().y}`,s.color)),y(this,o,g,"f")),t.fillRect(g+(m(this,a,"f").step-T)/2,w,T,x)),k[P]+=b-i.height+e.bottom}}}switch(t.setLineDash([]),s.type){case L.PlotType.Line:if(t.stroke(),m(this,u,"f")&&m(this,u,"f").series==s){t.beginPath(),t.lineWidth=1,t.strokeStyle=v,t.moveTo(e.left,m(this,u,"f").y),t.lineTo(i.width-e.right,m(this,u,"f").y),t.stroke();let n=Math.round(1.1*s.width);n<5&&(n=5),t.beginPath(),t.arc(m(this,u,"f").x,m(this,u,"f").y,n,0,2*Math.PI),t.fill(),t.lineWidth=Math.ceil(n/2),t.strokeStyle=M.adjustColor(s.color,50),t.stroke()}break;case L.PlotType.AttentionLine:t.stroke(),W.default.regular(t),t.fillText(s.label,e.left+(i.width-e.left-e.right)/2,i.height-e.bottom-s.values[0].y/m(this,r,"f").unit*m(this,r,"f").step+16);break;case L.PlotType.Column:case L.PlotType.StackingColumn:case L.PlotType.Bar:m(this,u,"f")&&this.highlight(m(this,u,"f").series),_++,D++}}this.tooltipValues=p}animate(){}interact(){}refresh(){super.refresh()}resize(){super.resize(),this.size()}prepareSettings(){super.prepareSettings();let t=[];for(let e of this.data.values)e=new _.default(e),e.type==L.PlotType.Bar&&e.inverse(),e.normalize(this.data.xType),t.push(e);this.data.values=t,this.setPaddings(),this.tooltip=new O.default(this.canvas,this.settings),this.base=new F(this,this.data)}size(){let t=this.data.values.flatMap(t=>t.values.map(t=>t.x)),e=this.data.values.flatMap(t=>t.values.map(t=>t.y));const i=this.data.xType==L.PlotAxisType.Date,s=this.data.xType==L.PlotAxisType.Text,n=!i&&!s,o=(t,e)=>e>t?-1:1;if(i){let e=new Date(Math.min(...t));for(;e.getTime()<Math.max(...t);)t.includes(e.getTime())||t.push(new Date(e.getTime())),e=e.addDays(1);t.sort(o)}n&&(this.base.isVertical?t=M.getRoundedValues(t):e=M.getRoundedValues(e)),e.sort(o),y(this,h,[...new Set(t.filter(t=>null!=t).map(t=>i?t.toString():t))],"f"),y(this,d,[...new Set(e.filter(t=>null!=t))],"f"),y(this,a,{min:Math.min(...t),max:Math.max(...t),unit:(Math.abs(Math.min(...t))+Math.abs(Math.max(...t)))/(m(this,h,"f").length-1),step:(this.canvas.width-this.paddings.left-this.paddings.right)/m(this,h,"f").length,minStep:0},"f");const l=Math.min(Math.min(...e),0);y(this,r,{min:l,max:this.data.yMax??Math.max(...e),unit:(Math.abs(l)+Math.abs(this.data.yMax??Math.max(...e)))/(m(this,d,"f").length-1),step:(this.canvas.height-this.paddings.top-this.paddings.bottom)/m(this,d,"f").length,minStep:0},"f");let u,c=this.data.values.filter(t=>t.type==L.PlotType.StackingColumn);if(c.length>0){let t=c.map(t=>t.values.flatMap(t=>+t.y));u=m(this,r,"f").max;for(let e=0;e<t[0].length;e++){let i=0;for(const s of t)i+=s[e];i>u&&(u=i)}m(this,r,"f").max=u>this.data.yMax?this.data.yMax:u,m(this,r,"f").unit=(Math.abs(m(this,r,"f").min)+Math.abs(m(this,r,"f").max))/(m(this,d,"f").length-1)}const f=M.stringWidth(E.default.number(m(this,r,"f").max));f>this.paddings.left-40&&!this.data.simple&&(this.paddings.left+=f-this.paddings.left+40,m(this,a,"f").step=(this.canvas.width-this.paddings.left-this.paddings.right)/m(this,h,"f").length),this.plot.set(this.canvas.width-this.paddings.left-this.paddings.right,this.canvas.height-this.paddings.top-this.paddings.bottom)}initDropdown(){super.initDropdown(),this.data.simple?this.dropdown=void 0:this.dropdown=new P.default(this.canvas,{x:-10,y:10,icon:L.Icon.ThreeLines,items:[T.default.button(j.default.exportPNG,()=>D.default.asPng(this.canvas,this.settings.title)),T.default.button(j.default.exportCSV,()=>D.default.asCsv(S.default.toTable(w.default.getRows(this.data)),this.settings.title)),T.default.divider(),T.default.button(j.default.decomposeToTable,()=>new k.default(S.default.toTable(w.default.getRows(this.data)),void 0,this.settings.title??j.default.dataAsTable).open())]})}tooltip2(){if(!this.data.simple){if(this.tooltipValues.length>0){const t=(t,e)=>{let i=0,s=0,n=[...t.keys()];for(;i<e;)i=n[s++];return t.get(i)};this.tooltipValues.unshift(new C.default(this.base.isVertical?t(this.base.labelsY,m(this,l,"f")):t(this.base.labelsX,m(this,o,"f"))))}this.tooltip.render(this.tooltipValues.length>1&&!this.dropdown?.isActive,this.moveEvent,this.tooltipValues,m(this,u,"f")?m(this,u,"f").series.values[m(this,u,"f").index]:void 0)}}dropdown2(){super.renderDropdown(),this.menuEvent&&!m(this,u,"f")&&(this.menuEvent=void 0),null==m(this,u,"f")&&this.highlight(),!m(this,u,"f")||!this.renderContextMenu(m(this,u,"f").data)&&this.menuEvent||y(this,u,void 0,"f")}nextFrame(){this.isDestroy||requestAnimationFrame(this.render.bind(this))}setPaddings(){this.data.simple?this.paddings={top:10,right:10,bottom:10,left:10}:this.paddings={top:30,right:40,bottom:50,left:80},this.settings.title&&(this.paddings.top+=R.Values.titleOffset)}}a=new WeakMap,r=new WeakMap,o=new WeakMap,l=new WeakMap,h=new WeakMap,d=new WeakMap,u=new WeakMap,n=new WeakSet,c=function(t,e,i,s){if(!this.moveEvent)return!1;const n=this.getMousePosition(this.moveEvent);return!this.dropdown?.isActive&&n.x>=t&&n.x<=t+i&&n.y>=e&&n.y<=e+s},f=function(t){if(!this.moveEvent)return!1;const e=this.getMousePosition(this.moveEvent);return!this.dropdown?.isActive&&t-m(this,a,"f").step/2<=e.x&&e.x<t+m(this,a,"f").step/2&&this.paddings.top<=e.y&&e.y<=this.canvas.height-this.paddings.bottom&&this.paddings.left<e.x};class V extends _.default{constructor(t){super(t),Object.assign(this,t)}render(){this.area(),this.label2(),this.animate(),this.interact()}animate(){}interact(){}area(){}label2(){}canRenderLabel(){}}class F{constructor(t,e){this.renderer=t,this.data=e,this.isVertical=e.values.filter(t=>t.type==L.PlotType.Bar).length>0}render(){this.clear(),this.data.simple||(this.calculateLabels(),this.lines(),this.backlines(),this.labels(),this.titles(),this.renderer.renderTitle())}clear(){const t=this.renderer.canvas;I.default.getContext(t).clearRect(0,0,t.width,t.height)}lines(){const t=this.renderer.canvas,e=this.renderer.paddings,i=I.default.getContext(t);i.fillStyle=A.default.canvasBackground,i.fillRect(0,0,e.left,t.height),i.fillRect(0,0,t.width,e.top),i.fillRect(t.width-e.right,0,t.width,t.height),i.fillRect(0,t.height-e.bottom,t.width,t.height),i.setLineDash([]),i.beginPath(),i.strokeStyle=A.default.line,i.lineWidth=1,i.moveTo(e.left,t.height-e.bottom),this.isVertical?i.lineTo(e.left,e.top):i.lineTo(t.width-e.right,t.height-e.bottom),i.stroke()}backlines(){const t=this.renderer.canvas,e=this.renderer.paddings,i=I.default.getContext(t);if(i.lineWidth=1,i.strokeStyle=A.default.lineAxis,i.setLineDash([6,6]),this.isVertical){const s=this.labelsX.size>10?10:this.labelsX.size,n=this.renderer.plot.width/s;for(let a=0;a<s;a++){const s=t.width-e.right-n*a;i.beginPath(),i.moveTo(s,e.top),i.lineTo(s,t.height-e.bottom),i.stroke()}}if(!this.isVertical){const s=this.labelsY.size>10?10:this.labelsY.size,n=this.renderer.plot.height/s;for(let a=0;a<s;a++){const s=e.top+a*n;i.beginPath(),i.moveTo(e.left,s),i.lineTo(t.width-e.right,s),i.stroke()}}}labels(){const t=this.renderer.canvas,e=this.renderer.paddings,i=I.default.getContext(t);W.default.regular(i);for(const s of this.labelsX){const n=s[0],a=t.height-e.bottom+20;I.default.isCanRender(i,n,a,s[1],20)&&i.fillText(s[1],n,a)}for(const t of this.labelsY){const s=e.left-10,n=t[0];i.textAlign="end",I.default.isCanRender(i,s,n,t[1],20,!0)&&i.fillText(t[1],s,n)}}titles(){const t=this.renderer.canvas,e=this.renderer.paddings,i=I.default.getContext(t);(this.data.xTitle||this.data.yTitle)&&(i.textAlign="center",i.textBaseline="bottom",i.fillStyle=A.default.text,this.data.xTitle&&i.fillText(this.data.xTitle,e.left+(t.width-e.left-e.right)/2,t.height-4),this.data.yTitle&&(i.rotate(-Math.PI/2),i.textBaseline="top",i.fillText(this.data.yTitle,-(e.top+(t.height-e.top-e.bottom)/2),8),i.resetTransform()))}calculateLabels(){const t=this.renderer.canvas,e=this.renderer.paddings;this.labelsX=new Map,this.labelsY=new Map;let i=[...new Set(this.data.values.flatMap(t=>t.values).flatMap(t=>t.x))],s=[...new Set(this.data.values.flatMap(t=>t.values).flatMap(t=>t.y))];this.isVertical?i=M.getRoundedValues(i):s=M.getRoundedValues(s);let n=Math.min(...i),a=Math.max(...i);n>0&&(n=0);let r=Math.min(...s),o=Math.max(...s);r>0&&(r=0);const l=i.length>10&&this.isVertical?10:i.length,h=this.renderer.plot.width/l,d=(a-n)/(this.isVertical?l-1:l),u=this.isVertical?l+1:l;for(let t=0;t<u;t++)this.isVertical?this.labelsX.set(Math.round(e.left+h*t),E.default.format(n+d*t,this.renderer.data.xType)):this.labelsX.set(Math.round(e.left+h*(t+.5)),E.default.format(i[t],this.renderer.data.xType));const c=s.length>10?10:s.length,f=this.renderer.plot.height/c,p=(o-r)/(this.isVertical?c-1:c),v=this.isVertical?c:c+1;for(let i=0;i<v;i++)this.isVertical?this.labelsY.set(t.height-e.bottom-f*(v-i-.5),E.default.format(r+p*(v-i-1),L.PlotAxisType.Number)):this.labelsY.set(t.height-e.bottom-f*(c-i),E.default.format(r+p*(c-i),L.PlotAxisType.Number))}}e.default=N},572:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Dates=void 0;class i{}e.Dates=i,i.minDate=new Date(2e3,1,1)},601:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(409));e.default=class{static title(t){t.fillStyle=n.default.text,t.textAlign="center",t.textBaseline="middle",t.font="20px sans-serif"}static regular(t){t.fillStyle=n.default.text,t.textAlign="center",t.textBaseline="middle",t.font="14px sans-serif"}static large(t){t.fillStyle=n.default.text,t.textAlign="center",t.textBaseline="middle",t.font="16px sans-serif"}static tooltip(t){t.font="14px sans-serif",t.textAlign="start",t.textBaseline="alphabetic"}static circularLabel(t,e){t.textAlign=e?"start":"end",t.textBaseline="alphabetic",t.font="14px sans-serif"}}},688:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(5)),a=s(i(183)),r=s(i(168)),o=i(869),l=s(i(283)),h=s(i(409));e.default=class{constructor(t){this.state=o.RenderState.Init,this.node=t.node,this.settings=t.settings,this.animations=new n.default,this.canvas=document.createElement(o.Tag.Canvas),this.canvas.style.imageRendering=l.default.ImageRendering.Pixelated,this.node.append(this.canvas),this.initAnimations()}render(){const t=r.default.getContext(this.canvas);t.fillStyle=h.default.canvasBackground,t.fillRect(0,0,this.canvas.width,this.canvas.height)}refresh(){this.tooltip.refresh(),this.state=this.settings.disableInitAnimation?o.RenderState.Idle:o.RenderState.Init}resetMouse(){this.moveEvent=new MouseEvent(o.Events.MouseMove),this.clickEvent=new MouseEvent(o.Events.Click),this.menuEvent=void 0}initAnimations(){this.tooltip=new a.default(this.canvas,this.settings),this.canvasPosition=this.canvas.getBoundingClientRect(),this.canvasPosition.x+=scrollX,this.canvasPosition.y+=scrollY,this.state!=o.RenderState.Init||this.settings.disableInteractions||(this.canvas.onmousemove=t=>this.moveEvent=t,this.canvas.onclick=t=>this.clickEvent=t,this.canvas.oncontextmenu=t=>{t.preventDefault(),this.contextMenu=void 0,this.menuEvent?this.menuEvent=void 0:this.menuEvent=t},this.canvas.onmouseleave=()=>this.moveEvent=new MouseEvent(o.Events.MouseMove))}destroy(){this.canvas.remove()}}},690:function(t,e,i){var s,n,a,r,o=this&&this.__createBinding||(Object.create?function(t,e,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(e,i);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,s,n)}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),l=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),h=this&&this.__importStar||(s=function(t){return s=Object.getOwnPropertyNames||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[e.length]=i);return e},s(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i=s(t),n=0;n<i.length;n++)"default"!==i[n]&&o(e,t,i[n]);return l(e,t),e}),d=this&&this.__classPrivateFieldGet||function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const c=u(i(495)),f=u(i(459)),p=u(i(138)),v=h(i(10)),g=u(i(359)),m=u(i(601)),y=u(i(12)),b=u(i(804)),w=u(i(743)),x=u(i(897)),M=u(i(147)),T=u(i(168)),P=u(i(828)),_=i(869),O=h(i(797));class A extends f.default{constructor(t){super(t),n.add(this),this.settings.enableLegend=!1}render(){if(super.render(),0==this.data.values.filter(t=>t.value>0).length)return d(this,n,"m",r).call(this),void requestAnimationFrame(this.render.bind(this));const t=this.settings.title?O.Values.titleOffset:0,e=this.canvas.width-2*this.data.padding,i=this.canvas.height-2*this.data.padding-t;let s,o,l=this.data.values.sum(t=>t.value),h=e*i,u=this.data.padding,c=this.data.padding+t,f=this.data.padding,p=this.data.padding+t;const g=T.default.getContext(this.canvas);let b=!0;for(let r=0;r<this.data.values.length;r++){const y=this.data.values[r],w=e-(u-this.data.padding),x=i-(c-this.data.padding-t);let M=[{color:y.color,label:y.label,s:y.value/l*h,value:y.value,id:y.id,x:u,y:c}];if(r+1<=this.data.values.length-1){const t=this.data.values[r+1];M.push({color:t.color,label:t.label,s:t.value/l*h,value:t.value,id:t.id,x:u,y:c}),r++}const T=1==M.length,P=r==this.data.values.length-1;if(b)for(let t=1;t<=w+r*r;t++){const e=w-t,i=M[0].s/e;if(i+(T?0:M[1].s/e)>=x){M[0].w=Math.floor(e),M[0].h=Math.floor(i),T||(M[1].w=Math.floor(e),M[1].h=x-M[0].h,M[1].y+=M[0].h);break}}else for(let t=1;t<=x+r*r;t++){const e=x-t,i=M[0].s/e;if(i+(T?0:M[1].s/e)>=w){M[0].h=Math.floor(e),M[0].w=Math.floor(i),T||(M[1].h=Math.floor(e),M[1].w=w-M[0].w,M[1].x+=M[0].w);break}}for(const t of M){P&&(b?(t.w=w,T&&(t.h=x)):(t.h=x,T&&(t.w=w))),g.beginPath(),g.fillStyle=t.color;const e=this.state!=_.RenderState.Init&&!this.animations.contains(t.id,_.AnimationType.Init),i=r+M.indexOf(t)+(P&&T?1:0),f=260,p=()=>{let t=0;for(let e=0;e<i;e++)t+=f-f*(e/this.data.values.length)/Math.E;return t},y=f-f*i/(this.data.values.length+1);if(e){const e=(e,i)=>{const s=t.x+t.w/2,n=t.y+t.h/2,a=t.w>t.h?1-12/t.w:1-12/t.h,r=1-a;g.translate(s-s*(a+e*r),n-n*(a+e*r)),g.scale(a+e*r,a+e*r),this.animations.reload(t.id,i)};d(this,n,"m",a).call(this,t)&&!s?(s=t,o=t.data,this.animations.handle(t.id,_.AnimationType.MouseOver,{duration:O.Animations.tree,backward:!0,body:t=>{e(t,_.AnimationType.MouseLeave)}})):this.animations.handle(t.id,_.AnimationType.MouseLeave,{timer:O.Dates.minDate,duration:O.Animations.tree,body:t=>{e(t,_.AnimationType.MouseOver)}})}else this.animations.handle(t.id,_.AnimationType.Init,{duration:p(),continuous:!0,body:e=>{if(e*p()-p()+y<0)return g.fillStyle+="00";e=(e*p()-p()+y)/y;const i=t.x+t.w/2,s=t.y+t.h/2,n=.7,a=1-n;g.translate(i-i*(n+e*a),s-s*(n+e*a)),g.scale(n+e*a,n+e*a);let r=Math.round(255*e).toString(16);r.length<2&&(r=0+r),g.fillStyle=t.color+r}});const A=4;g.roundRect(u+A,c+A,t.w-A,t.h-A,2*A),g.fill(),t.label&&v.stringWidth(t.label)<t.w-A&&t.h-A>16&&!this.animations.contains(t.id,_.AnimationType.Init)&&(g.beginPath(),m.default.large(g),g.fillStyle=v.isColorVisible(t.color,"#ffffff")?"#ffffff":"#000000",g.fillText(t.label,u+2+t.w/2,c+2+t.h/2)),g.resetTransform(),b?c+=t.h:u+=t.w,h-=t.w*t.h,l-=t.value}b?(u+=M[0].w,c=p):(c+=M[0].h,u=f),f=u,p=c,b=!b}this.tooltip.render(!!s&&!this.dropdown?.isActive,this.moveEvent,[new y.default(`${s?.label}: ${P.default.format(s?.value,_.PlotAxisType.Number,this.settings.valuePostfix)}`)],this.data.values.find(t=>t.id==s?.id)),this.isDestroy||requestAnimationFrame(this.render.bind(this)),this.state=_.RenderState.Idle,super.renderDropdown(),s||this.contextMenu?this.renderContextMenu(o):this.menuEvent=void 0}refresh(){super.refresh()}resize(){super.resize(),this.initAnimations(),this.animations.clear()}prepareSettings(){super.prepareSettings(),this.data.values=this.data.values.map(t=>new p.default(t)),this.data.values=this.data.values.filter(t=>t.value>0),this.data.values.sort((t,e)=>(e.value??0)-(t.value??0)),this.calculateColors(!0);for(let t of this.data.values)t.disabled=!t.value,t.value??=0}initDropdown(){super.initDropdown(),this.dropdown=new g.default(this.canvas,{x:-10,y:10,icon:_.Icon.ThreeLines,items:[{text:M.default.exportCSV,action:()=>{b.default.asCsv(w.default.toTable(c.default.getRows(this.data)),this.settings.title)}},{isDivider:!0},{text:M.default.decomposeToTable,action:()=>{new x.default(w.default.toTable(c.default.getRows(this.data)),void 0,this.settings.title??M.default.dataAsTable).open()}}]})}}n=new WeakSet,a=function(t){if(!this.moveEvent||!t)return!1;const e=this.getMousePosition(this.moveEvent);return!this.dropdown?.isActive&&t.x<=e.x&&e.x<=t.x+t.w&&t.y<=e.y&&e.y<=t.y+t.h},r=function(){const t=T.default.getContext(this.canvas);m.default.regular(t),t.fillText(M.default.treeMapIsEmpty,this.canvas.width/2,this.canvas.height/2)},e.default=A},743:function(t,e,i){var s,n=this&&this.__createBinding||(Object.create?function(t,e,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(e,i);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,s,n)}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||(s=function(t){return s=Object.getOwnPropertyNames||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[e.length]=i);return e},s(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i=s(t),r=0;r<i.length;r++)"default"!==i[r]&&n(e,t,i[r]);return a(e,t),e}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const l=r(i(10)),h=o(i(828)),d=o(i(283)),u=i(869);e.default=class{static toTable(t){let e=document.createElement(u.Tag.Div);e.classList.add("o-table");let i=new Map,s="",n="",a=0,r=new Map;for(const e of t.values){let i=new Map;for(const e of t.headers)i.set(e.value,0);for(const[t,s]of e.values)i.set(t,s);let s="";for(let t=0;t<a;t++)s+=" ";r.set(e.name+s,i),a++}for(const e of t.headers)n+=`\n                <div>\n                    ${e.display}\n                </div>\n            `;for(const[t,e]of r){let n="";for(const[t,s]of e)if(n+=`\n                    <div>\n                        ${null==s?"":h.default.number(s)}\n                    </div>\n                `,i.has(t)){let e=+(i.get(t)??0);i.set(t,e+ +s)}else i.set(t,s);s+=`\n                <div class="o-table-row">\n                    <div>\n                        ${t.trim()}\n                    </div>\n                    \n                    ${n} \n                </div>\n            `}let o="";for(const[,t]of i)o+=`\n                <div>\n                    ${null==t?"":h.default.number(t)}\n                </div>\n            `;return e.innerHTML=`\n            <div class="o-table-header">\n                <div></div>\n\n                ${n}\n            </div>\n        \n            <div class="o-table-body">\n                ${s}\n            </div>\n            \n            <div class="o-table-footer">\n                <div></div>\n\n                ${o}\n            </div>\n        `,e}static toChart(t,e){let i=document.createElement(u.Tag.Div),s=document.createElement(u.Tag.Div),n=document.createElement(u.Tag.Script),a=l.guid();i.style.display=d.default.Display.Flex,i.style.height="100%",s.id=a,s.style.flexGrow="1";let r=JSON.parse(JSON.stringify(t));return r.title&&(r.title=r.title+" (Other)"),r.data.values=e,r.minWidth=void 0,r.minHeight=void 0,n.innerHTML=`\n            new OCharts.chart(document.getElementById('${a}'), ${JSON.stringify(r)})\n                .render()\n        `,i.append(s,n),i}}},797:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Plot=e.Values=e.Dates=e.Animations=void 0;var s=i(126);Object.defineProperty(e,"Animations",{enumerable:!0,get:function(){return s.Animations}});var n=i(572);Object.defineProperty(e,"Dates",{enumerable:!0,get:function(){return n.Dates}});var a=i(975);Object.defineProperty(e,"Values",{enumerable:!0,get:function(){return a.Values}});var r=i(166);Object.defineProperty(e,"Plot",{enumerable:!0,get:function(){return r.Plot}})},801:function(t,e,i){var s,n,a,r,o,l,h,d=this&&this.__createBinding||(Object.create?function(t,e,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(e,i);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,s,n)}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),c=this&&this.__importStar||(s=function(t){return s=Object.getOwnPropertyNames||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[e.length]=i);return e},s(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i=s(t),n=0;n<i.length;n++)"default"!==i[n]&&d(e,t,i[n]);return u(e,t),e}),f=this&&this.__classPrivateFieldGet||function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)},p=this&&this.__classPrivateFieldSet||function(t,e,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,i):n?n.value=i:e.set(t,i),i},v=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const g=v(i(459)),m=c(i(10)),y=v(i(359)),b=v(i(409)),w=v(i(601)),x=v(i(12)),M=v(i(804)),T=v(i(828)),P=v(i(168)),_=v(i(147)),O=i(869);class A extends g.default{constructor(t){super(t),n.add(this),a.set(this,void 0),r.set(this,void 0),this.settings.enableLegend=!1}render(){super.render(),f(this,n,"m",o).call(this);const t=this.data.values[0];this.tooltip.render(f(this,n,"m",l).call(this,this.moveEvent,t)&&!this.dropdown?.isActive,this.moveEvent,[new x.default(`${t?.label}: ${T.default.format(t?.current,O.PlotAxisType.Number,this.settings.valuePostfix)}`)],t),this.isDestroy||requestAnimationFrame(this.render.bind(this)),this.state=O.RenderState.Idle,super.renderDropdown()}refresh(){super.refresh()}resize(){super.resize(),this.initAnimations(),f(this,n,"m",h).call(this)}prepareSettings(){super.prepareSettings();for(let t of this.data.values)t.disabled=!t.value,t.value??=0;this.data.values.length>0&&this.data.values[0].value>this.data.max&&(this.data.values[0].value=this.data.max)}initDropdown(){super.initDropdown(),this.dropdown=new y.default(this.canvas,{x:-10,y:10,icon:O.Icon.ThreeLines,items:[{text:_.default.exportPNG,action:()=>{M.default.asPng(this.canvas,this.settings.title)}}]})}}a=new WeakMap,r=new WeakMap,n=new WeakSet,o=function(){const t=P.default.getContext(this.canvas),e=this.data.values[0]??{id:m.guid()};(this.state==O.RenderState.Init||this.animations.contains(e.id,O.AnimationType.Init))&&this.animations.handle(e.id,O.AnimationType.Init,{duration:450,continuous:!0,body:t=>{e.current=e.value*t}}),t.beginPath(),t.strokeStyle=e.color,t.lineCap="round",t.lineWidth=40;const i=e.current/this.data.max,s=(isNaN(i)?1:i)*Math.PI;e.value&&(t.arc(f(this,r,"f").x,f(this,r,"f").y,f(this,a,"f"),Math.PI,s-Math.PI),t.stroke()),t.beginPath(),t.lineWidth=1,t.lineCap="square";let n=0,o=Math.PI;for(;o>=0;){let e=o-Math.PI/10>0?Math.PI/10:o;const i=t=>({x:f(this,r,"f").x+(f(this,a,"f")+t)*Math.cos(Math.PI+n),y:f(this,r,"f").y+(f(this,a,"f")+t)*Math.sin(Math.PI+n)});let l=i(50),h=i(90),d=i(115);const u=Math.PI-o>s?"66":"ff";t.moveTo(l.x,l.y),t.lineTo(h.x,h.y),t.strokeStyle=b.default.text+u,t.stroke(),w.default.regular(t),t.fillStyle=b.default.text+u,t.fillText(T.default.number(this.data.max-o/Math.PI*this.data.max),d.x,d.y),n+=e,o-=Math.PI/10}},l=function(t,e){if(!t)return!1;const i=this.getMousePosition(t),s={x:i.x-f(this,r,"f").x,y:i.y-f(this,r,"f").y};return!this.dropdown?.isActive&&(t=>{let i=Math.atan2(t.y-f(this,r,"f").y,t.x-f(this,r,"f").x);i<0&&(i+=2*Math.PI);const s=e.current/this.data.max,n=(isNaN(s)?1:s)*Math.PI;return i>Math.PI&&Math.PI+n>=i})(i)&&(t=>{const e=f(this,a,"f")+20,i=f(this,a,"f")-20;return t.x*t.x+t.y*t.y<=e*e&&t.x*t.x+t.y*t.y>=i*i})(s)},h=function(){const t=this.canvas.width<this.canvas.height/2?this.canvas.height/2:this.canvas.width;p(this,a,t/2-200,"f"),p(this,r,{x:this.canvas.width/2,y:this.canvas.height-f(this,a,"f")/5},"f")},e.default=A},804:function(t,e,i){var s,n=this&&this.__createBinding||(Object.create?function(t,e,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(e,i);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,s,n)}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||(s=function(t){return s=Object.getOwnPropertyNames||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[e.length]=i);return e},s(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i=s(t),r=0;r<i.length;r++)"default"!==i[r]&&n(e,t,i[r]);return a(e,t),e}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const l=o(i(409)),h=r(i(10)),d=o(i(168)),u=i(869);class c{static asPng(t,e){requestAnimationFrame(()=>{const i=d.default.getContext(t);let s=h.stringWidth(u.Icon.ThreeLines)+20;i.fillStyle=l.default.canvasBackground,i.fillRect(t.width-s,0,s,64);let n=0,a=0;const r=new Uint32Array(i.getImageData(0,0,t.width,t.height).data.buffer);let o=!1;for(let e=0;e<t.width;e++){for(let i=0;i<t.height;i++)if(d.default.isPixelBusy(r[e+i*t.width])){o=!0;break}if(o)break;n++}o=!1;for(let e=t.width;e>=0;e--){for(let i=0;i<t.height;i++)if(d.default.isPixelBusy(r[e+i*t.width])){o=!0;break}if(o)break;a++}n>4&&(n-=4),a>4&&(a-=4),n>a&&(n=a),a>n&&(a=n);let f=document.createElement(u.Tag.Canvas);f.width=t.width-n-a,f.height=t.height;const p=d.default.getContext(f);p.fillStyle=l.default.background,p.fillRect(0,0,t.width,t.height),p.drawImage(t,-n,0),c.saveAs((e??"chart")+".png",f.toDataURL("image/png"))})}static asCsv(t,e){let i=t.querySelectorAll("tr"),s=[];for(let t=0;t<i.length;t++){let e=[],n=i[t].querySelectorAll("td, th");for(let t=0;t<n.length;t++){let i=n[t].innerHTML.replace(/(\r\n|\n|\r)/gm,"").replace(/(\s\s)/gm," ");i=i.replace(/"/g,'""'),e.push('"'+i+'"')}s.push(e.join(","))}c.saveAs((e??"table")+".csv",s.join("\n"),"data:text/csv;charset=utf-8,"+encodeURIComponent(s.join("\n")),!0)}static saveAs(t,e,i,s){if(null!=window.showSaveFilePicker){const n={suggestedName:t,types:[{accept:s?{"text/csv":".csv"}:{"image/*":".png"}}],excludeAcceptAllOption:!0};function a(t){const e=atob(t.split(",")[1]),i=t.split(",")[0].split(":")[1].split(";")[0],s=new ArrayBuffer(e.length),n=new Uint8Array(s);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return new Blob([s],{type:i})}window.showSaveFilePicker(n).then(t=>{t.createWritable().then(t=>{t.write(s?e:a(e)).then(()=>t.close())})})}else{let r=document.createElement(u.Tag.A);r.href=i??e,r.download=t,r.click()}}}e.default=c},828:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0});const s=i(869);class n{static format(t,e,i){let a=t;switch(e){case s.PlotAxisType.Number:a=n.number(t);break;case s.PlotAxisType.Date:a=n.date(new Date(t));break;case s.PlotAxisType.Text:a=n.text(t)}return a+(i??"")}}n.number=t=>t?.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})??"",n.date=t=>t?.toLocaleDateString()??"",n.text=t=>t??"",e.default=n},830:function(t,e,i){var s,n,a,r,o,l,h,d,u,c=this&&this.__createBinding||(Object.create?function(t,e,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(e,i);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,s,n)}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),f=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),p=this&&this.__importStar||(s=function(t){return s=Object.getOwnPropertyNames||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[e.length]=i);return e},s(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i=s(t),n=0;n<i.length;n++)"default"!==i[n]&&c(e,t,i[n]);return f(e,t),e}),v=this&&this.__classPrivateFieldSet||function(t,e,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,i):n?n.value=i:e.set(t,i),i},g=this&&this.__classPrivateFieldGet||function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)},m=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const y=m(i(601)),b=m(i(409)),w=m(i(5)),x=p(i(10)),M=m(i(168)),T=i(869),P=p(i(797)),_=m(i(283));a=new WeakMap,r=new WeakMap,o=new WeakMap,l=new WeakMap,h=new WeakMap,n=new WeakSet,d=function(){v(this,o,g(this,a,"f").getBoundingClientRect(),"f"),g(this,o,"f").x+=scrollX,g(this,o,"f").y+=scrollY;const t=x.stringWidth(g(this,r,"f").text)+12;v(this,h,{x:g(this,r,"f").x+t>g(this,a,"f").width?g(this,a,"f").width-t:g(this,r,"f").x<0?g(this,a,"f").width+g(this,r,"f").x-t:g(this,r,"f").x,y:g(this,r,"f").y+20>g(this,a,"f").height?g(this,a,"f").height-20:g(this,r,"f").y<0?g(this,a,"f").height+g(this,r,"f").y-20:g(this,r,"f").y,width:t,height:20},"f")},u=function(t){if(!t)return!1;let e=t.clientX-g(this,o,"f").x+scrollX,i=t.clientY-g(this,o,"f").y+scrollY;return e>=g(this,h,"f").x&&e<=g(this,h,"f").x+g(this,h,"f").width&&i>=g(this,h,"f").y&&i<=g(this,h,"f").y+g(this,h,"f").height},e.default=class{constructor(t,e){n.add(this),a.set(this,void 0),r.set(this,void 0),o.set(this,void 0),l.set(this,void 0),h.set(this,void 0),v(this,a,t,"f"),v(this,r,e,"f"),this.animations=new w.default,g(this,n,"m",d).call(this)}render(t,e){g(this,l,"f")||g(this,n,"m",d).call(this);const i=M.default.getContext(g(this,a,"f"));i.beginPath();const s=(t,e)=>{this.animations.reload("animation-button",e),i.fillStyle=x.adjustColor(b.default.canvasBackground,-Math.round(25*t))};return g(this,n,"m",u).call(this,t)?(g(this,a,"f").style.cursor=_.default.Cursor.Pointer,e&&g(this,n,"m",u).call(this,e)&&(g(this,r,"f").action(),e=void 0),this.animations.handle("animation-button",T.AnimationType.MouseOver,{duration:300,body:t=>{s(t,T.AnimationType.MouseLeave)}})):this.animations.handle("animation-button",T.AnimationType.MouseLeave,{timer:P.Dates.minDate,duration:300,backward:!0,body:t=>{s(t,T.AnimationType.MouseOver)}}),i.roundRect(g(this,h,"f").x,g(this,h,"f").y,g(this,h,"f").width,g(this,h,"f").height,4),i.fill(),y.default.regular(i),i.fillText(g(this,r,"f").text,g(this,h,"f").x+g(this,h,"f").width/2,g(this,h,"f").y+g(this,h,"f").height/2),v(this,l,!0,"f"),e}resize(){g(this,n,"m",d).call(this)}}},832:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(i(88));function a(){}a.chart=function(t,e){return new n.default(t,e)},window.OCharts=a},869:(t,e)=>{var i,s,n,a,r,o,l,h,d,u,c,f,p;Object.defineProperty(e,"__esModule",{value:!0}),e.DrawPointType=e.Icon=e.RenderState=e.Tag=e.PlotType=e.PlotAxisType=e.LineType=e.LegendPlace=e.Events=e.ErrorType=e.ChartType=e.Attribute=e.AnimationType=void 0,function(t){t[t.None=0]="None",t[t.MouseOver=1]="MouseOver",t[t.MouseLeave=2]="MouseLeave",t[t.Init=3]="Init",t[t.Click=4]="Click",t[t.AnotherItemOver=5]="AnotherItemOver",t[t.AnotherItemLeave=6]="AnotherItemLeave"}(i||(e.AnimationType=i={})),function(t){t.Name="name"}(s||(e.Attribute=s={})),function(t){t[t.Plot=0]="Plot",t[t.Circular=1]="Circular",t[t.Gauge=2]="Gauge",t[t.TreeMap=3]="TreeMap"}(n||(e.ChartType=n={})),function(t){t.NullContext="Can't find context",t.ElementNotExist="Element does not exist",t.MaxCallsReach="Max calls reach"}(a||(e.ErrorType=a={})),function(t){t.VisibilityChanged="visibilitychange",t.Blur="blur",t.MouseMove="mousemove",t.Click="click",t.Change="change",t.ContextMenu="contextmenu"}(r||(e.Events=r={})),function(t){t[t.Bottom=0]="Bottom",t[t.Left=1]="Left",t[t.Top=2]="Top",t[t.Right=3]="Right"}(o||(e.LegendPlace=o={})),function(t){t[t.Solid=0]="Solid",t[t.Dash=1]="Dash",t[t.Dotted=2]="Dotted"}(l||(e.LineType=l={})),function(t){t[t.Number=0]="Number",t[t.Date=1]="Date",t[t.Text=2]="Text"}(h||(e.PlotAxisType=h={})),function(t){t[t.Line=0]="Line",t[t.AttentionLine=1]="AttentionLine",t[t.Column=2]="Column",t[t.Bar=3]="Bar",t[t.StackingColumn=4]="StackingColumn"}(d||(e.PlotType=d={})),function(t){t.Canvas="canvas",t.A="a",t.Div="div",t.Dialog="dialog",t.Table="table",t.Script="script",t.Button="button",t.Span="span"}(u||(e.Tag=u={})),function(t){t[t.Idle=0]="Idle",t[t.Init=1]="Init"}(c||(e.RenderState=c={})),function(t){t.ThreeLines="",t.Close=""}(f||(e.Icon=f={})),function(t){t.Move="move",t.Line="line",t.QuadraticCurve="quadratic-curve",t.ArcTo="arc-to",t.SemiCircle="semi-circle"}(p||(e.DrawPointType=p={}))},897:function(t,e,i){var s,n,a,r,o=this&&this.__classPrivateFieldGet||function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)},l=this&&this.__classPrivateFieldSet||function(t,e,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,i):n?n.value=i:e.set(t,i),i},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const d=h(i(39)),u=i(869);n=new WeakMap,s=new WeakSet,a=function(t){d.default.throwIsUndefined(this.modal,u.ErrorType.ElementNotExist);let e=document.createElement(u.Tag.Span);e.classList.add(c.title),e.innerHTML=t??"";let i=document.createElement(u.Tag.Button);i.classList.add(c.close),i.innerHTML=u.Icon.Close;let s=document.createElement(u.Tag.Div);s.classList.add(c.header),s.appendChild(e),s.appendChild(i),this.modal.appendChild(s),i.onclick=()=>this.close()},r=function(t){null==o(this,n,"f")&&(l(this,n,document.createElement(u.Tag.Div),"f"),o(this,n,"f").classList.add(c.content),this.modal?.appendChild(o(this,n,"f"))),null!=t&&o(this,n,"f").appendChild(t)},e.default=class{constructor(t,e,i){s.add(this),n.set(this,void 0),this.modal=document.createElement(u.Tag.Dialog),this.modal.classList.add(c.modal),e&&(this.modal.style.width=`${e.width}px`,this.modal.style.height=`${e.height}px`),this.modal.oncancel=()=>this.close(),document.body.appendChild(this.modal),o(this,s,"m",a).call(this,i),o(this,s,"m",r).call(this,t)}open(){d.default.throwIsUndefined(this.modal,u.ErrorType.ElementNotExist),this.modal.showModal()}close(){d.default.throwIsUndefined(this.modal,u.ErrorType.ElementNotExist),this.modal.close(),this.modal.remove(),this.modal=void 0}};class c{}c.modal="o-modal",c.title="o-modal-title",c.close="o-modal-close",c.header="o-modal-header",c.content="o-modal-content"},902:function(t,e,i){var s,n=this&&this.__createBinding||(Object.create?function(t,e,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(e,i);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,s,n)}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),a=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||(s=function(t){return s=Object.getOwnPropertyNames||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[e.length]=i);return e},s(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i=s(t),r=0;r<i.length;r++)"default"!==i[r]&&n(e,t,i[r]);return a(e,t),e}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const l=o(i(527)),h=o(i(129)),d=i(869),u=r(i(10));class c extends l.default{constructor(t){super(),this.lineType=d.LineType.Solid,Object.assign(this,t)}toggle(t){super.toggle(t)}checkCondition(){return super.checkCondition(),!0}reset(){super.reset()}inverse(){this.values=this.values.map(t=>new h.default(t));for(const t of this.values)t.inverse();this.values.sort((t,e)=>e.x>t.x?1:-1)}normalize(t){this.disabled=!this.values,this.type??=d.PlotType.Line;for(let e of this.values)e.id=u.guid(),t==d.PlotAxisType.Date&&(u.isISOString(e.x)?e.x=new Date(e.x):console.warn(`${e.x} is not a date in ISO format.`))}}e.default=c},906:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static divider(){return{isDivider:!0}}static button(t,e){return{text:t,action:e}}}},927:function(t,e,i){var s,n,a,r,o,l,h,d=this&&this.__createBinding||(Object.create?function(t,e,i,s){void 0===s&&(s=i);var n=Object.getOwnPropertyDescriptor(e,i);n&&!("get"in n?!e.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,s,n)}:function(t,e,i,s){void 0===s&&(s=i),t[s]=e[i]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),c=this&&this.__importStar||(s=function(t){return s=Object.getOwnPropertyNames||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[e.length]=i);return e},s(t)},function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i=s(t),n=0;n<i.length;n++)"default"!==i[n]&&d(e,t,i[n]);return u(e,t),e}),f=this&&this.__classPrivateFieldSet||function(t,e,i,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(t,i):n?n.value=i:e.set(t,i),i},p=this&&this.__classPrivateFieldGet||function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)},v=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const g=v(i(688)),m=c(i(10)),y=v(i(138)),b=v(i(409)),w=v(i(601)),x=v(i(168)),M=v(i(830)),T=v(i(147)),P=c(i(797)),_=v(i(283)),O=i(869);class A extends g.default{constructor(t){super(t),n.add(this),a.set(this,void 0),r.set(this,void 0),o.set(this,void 0),l.set(this,void 0),this.isDestroy=!1,f(this,o,t,"f"),this.prepareSettings()}render(){super.render();const t=x.default.getContext(this.canvas);let e={x:20,y:21};this.canvas.style.cursor=_.default.Cursor.Default,w.default.regular(t),t.textAlign="start",t.textBaseline="alphabetic",t.translate(p(this,r,"f").x,p(this,r,"f").y),f(this,l,0,"f");for(const t of this.settings.data.values.filter(t=>!t.hideInLegend))e=p(this,n,"m",h).call(this,t,e.x,e.y);t.translate(-p(this,r,"f").x,-p(this,r,"f").y),this.isDestroy||requestAnimationFrame(this.render.bind(this)),this.clickEvent=p(this,a,"f")?.render(this.moveEvent,this.clickEvent),this.state=O.RenderState.Idle}destroy(){this.isDestroy=!0,this.canvas.remove()}refresh(){this.state=O.RenderState.Init}resize(){this.calculateSizes(),p(this,a,"f")?.resize(),this.initAnimations()}calculateSizes(){switch(this.settings.legendPlace){case O.LegendPlace.Bottom:default:this.canvas.width=this.settings.width,this.canvas.height=A.getLegendHeight(this.settings.data.values,this.canvas.width),this.node.style.flexDirection=_.default.FlexDirection.Column;break;case O.LegendPlace.Top:this.canvas.width=this.settings.width,this.canvas.height=A.getLegendHeight(this.settings.data.values,this.canvas.width),this.node.style.flexDirection=_.default.FlexDirection.ColumnReverse;break;case O.LegendPlace.Left:this.canvas.width=500,this.canvas.height=this.settings.height,this.node.style.flexDirection=_.default.FlexDirection.Row;break;case O.LegendPlace.Right:this.canvas.width=500,this.canvas.height=this.settings.height,this.node.style.flexDirection=_.default.FlexDirection.RowReverse}f(this,r,{x:A.getOffsetToCenter(this.settings.data.values,this.canvas.width),y:(this.canvas.height-A.getLegendHeight(this.settings.data.values,this.canvas.width))/2},"f")}applySettings(t){this.settings=t,this.prepareSettings()}prepareSettings(){this.resize(),this.settings.disableInteractions||f(this,a,new M.default(this.canvas,{x:-10,y:12,text:T.default.reset,action:()=>{for(let t of this.settings.data.values)t.reset()}}),"f")}static getOffsetToCenter(t,e){let i=20;for(const s of t.filter(t=>!t.hideInLegend)){const t=m.stringWidth(s.label);if(i+t+47>=e-100)break;i+=t+47}return e/2-i/2}static getLegendHeight(t,e){let i=1,s=20,n=A.getOffsetToCenter(t,e);for(const a of t.filter(t=>!t.hideInLegend)){const t=m.stringWidth(a.label);s+t+48>=e-32-n&&(s=20,i++),s+=t+48}return 24+20*i+6*(i-1)}}a=new WeakMap,r=new WeakMap,o=new WeakMap,l=new WeakMap,n=new WeakSet,h=function(t,e,i){var s;const n=x.default.getContext(this.canvas),a=m.stringWidth(t.label);e+48+a>=this.canvas.width-40-p(this,r,"f").x&&(e=20,i+=26);let h=e-6-6,d=i-3-6,u=12+a+18;const c=t=>{if(!t)return!1;const e=t.clientX-this.canvasPosition.x+scrollX-p(this,r,"f").x,i=t.clientY-this.canvasPosition.y+scrollY-p(this,r,"f").y;return e>=h&&e<=h+u&&i>=d&&i<=d+20},v=(e,i)=>{this.animations.reload(t.id,i),n.beginPath(),n.roundRect(h,d,u,20,6),n.fillStyle=m.adjustColor(b.default.canvasBackground,Math.round(-25*e)),n.fill()};return this.animations.handle(t.id,O.AnimationType.Click,{duration:P.Animations.legend,continuous:!0,before:()=>null!=this.clickEvent&&(c(this.clickEvent)||t instanceof y.default&&0!=t.current&&t.value!=t.current)&&t.checkCondition(),body:e=>{t.toggle(e),1==e&&(this.clickEvent=new PointerEvent(O.Events.Click))}}),c(this.moveEvent)?(this.animations.handle(t.id,O.AnimationType.MouseOver,{duration:P.Animations.button,body:t=>{v(t,O.AnimationType.MouseLeave)}}),t.disabled||(f(this,l,(s=p(this,l,"f"),++s),"f"),p(this,o,"f").highlight(t)),this.canvas.style.cursor=_.default.Cursor.Pointer):this.animations.handle(t.id,O.AnimationType.MouseLeave,{timer:P.Dates.minDate,duration:P.Animations.button,backward:!0,body:t=>{v(t,O.AnimationType.MouseOver)}}),n.beginPath(),n.arc(e-1,i+1,3,0,2*Math.PI),n.fillStyle=t.disabled?m.grayScale(t.color):t.color,n.fill(),n.fillStyle=b.default.text,t.disabled&&(n.fillStyle+="7f"),n.fillText(t.label,e+9+1,i+6),e+=20,t.disabled&&(n.moveTo(e-10,i+2),n.lineTo(e+a-10,i+2),n.strokeStyle=b.default.text+"7f",n.stroke()),{x:e+=a+22,y:i}},e.default=A},975:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Values=void 0;class i{}e.Values=i,i.titleOffset=30}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var a=e[s]={exports:{}};return t[s].call(a.exports,a,a.exports,i),a.exports}i(281),i(832)})();
//# sourceMappingURL=ocharts.js.map