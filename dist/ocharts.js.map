{"version":3,"file":"ocharts.js","mappings":"21BACA,eAEA,MAAaA,EAKT,WAAAC,G,YAJA,mBAKI,EAAAC,KAAI,EAAU,IAAIC,IAAK,IAC3B,CAEA,GAAAC,CAAIC,EAAYC,EAAqBC,GACjC,MAAMC,EAAM,EAAAN,KAAI,SAAQ,KAAZA,KAAaG,EAAIC,GACxB,EAAAJ,KAAI,OAAQO,IAAID,IACjB,EAAAN,KAAI,OAAQQ,IAAIF,EAAKD,GAEzB,EAAAL,KAAI,SAAS,KAAbA,KAAcM,EAClB,CAEA,QAAAG,CAASN,EAAYC,GACjB,OAAO,EAAAJ,KAAI,OAAQO,IAAI,EAAAP,KAAI,SAAQ,KAAZA,KAAaG,EAAIC,GAC5C,CAEA,MAAAM,CAAOP,EAAYC,GACXJ,KAAKS,SAASN,EAAIC,KACQ,EAAAJ,KAAI,OAAQW,IAAI,EAAAX,KAAI,SAAQ,KAAZA,KAAaG,EAAIC,IAEtDQ,MAAQ,IAAIC,KAEzB,CAEA,KAAAC,GACI,EAAAd,KAAI,OAAQe,QAAQ,CAACC,EAAQV,KAAS,EAAAN,KAAI,SAAI,KAARA,KAASM,EAAK,EAAAW,cAAcC,OAAS,EAAAlB,KAAI,OAAQmB,OAAOb,GAClG,CA2BA,4BAAOc,GAQH,IAAK,IAAIC,EAAI,EAAGA,EAPI,IAOaA,IAAK,CAClC,MAAMC,GAAKD,EAAI,GARC,IAUhB,IAAIE,EARM,EAQFC,KAAKC,IAAI,EAAIH,EAAG,GACd,EAAIE,KAAKC,IAAI,EAAIH,EAAG,GARpB,IAQgCA,EAChC,GAAK,EAAIA,GAAKE,KAAKC,IAAIH,EAAG,GAX3B,IAIC,EAQAE,KAAKC,IAAIH,EAAG,GAClBI,EAZY,EAYRF,KAAKC,IAAI,EAAIH,EAAG,GACd,EAAIE,KAAKC,IAAI,EAAIH,EAAG,GAdrB,IAciCA,EAChC,GAAK,EAAIA,GAAKE,KAAKC,IAAIH,EAAG,GAZf,IACL,EAYNE,KAAKC,IAAIH,EAAG,GAEtB,EAAWK,gBAAgBnB,KAAKe,EAAEK,QAAQ,GAAIF,EAClD,CAEA,EAAWC,gBAAgBnB,IAAI,EAAG,EACtC,CAEA,oBAAOqB,CAAcxB,GACjB,OAAO,EAAWsB,gBAAgBhB,KAAKN,EAAMuB,QAAQ,KAAO,CAChE,EAtFJ,e,2CAiCatB,GACL,MAAMwB,EAAsB,EAAA9B,KAAI,OAAQW,IAAIL,GACxCyB,EAAQ,IAAIlB,KACZmB,EAASD,EAAME,WAAaH,EAAKlB,OAASmB,GAAOE,UACjDC,EAAa,EAAWL,cAAcG,EAASF,EAAKK,SAAW,EAAIH,EAASF,EAAKK,UACjFC,GAASN,EAAKM,QAASN,EAAKM,UAE3BN,EAAKlB,OAASwB,IACfN,EAAKlB,MAAQmB,GAEbK,GACAN,EAAKO,KAAKP,EAAKQ,SAAW,EAAIJ,EAAaA,GAE7B,GAAdA,GAAqBE,IAAUN,EAAKS,YACpC,EAAAvC,KAAI,OAAQmB,OAAOb,EAC3B,EAAC,WAEOH,EAAYC,GAChB,OAAOD,EAAK,IAAMC,CACtB,EAAC,WAEGE,EAAaF,GACb,OAAOE,EAAIkC,SAAS,IAAMpC,EAC9B,EArDO,EAAAuB,gBAAuC,IAAI1B,G,gECHtD,uBAA4BwC,EAAeC,GACvC,MAAO,IAAMD,EAAME,QAAQ,KAAM,IAAIA,QAAQ,MAAOF,IAAU,IAAMjB,KAAKoB,IAAI,IAAKpB,KAAKqB,IAAI,EAAGC,SAASL,EAAO,IAAMC,IAASK,SAAS,KAAKC,OAAO,GACtJ,EAEA,qBAA0BP,GACtB,MAAO,IAAMQ,MAAM,GAAGC,KAAK1B,KAAK2B,MAAM,CAAC,GAAI,IAAK,KAAKC,OAAO,CAACC,EAAGC,EAAGjC,IAAMgC,EAAIC,EAAIR,SAASL,EAAM,EAAIpB,EAAI,GAAKoB,EAAM,EAAIpB,EAAI,GAAI,IAAK,GAAK,GAAG0B,SAAS,IAAIQ,SAAS,EAAG,KACzK,EAEA,yBACI,IACId,EAAQ,IACZ,IAAK,IAAIpB,EAAI,EAAGA,EAAI,EAAGA,IACnBoB,GAHU,mBAGOjB,KAAKgC,MAAsB,GAAhBhC,KAAKiC,WAErC,OAAOhB,CACX,EAEA,uBAA4BiB,EAAyBC,GACjD,IAAKD,EACD,OAAO,EAEX,MAAME,EAAS,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,QAAU,QAAU,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,QAAU,SAAW,QAAU,SAAW,UAAW,QAAU,QAAU,QAAU,QAAU,QAAU,QAAU,SAAW,QAAU,SAAW,GAAK,QAAU,SAAW,SAAW,QAAU,SAAW,QAAU,SAAW,QAAU,QAAU,QAAU,QAAU,QAAU,OAAS,QAAU,QAAU,QAAU,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,GAAK,SAAW,SAAW,SAAW,SAAW,SAAW,QAAU,QAAU,GAAK,QAAU,SAAW,SAAW,SAAW,SAAW,SAAW,SAAW,GAAK,SAAW,SAAW,GAAK,QAAU,GAAK,GAAK,GAAK,SAAW,QAAU,QAAU,UAG5iC,OAAOX,MAAMY,KAAKH,GAAKN,OAAO,CAACU,EAAKC,IAAQD,GAAOF,EAAOG,EAAIC,WAAW,KAF/D,mBAE4E,IAAML,GAAQ,GACxG,EAEA,kBACI,MAAMM,EAAK,KAA8B,OAArB,EAAIzC,KAAKiC,UAAuB,GAAGV,SAAS,IAAImB,UAAU,GAC9E,OAAQD,IAAOA,IAAO,IAAMA,IAAO,KAAOA,IAAKjB,MAAM,EAAG,GAAK,IAAMiB,IAAO,IAAMA,IAAOA,IAAOA,KAAME,aACxG,EAEA,aAsBA,0BAA+BC,EAAoBC,GAC/C,MAAMC,EAAkBC,EAASH,GAC7BI,EAAkBD,EAASF,GAG/B,OAAQC,EAAgBG,EAAIH,EAAgBI,EAAIJ,EAAgBK,IAAMH,EAAgBC,EAAID,EAAgBE,EAAIF,EAAgBG,GAFlH,GAGhB,EAEA,uBAA4BjB,GACxB,MAAO,oDAAoDkB,KAAKlB,EACpE,EAEA,sBAA2BjB,EAAeoC,GACtC,SAASN,EAASO,GACd,IAAIC,EAAS,4CAA4CC,KAAKF,GAC9D,OAAOC,EACE,CACEN,EAAG3B,SAASiC,EAAO,GAAI,IACvBL,EAAG5B,SAASiC,EAAO,GAAI,IACvBJ,EAAG7B,SAASiC,EAAO,GAAI,KAEzB,CACEN,EAAG,EACHC,EAAG,EACHC,EAAG,EAElB,CAEA,SAASM,EAAeC,GACpB,IAAIJ,EAAMI,EAAEnC,SAAS,IACrB,OAAqB,GAAd+B,EAAIK,OAAc,IAAML,EAAMA,CACzC,CAMA,MAAMM,EAAMb,EAAS9B,GACjB4C,EAAKd,EAAS,EAAAe,MAAMC,kBAIlBC,EAAQ,GAFdX,GAAW,KAIX,OAXkBJ,EAYdjD,KAAK2B,MAA2D,KAApD0B,GAAWO,EAAIX,EAAI,KAAQe,GAASH,EAAGZ,EAAI,OAZ9BC,EAazBlD,KAAK2B,MAA2D,KAApD0B,GAAWO,EAAIV,EAAI,KAAQc,GAASH,EAAGX,EAAI,OAbnBC,EAcpCnD,KAAK2B,MAA2D,KAApD0B,GAAWO,EAAIT,EAAI,KAAQa,GAASH,EAAGV,EAAI,OAbhD,IAAMM,EAAeR,GAAKQ,EAAeP,GAAKO,EAAeN,GADxE,IAAkBF,EAAWC,EAAWC,CAgB5C,EA1GA,eACA,SAkCA,SAAgBJ,EAASO,GACrB,GAAIA,EAAIK,OAAS,EAAG,CAChB,MAAM9E,EAAQ,4CAA4C2E,KAAKF,GAC/D,GAAIzE,EACA,MAAO,CACHoE,EAAG3B,SAASzC,EAAM,GAAI,IACtBqE,EAAG5B,SAASzC,EAAM,GAAI,IACtBsE,EAAG7B,SAASzC,EAAM,GAAI,IAElC,KAAO,CACH,MAAMA,EAAQ,mCAAmC2E,KAAKF,GACtD,GAAIzE,EACA,MAAO,CACHoE,EAAG3B,SAASzC,EAAM,GAAKA,EAAM,GAAI,IACjCqE,EAAG5B,SAASzC,EAAM,GAAKA,EAAM,GAAI,IACjCsE,EAAG7B,SAASzC,EAAM,GAAKA,EAAM,GAAI,IAE7C,CAEA,OAAO,IAAI,EAAAoF,KACf,C,oFCvDA,qBAKI,WAAA1F,CAAY2F,EAAejD,GACvBzC,KAAK0F,KAAOA,EACZ1F,KAAKyC,MAAQA,CACjB,E,8ECNJ,MAAsBkD,EAClB,YAAO,CAAMC,GACT,MAAM,IAAIC,MAAMD,EACpB,CAEA,uBAAOE,CAAiBC,EAAaH,GACnBI,MAAVD,GACAJ,EAAOM,MAAML,EACrB,EARJ,U,q0BCCA,eAEA,SACA,SACA,SACA,SACA,OACA,SACA,SACA,SAEA,cAWI,WAAA7F,CAAYmG,EAAsBC,G,YANlC,mBAEA,mBAEA,mBAGI,EAAAnG,KAAI,SAAY,KAAhBA,KAAiBmG,GAEjBnG,KAAKoG,KAAOF,EACZlG,KAAKmG,SAAWA,EAEhB,EAAAnG,KAAI,SAAa,KAAjBA,MACA,EAAAA,KAAI,SAAiB,KAArBA,MAEImG,EAASE,cACT,EAAArG,KAAI,EAAW,IAAI,EAAAsG,OAAOtG,MAAK,KAEnCuG,SAASC,iBAAiB,EAAAC,OAAOC,kBAAmB,IAAM,EAAA1G,KAAI,OAAW2G,cACzEC,OAAOJ,iBAAiB,EAAAC,OAAOI,KAAM,IAAM,EAAA7G,KAAI,OAAW2G,cAE1DC,OAAOJ,iBAAiB,EAAAC,OAAOK,MAAOC,IAC9BA,EAAMC,QAAU,EAAAhH,KAAI,OAAWiH,QAC/B,EAAAjH,KAAI,OAAWkH,kBAE3B,CAEA,MAAAC,GACI,EAAAnH,KAAI,OAAWmH,SACf,EAAAnH,KAAI,QAAUmH,SAEd,EAAAnH,KAAI,EAAa,IAAIoH,eAAe,KAC5B,EAAApH,KAAI,OAAWiH,OACf,EAAAjH,KAAI,SAAQ,KAAZA,MAEAA,KAAKqH,YACX,KACF,EAAArH,KAAI,OAAWsH,QAAQtH,KAAKoG,MAE5B,EAAApG,KAAI,SAAS,KAAbA,KACJ,CAEA,OAAAqH,GACI,EAAArH,KAAI,OAAWqH,UACf,EAAArH,KAAI,QAAUqH,UAEd,EAAArH,KAAI,OAAWuH,YACnB,CAEA,SAAAC,CAAUnH,GACN,EAAAL,KAAI,OAAWwH,UAAUnH,EAC7B,CAEA,KAAAoH,GACI,EAAAnC,MAAMmC,QAEN,EAAAzH,KAAI,SAAY,KAAhBA,KAAiBA,KAAKmG,SAC1B,G,qEAKI,OAFAnG,KAAKmG,SAASuB,eAAiB1H,KAAKmG,SAASwB,qBAAuB3H,KAAKmG,SAASuB,cAE1E1H,KAAKmG,SAAS/F,MAClB,KAAK,EAAAwH,UAAUC,KACX,EAAA7H,KAAI,EAAa,IAAI,EAAA8H,aAAa9H,MAAK,KACvC,MAEJ,KAAK,EAAA4H,UAAUG,SACX,EAAA/H,KAAI,EAAa,IAAI,EAAAgI,iBAAiBhI,MAAK,KAC3C,MAEJ,KAAK,EAAA4H,UAAUK,MACX,EAAAjI,KAAI,EAAa,IAAI,EAAAkI,cAAclI,MAAK,KACxC,MAEJ,KAAK,EAAA4H,UAAUO,QACX,EAAAnI,KAAI,EAAa,IAAI,EAAAoI,aAAapI,MAAK,KAI/C,EAAAA,KAAI,OAAWqI,kBAEVrI,KAAKmG,SAASwB,sBACf,EAAA3H,KAAI,OAAWsI,eACf,EAAAtI,KAAI,OAAWuI,kBAGnB,EAAAvI,KAAI,OAAWwI,QACnB,EAAC,aAGG,EAAAxI,KAAI,OAAWyI,UACf,EAAAzI,KAAI,QAAUyI,SAClB,EAAC,aAGG,EAAAzI,KAAI,OAAWwI,SACf,EAAAxI,KAAI,QAAUwI,QAClB,EAAC,WAEWrC,GACR,EAAAb,MAAMoD,WACF,IAAM,EAAA1I,KAAI,SAAQ,KAAZA,MACNmG,EAASwC,qBAEb,EAAA7I,WAAWsB,uBACf,EAAC,aAGGpB,KAAKoG,KAAKwC,MAAMC,QAAU,EAAAC,OAAOC,QAAQC,KACzChJ,KAAKoG,KAAKwC,MAAMK,cAAgB,EAAAH,OAAOI,cAAcC,OACrDnJ,KAAKoG,KAAKwC,MAAMQ,WAAa,EAAAN,OAAOO,WAAWC,OAC/CtJ,KAAKoG,KAAKwC,MAAMW,eAAiB,EAAAT,OAAOU,eAAeF,OACvDtJ,KAAKoG,KAAKwC,MAAMa,OAAS,MAC7B,C,8ECrIJ,e,mFCAA,MAAa3J,GAAb,eACW,EAAA4J,SAAW,IAEX,EAAAC,OAAS,IAET,EAAAC,KAAO,IAEP,EAAAC,QAAU,IAEV,EAAAC,OAAS,G,iFCTpB,eAGA,MAAaC,UAAe,EAAAC,MASxB,WAAAjK,CAAYkK,GACRC,QAEAC,OAAOC,OAAOpK,KAAMiK,EACxB,CAEA,MAAAI,CAAOnI,GACHgI,MAAMG,OAAOnI,GAETlC,KAAKsK,SACLtK,KAAKuK,QAAUvK,KAAKK,OAAS,EAAI6B,GAEjClC,KAAKuK,QAAUvK,KAAKK,MAAQ6B,CACpC,CAEA,cAAAsI,GAGI,OAFAN,MAAMM,iBAEkB,GAAhBxK,KAAKuK,UAAiBvK,KAAKsK,UAA2B,GAAdtK,KAAKK,KACzD,CAEA,KAAAoH,GACIyC,MAAMzC,QAENzH,KAAKuK,QAAUvK,KAAKK,KACxB,EAlCJ,U,sFCHA,MAAaoK,GAAb,kBACW,EAAAC,UAAY,mBAEZ,EAAAC,iBAAmB,mBAEnB,EAAAlD,MAAQ,QAER,EAAAmD,UAAY,mBAEZ,EAAAC,KAAO,OAEP,EAAAC,gBAAkB,qBAElB,EAAAC,MAAQ,QAER,EAAAC,cAAgB,IAEhB,EAAAC,aAAe,IAEf,EAAAC,aAAe,IAEf,EAAAC,KAAO,UAEP,EAAAC,QAAU,WAEV,EAAAC,eAAiB,mB,iFCzB5B,cACA,SACA,SAEA,eACI,iBAAOC,CAAWrE,GACd,OAAOA,EAAOqE,WAAW,KAAM,CAAEC,oBAAoB,KAC3C,EAAA5F,OAAOM,MAAM,EAAAuF,UAAUC,YACrC,CAEA,kBAAOC,CAAYC,GACf,OAAgB3F,MAAT2F,GAAsBA,EAAQ,EAAArG,MAAMsG,qBAAuB,CACtE,E,wmDCXJ,eACA,SACA,WAIA,SACA,YACA,SAEA,SAEA,gBAqBI,WAAA7L,CAAYkH,EAA2Bd,G,YAhB9B,mBAEA,mBAET,mBAEA,mBAEA,mBAEA,mBAEA,mBAEA,mBAGInG,KAAKiH,OAASA,EACdjH,KAAK6L,KAAO1F,EAAS0F,KACrB,EAAA7L,KAAI,EAAYmG,EAASuB,cAAa,KACtC,EAAA1H,KAAI,IAAemG,EAAS2F,WAAU,KAElC,EAAA9L,KAAI,QACJ,EAAAA,KAAI,EAAkCuG,SAASwF,eAAe5F,EAAS2F,YAAW,KAEtF9L,KAAKyI,SACT,CAEA,MAAAtB,CAAO6E,EAAoBjF,EAAmBkF,EAAuB5L,GAGjE,GAFA,EAAAL,KAAI,SAAS,KAAbA,MAEK,EAAAA,KAAI,QAAc+G,EAGvB,GAAIiF,GAAa,EAAAhM,KAAI,QAAgB,EAAAA,KAAI,OAAU,CAC3CgM,GACA,EAAAhM,KAAI,EAAUiM,EAAK,KAElB,EAAAjM,KAAI,QACL,EAAAA,KAAI,EAAU,IAAIa,KAAM,KAEvB,EAAAb,KAAI,OAEA,EAAAA,KAAI,QACT,EAAAA,KAAI,EAAU,IAAIa,KAAM,KAFxB,EAAAb,KAAI,GAAe,EAAI,KAIvB,EAAAA,KAAI,OACJ,EAAAA,KAAI,SAAc,KAAlBA,KAAmB+G,EAAO1G,GAE1B,EAAAL,KAAI,SAAe,KAAnBA,KAAoB+G,GAExB,MAAMmF,EAAe,EAAAlM,KAAI,SAAiB,KAArBA,MAEjB,EAAAA,KAAI,QAAYkM,GAAgB,IAChC,EAAAlM,KAAI,GAAe,EAAK,KACxB,EAAAA,KAAI,GAAW,EAAK,MAGpB,EAAAA,KAAI,QAAYkM,GAAgB,IAChC,EAAAlM,KAAI,GAAe,EAAK,KACxB,EAAAA,KAAI,GAAW,EAAK,KACpB,EAAAA,KAAI,OAAUgG,EAAS,MAGtBgG,GAA4BhG,MAAf,EAAAhG,KAAI,QAClB,EAAAA,KAAI,GAAW,EAAI,IAC3B,MACI,EAAAA,KAAI,OAAUgG,EAAS,IAE/B,CAwIA,OAAAyC,GACI,EAAAzI,KAAI,EAAmBA,KAAKiH,OAAOkF,wBAAuB,KAC1D,EAAAnM,KAAI,OAAiBuB,GAAK6K,QAC1B,EAAApM,KAAI,OAAiB0B,GAAK2K,OAC9B,G,yIA1IetF,GACX,MAAMuF,EAAM,EAAAC,OAAOjB,WAAWtL,KAAKiH,QAE7BuF,EAAYhL,KAAKqB,OAAO,EAAA7C,KAAI,OAAQyM,IAAIC,GAAQC,EAAOC,YAAYF,EAAKhH,MAAQ,KAAOgH,EAAKjK,MAAQ,EAAI,KAK9G,IAAIlB,EAAIwF,EAAM8F,QAAU,EAAA7M,KAAI,OAAiBuB,EAAI,GAC7CG,EAAIqF,EAAM+F,QAAU,EAAA9M,KAAI,OAAiB0B,EAAI2K,QAAU,GAEvD9K,EAAIiL,EAAY,GAAK,EAAAxM,KAAI,OAAiB+M,QAC1CxL,EAAI,EAAAvB,KAAI,OAAiB+M,OAASP,EAAY,KAE9C9K,EAAI,EAAyB,GAArB,EAAA1B,KAAI,OAAQmF,OAAc,EAAAnF,KAAI,OAAiByJ,SACvD/H,EAAI,EAAA1B,KAAI,OAAiByJ,OAAS,EAAyB,GAArB,EAAAzJ,KAAI,OAAQmF,QAEtDmH,EAAIU,YACJV,EAAIW,UAAU1L,EAAGG,EAAG8K,EAAY,GAAI,GAAK,GAAK,EAAAxM,KAAI,OAAQmF,OAZvC,GAanB,IAAIN,EAAUrD,KAAK2B,MAAgC,IAA1B,EAAAnD,KAAI,SAAiB,KAArBA,OAA+B+C,SAAS,IAC7DmK,EAAc1L,KAAK2B,MAAgC,IAA1B,EAAAnD,KAAI,SAAiB,KAArBA,OAA+B+C,SAAS,IAC/C,GAAlB8B,EAAQM,SACRN,EAAU,IAAMA,GACM,GAAtBqI,EAAY/H,SACZ+H,EAAc,IAAMA,GAExBZ,EAAIa,YAAc,EAAA7H,MAAM8H,eAAiBF,EACzCZ,EAAIe,UAAY,EAChBf,EAAIgB,UAAY,EAAAhI,MAAMlB,WAAa8I,EACnCZ,EAAIiB,SACJjB,EAAIkB,OAEJ,IAAK,IAAId,KAAQ,EAAA1M,KAAI,OAAS,CAC1B,IAAIyN,EAAS,EAETf,EAAKjK,QACLgL,EAAS,GAETnB,EAAIU,YACJV,EAAIgB,UAAYZ,EAAKjK,MAAQoC,EAC7ByH,EAAIoB,IAAInM,EAAI,GAAIG,EAAI,GAAI,EAAG,EAAa,EAAVF,KAAKmM,IACnCrB,EAAIkB,QAGR,EAAAI,WAAW/D,QAAQyC,GACnBA,EAAIgB,UAAY,EAAAhI,MAAMI,KAAOb,EAC7ByH,EAAIuB,SAASnB,EAAKhH,MAAQ,GAAInE,EAAIkM,EAASK,GAAapM,EAAI,IAE5DA,GAAK,EACT,CACJ,EAAC,WAEaqF,EAAmB1G,GAC7B,GAAa2F,MAAT3F,EACA,OAEJ,MAAMF,EAAK,EAAAH,KAAI,OAAWG,GAAKE,EAAMF,GAErC,IAAI0J,EAA8BtD,SAASwF,eAAe5L,GAE1D,MAAM4N,EAAmB,KACrB,EAAA/N,KAAI,SAAS,KAAbA,MAEA6J,EAAQjB,MAAMoF,WAAa,EAAAlF,OAAOmF,WAAWC,SAGjD,IAAKrE,EAAS,CACV,MAAMsE,EAAQ,cAEd,IAAIC,EAAuB,EAAApO,KAAI,OAAWqO,WAAU,GAEpDxE,EAAUtD,SAAS+H,cAAc,EAAAC,IAAIC,KAErC3E,EAAQ4E,UAAYL,EAAQK,UAE5B5E,EAAQ1J,GAAKA,EACb0J,EAAQjB,MAAM8F,SAAW,EAAA5F,OAAO6F,SAASC,SACzC/E,EAAQjB,MAAMiG,cAAgB,EAAA/F,OAAOgG,cAAcC,KACnDlF,EAAQjB,MAAMoF,WAAa,EAAAlF,OAAOmF,WAAWC,QAE7CrE,EAAQmF,aAAa,EAAAC,UAAUC,KAAM,EAAAlP,KAAI,OAAWG,IAEpD,MAAMgP,EAAU,IAAItF,EAAQ4E,UAAUW,SAASjB,IAE/C,IAAIkB,EAAOxF,EAAQ4E,UAEnB,IAAK,MAAMa,KAASH,EAAS,CACzB,MAAMI,EAAWD,EAAM,GAAG3M,QAAQ,KAAM,IACdA,QAAQ,IAAK,IACb6M,WAAW,IAAK,IAE1CH,EAAOA,EAAKG,WAAWF,EAAM,GAAIjP,EAAMwL,KAAK0D,GAChD,CAEA1F,EAAQ4E,UAAYY,EAEpB9I,SAASlE,KAAKoN,YAAY5F,GAE1BA,EAAQ6E,SAAW7E,EAAQsC,wBAE3B4B,GACJ,CAEIlE,EAAQjB,MAAMoF,YAAc,EAAAlF,OAAOmF,WAAWyB,QAC9C3B,IAE2B,GAA3BlE,EAAQ6E,SAASjF,SACjBI,EAAQ6E,SAAW7E,EAAQsC,yBAE/B,MAAMsB,EAAS,GAEf,IAAI5I,EAAU,IAEVtD,EAAIwF,EAAM8F,QACVnL,EAAIqF,EAAM+F,QAAUT,QAEpB9K,EAAIsI,EAAQ6E,SAAS3B,MAAQ,EAAA/M,KAAI,OAAiBuB,EAAI,EAAAvB,KAAI,OAAiB+M,MAAQU,IACnFlM,EAAI,EAAAvB,KAAI,OAAiB+M,MAAQlD,EAAQ6E,SAAS3B,MAAQ,EAAA/M,KAAI,OAAiBuB,EAAIkM,EACnF5I,EAAU,OAGVnD,EAAImI,EAAQ6E,SAASjF,OAAS,EAAAzJ,KAAI,OAAiB0B,EAAI,EAAA1B,KAAI,OAAiByJ,OAASgE,IACrF/L,EAAI,EAAA1B,KAAI,OAAiByJ,OAASI,EAAQ6E,SAASjF,OAAS,EAAAzJ,KAAI,OAAiB0B,EAAI+L,EACrF5I,EAAU,OAGL,GAALtD,GAAe,GAALG,IACVmD,EAAU,KAEdgF,EAAQjB,MAAM+G,KAAOpO,EAAIkM,EAAS,KAClC5D,EAAQjB,MAAMgH,IAAMlO,EAAI+L,EAAS,KACjC5D,EAAQjB,MAAM/D,QAAUA,CAC5B,EAAC,aASG,IAAK,EAAA7E,KAAI,OACL,OAEJ,MAAM6P,EAAoCtJ,SAASuJ,iBAAiB,UAAW,EAAA9P,KAAI,OAAWG,QAE9F,IAAK,IAAIiG,KAAQyJ,EACbzJ,EAAKwC,MAAMoF,WAAa,EAAAlF,OAAOmF,WAAWyB,MAClD,EAAC,aAGG,IAAK,EAAA1P,KAAI,OACL,OAAO,EAEX,IAAIkM,EAAe,EAAAlM,KAAI,OACF,IAAK,IAAIa,MAAOoB,UAAY,EAAAjC,KAAI,OAAQiC,WAAa8N,EAAUjQ,WAAW+J,UACzE,IAAIhJ,MAAOoB,UAAY,EAAAjC,KAAI,OAAQiC,WAAa8N,EAAUjQ,WAAW+J,QAM3F,OALIqC,EAAe,IACfA,EAAe,GACfA,EAAe,IACfA,EAAe,GAEZA,CACX,C,qFC5PJ,MAAa8D,GAAb,iBACoB,EAAAC,OAAS,CAAC,UAAW,WAErB,EAAAC,YAAc,CAAC,UAAW,WAE1B,EAAAjE,MAAQ,CAAC,UAAW,WAEpB,EAAAkE,SAAW,CAAC,UAAW,WAEvB,EAAAC,YAAc,CAAC,UAAW,WAE1B,EAAAC,gBAAkB,CAAC,UAAW,WAE9B,EAAAC,kBAAoB,CAAC,UAAW,U,mFCRpD,eACA,SAEA,iBAeI,cAAOC,CAAQ1E,GACX,IAAI2E,EAA8B,GAE9BC,EAAuB,GAE3B,IAAK,MAAMC,KAAU7E,EAAK4E,OAAQ,CAC9B,IAAIE,EAAe,IAAI1Q,IAEvB,IAAK,MAAMI,KAASqQ,EAAOD,OACvBE,EAAanQ,IAAIH,EAAMkB,EAAEwB,WAAY1C,EAAMqB,GAC3C8O,EAAQI,KAAK,CACTvQ,MAAOA,EAAMkB,EAAEwB,WACf8F,QAASgD,EAAKgF,OAAS,EAAAC,aAAajQ,KACzB,EAAAkQ,UAAUC,KAAK,IAAInQ,KAAKR,EAAMkB,IAC9BlB,EAAMkB,EAAEwB,aAI3B0N,EAAOG,KAAK,CACRK,KAAMP,EAAOQ,MACbT,OAAQE,GAEhB,CAEA,MAAMQ,EAAS,IAAIC,IACfC,EAAgBb,EAAQc,OAAOhO,IAAM6N,EAAO5Q,IAAI+C,EAAEuF,UAAYsI,EAAOjR,IAAIoD,EAAEuF,UAK/E,OAHIgD,EAAKgF,OAAS,EAAAC,aAAajQ,MAC3BwQ,EAAcE,KAAK,CAAClO,EAAGsB,IAAM,IAAI9D,KAAKwC,EAAEhD,OAAO4B,UAAY,IAAIpB,KAAK8D,EAAEtE,OAAO4B,WAE1E,CACHuO,QAASa,EACTZ,OAAQA,EAEhB,E,cCzDJ,IAAiB3H,E,iEAAjB,SAAiBA,GACb,MAAa0I,GACF,EAAAC,QAAU,UAEV,EAAAC,QAAU,UAHR,EAAAF,OAAM,EAMnB,MAAazI,GACF,EAAAC,KAAO,OADL,EAAAD,QAAO,EAIpB,MAAaG,GACF,EAAAC,OAAS,SAET,EAAAwI,cAAgB,iBAEhB,EAAAC,IAAM,MAEN,EAAAC,WAAa,cAPX,EAAA3I,cAAa,EAU1B,MAAaG,GACF,EAAAC,OAAS,SADP,EAAAD,WAAU,EAIvB,MAAa4E,GACF,EAAAC,QAAU,UAEV,EAAAwB,OAAS,SAHP,EAAAzB,WAAU,EAMvB,MAAaU,GACF,EAAAC,SAAW,WADT,EAAAD,SAAQ,EAIrB,MAAaG,GACF,EAAAC,KAAO,OADL,EAAAD,cAAa,EAI1B,MAAatF,GACF,EAAAF,OAAS,SADP,EAAAE,eAAc,EAI3B,MAAasI,GACF,EAAAC,UAAY,YADV,EAAAD,eAAc,CAG9B,CA9CD,CAAiBhJ,IAAM,SAANA,EAAM,I,mmDCAvB,eAEA,OACA,WACA,SACA,SACA,SACA,YACA,SAEA,iBAiBI,WAAA/I,CAAYkH,EAA2B+K,G,YAhBvC,KAAAC,UAAoB,EAEpB,mBAEA,mBAEA,mBAIA,mBAES,mBAEA,mBAGL,EAAAjS,KAAI,EAAWiH,EAAM,KACrB,EAAAjH,KAAI,EAAYgS,EAAO,KAEnB,EAAAhS,KAAI,OAAUkS,OACd,EAAAlS,KAAI,OAAU0F,KAAO,EAAA1F,KAAI,OAAUkS,MAEvC,EAAAlS,KAAI,EAAqCgG,MAAtB,EAAAhG,KAAI,OAAU0F,KAAiB,KAElD1F,KAAKmS,WAAa,IAAI,EAAArS,UAC1B,CAEA,MAAAqH,CAAOiL,EAAuBC,GACrB,EAAArS,KAAI,QACL,EAAAA,KAAI,SAAgB,KAApBA,MAEA,EAAAA,KAAI,SACJA,KAAKiS,UAAW,GAEpB,MAAM3F,EAAM,EAAAC,OAAOjB,WAAW,EAAAtL,KAAI,QAElC,IAAIuB,EAAI,EAAAvB,KAAI,OAAWuB,EACnBG,EAAI,EAAA1B,KAAI,OAAW0B,EACnBqL,EAAQ,EAAA/M,KAAI,OAAW+M,MACvBtD,EAAS,EAAAzJ,KAAI,OAAWyJ,OAI5B,GAFA6C,EAAIU,aAEC,EAAAhN,KAAI,OAAc,CACnB,MAAMsS,EAAY,CAACpQ,EAAoB6E,KACnC/G,KAAKmS,WAAWzR,OAAO,qBAAsBqG,GAE7CuF,EAAIgB,UAAYX,EAAO4F,YAAY,EAAAjN,MAAMC,kBAAmB/D,KAAK2B,MAAM,GAAKjB,KAG5E,EAAAlC,KAAI,SAAY,KAAhBA,KAAiBoS,EAAW7Q,EAAGG,EAAGqL,EAAOtD,IACzC,EAAAzJ,KAAI,OAAS4I,MAAM4J,OAAS,EAAA1J,OAAO0I,OAAOE,QAEtCW,GAAcD,EAAU7Q,GAAK8Q,EAAW9Q,GAAK6Q,EAAU1Q,GAAK2Q,EAAW3Q,IACvE1B,KAAKiS,UAAYjS,KAAKiS,SACtBI,OAAarM,GAGZhG,KAAKiS,SAUN3F,EAAIgB,UAAYX,EAAO4F,YAAY,EAAAjN,MAAMC,kBAAmB,IAT5DvF,KAAKmS,WAAWjS,IAAI,qBAChB,EAAAe,cAAcwR,UACd,CACItQ,SAAU,IACVE,KAAMH,IACFoQ,EAAUpQ,EAAY,EAAAjB,cAAcyR,iBAMpD,EAAA1S,KAAI,OAAS4I,MAAM4J,OAAS,EAAA1J,OAAO0I,OAAOC,QAErCzR,KAAKiS,SAYN3F,EAAIgB,UAAYX,EAAO4F,YAAY,EAAAjN,MAAMC,kBAAmB,IAX5DvF,KAAKmS,WAAWjS,IAAI,qBAChB,EAAAe,cAAcyR,WACd,CACI9R,MAAOmP,EAAU4C,MAAMC,QACvBzQ,SAAU,IACVG,UAAU,EACVD,KAAMH,IACFoQ,EAAUpQ,EAAY,EAAAjB,cAAcwR,eAOxDnG,EAAIW,UAAU1L,EAAGG,EAAGqL,EAAOtD,EAAQ,GACnC6C,EAAIkB,OAEJ,EAAAI,WAAWiF,QAAQvG,GAEf,EAAAtM,KAAI,OAAUkS,OACd5F,EAAI3I,KAAO,mBAEf,MAAMmP,EAAa,EAAA9S,KAAI,OAAUkS,KACU,SAAtBa,UAAUC,SACR,GACC,EACH,EAErB1G,EAAIuB,SACA,EAAA7N,KAAI,OAAU0F,MAAQ,GACtBnE,EAAIwL,EAAQ,EACZrL,EAAI+H,EAAS,EAAIqJ,EAEzB,CAEA,GAAI9S,KAAKiS,SAAU,CACf,MAAMnE,EAAU,EACZmF,EAAe,EAEnBvR,GAAK+H,EAEL,MAAMyJ,EAAQ,EAAAlT,KAAI,OAAUkT,MAAM5B,OAAOjR,GAASA,EAAMqF,MACpDyN,EAAW,EAAAnT,KAAI,OAAUkT,MAAM5B,OAAOjR,IAAUA,EAAMqF,MAE1D,IAAI0N,EAAW5R,KAAKqB,OAAOqQ,EAAMzG,IAAIpM,GAASsM,EAAOC,YAAYvM,EAAMqF,QAC5C,EAAVoI,EAEbvM,EAAI6R,EAAW,EAAApT,KAAI,OAAS+M,MAAQ,IACpCxL,GAAKA,EAAI6R,EAAW,EAAApT,KAAI,OAAS+M,MAAQ,GAE7C,MAAMsG,EAAkB,KACpBC,EAAiB,IACjBC,EAAiB,EAAAjO,MAAMkO,uBACvBC,EAAc,EAAAnO,MAAM8H,eAExBd,EAAIU,YAEJ,MAAM0G,EAAO,CACTnS,EAAGA,EACHG,EAAGA,EACHqL,MAAOqG,EACP3J,OAAuB,GAAfyJ,EAAM/N,OACc,EAAlBgO,EAAShO,QACQ,GAAhB+N,EAAM/N,OAAc2I,EAAU,IACd,GAAhBoF,EAAM/N,QAAkC,GAAnBgO,EAAShO,OAAc2I,EAAU,IAGrExB,EAAIW,UAAUyG,EAAKnS,EAAGmS,EAAKhS,EAAGgS,EAAK3G,MAAO2G,EAAKjK,OAAQwJ,GACvD3G,EAAIgB,UAAY,EAAAhI,MAAMlB,WAAaiP,EACnC/G,EAAIqH,YAAY,IAChBrH,EAAIe,UAAY,EAChBf,EAAIa,YAAcsG,EAAcJ,EAChC/G,EAAIkB,OACJlB,EAAIiB,SAEJjB,EAAIU,YAEJtL,GAAK,EAEL,IAAK,MAAMI,KAAQ,EAAA9B,KAAI,OAAUkT,MAAO,CAGpC,GAFA5G,EAAIU,YAEkB,GAAlBlL,EAAK8R,UAAmB,CACxBlS,GAAK,EAEL4K,EAAIuH,OAAOtS,EAAIuM,EAASpM,GACxB4K,EAAIwH,OAAOvS,EAAI6R,EAAWtF,EAASpM,GAEnC4K,EAAIe,UAAY,GAChBf,EAAIiB,SAEJ7L,GAAK,EAEL,QACJ,CAEA4K,EAAIgB,UAAY,cAEhB,MAAMyG,EAAe,qBAAuBjS,EAAK4D,KAE3C4M,EAAY,CAACpQ,EAAoB6E,EAAsBiN,KAGzD,GAFAhU,KAAKmS,WAAWzR,OAAOqT,EAAchN,GAEjCiN,GAA0B,GAAd9R,EACZ,OAEJ,IAAI2C,EAAUrD,KAAK2B,MAAMmQ,EAAiBpR,GAAYa,SAAS,IACzC,GAAlB8B,EAAQM,SACRN,EAAU,IAAMA,GAEpByH,EAAIgB,UAAYiG,EAAiB1O,GAGjC,EAAA7E,KAAI,SAAY,KAAhBA,KAAiBoS,EAAW7Q,EAAGG,EAAG0R,EAAU,KAC5CpT,KAAKmS,WAAWjS,IAAI6T,EAChB,EAAA9S,cAAcwR,UACd,CACItQ,SAAU,IACVE,KAAMH,IACFoQ,EAAUpQ,EAAY,EAAAjB,cAAcyR,eAIhD,EAAA1S,KAAI,OAAS4I,MAAM4J,OAAS,EAAA1J,OAAO0I,OAAOE,QAEtCW,IACAvQ,EAAKmS,SAEL5B,OAAarM,EACbhG,KAAKiS,UAAW,IAGpBjS,KAAKmS,WAAWjS,IAAI6T,EAChB,EAAA9S,cAAcyR,WACd,CACI9R,MAAOmP,EAAU4C,MAAMC,QACvBzQ,SAAU,IACVG,UAAU,EACVD,KAAMH,IACFoQ,EAAUpQ,EAAY,EAAAjB,cAAcwR,WAAW,MAK/DnG,EAAIW,UAAU1L,EAAIuM,EAASpM,EAAG0R,EAAqB,EAAVtF,EAAa,GAAImF,GAC1D3G,EAAIkB,OAEJ,EAAAI,WAAWiF,QAAQvG,GACnBA,EAAIgB,UAAY,EAAAhI,MAAMI,KACtB4G,EAAI4H,UAAY,OAChB5H,EAAI6H,aAAe,UACnB7H,EAAIuB,SAAS/L,EAAK4D,KAAMnE,EAAc,EAAVuM,EAAapM,EAAI,GAE7CA,GAAK,EACT,CACJ,CAgBA,OAdA4K,EAAIe,UAAY,GAEX,EAAArN,KAAI,QAA8BgG,MAAdqM,GAA2BrS,KAAKiS,WACrDjS,KAAKiS,UAAW,EAChBI,OAAarM,GAGjB,EAAAhG,KAAI,GAAW,EAAI,KAEf,EAAAA,KAAI,QAAgBqS,GAAcD,EAAU7Q,GAAK8Q,EAAW9Q,GAAK6Q,EAAU1Q,GAAK2Q,EAAW3Q,IAC3F1B,KAAKiS,UAAYjS,KAAKiS,SACtBI,OAAarM,GAGVqM,CACX,CAoBA,OAAA5J,GACI,EAAAzI,KAAI,GAAW,EAAK,IACxB,CAEA,MAAAwI,GACI,EAAAxI,KAAI,SAAgB,KAApBA,MACA,EAAAA,KAAI,SAAmB,KAAvBA,KACJ,CAEA,KAAAoU,GACIpU,KAAKiS,UAAW,CACpB,G,+GA5BI,EAAAjS,KAAI,EAAmB,EAAAA,KAAI,OAASmM,wBAAuB,KAE3D,EAAAnM,KAAI,OAAiBuB,GAAK6K,QAC1B,EAAApM,KAAI,OAAiB0B,GAAK2K,OAC9B,EAAC,WAEWtF,EAAmBxF,EAAWG,EAAW2S,EAAWC,GAC5D,IAAKvN,EACD,OAAO,EAEX,IAAIwN,EAAQxN,EAAM8F,QAAU,EAAA7M,KAAI,OAAiBuB,EAAI6K,QACjDoI,EAAQzN,EAAM+F,QAAU,EAAA9M,KAAI,OAAiB0B,EAAI2K,QAErD,OAAOkI,GAAShT,GAAKgT,GAAShT,EAAI8S,GACxBG,GAAS9S,GAAK8S,GAAS9S,EAAI4S,CACzC,EAAC,aAgBG,MAAMvH,EAAQ,EAAA/M,KAAI,OAAe,EAAI2M,EAAOC,YAAY,EAAA5M,KAAI,OAAU0F,MAAQ,IAAM,GAChF+D,EAAS,EAAAzJ,KAAI,OAAe,EAAI,GAEpC,EAAAA,KAAI,EAAa,CACbuB,EAAG,EAAAvB,KAAI,OAAUuB,EAAIwL,EAAQ,EAAA/M,KAAI,OAAS+M,MACrC,EAAA/M,KAAI,OAAS+M,MAAQA,EACrB,EAAA/M,KAAI,OAAUuB,EAAI,EAChB,EAAAvB,KAAI,OAAS+M,MAAQ,EAAA/M,KAAI,OAAUuB,EAAIwL,EACvC,EAAA/M,KAAI,OAAUuB,EACrBG,EAAG,EAAA1B,KAAI,OAAU0B,EAAI+H,EAAS,EAAAzJ,KAAI,OAASyJ,OACtC,EAAAzJ,KAAI,OAASyJ,OAASA,EACtB,EAAAzJ,KAAI,OAAU0B,EAAI,EAChB,EAAA1B,KAAI,OAASyJ,OAAS,EAAAzJ,KAAI,OAAU0B,EAAI+H,EACxC,EAAAzJ,KAAI,OAAU0B,EACrBqL,MAAOA,EACPtD,OAAQA,GACA,IAChB,C,k3BCpTJ,iBACA,SACA,SAEA,MAAanE,EAuBT,iBAAOoD,CAAW+L,EAAoBC,IAC7BpP,EAAMqP,UAAYD,IACnBpP,EAAMqP,SAAWD,GAEjB9N,OAAOgO,YACJhO,OAAOgO,WAAW,gCAAgCzF,WAChD7J,EAAMqP,UAAYrP,EAAMqP,YAC7BrP,EAAMuP,SAAS,GAEfvP,EAAMuP,SAAS,GAEnBjO,OAAOgO,WAAW,gCACXpO,iBAAiB,EAAAC,OAAOqO,OAAQ/N,IAC7BzB,EAAMuP,UAAS9N,EAAMoI,SAAa7J,EAAMqP,WAAYrP,EAAMqP,WAAkB,EAAJ,GACxEF,KAEd,CAEA,eAAOI,CAASE,GACZzP,EAAM0P,aAAeD,EAErBzP,EAAMI,KAAO,EAAAsK,aAAaC,OAAO8E,GACjCzP,EAAMlB,WAAa,EAAA4L,aAAaE,YAAY6E,GAC5CzP,EAAMoH,KAAO,EAAAsD,aAAa/D,MAAM8I,GAChCzP,EAAM2P,SAAW,EAAAjF,aAAaG,SAAS4E,GACvCzP,EAAM4P,WAAa,EAAAlF,aAAaI,YAAY2E,GAC5CzP,EAAMkO,uBAAyB7G,EAAO4F,YAAYjN,EAAMlB,WAAqB,GAAT2Q,GAAc,GAAK,IACvFzP,EAAM8H,eAAiB,EAAA4C,aAAaK,gBAAgB0E,GACpDzP,EAAMC,iBAAmB,EAAAyK,aAAaM,kBAAkByE,GACxDzP,EAAMsG,oBAAsBuJ,OAAO,OAAQ7P,EAAMC,iBAAiBvC,MAAM,KAC5E,CAEA,YAAOyE,GACHzH,KAAK2U,cAAW3O,CACpB,EAzDJ,UACW,EAAAgP,aAAe,C,qoDCL1B,eACA,SACA,SAIA,WACA,SACA,SACA,SAEA,QACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,YACA,SAEA,MAAahN,UAAyB,EAAAoN,SA+BlC,WAAArV,CAAYsV,GACRnL,MAAMmL,G,YA/BV,mBAEA,mBAEA,mBAEA,mBAEA,mBAEA,mBAEA,mBAEA,mBAEA,mBAEA,mBAEA,mBAEA,mBAEA,mBAEA,mBAES,mBAKLrV,KAAK6L,KAAK4E,OAASzQ,KAAK6L,KAAK4E,OAAOhE,IAAInJ,GAAK,IAAI,EAAAyG,OAAOzG,IAEpDtD,KAAKmG,SAASmP,cACTtV,KAAKmG,SAASoP,YAGfvV,KAAKmG,SAASoP,YAAY3E,KAAK,CAC3BgD,WAAW,IAHf5T,KAAKmG,SAASoP,YAAc,GAMhCvV,KAAKmG,SAASoP,YAAY3E,KAAK,CACvBlL,KAAM,EAAA+E,cAAcU,KACpBa,UAAWH,GAAQA,GAAM2J,OACzBvB,OAAQ,KACJ,IAAI,EAAAwB,MAAM,EAAAC,cAAcC,QAAgB3V,KAAKmG,SAAU,EAAAnG,KAAI,QACvD,CACI+M,MAA2B,GAApBnG,OAAOgP,WACdnM,OAA6B,GAArB7C,OAAOiP,cAElBC,WAKrB,EAAA9V,KAAI,EAAewB,KAAKmM,GAAK,EAAC,KAE9B,EAAA3N,KAAI,EAAW,GAAE,KAEjBA,KAAK+V,iBAAmB,IAAIC,WAAW,EAAAvP,OAAOwP,UAClD,CAEA,MAAA9O,GACI+C,MAAM/C,SAEN,EAAAnH,KAAI,EAAgB,EAAAA,KAAI,OAAY,KACpC,EAAAA,KAAI,EAAe,EAAC,KAEoC,GAApDA,KAAK6L,KAAK4E,OAAOa,OAAOhO,IAAMA,EAAEgH,UAAUnF,OAC1C,EAAAnF,KAAI,SAAW,KAAfA,MAEA,EAAAA,KAAI,SAAM,KAAVA,MAEoB,GAApB,EAAAA,KAAI,QACJ,EAAAA,KAAI,OAAiBgG,EAAS,KAElChG,KAAKkW,MAAQ,EAAAC,YAAYC,KAEzBlM,MAAMmM,iBAEF,EAAArW,KAAI,QAAkBA,KAAKuV,YAC3BvV,KAAKsW,kBAAkBtW,KAAK6L,KAAK4E,OAAO8F,KAAKjT,GAAKA,EAAEnD,IAAM,EAAAH,KAAI,SAAiB6L,MAAQ,CAAC,GAExF7L,KAAKwW,wBAAqBxQ,EAE1B,EAAAhG,KAAI,OACJA,KAAKiH,OAAO2B,MAAM4J,OAAS,EAAA1J,OAAO0I,OAAOE,QAEzC1R,KAAKwH,WACb,CAieA,OAAAiB,GACIyB,MAAMzB,UAENzI,KAAKyW,UAAUhO,SACnB,CAEA,MAAAD,GACI0B,MAAM1B,SAENxI,KAAKuI,iBACL,EAAAvI,KAAI,SAAgB,KAApBA,MACAA,KAAKyW,UAAUjO,QACnB,CAEA,eAAAH,GACI6B,MAAM7B,kBAEN,EAAArI,KAAI,EAA4C,IAA/BA,KAAK6L,KAAK6K,aAAe,GAAO,KAEjD,IAAK,IAAI5U,KAAQ9B,KAAK6L,KAAK4E,OACvB3O,EAAKwI,UAAYxI,EAAKzB,MACtByB,EAAKzB,QAAU,EACfyB,EAAKyI,QAAUzI,EAAKzB,MACpByB,EAAK4U,cAAgB1W,KAAK6L,KAAK6K,aAAe,EAE1C5U,EAAKzB,MAAQ,GACbsW,QAAQC,KAAK,IAAK9U,EAAKoP,8BAAgCpP,EAAKzB,iCAKpE,GAFAL,KAAK6L,KAAK4E,OAASzQ,KAAK6L,KAAK4E,OAAOa,OAAOhO,GAAKA,EAAEjD,OAAS,GAEvDL,KAAKmG,SAASmP,aAAetV,KAAK6L,KAAK4E,OAAOtL,OAAS,GAAI,CAC3D,EAAAnF,KAAI,EAAUA,KAAK6L,KAAK4E,OAAOoG,OAAO,IAAG,KAEzC,MAAMC,EAAM,EAAA9W,KAAI,OAAQoD,OAAO,CAACU,EAAKR,IAAMQ,EAAMR,EAAEiH,QAAS,GAE5DvK,KAAK6L,KAAK4E,OAASzQ,KAAK6L,KAAK4E,OAAOzN,MAAM,EAAG,IAE7ChD,KAAK6L,KAAK4E,OAAOG,KAAK,IAAI,EAAA7G,OAAO,CAC7B1J,MAAOyW,EACPvM,QAASuM,EACT5F,MAAO,EAAAzG,cAAcM,MACrB5K,GAAIwM,EAAOoK,OACXtU,MAAO,EAAAzC,KAAI,OAAQ,EAAAA,KAAI,OAAQmF,OAAS,GAAG1C,MAC3CiU,YAAa1W,KAAK6L,KAAK6K,YACvB7K,KAAM,CACF2J,QAAQ,KAGpB,CACJ,CAEA,YAAAlN,GACI4B,MAAM5B,eAENtI,KAAKyW,SAAW,IAAI,EAAAO,SAAShX,KAAKiH,OAC9B,CACI1F,GAAI,GACJG,EAAG,GACHwQ,KAAM,EAAA+E,KAAKC,WACXhE,MAAO,CACH,CACIxN,KAAM,EAAA+E,cAAcC,UACpBuJ,OAAQ,KACJ,EAAAkD,OAAOC,MAAMpX,KAAKiH,OAAQjH,KAAKmG,SAASkR,SAGhD,CACI3R,KAAM,EAAA+E,cAAcG,UACpBqJ,OAAQ,KACJ,EAAAkD,OAAOG,MAAM,EAAA5B,cAAc6B,QAAQ,EAAAC,aAAajH,QAAQvQ,KAAK6L,OAAQ7L,KAAKmG,SAASkR,SAG3F,CACIzD,WAAW,GAEf,CACIlO,KAAM,EAAA+E,cAAcE,iBACpBsJ,OAAQ,KACJ,IAAI,EAAAwB,MAAM,EAAAC,cAAc6B,QAAQ,EAAAC,aAAajH,QAAQvQ,KAAK6L,QAAQiK,WAK1F,EAjpBJ,qB,6OA+FQ,GAAI9V,KAAK+V,kBAAoB/V,KAAKkW,OAAS,EAAAC,YAAYjV,KAAM,CACzD,EAAAlB,KAAI,EAAQA,KAAK6L,KAAK4E,OAAOrN,OAAO,CAACU,EAAKR,IAAMQ,EAAMR,EAAEiH,QAAS,GAAE,KAEnE,IAAIkN,EAAY,EAAAzX,KAAI,OACpB,EAAAA,KAAI,EAAWA,KAAK6L,KAAK4E,OAAOiH,QAAQC,IACjB,MAAMC,EAAQD,EAAOpN,QAAU,EAAAvK,KAAI,OAAQ,EAAIwB,KAAKmM,GAEpD,MAAO,CACHxN,GAAIwX,EAAOxX,GACXE,MAAOuX,EACPd,KAAMW,GAAaG,GAASA,KAGnCC,UAAS,KAE7B,EAAA7X,KAAI,EAAe,EAAAA,KAAI,SAAU,KAAdA,KAAe,EAAAA,KAAI,OAAU,GAAE,KAElD,IAAK,MAAMK,KAASL,KAAK6L,KAAK4E,OAC1B,EAAAzQ,KAAI,SAAY,KAAhBA,KAAiBK,GAErB,MAAMA,EAAQL,KAAK6L,KAAK4E,OAAO8F,KAAKjT,GAAKA,EAAEnD,IAAM,EAAAH,KAAI,QACrDA,KAAK6J,QAAQ1C,SAAS9G,IAAUL,KAAKyW,UAAUxE,SAC3CjS,KAAK+V,iBACL,CACI,IAAI,EAAA+B,aAAa,GAAIzX,GAAO6Q,UAAY,EAAAH,UAAUgH,OAAO1X,GAAOkK,aAEpElK,GAEJ,EAAAL,KAAI,SAAgB,KAApBA,KACJ,CAEKA,KAAKgY,WACNC,sBAAsBjY,KAAKmH,OAAO+Q,KAAKlY,MAC/C,EAAC,WAEWK,G,MACR,MAAMiM,EAAM,EAAAC,OAAOjB,WAAWtL,KAAKiH,QAEnCqF,EAAIgB,UAAYjN,EAAMoC,MACtB6J,EAAIa,YAAc9M,EAAMoC,MAExB,MAAM0V,EAAQ9X,EAAMkK,QAAU,EAAAvK,KAAI,OAC9B4X,EAAqC,GAA5BQ,MAAMD,GAAS,EAAIA,GAAa3W,KAAKmM,GAE5C0K,EAA+D,GAApDrY,KAAK6L,KAAK4E,OAAOa,OAAOgH,IAAMA,EAAEhO,UAAUnF,OAqD3D,IAnDOnF,KAAKuY,eAAgB,EAAAvY,KAAI,OAASwY,SAASnY,EAAMF,KAChDH,KAAKmS,WAAW1R,SAASJ,EAAMF,GAAI,EAAAc,cAAcC,OACjDmX,GACJrY,KAAKmS,WAAWjS,IAAIG,EAAMF,GACtB,EAAAc,cAAc6F,MACd,CACI3E,SAAU4N,EAAUjQ,WAAW4J,SAC/BtH,OAAQ,KACEpC,KAAKuY,cACH,EAAAvY,KAAI,SAAgB,KAApBA,KAAqBA,KAAKuY,aAAclY,KACpC,EAAAL,KAAI,OAASwY,SAASnY,EAAMF,IAC5B,EAAAH,KAAI,EAAW,EAAAA,KAAI,OAASsR,OAAOnR,GAAMA,GAAME,EAAMF,IAAG,KAExD,EAAAH,KAAI,OAAS4Q,KAAKvQ,EAAMF,IAE5BH,KAAKuY,aAAe,IAAIE,aAAa,EAAAhS,OAAOK,SAI7C,GAEXzE,KAAM,KACF,IAAK,EAAArC,KAAI,OAASwY,SAASnY,EAAMF,IAC7B,OAEJ,MAAMgY,EAAQ9X,EAAMkK,QAAU,EAAAvK,KAAI,OAC9B4X,EAAqC,GAA5BQ,MAAMD,GAAS,EAAIA,GAAa3W,KAAKmM,GAC9C+K,EAAY,EAAA1Y,KAAI,OAAgB4X,EAAQ,EAEtC1V,EAAa,CACfX,EAAG,EAAAvB,KAAI,OAAoBwB,KAAKmX,IAAID,GACpChX,EAAG,EAAA1B,KAAI,OAAoBwB,KAAKoX,IAAIF,IAGxCpM,EAAIgG,UAAUpQ,EAAWX,EAAGW,EAAWR,GAEnCkW,EAAQpW,KAAKmM,GAAK,IAClBrB,EAAIe,UAAY,GACpBf,EAAIuM,SAAW,QACfvM,EAAIwM,QAAU,QAEdxM,EAAIgB,UAAYjN,EAAMoC,SAKlCzC,KAAK+V,kBAAoB,EAAA/V,KAAI,SAAgB,KAApBA,KAAqBA,KAAK+V,iBAAkB1V,KACrE,EAAAL,KAAI,EAAiBK,EAAMF,GAAE,KAC7B,EAAAH,KAAA,OAAAA,KAAA,YAAkB,MAGlBA,KAAKkW,OAAS,EAAAC,YAAYjV,MAAQlB,KAAKmS,WAAW1R,SAASJ,EAAMF,GAAI,EAAAc,cAAcC,MACnFlB,KAAKmS,WAAWjS,IAAIG,EAAMF,GACtB,EAAAc,cAAcC,KACd,CACIiB,SAAU4N,EAAUjQ,WAAW4J,UAAY1J,KAAK6L,KAAK4E,OAAOsI,QAAQ1Y,GAAS,GAAKL,KAAK6L,KAAK4E,OAAOtL,OAAS4K,EAAUjQ,WAAW4J,SACjInH,YAAY,EACZF,KAAMH,IACF,MAAM8W,EACC,EAAAhZ,KAAI,OAASuB,EAAI,EAAAvB,KAAI,OAAW,EAAIwB,KAAKmX,IAAI,EAAA3Y,KAAI,OAAgB4X,EAAQ,GAD1EoB,EAEC,EAAAhZ,KAAI,OAAS0B,EAAI,EAAA1B,KAAI,OAAW,EAAIwB,KAAKoX,IAAI,EAAA5Y,KAAI,OAAgB4X,EAAQ,GAG1EqB,EAAU,GACZC,EAAO,EAAID,EAEf3M,EAAIgG,UAAU0G,EAAmBA,GAAoBC,EAAU/W,EAAagX,GACxEF,EAAmBA,GAAoBC,EAAU/W,EAAagX,IAClE5M,EAAI6M,MAAOF,EAAU/W,EAAagX,EAAQD,EAAU/W,EAAagX,GAEjE,IAAIrU,EAAUrD,KAAK2B,MAAM,IAAMjB,GAAYa,SAAS,IAEhD8B,EAAQM,OAAS,IACjBN,EAAU,EAAIA,GAElByH,EAAIgB,UAAYjN,EAAMoC,MAAQoC,EAC9ByH,EAAIa,YAAcR,EAAOyM,WAAW/Y,EAAMoC,MAAO,IAAMP,WAGhE,GAAIlC,KAAK+V,mBACD/V,KAAKmS,WAAW1R,SAASJ,EAAMF,GAAI,EAAAc,cAAcC,QACjD,EAAAlB,KAAI,OAASwY,SAASnY,EAAMF,MAC5BkY,EAAU,CACrB,MAAM/F,EAAY,CAACpQ,EAAoB6E,EAAsBsS,KAOzD,GANArZ,KAAKmS,WAAWzR,OAAOL,EAAMF,GAAI4G,GAEjCuF,EAAIe,UAAY,EAChBf,EAAIuM,SAAW,QACfvM,EAAIwM,QAAU,OAEI,GAAd5W,EACA,OAEAmX,IACAnX,EAAa7B,EAAM6B,YAEvB,MAAMiW,EAAQ9X,EAAMkK,QAAU,EAAAvK,KAAI,OAC9B4X,EAAqC,GAA5BQ,MAAMD,GAAS,EAAIA,GAAa3W,KAAKmM,GAC9C+K,EAAY,EAAA1Y,KAAI,OAAgB4X,EAAQ,EACxCtF,EAAY,CACR/Q,EAAG,EAAAvB,KAAI,OAAoBwB,KAAKmX,IAAID,GAAaxW,EACjDR,EAAG,EAAA1B,KAAI,OAAoBwB,KAAKoX,IAAIF,GAAaxW,GAGzDoK,EAAIgG,UAAUA,EAAU/Q,EAAG+Q,EAAU5Q,GAEjCkW,EAAQpW,KAAKmM,GAAK,IAClBrB,EAAIe,UAAyB,EAAbnL,GACpBoK,EAAIuM,SAAW,QACfvM,EAAIwM,QAAU,QAEdzY,EAAMiS,UAAYA,EAClBjS,EAAM6B,WAAaA,GAGlB,EAAAlC,KAAI,SAAgB,KAApBA,KAAqBA,KAAK+V,iBAAkB1V,IACzCL,KAAKmS,WAAW1R,SAASJ,EAAMF,GAAI,EAAAc,cAAcyR,YAcrD1S,KAAKmS,WAAWjS,IAAIG,EAAMF,GACtB,EAAAc,cAAcwR,UACd,CACItQ,SAAU4N,EAAUjQ,WAAW4J,SAC/BrH,KAAMH,IACFoQ,EAAUpQ,EACN,EAAAjB,cAAcyR,WACdrS,EAAM6B,WAAaA,MApBnClC,KAAKmS,WAAWjS,IAAIG,EAAMF,GACtB,EAAAc,cAAcyR,WACd,CACI9R,MAAOmP,EAAU4C,MAAMC,QACvBzQ,SAAU4N,EAAUjQ,WAAW4J,SAC/BpH,UAAU,EACVD,KAAMH,IACFoQ,EAAUpQ,EACN,EAAAjB,cAAcwR,UACdpS,EAAM6B,WAAaA,KAc3C,CAEA,IAAIoX,EAAS,EAAAtZ,KAAI,SAAU,KAAdA,KAAe,EAAAA,KAAI,OAAU4X,GAE1C,GAAIA,EAAQ,EAAG,CAGX,GAFAtL,EAAIiN,OAEAlZ,EAAMkK,QAAU,EAAG,CACnB,IAAIiP,EAAkB,EAAAxZ,KAAI,SAAU,KAAdA,KAAe,EAAAA,KAAI,OAAW,GAAI4X,EAAQ,GAC5D6B,EAAgB,EAAAzZ,KAAI,SAAU,KAAdA,KAAe,EAAAA,KAAI,OAAW,GAAI4X,EAAQ,GAE9D,MAAM8B,EAAMF,EAAgBjY,EAAI,EAAAvB,KAAI,OAASuB,EAAI,GAAK,EAEtD,IAAIoY,EAAW,CACXpY,EAAGkY,EAAclY,EAAI,GAAKmY,EAC1BhY,EAAG+X,EAAc/X,GAGjBkY,GAAS,EAEb,MAAMpN,EAAYG,EAAOC,YAAYvM,EAAM6Q,OACvC2I,EAAoB,GAAPH,EAAWC,EAASpY,EAAI,GAAKoY,EAASpY,EAAIiL,EAAY,GACnEsN,EAAY,IAAIC,YAAYzN,EAAI0N,aAAaH,EAAYF,EAASjY,EAAI,GAAI8K,EAAY,GAAI,IAAIX,KAAKoO,QAMvG,IAJIJ,EAAa,GAAKA,EAAarN,EAAYxM,KAAKiH,OAAO8F,OACpD4M,EAASjY,EAAI,GAAK,GAAKiY,EAASjY,EAAI,GAAK1B,KAAKiH,OAAOwC,UACxDmQ,GAAS,IAERA,EACD,IAAK,IAAIvY,EAAI,EAAGA,EAAIyY,EAAU3U,OAAQ9D,IAClC,GAAI,EAAAkL,OAAOb,YAAYoO,EAAUzY,IAAK,CAClCuY,GAAS,EACT,KACJ,CAER,IAAKA,EAAQ,CACTtN,EAAIU,YACJV,EAAIuH,OAAO2F,EAAgBjY,EAAGiY,EAAgB9X,GAE9C4K,EAAI4N,iBAAiBT,EAAclY,EAAGkY,EAAc/X,EAAGiY,EAASpY,EAAGoY,EAASjY,GAE5E,IAAImD,EAAUrD,KAAK2B,MAAa9C,EAAMkK,QAAUlK,EAAMA,MAA7B,KAAqC0C,SAAS,IAEnE8B,EAAQM,OAAS,IACjBN,EAAU,EAAIA,GAElByH,EAAIa,YAAc,EAAA7H,MAAMI,KAAOb,EAC/ByH,EAAIwM,QAAU,OACdxM,EAAIuM,SAAW,QACfvM,EAAIe,UAAY,EAChBf,EAAIiB,SAEJjB,EAAIgB,UAAY,EAAAhI,MAAMI,KAAOb,EAC7B,EAAA+I,WAAWuM,cAAc7N,EAAY,GAAPoN,GAC9BpN,EAAIuB,SAASxN,EAAM6Q,MAAOyI,EAASpY,EAAI,EAAImY,EAAKC,EAASjY,EAAI,EACjE,CACJ,CAEA4K,EAAI8N,UAEJ9N,EAAIU,YAEC,EAAAhN,KAAI,QACLsM,EAAIuH,OAAO,EAAA7T,KAAI,OAASuB,EAAG,EAAAvB,KAAI,OAAS0B,GAE5C4K,EAAIwH,OAAO,EAAA9T,KAAI,OAAauB,EAAG,EAAAvB,KAAI,OAAa0B,GAEhD,IAAI2Y,EAAmB,EACnBC,EAAa1C,EAEjB,KAAO0C,EAAa,GAAG,CACnB,IAAIC,EAAeD,EAAa9Y,KAAKmM,GAAK,EAAI,EACzBnM,KAAKmM,GAAK,EACV2M,EAErBhB,EAAS,EAAAtZ,KAAI,SAAU,KAAdA,KAAe,EAAAA,KAAI,OAAUqa,EAAmBE,GAEzD,MAAMC,EAA2BhZ,KAAKmM,GAAK4M,EACvCE,EAA8B,EAAAza,KAAI,OAAWwB,KAAKoX,IAAI4B,EAA2B,GACjFE,EAA2B,EAAA1a,KAAI,SAAU,KAAdA,KAAeya,EAA6BJ,EAAmBE,EAAe,GAE7GjO,EAAI4N,iBAAiBQ,EAAyBnZ,EAAGmZ,EAAyBhZ,EAAG4X,EAAO/X,EAAG+X,EAAO5X,GAE9F2Y,GAAoBE,EAEpBD,GAAc9Y,KAAKmM,GAAK,CAC5B,CAEA,GAAI,EAAA3N,KAAI,QAAkC,GAArBK,EAAMqW,YAAkB,CACzC,MAAMA,EAAc,EAAA1W,KAAI,QAAYK,EAAMqW,YAAc,KAElDiE,EAAc,CAChBpZ,EAAG+X,EAAO/X,GAAO,EAAAvB,KAAI,OAAW0W,IAAgB4C,EAAO/X,EAAI,EAAAvB,KAAI,OAASuB,GAAM,EAAAvB,KAAI,OAClF0B,EAAG4X,EAAO5X,GAAO,EAAA1B,KAAI,OAAW0W,IAAgB4C,EAAO5X,EAAI,EAAA1B,KAAI,OAAS0B,GAAM,EAAA1B,KAAI,QAQtF,IALAsM,EAAIwH,OAAO6G,EAAYpZ,EAAGoZ,EAAYjZ,GAEtC4Y,EAAa,EACbD,EAAmBzC,EAEZ0C,EAAa1C,GAAO,CACvB,IAAI2C,EAAeD,EAAa9Y,KAAKmM,GAAK,EAAIiK,EACzBpW,KAAKmM,GAAK,EACViK,EAAQ0C,EAE7BhB,EAAS,EAAAtZ,KAAI,SAAU,KAAdA,KAAe0W,EAAa2D,EAAmBE,GAExD,MAAMC,EAA2BhZ,KAAKmM,GAAK4M,EACvCE,EAA8B/D,EAAclV,KAAKoX,IAAI4B,EAA2B,GAChFE,EAA2B,EAAA1a,KAAI,SAAU,KAAdA,KAAeya,EAA6BJ,EAAmBE,EAAe,GAE7GjO,EAAI4N,iBAAiBQ,EAAyBnZ,EAAGmZ,EAAyBhZ,EAAG4X,EAAO/X,EAAG+X,EAAO5X,GAE9F2Y,GAAoBE,EAEpBD,GAAc9Y,KAAKmM,GAAK,CAC5B,CAEA2L,EAAS,EAAAtZ,KAAI,SAAU,KAAdA,KAAe,EAAAA,KAAI,OAAU4X,EAC1C,CAEA,IAAK5X,KAAKmS,WAAW1R,SAASJ,EAAMF,GAAI,EAAAc,cAAcC,MAAO,CACzD,MAAM0Z,EAAc,CAAC1Y,EAAoB6E,KAGrC,GAFA/G,KAAKmS,WAAWzR,OAAOL,EAAMF,GAAI4G,GAEf,GAAd7E,EACA,OAEJ,IAAI2C,EAAUrD,KAAK2B,MAAM,IAAM,IAAMjB,GAAYa,SAAS,IACtD8B,EAAQM,OAAS,IACjBN,EAAU,EAAIA,GAElByH,EAAIgB,UAAYjN,EAAMoC,MAAQoC,EAC9ByH,EAAIa,YAAcR,EAAOyM,WAAW/Y,EAAMoC,MAAO,IAAM,IAAMP,IAG3D2Y,EAA6C,GAA9B7a,KAAK8a,eAAe3V,OAEpC,EAAAnF,KAAI,QAAkB,EAAAA,KAAI,QAAkBK,EAAMF,IAC/C0a,IAAiB7a,KAAK8a,eAAetC,SAASnY,EAAMF,IACxDH,KAAKmS,WAAWjS,IACZG,EAAMF,GACN,EAAAc,cAAc8Z,gBACd,CACI5Y,SAAU4N,EAAUjQ,WAAW4J,SAC/BrH,KAAMH,IACF0Y,EAAY1Y,EAAY,EAAAjB,cAAc+Z,qBAIrBhV,MAAtB,EAAAhG,KAAI,QAAgC6a,GAC3C7a,KAAKmS,WAAWjS,IACZG,EAAMF,GACN,EAAAc,cAAc+Z,iBACd,CACIpa,MAAOmP,EAAU4C,MAAMC,QACvBzQ,SAAU4N,EAAUjQ,WAAW4J,SAC/BpH,UAAU,EACVD,KAAMH,IACF0Y,EAAY1Y,EAAY,EAAAjB,cAAc8Z,mBAK1D,CAEAzO,EAAI2O,YAEJ3O,EAAIkB,OACJlB,EAAIiB,SAEJ,EAAAvN,KAAA,IAAAA,KAAA,OAAqB4X,EAAK,IAC9B,CAEAtL,EAAI4O,iBAEJ,EAAAlb,KAAI,EAAesZ,EAAM,IAC7B,EAAC,WAES6B,EAAgBvD,GACtB,MAAO,CACHrW,EAAG,EAAAvB,KAAI,OAASuB,EAAI4Z,EAAS3Z,KAAKmX,IAAI,EAAA3Y,KAAI,OAAgB4X,GAC1DlW,EAAG,EAAA1B,KAAI,OAAS0B,EAAIyZ,EAAS3Z,KAAKoX,IAAI,EAAA5Y,KAAI,OAAgB4X,GAElE,EAAC,WAEe7Q,EAAmB1G,GAC/B,MAeM+a,EAAkB9X,GACbA,EAAE/B,EAAI+B,EAAE/B,EAAI+B,EAAE5B,EAAI4B,EAAE5B,GAAK,EAAA1B,KAAI,OAAW,EAAAA,KAAI,UACvC,EAAAA,KAAI,QAAasD,EAAE/B,EAAI+B,EAAE/B,EAAI+B,EAAE5B,EAAI4B,EAAE5B,GACnC,EAAA1B,KAAI,QAAYK,EAAMqW,YAAc,KAAO,EAAA1W,KAAI,QAAYK,EAAMqW,YAAc,MAG3F2E,EAAQrb,KAAKsb,iBAAiBvU,GAChCwU,EAAQ,CACJha,EAAG8Z,EAAM9Z,EAAI,EAAAvB,KAAI,OAASuB,EAC1BG,EAAG2Z,EAAM3Z,EAAI,EAAA1B,KAAI,OAAS0B,GAE9B8Z,EAAQ,CACJja,EAAG8Z,EAAM9Z,EAAI,EAAAvB,KAAI,OAASuB,EAAIlB,EAAMiS,WAAW/Q,EAC/CG,EAAG2Z,EAAM3Z,EAAI,EAAA1B,KAAI,OAAS0B,EAAIrB,EAAMiS,WAAW5Q,GAGvD,MA/BgB,CAAC2Z,IACb,IAAIhY,EAAI7B,KAAKia,MAAMJ,EAAM3Z,EAAI,EAAA1B,KAAI,OAAS0B,EAAG2Z,EAAM9Z,EAAI,EAAAvB,KAAI,OAASuB,GAChE8B,EAAI,IACJA,GAAe,EAAV7B,KAAKmM,IACVtK,EAAI,EAAArD,KAAI,SACRqD,EAAc,EAAV7B,KAAKmM,GAASnM,KAAKka,IAAI,EAAA1b,KAAI,OAAeqD,GAAK,EAAArD,KAAI,QAE3D,IAAI+U,EAAQ,EAAA/U,KAAI,OAAS2b,UAAUC,GAAKA,EAAEzb,IAAME,EAAMF,IAClD0b,EAAY,EAAA7b,KAAI,OAAS+U,GAAO+B,IAEpC,OAAS9W,KAAKyW,UAAUxE,UACd4J,GAAaxY,GACbwY,EAAY,EAAA7b,KAAI,OAAS+U,GAAO1U,MAAQgD,GAAK,GAmBpDyY,CAAQT,KAAWD,EAAeG,IAAUH,EAAeI,GACtE,EAAC,aAGG,MAAMlP,EAAM,EAAAC,OAAOjB,WAAWtL,KAAKiH,QAEnCqF,EAAIU,YAEJV,EAAIoB,IAAI,EAAA1N,KAAI,OAASuB,EAAG,EAAAvB,KAAI,OAAS0B,EAAG,EAAA1B,KAAI,OAAU,EAAG,EAAIwB,KAAKmM,IAClErB,EAAIa,YAAc,EAAA7H,MAAMI,KACxB4G,EAAIiB,SAEJ,EAAAK,WAAWiF,QAAQvG,GACnBA,EAAIuB,SAAS,EAAApD,cAAcK,gBAAiB,EAAA9K,KAAI,OAASuB,EAAG,EAAAvB,KAAI,OAAS0B,GAEzEuW,sBAAsBjY,KAAKmH,OAAO+Q,KAAKlY,MAC3C,EAAC,aAGG,GAAI,EAAAA,KAAI,OAAuB,CAC3B,MAAMsM,EAAM,EAAAC,OAAOjB,WAAWtL,KAAKiH,QAEnC,EAAAjH,KAAI,OAAiB,KAArBA,KAAsBsM,GACtBA,EAAIuB,SAAS7N,KAAK6L,KAAKkQ,WAAY,EAAA/b,KAAI,OAASuB,EAAG,EAAAvB,KAAI,OAAS0B,EACpE,CACJ,EAAC,aAGG,MAAMsa,EAAchc,KAAKmG,SAASkR,MACZtH,EAAUkM,OAAOD,YACjB,EAEhBE,EAAYlc,KAAKiH,OAAO8F,MAAQ/M,KAAKiH,OAAOwC,OAAuB,EAAduS,EACvChc,KAAKiH,OAAOwC,OAAuB,EAAduS,EACrBhc,KAAKiH,OAAO8F,MAEhC,EAAA/M,KAAI,EAAW,CACXuB,EAAGvB,KAAKiH,OAAO8F,MAAQ,EACvBrL,EAAGsa,EAAchc,KAAKiH,OAAOwC,OAAS,GACzC,KAED,IAAI0S,EAAe,EAEnB,IAAK,MAAM9b,KAASL,KAAK6L,KAAK4E,OAAQ,CAClC,MAAM1D,EAAQJ,EAAOC,YAAYvM,EAAM6Q,OAEnCnE,EAAQoP,IACRA,EAAepP,EACvB,CAEA,EAAA/M,KAAI,EAAWkc,EAAY,GAAKC,EAAe,IAAG,KAE9C,EAAAnc,KAAI,OAAWkc,EAAY,EAAI,IAC/B,EAAAlc,KAAI,EAAWkc,EAAY,EAAI,GAAE,KAETlW,MAAxBhG,KAAK6L,KAAKkQ,YAAmD,IAAxB/b,KAAK6L,KAAKkQ,aAC/C,EAAA/b,KAAI,EAAoB,EAAA4N,WAAWwO,MAAK,KACxC,EAAApc,KAAI,EAAwB2M,EAAOC,YAAY5M,KAAK6L,KAAKkQ,WAAY,IACtC/b,KAAK6L,KAAK6K,YAAc,IAAO,EAAA1W,KAAI,OAAW,EAAC,KAEzE,EAAAA,KAAI,SACL,EAAAA,KAAI,EAAoB,EAAA4N,WAAWiF,QAAO,KAC1C,EAAA7S,KAAI,EAAwB2M,EAAOC,YAAY5M,KAAK6L,KAAKkQ,WAAY,IACtC/b,KAAK6L,KAAK6K,YAAc,IAAO,EAAA1W,KAAI,OAAW,EAAC,MAG7E,EAAAA,KAAI,QACL2W,QAAQC,KAAK,mDAGrB,EAAA5W,KAAI,EAAmC,GAAf,EAAAA,KAAI,OAAa,IAC7C,C,ssCChlBJ,eACA,WAEA,SACA,SAGA,SAEA,SACA,SACA,SACA,YAEA,MAAaoV,UAAiC,EAAAiH,WAS1C,WAAAtc,CAAYsV,GACRnL,MAAMmL,G,YALA,KAAA2C,WAAqB,EAO3BhY,KAAK6L,KAAU7L,KAAKmG,SAAS0F,KAE7B7L,KAAK8a,eAAiB,GAEtB9a,KAAKkW,MAAQlW,KAAKmG,SAASmW,qBAAuB,EAAAnG,YAAYC,KAAO,EAAAD,YAAYjV,IACrF,CAEA,MAAAiG,GACI+C,MAAM/C,SAENnH,KAAKuc,aACT,CAEA,OAAAlV,GACIrH,KAAKgY,WAAY,EAEjBhY,KAAKiH,OAAOuV,QAChB,CAEA,cAAAnG,GACIrW,KAAKuY,aAAevY,KAAKyW,UAAUtP,OAAOnH,KAAK+V,iBAAkB/V,KAAKuY,aAC1E,CAEA,MAAA/P,GACI,EAAAxI,KAAI,SAAgB,KAApBA,MACAA,KAAK6J,QAAQpB,UACbzI,KAAKyW,UAAUjO,QACnB,CAEA,eAAAH,GACI,MAAMoU,EAAUzc,KAAKoG,KAAKsW,cAAevQ,wBAEzCnM,KAAKmG,SAASwW,SAAWvE,OAAOpY,KAAKmG,SAAS4G,OACnB,GACC/M,KAAKmG,SAAS4G,MAC1C/M,KAAKmG,SAASyW,UAAYxE,OAAOpY,KAAKmG,SAASsD,QACnB,GACCzJ,KAAKmG,SAASsD,OAE3CzJ,KAAKmG,SAAS4G,MAAkC,GAA1B/M,KAAKmG,SAASwW,UAAiBF,EAAQ1P,MAAQ/M,KAAKmG,SAASwW,SAC3D3c,KAAKmG,SAASwW,SACdF,EAAQ1P,MAEhC/M,KAAKmG,SAASsD,OAAoC,GAA3BzJ,KAAKmG,SAASyW,WAAkBH,EAAQhT,OAASzJ,KAAKmG,SAASyW,UAC7D5c,KAAKmG,SAASyW,UACdH,EAAQhT,OAEjCzJ,KAAKiH,OAAO8F,MAAQ/M,KAAKmG,SAAS4G,MAClC/M,KAAKiH,OAAOwC,OAASzJ,KAAKmG,SAASsD,OAEnC,MAAMoT,EAAY7c,KAAKmG,SAAS0W,WAAalQ,EAAOmQ,cACpD,IAAIC,EAAavb,KAAK2B,MAAM,IAAMnD,KAAKmG,SAAS0F,KAAK4E,OAAOtL,QACxD6X,GAAgB,GAEhBD,GAAc,IACdA,EAAa,GAEjB,IAAK,IAAIjb,KAAQ9B,KAAKmG,SAAS0F,KAAK4E,OAChC3O,EAAK3B,GAAKwM,EAAOoK,OACjBjV,EAAKW,QAAUkK,EAAO4F,YAAYsK,EAAWG,GAAgBD,GAC7Djb,EAAKoP,QAAU,EAAAzG,cAAcW,QAEzBtJ,EAAKoP,MAAM/L,OAAS,KACpBrD,EAAKoP,MAAQpP,EAAKoP,MAAMlO,MAAM,EAAG,IAAM,OAG/C,IAAK,IAAIlB,KAAQ9B,KAAKmG,SAASoP,aAAe,GAC3BvP,MAAXlE,EAAK3B,KACL2B,EAAKmS,OAASpI,GAAQ7L,KAAKoG,KAAK6W,cAAc,IAAIC,YAAYpb,EAAK3B,IAAM,GAAI,CAAEgd,OAAQtR,KACnG,CAEA,YAAAvD,GACA,CAEA,iBAAAgO,CAAkBzK,GACd,GAAI7L,KAAKyW,UAAUxE,SAGf,OAFAjS,KAAKwW,wBAAqBxQ,GAEnB,EAGX,GAA+BA,MAA3BhG,KAAKwW,oBAAwE,GAArCxW,KAAKmG,SAASoP,aAAapQ,OAAa,CAChF,GAAwBa,MAApBhG,KAAKuV,aAAyDvP,MAA7BhG,KAAKmG,SAASoP,YAA0B,CACzE,IAAI6H,EAAwB,GAE5B,IAAK,MAAMtb,KAAQ9B,KAAKmG,SAASoP,YACxBzT,EAAKkK,YAAalK,EAAKkK,UAAUH,IAClCuR,EAAMxM,KAAK,CACPzQ,GAAI2B,EAAK3B,GACTuF,KAAM5D,EAAK4D,KACXkO,UAAW9R,EAAK8R,UAChBK,OAAQ,KACJnS,EAAKmS,OAAOpI,GAEZ7L,KAAKwW,wBAAqBxQ,EAC1BhG,KAAKuV,iBAAcvP,KAInChG,KAAKuV,YAAc,IAAI,EAAAyB,SAAShX,KAAKiH,OAAQ,CACzC1F,EAAGvB,KAAKwW,mBAAmBjV,EAAIvB,KAAKqd,eAAe9b,EACnDG,EAAG1B,KAAKwW,mBAAmB9U,EAAI1B,KAAKqd,eAAe3b,EACnDwR,MAAOkK,EACPvR,KAAMA,IAGV7L,KAAKuV,YAAY/M,SAEjBxI,KAAKuY,kBAAevS,CACxB,CAEA,MAAMsX,EAA+BtX,MAArBhG,KAAKuY,aAIrB,GAFAvY,KAAKuY,aAAevY,KAAKuV,aAAapO,OAAOnH,KAAK+V,iBAAkB/V,KAAKuY,cAEhDvS,MAArBhG,KAAKuY,cAA6B+E,EAIlC,OAHAtd,KAAKuV,iBAAcvP,EACnBhG,KAAKwW,wBAAqBxQ,GAEnB,CAEf,CAEA,OAAO,CACX,CAEA,SAAAwB,CAAUnH,GAEFL,KAAK8a,eADLza,EACsB,CAACA,EAAMF,IAEP,EAC9B,CAEA,cAAA+G,GACIlH,KAAKyW,UAAUrC,QACfpU,KAAKwW,wBAAqBxQ,CAC9B,CAEU,WAAAuW,GACN,MAAMjQ,EAAM,EAAAC,OAAOjB,WAAWtL,KAAKiH,QAE/BjH,KAAKmG,SAASkR,QACd,EAAAzJ,WAAWyJ,MAAM/K,GACjBA,EAAIuB,SAAS7N,KAAKmG,SAASkR,MAAOrX,KAAKiH,OAAO8F,MAAQ,EAAGgD,EAAUkM,OAAOD,aAElF,CA2BU,gBAAAV,CAAiBvU,GACvB,MAAO,CACHxF,EAAGwF,EAAM8F,QAAU7M,KAAKqd,eAAe9b,EAAI6K,QAC3C1K,EAAGqF,EAAM+F,QAAU9M,KAAKqd,eAAe3b,EAAI2K,QAEnD,EA7LJ,a,2BAgKQ,IAAIoQ,EAAUzc,KAAKoG,KAAK+F,wBAExBnM,KAAKmG,SAAS4G,MAAQ/M,KAAKmG,SAASwW,UAAYF,EAAQ1P,MAAQ/M,KAAKmG,SAASwW,SACtD3c,KAAKmG,SAASwW,SACdF,EAAQ1P,MAChC/M,KAAKmG,SAASsD,OAASzJ,KAAKmG,SAASyW,WAAaH,EAAQhT,OAASzJ,KAAKmG,SAASyW,UACxD5c,KAAKmG,SAASyW,UACdH,EAAQhT,OAEjCzJ,KAAKiH,OAAO8F,MAAQ/M,KAAKmG,SAAS4G,MAClC/M,KAAKiH,OAAOwC,OAASzJ,KAAKmG,SAASsD,OAE/BzJ,KAAKmG,SAASE,eACmBL,MAA7BhG,KAAKmG,SAASoX,aACXvd,KAAKmG,SAASoX,aAAe,EAAAC,YAAYC,KACzCzd,KAAKmG,SAASoX,aAAe,EAAAC,YAAYE,SAC5C1d,KAAKiH,OAAOwC,QAAU,EAAAnD,OAAOqX,gBAAgB3d,KAAKmG,SAAS0F,KAAK4E,OAAQzQ,KAAKiH,OAAO8F,QAEpF/M,KAAKmG,SAASoX,aAAe,EAAAC,YAAYI,MACtC5d,KAAKmG,SAASoX,aAAe,EAAAC,YAAYK,QAC5C7d,KAAKiH,OAAO8F,OAAS,KAEjC,C,iFChMJ,iBAKI,cAAOwD,CAAQ1E,GACX,MAAMvL,EAAM,QAEZ,IAAImQ,EAAuB,GAE3B,IAAK,MAAMpQ,KAASwL,EAAK4E,OACrBA,EAAOG,KAAK,CACRK,KAAM5Q,EAAM6Q,MACZT,OAAQ,IAAIxQ,IAAI,CAAC,CAACK,EAAKD,EAAMA,WAGrC,MAAO,CACHmQ,QAAS,CACL,CACInQ,MAAOC,EACPuI,QAASvI,IAGjBmQ,OAAQA,EAEhB,E,qFCzBJ,qBAOI,cAAOF,CAAQ1E,GACX,MAAMvL,EAAM,QAEZ,IAAImQ,EAAuB,GAE3B,IAAK,MAAMpQ,KAASwL,EAAK4E,OACrBA,EAAOG,KAAK,CACRK,KAAM5Q,EAAM6Q,MACZT,OAAQ,IAAIxQ,IAAI,CAAC,CAACK,EAAKD,EAAMA,WAGrC,MAAO,CACHmQ,QAAS,CACL,CACInQ,MAAOC,EACPuI,QAASvI,IAGjBmQ,OAAQA,EAEhB,E,8EChCJ,cAeI,MAAApG,CAAOnI,GACe,GAAdA,IACAlC,KAAKsK,UAAYtK,KAAKsK,SAC9B,CAEA,cAAAE,GACI,OAAO,CACX,CAEA,KAAA/C,GACIzH,KAAKsK,UAAW,CACpB,E,2nDC1BJ,eACA,SACA,WAIA,SAEA,SACA,SACA,SAEA,SACA,QACA,SACA,SACA,SACA,SACA,SACA,SACA,SACA,YAEA,MAAaxC,UAAqB,EAAAsN,SA6B9B,WAAArV,CAAYsV,GAKR,GAJAnL,MAAMmL,G,YA7BV,mBAEA,mBAEA,mBAEA,mBAEA,mBAEA,mBAEA,mBAEA,mBAEA,mBAEA,mBAEA,mBAEA,mBAEA,mBAEA,mBAKIrV,KAAK6L,KAAK4E,OAASzQ,KAAK6L,KAAK4E,OAAOhE,IAAInJ,GAAK,IAAI,EAAAwa,WAAWxa,IAExDtD,KAAK6L,KAAK4E,OAAOa,OAAOhO,GAAKA,EAAElD,MAAQ,EAAA2d,SAASC,KAAK7Y,OAAS,EAC9D,IAAK,IAAIuL,KAAU1Q,KAAK6L,KAAK4E,OAAQ,CACjC,IAAK,IAAI3O,KAAQ4O,EAAOD,OAAQ,CAC5B,MAAMlP,EAAIO,EAAKP,EACfO,EAAQ,EAAIA,EAAKJ,EACjBI,EAAQ,EAAIP,CAChB,CAEAmP,EAAOD,OAAOc,KAAK,CAAClO,EAAGsB,IAAMA,EAAEpD,EAAI8B,EAAE9B,EAAI,GAAK,EAClD,CAGJ,EAAAvB,KAAI,EAAa,CACb4P,IAAK,GACLqO,MAAO,GACPC,OAAQ,GACRvO,KAAM,IACT,KAEG3P,KAAK6L,KAAKsS,QACV,EAAAne,KAAI,EAAa,CACb4P,IAAK,GACLqO,MAAO,GACPC,OAAQ,GACRvO,KAAM,IACT,KAED3P,KAAKmG,SAASkR,QACd,EAAArX,KAAI,OAAW4P,KAAOG,EAAUkM,OAAOD,aAE3Chc,KAAK6J,QAAU,IAAI,EAAAuU,QAAQpe,KAAKiH,OAAQjH,KAAKmG,UAE7C,EAAAnG,KAAI,EAAY,IAAIC,IAAK,KACzB,EAAAD,KAAI,EAAY,IAAIC,IAAK,IAC7B,CAEA,MAAAkH,GACI+C,MAAM/C,SAEN,IAAIkX,EAAe,CACf,IAAI,EAAAvG,aAAa,EAAA9X,KAAI,OAAUW,IAAIa,KAAK2B,MAAM,EAAAnD,KAAI,UAC9B,EAAAA,KAAI,OAAUW,IAAIa,KAAK2B,MAAM,EAAAnD,KAAI,WAGzD,MAAMsM,EAAM,EAAAC,OAAOjB,WAAWtL,KAAKiH,QAEnC,EAAA2G,WAAWiF,QAAQvG,GACnBA,EAAIuM,SAAW,QAEf,MAAMyF,EAAqB,EAAAhZ,MAAM4P,WAEjC,EAAAlV,KAAI,SAAiB,KAArBA,MACA,EAAAA,KAAI,SAAY,KAAhBA,MAAiB,GAEjB,IAAIuB,EAAI,EACJG,EAAI,EACJ6c,EAAS,EACTC,EAAU,EACVC,EAAc,EAElB,MAAMC,EAAiB1e,KAAK6L,KAAK4E,OAAOa,OAAOgH,IAAMA,EAAEhO,UAEvD,IAAIqU,EAAe,EACfC,EAAeF,EAAepN,OAAOgH,GAAKA,EAAElY,MAAQ,EAAA2d,SAAS5U,QAAQhE,OAErE0Z,EAAY,EACZC,EAAYJ,EAAepN,OAAOgH,GAAKA,EAAElY,MAAQ,EAAA2d,SAASC,KAAK7Y,OAE/D4Z,EAAsB,GAC1B,IAAK,IAAI1d,EAAI,EAAGA,EAAI,EAAArB,KAAI,OAAamF,OAAQ9D,IACzC0d,EAAoBnO,KAAK,GAE7B,IAAK,MAAMF,KAAUgO,EAAgB,CACjCpS,EAAIU,YAEJV,EAAIa,YAAcuD,EAAOjO,MACzB6J,EAAIgB,UAAYoD,EAAOjO,MACvB6J,EAAIe,UAAYqD,EAAO3D,MACvBT,EAAIwM,QAAU,QAEd,MAAM+B,EAA6C,GAA9B7a,KAAK8a,eAAe3V,OAEzC,IAAKnF,KAAKmS,WAAW1R,SAASiQ,EAAOvQ,GAAI,EAAAc,cAAcC,MAAO,CAC1D,MAAM0Z,EAAc,CAAC1Y,EAAoB6E,KAGrC,GAFA/G,KAAKmS,WAAWzR,OAAOgQ,EAAOvQ,GAAI4G,GAEhB,GAAd7E,EACA,OAEJ,IAAI2C,EAAUrD,KAAK2B,MAAM,IAAM,IAAMjB,GAAYa,SAAS,IACtD8B,EAAQM,OAAS,IACjBN,EAAU,EAAIA,GAElByH,EAAIgB,UAAYoD,EAAOjO,MAAQoC,EAC/ByH,EAAIa,YAAcuD,EAAOjO,MAAQoC,GAGjCgW,IAAiB7a,KAAK8a,eAAetC,SAAS9H,EAAOvQ,IACrDH,KAAKmS,WAAWjS,IACZwQ,EAAOvQ,GACP,EAAAc,cAAc8Z,gBACd,CACI5Y,SAAU4N,EAAUjQ,WAAW4J,SAC/BrH,KAAMH,IACF0Y,EAAY1Y,EAAY,EAAAjB,cAAc+Z,qBAI1CH,GACR7a,KAAKmS,WAAWjS,IACZwQ,EAAOvQ,GACP,EAAAc,cAAc+Z,iBACd,CACIpa,MAAOmP,EAAU4C,MAAMC,QACvBzQ,SAAU4N,EAAUjQ,WAAW4J,SAC/BpH,UAAU,EACVD,KAAMH,IACF0Y,EAAY1Y,EAAY,EAAAjB,cAAc8Z,mBAK1D,CAEA,OAAQrK,EAAOsO,UACX,KAAK,EAAAC,SAASC,KACV5S,EAAIqH,YAAY,CAAgB,EAAfjD,EAAO3D,MAA0B,EAAf2D,EAAO3D,QAE1C,MAEJ,KAAK,EAAAkS,SAASE,OACV7S,EAAIqH,YAAY,CAACjD,EAAO3D,MAAO2D,EAAO3D,QAI1C,KAAK,EAAAkS,SAASG,OAKlB,IAAK,MAAM/e,KAASqQ,EAAOD,OAAQ,CAC/B,IAAIsE,EAAQrE,EAAOD,OAAOsI,QAAQ1Y,GAC9Bgf,EAAS,EAAArf,KAAI,OAAa+Y,QAAQ/Y,KAAK6L,KAAKgF,OAAS,EAAAC,aAAajQ,KAAOR,EAAMkB,GAAGwB,WAAa1C,EAAMkB,GACrG+d,EAAS,EAAAtf,KAAI,OAAa+Y,QAAQ1Y,EAAMqB,GAE5C,MAAM6d,EAAkB,KACb,CACHhe,EAAGlB,EAAMkB,EACJvB,KAAK6L,KAAKgF,OAAS,EAAAC,aAAajQ,KAC9B,EAAAb,KAAI,OAAaqf,GACjB,EAAAtO,UAAUgH,OAAO,EAAA/X,KAAI,OAAaqf,IACpC,IACL3d,EAAGrB,EAAMqB,EACJ,EAAAqP,UAAUgH,OAAO,EAAA/X,KAAI,OAAasf,IAClC,MAUb,OANA/d,EAAI,EAAAvB,KAAI,OAAW2P,KACfe,EAAOtQ,MAAQ,EAAA2d,SAASC,MACxBzc,GAAK8d,EAAS,EAAArf,KAAI,OAAIwf,MACtB9O,EAAOtQ,MAAQ,EAAA2d,SAAS0B,OACxBle,GAAK,EAAAvB,KAAI,OAAIwf,KAAO,EAAI,EAAAxf,KAAI,OAAIwf,MAE5B9O,EAAOtQ,MACX,KAAK,EAAA2d,SAAS0B,KACV/d,EAAI,EAAA1B,KAAI,OAAW4P,IAAM,EAAA5P,KAAI,OAAOyJ,OAAiBpJ,EAAMqB,EAAI,EAAA1B,KAAI,OAAI0f,KAAO,EAAA1f,KAAI,OAAIwf,KAChFhe,KAAKka,IAAI,EAAA1b,KAAI,OAAI4C,IAAM,EAAA5C,KAAI,OAAI0f,KAAO,EAAA1f,KAAI,OAAIwf,MAEpD,MAAMG,EAAgB,KAAOjP,EAAOD,OAAOtL,OAAS,IAEpD,GAAInF,KAAKkW,OAAS,EAAAC,YAAYjV,MAAQlB,KAAKmS,WAAW1R,SAASJ,EAAMF,GAAI,EAAAc,cAAcC,MACnFlB,KAAKmS,WAAWjS,IAAIG,EAAMF,GACtB,EAAAc,cAAcC,KACd,CACIN,MAAO,IAAIC,KAAKA,KAAK+e,OAAOC,gBAAgBF,GAAiB5K,EAAQ,IACrE5S,SAAUwd,EACVpd,YAAY,EACZF,KAAMH,IACF,GAAa,GAAT6S,EACA,OAEJxT,EAAI,EAAAvB,KAAI,OAAW2P,KAAO0P,EAAS,EAAArf,KAAI,OAAIwf,KAAO,EAAAxf,KAAI,OAAIwf,KAAO,EACjE9d,EAAI,EAAA1B,KAAI,OAAW4P,IAAM,EAAA5P,KAAI,OAAOyJ,OAAiBpJ,EAAMqB,EAAI,EAAA1B,KAAI,OAAI0f,KAAO,EAAA1f,KAAI,OAAIwf,KAChFhe,KAAKka,IAAI,EAAA1b,KAAI,OAAI4C,IAAM,EAAA5C,KAAI,OAAI0f,KAAO,EAAA1f,KAAI,OAAIwf,MAEpD,MAAMM,EAAOpP,EAAOD,OAAOsE,EAAQ,GAEnC,IAAIgL,EAAY,CACZxe,EAAG,EAAAvB,KAAI,OAAW2P,KAAO0P,EAAS,EAAArf,KAAI,OAAIwf,KAAO,EAAAxf,KAAI,OAAIwf,KAAO,EAChE9d,EAAG,EAAA1B,KAAI,OAAW4P,IAAM,EAAA5P,KAAI,OAAOyJ,OAAiBqW,EAAKpe,EAAI,EAAA1B,KAAI,OAAI0f,KAAO,EAAA1f,KAAI,OAAIwf,KAC/Ehe,KAAKka,IAAI,EAAA1b,KAAI,OAAI4C,IAAM,EAAA5C,KAAI,OAAI0f,KAAO,EAAA1f,KAAI,OAAIwf,OAGvD,MAAMQ,EAAYD,EAAUxe,GAAK,EAAAvB,KAAI,OAAIwf,MAAQje,EAAIwe,EAAUxe,IAAMW,EACjE+d,EAAYF,EAAUre,GAAKA,EAAIqe,EAAUre,GAAKQ,EAE9C6d,EAAUxe,GAAKye,GAAaD,EAAUre,GAAKue,IAC3C3T,EAAIuH,OAAOkM,EAAUxe,EAAGwe,EAAUre,GAClC4K,EAAIwH,OAAOkM,EAAWC,YAOtC,GAFA3T,EAAIwH,OAAOvS,EAAGG,GAEV,EAAA1B,KAAI,SAAO,KAAXA,KAAYuB,GAAI,CAChB,MAAM2e,EAAQlgB,KAAKsb,iBAAiBtb,KAAK+V,kBAErCvU,KAAKka,IAAIwE,EAAMxe,EAAIA,GAAK,IACxB,EAAA1B,KAAI,EAAW,CACXuB,EAAGA,EACHG,EAAGA,EACHqT,MAAOA,EACPlJ,KAAMxL,EAAMwL,KACZ6E,OAAQA,GACX,KAED2N,EAAazN,KAAK,IAAI,EAAAkH,aAAa,GAAIpH,EAAOQ,UAAYqO,IAAkB7d,IAAMgP,EAAOjO,QACzF,EAAAzC,KAAI,EAAauB,EAAI,EAAAvB,KAAI,OAAIwf,KAAO,EAAC,KAE7C,CAGJ,MAEJ,KAAK,EAAAzB,SAASoC,cACV5B,EAASve,KAAKiH,OAAOwC,OAAS,EAAAzJ,KAAI,OAAWke,OAAiB7d,EAAMqB,EAAI,EAAA1B,KAAI,OAAI0f,KAAO,EAAA1f,KAAI,OAAIwf,KAE/FlT,EAAIuH,OAAO,EAAA7T,KAAI,OAAW2P,KAAM4O,GAE5Bve,KAAKkW,OAAS,EAAAC,YAAYjV,MAAQlB,KAAKmS,WAAW1R,SAASJ,EAAMF,GAAI,EAAAc,cAAcC,MACnFlB,KAAKmS,WAAWjS,IAAIG,EAAMF,GACtB,EAAAc,cAAcC,KACd,CACIiB,SAAU,KACVI,YAAY,EACZF,KAAMH,IACFoK,EAAIwH,OAAO,EAAA9T,KAAI,OAAW2P,MAAQ3P,KAAKiH,OAAO8F,MAAQ,EAAA/M,KAAI,OAAW2P,KAAO,EAAA3P,KAAI,OAAWie,OAAS/b,EAChGlC,KAAKiH,OAAOwC,OAAS,EAAAzJ,KAAI,OAAWke,OAAiB7d,EAAMqB,EAAI,EAAA1B,KAAI,OAAI0f,KAAO,EAAA1f,KAAI,OAAIwf,SAItGlT,EAAIwH,OAAO9T,KAAKiH,OAAO8F,MAAQ,EAAA/M,KAAI,OAAWie,MAAOM,GAEzD,MAEJ,KAAK,EAAAR,SAAS5U,OACVoV,EAAiBle,EAAMqB,EAAI1B,KAAK6L,KAAKuU,KAAOpgB,KAAK6L,KAAKuU,KAAe/f,EAAMqB,EAE3EA,EAAI,EAAA1B,KAAI,OAAOyJ,OAAS8U,EAAS,EAAAve,KAAI,OAAI6C,IACrCnB,EAAI,EAAA1B,KAAI,OAAIqgB,UACZ3e,EAAI,EAAA1B,KAAI,OAAIqgB,SAEhB5B,EAAc,EAAAze,KAAI,OAAIwf,MAAQ9O,EAAO3D,MAAQ2D,EAAO3D,MAAQ,IAAM,IAAM6R,EAExEtS,EAAIU,YAEAhN,KAAKkW,OAAS,EAAAC,YAAYjV,MAAQlB,KAAKmS,WAAW1R,SAASJ,EAAMF,GAAKwe,EAAc,EAAA1d,cAAcC,MAClGlB,KAAKmS,WAAWjS,IAAIG,EAAMF,GAAKwe,EAC3B,EAAA1d,cAAcC,KACd,CACIiB,SAAU,IACVI,YAAY,EACZF,KAAMH,IACFqc,EAAiBle,EAAMqB,EAAI1B,KAAK6L,KAAKuU,KAAOpgB,KAAK6L,KAAKuU,KAAe/f,EAAMqB,EAE3EH,EAAI,EAAAvB,KAAI,OAAW2P,KAAO0P,EAAS,EAAArf,KAAI,OAAIwf,KAC3C9d,EAAI,EAAA1B,KAAI,OAAOyJ,OAAS8U,EAAS,EAAAve,KAAI,OAAI6C,IAAMX,EAE3CR,EAAI,EAAA1B,KAAI,OAAIqgB,UACZ3e,EAAI,EAAA1B,KAAI,OAAIqgB,QAAUne,GAE1Byc,EAAe3e,KAAK6L,KAAK4E,OAAOa,OAAOgH,GAAKA,EAAElY,MAAQ,EAAA2d,SAAS5U,QAC3C4P,QAAQrI,GAE5BpE,EAAIW,UAAU1L,EAAIod,EAAeF,GAAe,EAAAze,KAAI,OAAIwf,KAAOZ,EAAeH,GAAe,EACzFze,KAAKiH,OAAOwC,OAAS,EAAAzJ,KAAI,OAAWke,OAASxc,EAC7C+c,EACA/c,EACA,CAAC,EAAG,EAAG,EAAG,IACd4K,EAAIkB,YAIZ,EAAAxN,KAAI,SAAU,KAAdA,KAAeuB,EAAIod,EAAeF,GAAe,EAAAze,KAAI,OAAIwf,KAAOZ,EAAeH,GAAe,EAC1Fze,KAAKiH,OAAOwC,OAAS,EAAAzJ,KAAI,OAAWke,OAASxc,EAC7C+c,EACA/c,IAC8BsE,MAA9BhG,KAAKuV,aAAatD,UACe,GAA9BjS,KAAKuV,aAAatD,WACzB,EAAAjS,KAAI,EAAW,CACXuB,EAAGA,EACHG,EAAGA,EACHqT,MAAOA,EACPlJ,KAAMxL,EAAMwL,KACZ6E,OAAQA,GACX,KAED2N,EAAazN,KAAK,IAAI,EAAAkH,aAAa,GAAIpH,EAAOQ,UAAYqO,IAAkB7d,IAAMgP,EAAOjO,QACzF,EAAAzC,KAAI,EAAauB,EAAC,MAGtB+K,EAAIW,UAAU1L,EAAIod,EAAeF,GAAe,EAAAze,KAAI,OAAIwf,KAAOZ,EAAeH,GAAe,EACzFze,KAAKiH,OAAOwC,OAAS,EAAAzJ,KAAI,OAAWke,OAASxc,EAC7C+c,EACA/c,EACA,CAAC,EAAG,EAAG,EAAG,IACd4K,EAAIkB,QAGR,MAEJ,KAAK,EAAAuQ,SAASC,IACVtc,EAAI,EAAA1B,KAAI,OAAW4P,IAAM0P,EAAS,EAAAtf,KAAI,OAAIwf,KAAO,EAAAxf,KAAI,OAAIwf,KAAO,GACzD,IAAM9O,EAAO3D,OAAS,EAAA/M,KAAI,OAAIwf,KAAO,IAAM,EAElD,MAAMc,EAAgB5P,EAAO3D,MAAQ,EAAA/M,KAAI,OAAIwf,KAAO,IAAOV,EAEvD9e,KAAKkW,OAAS,EAAAC,YAAYjV,MAAQlB,KAAKmS,WAAW1R,SAASJ,EAAMF,GAAK0e,EAAW,EAAA5d,cAAcC,MAC/FlB,KAAKmS,WAAWjS,IAAIG,EAAMF,GAAK0e,EAC3B,EAAA5d,cAAcC,KACd,CACIiB,SAAU,IACVI,YAAY,EACZF,KAAMH,IACFR,EAAI,EAAA1B,KAAI,OAAW4P,IAAM0P,EAAS,EAAAtf,KAAI,OAAIwf,KAAO,EAAAxf,KAAI,OAAIwf,KAAO,GACzD,IAAM9O,EAAO3D,OAAS,EAAA/M,KAAI,OAAIwf,KAAO,IAAM,EAElDX,EAAY7e,KAAK6L,KAAK4E,OAAOa,OAAOgH,GAAKA,EAAElY,MAAQ,EAAA2d,SAASC,KAC3CjF,QAAQrI,GAEzBpE,EAAIiU,SAAShf,EACTG,EAAI,EAAA1B,KAAI,OAAIwf,KAAO,EAAIX,EAAYyB,EAC3BjgB,EAAMkB,EAAI,EAAAvB,KAAI,OAAI0f,KAAO,EAAA1f,KAAI,OAAIwf,KAAOtd,EAChDoe,OAIXzF,IACG,EAAA7a,KAAI,SAAU,KAAdA,KAAeuB,EACfG,EAAI,EAAA1B,KAAI,OAAIwf,KAAO,EAAIX,EAAYyB,EAC3BjgB,EAAMkB,EAAI,EAAAvB,KAAI,OAAI0f,KAAO,EAAA1f,KAAI,OAAIwf,KACzCc,IACA,EAAAtgB,KAAI,EAAW,CACXuB,EAAGA,EACHG,EAAGA,EACHqT,MAAOA,EACPlJ,KAAMxL,EAAMwL,KACZ6E,OAAQA,GACX,KAEDpE,EAAIgB,WAAa,KAEjB+Q,EAAazN,KAAK,IAAI,EAAAkH,aAAa,GAAIpH,EAAOQ,UAAYqO,IAAkBhe,IAAMmP,EAAOjO,QACzF,EAAAzC,KAAI,EAAa0B,EAAI,EAAA1B,KAAI,OAAIwf,KAAO,EAAC,MAErClT,EAAIgB,UAAYoD,EAAOjO,OAI/B6J,EAAIiU,SAAShf,EACTG,EAAI,EAAA1B,KAAI,OAAIwf,KAAO,EAAIX,EAAYyB,EAC3BjgB,EAAMkB,EAAI,EAAAvB,KAAI,OAAI0f,KAAO,EAAA1f,KAAI,OAAIwf,KACzCc,IAGR,MAEJ,KAAK,EAAAvC,SAASyC,eAKV,GAJA9e,EAAI1B,KAAKiH,OAAOwC,OAAS,EAAAzJ,KAAI,OAAWke,OAAiB7d,EAAMqB,EAAI,EAAA1B,KAAI,OAAI0f,KAAO,EAAA1f,KAAI,OAAIwf,KAE1Ff,EAAc,EAAAze,KAAI,OAAIwf,MAAQ9O,EAAO3D,MAAQ2D,EAAO3D,MAAQ,IAAM,IAE9D/M,KAAKkW,OAAS,EAAAC,YAAYjV,MAAQlB,KAAKmS,WAAW1R,SAASJ,EAAMF,GAAK4U,EAAO,EAAA9T,cAAcC,MAC3FlB,KAAKmS,WAAWjS,IAAIG,EAAMF,GAAK4U,EAC3B,EAAA9T,cAAcC,KACd,CACIiB,SAAU,IACVI,YAAY,EACZF,KAAMH,IACFyc,EAAe3e,KAAK6L,KAAK4E,OAAOa,OAAOgH,GAAKA,EAAElY,MAAQ,EAAA2d,SAASyC,gBAChBlI,EAAE7H,OAAOa,OAAOhO,GAAKtD,KAAK6L,KAAKgF,OAAS,EAAAC,aAAajQ,KAC7ByC,EAAE/B,EAAWU,WAAc5B,EAAMkB,EAAWU,UAC7CqB,EAAE/B,GAAKlB,EAAMkB,GAClC4D,OAAS,GACtC4T,QAAQrI,GAE5BnP,EAAI,EAAAvB,KAAI,OAAW2P,KAAO0P,EAAS,EAAArf,KAAI,OAAIwf,KAC3C9d,EAAI1B,KAAKiH,OAAOwC,OAAS,EAAAzJ,KAAI,OAAWke,OAAiB7d,EAAMqB,EAAI,EAAA1B,KAAI,OAAI0f,KAAO,EAAA1f,KAAI,OAAIwf,KAEtE,GAAhBb,IACAI,EAAoBM,GAAU,GAElC,IAAI5R,EAAwCzH,MAA/B+Y,EAAoBM,GAClBN,EAAoBM,GACpB,EAEfd,EAASve,KAAKiH,OAAOwC,OAAS,EAAAzJ,KAAI,OAAWke,OAASzQ,EACtD+Q,GAAW9c,EAAI1B,KAAKiH,OAAOwC,OAAS,EAAAzJ,KAAI,OAAWke,QAAUhc,EAEzDqc,EAAS,EAAAve,KAAI,OAAW4P,MACpB2O,EAASC,EAAU,EAAAxe,KAAI,OAAW4P,MAClC4O,GAAWD,EAASC,EAAU,EAAAxe,KAAI,OAAW4P,KAEjDtD,EAAIiU,SAAShf,GAAK,EAAAvB,KAAI,OAAIwf,KAAOf,GAAe,EAC5CF,EACAE,EACAD,IAGRO,EAAoBM,KAAY3d,EAAI1B,KAAKiH,OAAOwC,OAAS,EAAAzJ,KAAI,OAAWke,QAAUhc,SAG3F,CACiB,GAAhByc,IACAI,EAAoBM,GAAU,GAElC,IAAI5R,EAAwCzH,MAA/B+Y,EAAoBM,GAClBN,EAAoBM,GACpB,EAEfd,EAASve,KAAKiH,OAAOwC,OAAS,EAAAzJ,KAAI,OAAWke,OAASzQ,EACtD+Q,EAAU9c,EAAI1B,KAAKiH,OAAOwC,OAAS,EAAAzJ,KAAI,OAAWke,OAE9CK,EAAS,EAAAve,KAAI,OAAW4P,MACpB2O,EAASC,EAAU,EAAAxe,KAAI,OAAW4P,MAClC4O,GAAWD,EAASC,EAAU,EAAAxe,KAAI,OAAW4P,KAE7C,EAAA5P,KAAI,SAAU,KAAdA,KAAeuB,GAAK,EAAAvB,KAAI,OAAIwf,KAAOf,GAAe,EAClDF,EAASC,EACTC,EACAjd,KAAKka,IAAI8C,MACT,EAAAxe,KAAI,EAAW,CACXuB,EAAGA,EACHG,EAAGA,EACHqT,MAAOsK,EACPxT,KAAMxL,EAAMwL,KACZ6E,OAAQA,GACX,KAED2N,EAAazN,KAAK,IAAI,EAAAkH,aAAa,GAAIpH,EAAOQ,UAAYqO,IAAkB7d,IAAMgP,EAAOjO,QACzF,EAAAzC,KAAI,EAAauB,EAAC,MAGtB+K,EAAIiU,SAAShf,GAAK,EAAAvB,KAAI,OAAIwf,KAAOf,GAAe,EAC5CF,EACAE,EACAD,IAGRO,EAAoBM,IAAY3d,EAAI1B,KAAKiH,OAAOwC,OAAS,EAAAzJ,KAAI,OAAWke,MAC5E,EAIZ,CAIA,OAFA5R,EAAIqH,YAAY,IAERjD,EAAOtQ,MACX,KAAK,EAAA2d,SAAS0B,KAGV,GAFAnT,EAAIiB,SAEA,EAAAvN,KAAI,QAAY,EAAAA,KAAI,OAAS0Q,QAAUA,EAAQ,CAC/CpE,EAAIU,YACJV,EAAIe,UAAY,EAChBf,EAAIa,YAAcmR,EAClBhS,EAAIuH,OAAO,EAAA7T,KAAI,OAAW2P,KAAM,EAAA3P,KAAI,OAAS0B,GAC7C4K,EAAIwH,OAAO9T,KAAKiH,OAAO8F,MAAQ,EAAA/M,KAAI,OAAWie,MAAO,EAAAje,KAAI,OAAS0B,GAClE4K,EAAIiB,SAEJ,IAAI4N,EAAS3Z,KAAK2B,MAAqB,IAAfuN,EAAO3D,OAC3BoO,EAAS,IACTA,EAAS,GAEb7O,EAAIU,YACJV,EAAIoB,IAAI,EAAA1N,KAAI,OAASuB,EAAG,EAAAvB,KAAI,OAAS0B,EAAGyZ,EAAQ,EAAG,EAAI3Z,KAAKmM,IAC5DrB,EAAIkB,OACJlB,EAAIe,UAAY7L,KAAKif,KAAKtF,EAAS,GACnC7O,EAAIa,YAAcR,EAAO4F,YAAY7B,EAAOjO,MAAO,IACnD6J,EAAIiB,QACR,CAEA,MAEJ,KAAK,EAAAwQ,SAASoC,cACV7T,EAAIiB,SAEJ,EAAAK,WAAWiF,QAAQvG,GACnBA,EAAIuB,SAAS6C,EAAOQ,MAChB,EAAAlR,KAAI,OAAW2P,MAAQ3P,KAAKiH,OAAO8F,MAAQ,EAAA/M,KAAI,OAAW2P,KAAO,EAAA3P,KAAI,OAAWie,OAAS,EACzFje,KAAKiH,OAAOwC,OAAS,EAAAzJ,KAAI,OAAWke,OAAiBxN,EAAOD,OAAO,GAAG/O,EAAI,EAAA1B,KAAI,OAAI0f,KAAO,EAAA1f,KAAI,OAAIwf,KAAO,IAE5G,MAEJ,KAAK,EAAAzB,SAAS5U,OACd,KAAK,EAAA4U,SAASyC,eACN,EAAAxgB,KAAI,QACJA,KAAKwH,UAAU,EAAAxH,KAAI,OAAS0Q,QAEhCiO,IAEA,MAEJ,KAAK,EAAAZ,SAASC,IACN,EAAAhe,KAAI,SACJsM,EAAIe,UAAY,EAChBf,EAAIa,YAAcmR,EAClBhS,EAAIuH,OAAO,EAAA7T,KAAI,OAAW2P,KACtB,EAAA3P,KAAI,OAAa,EAAAA,KAAI,OAAIwf,KAAO,GACpClT,EAAIwH,OAAO9T,KAAKiH,OAAO8F,MAAQ,EAAA/M,KAAI,OAAWie,MAC1C,EAAAje,KAAI,OAAa,EAAAA,KAAI,OAAIwf,KAAO,GACpClT,EAAIiB,UAGRsR,IAIZ,CAEA,EAAA7e,KAAI,SAAY,KAAhBA,MAEAA,KAAKuc,cAELvc,KAAK6J,QAAQ1C,OAAOkX,EAAalZ,OAAS,IAAMnF,KAAKyW,UAAUxE,SAC3DjS,KAAK+V,iBACLsI,EACA,EAAAre,KAAI,OACF,EAAAA,KAAI,OAAS0Q,OAAQD,OAAO,EAAAzQ,KAAI,OAAS+U,YACzC/O,GAEDhG,KAAKgY,WACNC,sBAAsBjY,KAAKmH,OAAO+Q,KAAKlY,OAE3CA,KAAKkW,MAAQ,EAAAC,YAAYC,KAEzBlM,MAAMmM,iBAEFrW,KAAKwW,qBAAuB,EAAAxW,KAAI,SAChCA,KAAKwW,wBAAqBxQ,GAEVA,MAAhB,EAAAhG,KAAI,QACJA,KAAKwH,aAEL,EAAAxH,KAAI,SACAA,KAAKsW,kBAAkB,EAAAtW,KAAI,OAAS6L,OAChC7L,KAAKwW,oBACb,EAAAxW,KAAI,OAAWgG,EAAS,IAChC,CAEA,OAAAyC,GACIyB,MAAMzB,SACV,CAEA,MAAAD,GACI0B,MAAM1B,SAEN,EAAAxI,KAAI,OAASgG,EAAS,KAEtB,EAAAhG,KAAI,SAAgB,KAApBA,KACJ,CA4ZA,eAAAqI,GACI6B,MAAM7B,kBAEN,IAAK,IAAIvG,KAAQ9B,KAAK6L,KAAK4E,OAAQ,CAC/B3O,EAAKwI,UAAYxI,EAAK2O,OACtB3O,EAAK1B,OAAS,EAAA2d,SAAS0B,KAEvB,IAAK,IAAIiB,KAAM5e,EAAK2O,OAChBiQ,EAAGvgB,GAAKwM,EAAOoK,OAEX/W,KAAK6L,KAAKgF,OAAS,EAAAC,aAAajQ,OAC5B8L,EAAOgU,YAAYD,EAAGnf,GACtBmf,EAAGnf,EAAI,IAAIV,KAAK6f,EAAGnf,GAEnBoV,QAAQC,KAAK,GAAI8J,EAAGnf,kCAGpC,CACJ,CAEA,YAAA+G,GACI4B,MAAM5B,eAENtI,KAAKyW,SAAW,IAAI,EAAAO,SAAShX,KAAKiH,OAC9B,CACI1F,GAAI,GACJG,EAAG,GACHwQ,KAAM,EAAA+E,KAAKC,WACXhE,MAAO,CACH,CACIxN,KAAM,EAAA+E,cAAcC,UACpBuJ,OAAQ,KACJ,EAAAkD,OAAOC,MAAMpX,KAAKiH,OAAQjH,KAAKmG,SAASkR,SAGhD,CACI3R,KAAM,EAAA+E,cAAcG,UACpBqJ,OAAQ,KACJ,EAAAkD,OAAOG,MAAM,EAAA5B,cAAc6B,QAAQ,EAAAqJ,SAASrQ,QAAQvQ,KAAK6L,OAAQ7L,KAAKmG,SAASkR,SAGvF,CACIzD,WAAW,GAEf,CACIlO,KAAM,EAAA+E,cAAcE,iBACpBsJ,OAAQ,KACJ,IAAI,EAAAwB,MAAM,EAAAC,cAAc6B,QAAQ,EAAAqJ,SAASrQ,QAAQvQ,KAAK6L,QAAQiK,WAKtF,EApiCJ,iB,6NAslBWvU,GACH,IAAKvB,KAAK+V,iBACN,OAAO,EAEX,MAAMmK,EAAQlgB,KAAKsb,iBAAiBtb,KAAK+V,kBAEzC,OAAS/V,KAAKyW,UAAUxE,UACd1Q,EAAI,EAAAvB,KAAI,OAAIwf,KAAO,GAAKU,EAAM3e,GAAK2e,EAAM3e,EAAIA,EAAI,EAAAvB,KAAI,OAAIwf,KAAO,GAChE,EAAAxf,KAAI,OAAW4P,KAAOsQ,EAAMxe,GAAKwe,EAAMxe,GAAK1B,KAAKiH,OAAOwC,OAAS,EAAAzJ,KAAI,OAAWke,QAChF,EAAAle,KAAI,OAAW2P,KAAOuQ,EAAM3e,CAC1C,EAAC,WAESA,EAAWG,EAAW2S,EAAWC,GACvC,IAAKtU,KAAK+V,iBACN,OAAO,EAEX,MAAMmK,EAAQlgB,KAAKsb,iBAAiBtb,KAAK+V,kBAEzC,OAAS/V,KAAKyW,UAAUxE,UACdiO,EAAM3e,GAAKA,GAAK2e,EAAM3e,GAAKA,EAAI8S,GAC/B6L,EAAMxe,GAAKA,GAAKwe,EAAMxe,GAAKA,EAAI4S,CAC7C,EAAC,WAEWuM,GAAgB,GACxB,GAAI,EAAA7gB,KAAI,QAAU6gB,EACd,OAEJ,GAAI7gB,KAAK6L,KAAKsS,OACV,OAEJ,MAAM7R,EAAM,EAAAC,OAAOjB,WAAWtL,KAAKiH,QAKnC,GAHI4Z,GACAvU,EAAIwU,UAAU,EAAG,EAAG9gB,KAAKiH,OAAO8F,MAAO/M,KAAKiH,OAAOwC,QAEnD,EAAAzJ,KAAI,OAEJ,YADAsM,EAAIyU,UAAU,EAAA/gB,KAAI,OAAQ,EAAG,GAIjC,IAAK6gB,EACD,OAIJvU,EAAIgB,UAAY,EAAAhI,MAAMC,iBAEtB+G,EAAIiU,SAAS,EAAG,EAAG,EAAAvgB,KAAI,OAAW2P,KAAM3P,KAAKiH,OAAOwC,QACpD6C,EAAIiU,SAAS,EAAG,EAAGvgB,KAAKiH,OAAO8F,MAAO,EAAA/M,KAAI,OAAW4P,KACrDtD,EAAIiU,SAASvgB,KAAKiH,OAAO8F,MAAQ,EAAA/M,KAAI,OAAWie,MAAO,EAAGje,KAAKiH,OAAO8F,MAAO/M,KAAKiH,OAAOwC,QACzF6C,EAAIiU,SAAS,EAAGvgB,KAAKiH,OAAOwC,OAAS,EAAAzJ,KAAI,OAAWke,OAAQle,KAAKiH,OAAO8F,MAAO/M,KAAKiH,OAAOwC,QAE3F,MAAMuX,EAAgBhhB,KAAK6L,KAAK4E,OAAOa,OAAOgH,GAAKA,EAAElY,MAAQ,EAAA2d,SAASC,KAAK7Y,OAAS,GAEhFnF,KAAK6L,KAAKoV,QAAUjhB,KAAK6L,KAAKqV,UAC9B5U,EAAI4H,UAAY,SAChB5H,EAAI6H,aAAe,SACnB7H,EAAIgB,UAAY,EAAAhI,MAAMI,KAElB1F,KAAK6L,KAAKoV,QACV3U,EAAIuB,SAAS7N,KAAK6L,KAAKoV,OACnB,EAAAjhB,KAAI,OAAW2P,MAAQ3P,KAAKiH,OAAO8F,MAAQ,EAAA/M,KAAI,OAAW2P,KAAO,EAAA3P,KAAI,OAAWie,OAAS,EACzFje,KAAKiH,OAAOwC,OAAS,GAEzBzJ,KAAK6L,KAAKqV,SACV5U,EAAI6U,QAAQ3f,KAAKmM,GAAK,GAEtBrB,EAAI6H,aAAe,MAEnB7H,EAAIuB,SAAS7N,KAAK6L,KAAKqV,SACjB,EAAAlhB,KAAI,OAAW4P,KAAO5P,KAAKiH,OAAOwC,OAAS,EAAAzJ,KAAI,OAAW4P,IAAM,EAAA5P,KAAI,OAAWke,QAAU,GAC3F,GAEJ5R,EAAI4O,mBAIZ5O,EAAI4H,UAAY,SAChB5H,EAAI6H,aAAe,MAEnB,MAAMqL,EAAO,EAAAxf,KAAI,OAAIwf,KACjB4B,EAAQphB,KAAKiH,OAAOwC,OAAS,EAAAzJ,KAAI,OAAWke,OAEhD,IAAImD,EAAW,EACXvd,EAAM,EAAA9D,KAAI,OAAW2P,KAAO6P,EAAO,EAEvC,IAAK,IAAIne,EAAI,EAAGA,EAAI,EAAArB,KAAI,OAAamF,OAAS,EAAG9D,IAC7C,EAAArB,KAAI,OAAUshB,OACV9f,KAAK2B,MAAM,EAAAnD,KAAI,OAAW2P,KAAOtO,EAAI,EAAArB,KAAI,OAAIwf,MAC7Cxf,KAAK6L,KAAKgF,OAAS,EAAAC,aAAajQ,KAC9B,EAAAkQ,UAAUC,KAAK,IAAInQ,KAAK,EAAAb,KAAI,OAAaqB,KACzC+W,OAAO,EAAApY,KAAI,OAAI4C,OAAS2e,UAAU,EAAAvhB,KAAI,OAAI4C,KACxC,EAAA5C,KAAI,OAAaqB,EAAI,GACrB,EAAA0P,UAAUgH,OACN,EAAA/X,KAAI,OAAI4C,IAAMvB,GAAK,EAAArB,KAAI,OAAI6C,IAAM,EAAA7C,KAAI,OAAI4C,MAAQ,EAAA5C,KAAI,OAAIwhB,MAAQ,KAIjF,MAAMC,EAAgBjgB,KAAKqB,OACpB,IAAI,EAAA7C,KAAI,OAAUyQ,UAAUhE,IAAIyE,GAAS1P,KAAKif,KAAK9T,EAAOC,YAAYsE,MACzE,GACEwQ,EAAWlgB,KAAKgC,OACjBxD,KAAKiH,OAAO8F,MAAQ,EAAA/M,KAAI,OAAW2P,KAAO,EAAA3P,KAAI,OAAWie,OAASwD,GAEjEE,EAAangB,KAAKif,KAAK,GAAKiB,EAAW,EAAA1hB,KAAI,OAAamF,SAE9D,KAAOrB,EAAM9D,KAAKiH,OAAO8F,MAAQ,EAAA/M,KAAI,OAAWie,OACxCoD,EAAWM,GAAc,IACzBrV,EAAIgB,UAAY,EAAAhI,MAAMI,KAAO,KAE7B4G,EAAIuB,SACA,EAAA7N,KAAI,OAAUW,IAAIa,KAAK2B,MAAMW,EAAM,EAAA9D,KAAI,OAAIwf,KAAO,KAAO,GACzD1b,EACAsd,EAAQQ,IAIhB9d,GAAO0b,EACP6B,IAGJ/U,EAAI4H,UAAY,QAChB5H,EAAI6H,aAAe,SAEnB,MAAM0N,EAAS,EAAA7hB,KAAI,OAAIwhB,MAAQ,GAAK,GAAK,EAAAxhB,KAAI,OAAIwhB,MAEjD,IAAIM,EAAWd,EAAgB,EAAI,EAC/Be,EAAQ,EAAA/hB,KAAI,OAAamF,OAAS0c,EAEtC,IAAK,IAAIxgB,EAAI2f,EAAgB,EAAI,EAAG3f,EAAI,EAAArB,KAAI,OAAamF,OAAS,EAAG9D,IAAK,CACtE,MAAM2gB,EAAShiB,KAAKiH,OAAOwC,OAASqY,EAAWC,EAAQ,EAAA/hB,KAAI,OAAIwf,KAAO,EAAAxf,KAAI,OAAWke,OACjF+D,EAAczgB,KAAK2B,MAAMnD,KAAKiH,OAAOwC,OAASpI,EAAI,EAAArB,KAAI,OAAIwf,KAAO,EAAAxf,KAAI,OAAWke,QAMpF,GAJK,EAAAle,KAAI,OAAUW,IAAIshB,IACnB,EAAAjiB,KAAI,OAAUQ,IAAIyhB,EACd,EAAAlR,UAAUgH,OAAO,EAAA/X,KAAI,OAAI4C,KAAOvB,GAAK2f,GAAiB,EAAI,KAAO,EAAAhhB,KAAI,OAAI6C,IAAM,EAAA7C,KAAI,OAAI4C,KAAO,EAAA5C,KAAI,OAAIwhB,QAE1GngB,GAAKygB,EAAWC,EAAO,CACvB,MAAM7Q,EAAQ,CACV3P,EAAG,EAAAvB,KAAI,OAAW2P,KAClBjO,EAAGsgB,EACH9Q,MAAO,EAAAlR,KAAI,QAAe,EACjBwB,KAAK2B,OAAO,EAAAnD,KAAI,OAAI4C,KAAOkf,EAAWC,GAASf,GAAiB,EAAI,KAAO,EAAAhhB,KAAI,OAAI6C,IAAM,EAAA7C,KAAI,OAAI4C,KAAO,EAAA5C,KAAI,OAAIwhB,OAAS,EAAAxhB,KAAI,QAAe,EAAAA,KAAI,OAChJwB,KAAK2B,MAAM,EAAAnD,KAAI,OAAI4C,KAAOkf,EAAWC,GAASf,GAAiB,EAAI,KAAO,EAAAhhB,KAAI,OAAI6C,IAAM,EAAA7C,KAAI,OAAI4C,KAAO,EAAA5C,KAAI,OAAIwhB,MAAQ,EAAAxhB,KAAI,QAAe,EAAAA,KAAI,SAGvI,GAAhBkR,EAAMA,QACNA,EAAMA,MAAQ,GAElB,IAAIgR,EAAU,GAEd,GAAIliB,KAAK6L,KAAKsW,YAAa,CACvB,MAAMC,EAAc5gB,KAAKgC,MAAM0N,EAAMA,MAAMnO,WAAWoC,OAAS,GAE3Did,EAAc,IACdlR,EAAMA,OAAS1P,KAAKC,IAAI,IAAM2gB,GAE9BF,EAAU,CACN,EAAAzX,cAAcO,cACd,EAAAP,cAAcQ,aACd,EAAAR,cAAcS,cAChBkX,EAAc,GAExB,CAEA9V,EAAIuB,SAAS,EAAAkD,UAAUgH,OAAO7G,EAAMA,OAASgR,EACzChR,EAAM3P,EA3HM,GA4HZ2P,EAAMxP,GAAKsf,EAAgB,EAAAhhB,KAAI,OAAIwf,KAAO,EAAI,IAElDsC,GACJ,CACJ,CAEAxV,EAAIU,YAEJV,EAAIa,YAAc,EAAA7H,MAAMoH,KACxBJ,EAAIe,UAAY,EAEhB,MAAMI,EAAS,GACX4U,EAAQriB,KAAK6L,KAAK4E,OAAOa,OAAOhO,GAAKA,EAAElD,MAAQ,EAAA2d,SAASC,KAAK7Y,OAAS,EAE1EmH,EAAIuH,OAAO,EAAA7T,KAAI,OAAW2P,MAAQ0S,EAAQ5U,EAAS,GAC/CzN,KAAKiH,OAAOwC,OAAS,EAAAzJ,KAAI,OAAWke,QAAUmE,GAAQ,GAAU5U,IAEhE4U,EACA/V,EAAIwH,OAAO,EAAA9T,KAAI,OAAW2P,KAAOlC,EAAQ,EAAAzN,KAAI,OAAW4P,KAExDtD,EAAIwH,OAAO9T,KAAKiH,OAAO8F,MAAQ,EAAA/M,KAAI,OAAWie,MAAOje,KAAKiH,OAAOwC,OAAS,EAAAzJ,KAAI,OAAWke,OAASzQ,GAEtGnB,EAAIiB,SAEAvN,KAAKiH,OAAO8F,MAAQ,GAAK/M,KAAKiH,OAAOwC,OAAS,GAC9C6Y,kBAAkBhW,EAAI0N,aAAa,EAAG,EAAGha,KAAKiH,OAAO8F,MAAO/M,KAAKiH,OAAOwC,SACnE8Y,KAAKC,GAAO,EAAAxiB,KAAI,EAASwiB,EAAG,KACzC,EAAC,aAGG,GAAIxiB,KAAK6L,KAAKsS,OACV,OAEJ,MAAM7R,EAAM,EAAAC,OAAOjB,WAAWtL,KAAKiH,QAEnC,GAAI,EAAAjH,KAAI,OAEJ,YADAsM,EAAImW,aAAa,EAAAziB,KAAI,OAAa,EAAG,GAIzCsM,EAAIgB,UAAY,EAAAhI,MAAMC,iBACtB+G,EAAIiU,SAAS,EAAG,EAAGvgB,KAAKiH,OAAO8F,MAAO/M,KAAKiH,OAAOwC,QAElD,MAAMiZ,EAAgB,EAAApd,MAAM2P,SAEtB+L,EAAgBhhB,KAAK6L,KAAK4E,OAAOa,OAAOgH,GAAKA,EAAElY,MAAQ,EAAA2d,SAASC,KAAK7Y,OAAS,EAEpF,GAAI6b,EAAe,CACf,MAAMxB,EAAO,EAAAxf,KAAI,OAAIwf,KACjB4B,EAAQphB,KAAKiH,OAAOwC,OAAS,EAAAzJ,KAAI,OAAWke,OAEhD,IAAImD,EAAW,EACXvd,EAAM,EAAA9D,KAAI,OAAW2P,KAAO6P,EAAO,EAEvC,IAAK,IAAIne,EAAI,EAAGA,EAAI,EAAArB,KAAI,OAAamF,OAAS,EAAG9D,IAC7C,EAAArB,KAAI,OAAUshB,OACV9f,KAAK2B,MAAM,EAAAnD,KAAI,OAAW2P,KAAOtO,EAAI,EAAArB,KAAI,OAAIwf,MAC7Cxf,KAAK6L,KAAKgF,OAAS,EAAAC,aAAajQ,KAC9B,EAAAkQ,UAAUC,KAAK,IAAInQ,KAAK,EAAAb,KAAI,OAAaqB,EAAI,KAC7C+W,OAAO,EAAApY,KAAI,OAAI4C,OAAS2e,UAAU,EAAAvhB,KAAI,OAAI4C,KACxC,EAAA5C,KAAI,OAAaqB,EAAI,GACrB,EAAA0P,UAAUgH,OACN,EAAA/X,KAAI,OAAI4C,IAAMvB,GAAK,EAAArB,KAAI,OAAI6C,IAAM,EAAA7C,KAAI,OAAI4C,MAAQ,EAAA5C,KAAI,OAAIwhB,MAAQ,KAIjF,MAAMC,EAAgBjgB,KAAKqB,OACpB,IAAI,EAAA7C,KAAI,OAAUyQ,UAAUhE,IAAIyE,GAAS1P,KAAKif,KAAK9T,EAAOC,YAAYsE,MACzE,GACEwQ,EAAWlgB,KAAKgC,OACjBxD,KAAKiH,OAAO8F,MAAQ,EAAA/M,KAAI,OAAW2P,KAAO,EAAA3P,KAAI,OAAWie,OAASwD,GAEjEE,EAAangB,KAAKif,KAAK,GAAKiB,EAAW,EAAA1hB,KAAI,OAAamF,SAE9D,KAAOrB,EAAM9D,KAAKiH,OAAO8F,MAAQ,EAAA/M,KAAI,OAAWie,OACxCoD,EAAWM,GAAc,IACzBrV,EAAIU,YAEJV,EAAIuH,OAAO/P,EAAKsd,GAChB9U,EAAIwH,OAAOhQ,EAAK,EAAA9D,KAAI,OAAW4P,KAE/BtD,EAAIe,UAAY,EAChBf,EAAIa,YAAcuV,EAClBpW,EAAIqH,YAAY,CAAC,EAAG,IACpBrH,EAAIiB,UAGRzJ,GAAO0b,EACP6B,GAER,CAEA/U,EAAI4H,UAAY,QAChB5H,EAAI6H,aAAe,SAEnB,MAAM0N,EAAS,EAAA7hB,KAAI,OAAIwhB,MAAQ,GAAK,GAAK,EAAAxhB,KAAI,OAAIwhB,MAEjD,IAAIM,EAAWd,EAAgB,EAAI,EAC/Be,EAAQ,EAAA/hB,KAAI,OAAamF,OAAS0c,EAEtC,IAAK,IAAIxgB,EAAI2f,EAAgB,EAAI,EAAG3f,EAAI,EAAArB,KAAI,OAAamF,OAAS,EAAG9D,IAAK,CACtE,MAAM2gB,EAAShiB,KAAKiH,OAAOwC,OAASqY,EAAWC,EAAQ,EAAA/hB,KAAI,OAAIwf,KAAO,EAAAxf,KAAI,OAAWke,OAErF,GAAI7c,GAAKygB,EAAWC,EAAO,CACvB,MAAM7Q,EAAQ,CACV3P,EAAG,EAAAvB,KAAI,OAAW2P,KAClBjO,EAAGsgB,GAGHhiB,KAAK6L,KAAK4E,OAAOa,OAAOgH,GAAKA,EAAElY,KAAKuiB,YAAY,EAAA5E,SAAS5U,OAAQ,EAAA4U,SAASyC,eAAgB,EAAAzC,SAAS0B,OAAOta,OAAS,IACnHmH,EAAIU,YAEJV,EAAIuH,OAAO3C,EAAM3P,EAAG2P,EAAMxP,GAC1B4K,EAAIwH,OAAO9T,KAAKiH,OAAO8F,MAAQ,EAAA/M,KAAI,OAAWie,MAAO/M,EAAMxP,GAE3D4K,EAAIe,UAAY,EAChBf,EAAIa,YAAcuV,EAClBpW,EAAIqH,YAAY,CAAC,EAAG,IACpBrH,EAAIiB,UAGRuU,GACJ,CACJ,CAEI9hB,KAAKiH,OAAO8F,MAAQ,GAAK/M,KAAKiH,OAAOwC,OAAS,GAC9C,EAAAzJ,KAAI,EAAcsM,EAAI0N,aAAa,EAAG,EAAGha,KAAKiH,OAAO8F,MAAO/M,KAAKiH,OAAOwC,QAAO,IACvF,EAAC,aAGG,IAAImZ,EAAU5iB,KAAK6L,KAAK4E,OAAOiH,QAAQY,GAAKA,EAAE7H,OAAOhE,IAAIoW,GAAKA,EAAEthB,IAC5DuhB,EAAU9iB,KAAK6L,KAAK4E,OAAOiH,QAAQY,GAAKA,EAAE7H,OAAOhE,IAAIoW,GAAKA,EAAEnhB,IAEhE,MAAMqhB,EAAS/iB,KAAK6L,KAAKgF,OAAS,EAAAC,aAAajQ,KAE/C,GAAIkiB,EAAQ,CACR,IAAIC,EAAW,IAAIniB,KAAKW,KAAKoB,OAAkBggB,IAE/C,KAAOI,EAAS/gB,UAAYT,KAAKqB,OAAkB+f,IAC1CA,EAAQpK,SAASwK,EAAS/gB,YAC3B2gB,EAAQhS,KAAK,IAAI/P,KAAKmiB,EAAS/gB,YAEnC+gB,EAAWA,EAASC,QAAQ,GAGhCL,EAAQrR,KAAK,CAAClO,EAAGsB,IAAMtB,EAAIsB,GAAK,EAAI,EACxC,CAEAme,EAAQvR,KAAK,CAAClO,EAAGsB,IAAMA,EAAItB,GAAK,EAAI,GAEpC,EAAArD,KAAI,EAAe,IAAI,IAAIoR,IAAIwR,EAAQtR,OAAO/P,GAAUyE,MAALzE,GAAgBkL,IAAIlL,GAAKwhB,EAASxhB,EAAEwB,WAAaxB,KAAI,KACxG,EAAAvB,KAAI,EAAe,IAAI,IAAIoR,IAAI0R,EAAQxR,OAAO5P,GAAUsE,MAALtE,KAAiB,KAEpE,EAAA1B,KAAI,EAAM,CACN4C,IAAKpB,KAAKoB,OAAkBggB,GAC5B/f,IAAKrB,KAAKqB,OAAkB+f,GAC5BlD,MAAOle,KAAKka,IAAIla,KAAKoB,OAAkBggB,IAAaphB,KAAKka,IAAIla,KAAKqB,OAAkB+f,MAAe,EAAA5iB,KAAI,OAAamF,OAAS,GAC7Hqa,MAAOxf,KAAKiH,OAAO8F,MAAQ,EAAA/M,KAAI,OAAW2P,KAAO,EAAA3P,KAAI,OAAWie,OAAS,EAAAje,KAAI,OAAamF,OAC1Fkb,QAAS,EACTmB,MAAO,EAAAxhB,KAAI,OAAamF,QAC3B,KAED,IAAI+d,EAAO1hB,KAAKoB,OAAkBkgB,GAC9BI,EAAO,IACPA,EAAO,GAEX,EAAAljB,KAAI,EAAM,CACN4C,IAAKsgB,EACLrgB,IAAK7C,KAAK6L,KAAKuU,MAAQ5e,KAAKqB,OAAkBigB,GAC9CpD,MAAOle,KAAKka,IAAIwH,GAAQ1hB,KAAKka,IAAI1b,KAAK6L,KAAKuU,MAAQ5e,KAAKqB,OAAkBigB,MAAe,EAAA9iB,KAAI,OAAamF,OAAS,GACnHqa,MAAOxf,KAAKiH,OAAOwC,OAAS,EAAAzJ,KAAI,OAAW4P,IAAM,EAAA5P,KAAI,OAAWke,QAAU,EAAAle,KAAI,OAAamF,OAC3Fkb,QAAS,EACTmB,MAAO,EAAAxhB,KAAI,OAAamF,QAC3B,KAED,IAEItC,EAFAsgB,EAAkBnjB,KAAK6L,KAAK4E,OAAOa,OAAOgH,GAAKA,EAAElY,MAAQ,EAAA2d,SAASyC,gBAItE,GAAI2C,EAAgBhe,OAAS,EAAG,CAC5B,IAAIsL,EAAS0S,EAAgB1W,IAAI6L,GAAKA,EAAE7H,OAAOiH,QAAQpU,IAAMA,EAAE5B,IAE/DmB,EAAM,EAAA7C,KAAI,OAAI6C,IAEd,IAAK,IAAIxB,EAAI,EAAGA,EAAIoP,EAAO,GAAGtL,OAAQ9D,IAAK,CACvC,IAAIyV,EAAM,EAEV,IAAK,MAAMxT,KAAKmN,EACZqG,GAAOxT,EAAEjC,GAETyV,EAAMjU,IACNA,EAAMiU,EACd,CAEA,EAAA9W,KAAI,OAAI6C,IAAMA,EAAM7C,KAAK6L,KAAKuU,KAAOpgB,KAAK6L,KAAKuU,KAAOvd,EACtD,EAAA7C,KAAI,OAAI0f,MAAQle,KAAKka,IAAI,EAAA1b,KAAI,OAAI4C,KAAOpB,KAAKka,IAAI,EAAA1b,KAAI,OAAI6C,OAAS,EAAA7C,KAAI,OAAamF,OAAS,EAChG,CAEA,MAAMie,EAAYzW,EAAOC,YAAY,EAAAmE,UAAUgH,OAAO,EAAA/X,KAAI,OAAI6C,MAC1DugB,EAAY,EAAApjB,KAAI,OAAW2P,KAAO,KAAO3P,KAAK6L,KAAKsS,SACnD,EAAAne,KAAI,OAAW2P,MAAQyT,EAAY,EAAApjB,KAAI,OAAW2P,KAAO,GACzD,EAAA3P,KAAI,OAAIwf,MAAQxf,KAAKiH,OAAO8F,MAAQ,EAAA/M,KAAI,OAAW2P,KAAO,EAAA3P,KAAI,OAAWie,OAAS,EAAAje,KAAI,OAAamF,QAGvG,EAAAnF,KAAI,EAAcwB,KAAKka,IAAI,EAAA1b,KAAI,OAAI4C,KAAOpB,KAAKka,IAAI,EAAA1b,KAAI,OAAI6C,KAAI,KAE3D,IAAM,EAAA7C,KAAI,QAAe,EAAAA,KAAI,OAAc,EAC3C,EAAAA,KAAI,EAAc,IAAG,KAChB,GAAK,EAAAA,KAAI,QAAe,EAAAA,KAAI,OAAc,GAC/C,EAAAA,KAAI,EAAc,GAAE,KACf,IAAM,EAAAA,KAAI,QAAe,EAAAA,KAAI,OAAc,IAChD,EAAAA,KAAI,EAAc,EAAC,KACd,KAAO,EAAAA,KAAI,QAAe,EAAAA,KAAI,OAAc,IACjD,EAAAA,KAAI,EAAc,GAAE,KACf,KAAQ,EAAAA,KAAI,QAAe,EAAAA,KAAI,OAAc,IAClD,EAAAA,KAAI,EAAc,GAAE,KACf,KAAS,EAAAA,KAAI,QAAe,EAAAA,KAAI,OAAc,IACnD,EAAAA,KAAI,EAAc,IAAI,KACjB,KAAU,EAAAA,KAAI,QAAe,EAAAA,KAAI,OAAc,IACpD,EAAAA,KAAI,EAAc,IAAK,KAClB,KAAW,EAAAA,KAAI,QAAe,EAAAA,KAAI,OAAc,IACrD,EAAAA,KAAI,EAAc,IAAK,KAEvB,EAAAA,KAAI,EAAc,EAAC,KAEA,GAAnB,EAAAA,KAAI,SACJ6C,EAAMigB,EAAQ3d,OAAS,GAC+D,IAA7E,EAAAnF,KAAI,OAAI6C,IAAM,GAAK,EAAA7C,KAAI,OAAe,EAAAA,KAAI,OAAI6C,IAAM,GAAM,EAAA7C,KAAI,QAC/DwB,KAAKif,KAAK,EAAAzgB,KAAI,OAAI6C,IAAM,EAAA7C,KAAI,QAAe,EAAAA,KAAI,OAEvD,EAAAA,KAAI,OAAI6C,IAAMA,EAAM7C,KAAK6L,KAAKuU,KAAOpgB,KAAK6L,KAAKuU,KAAOvd,EACtD,EAAA7C,KAAI,OAAI0f,MAAQle,KAAKka,IAAI,EAAA1b,KAAI,OAAI4C,KAAOpB,KAAKka,IAAI,EAAA1b,KAAI,OAAI6C,MAAQ,EAAA7C,KAAI,OAAamF,QAGtF,EAAAnF,KAAI,EAAS,CACT+M,MAAO/M,KAAKiH,OAAO8F,MAAQ,EAAA/M,KAAI,OAAW2P,KAAO,EAAA3P,KAAI,OAAWie,MAChExU,OAAQzJ,KAAKiH,OAAOwC,OAAS,EAAAzJ,KAAI,OAAW4P,IAAM,EAAA5P,KAAI,OAAWke,QACzD,KAEZ,EAAAle,KAAI,OAAIqgB,QAA6B,KAAnB,EAAArgB,KAAI,OAAO+M,MAC7B,EAAA/M,KAAI,OAAIqgB,QAA8B,KAApB,EAAArgB,KAAI,OAAOyJ,MACjC,C,8ECrgCJ,MAAakJ,GAAb,UACW,EAAAC,QAAU,IAAI/R,KAAK,IAAM,EAAG,E,qFCDvC,eAEA,mBACI,YAAOwW,CAAMnR,GACTA,EAAQoH,UAAY,EAAAhI,MAAMI,KAC1BQ,EAAQgO,UAAY,SACpBhO,EAAQiO,aAAe,SACvBjO,EAAQvC,KAAO,iBACnB,CAEA,cAAOkP,CAAQ3M,GACXA,EAAQoH,UAAY,EAAAhI,MAAMI,KAC1BQ,EAAQgO,UAAY,SACpBhO,EAAQiO,aAAe,SACvBjO,EAAQvC,KAAO,iBACnB,CAEA,YAAOyY,CAAMlW,GACTA,EAAQoH,UAAY,EAAAhI,MAAMI,KAC1BQ,EAAQgO,UAAY,SACpBhO,EAAQiO,aAAe,SACvBjO,EAAQvC,KAAO,iBACnB,CAEA,cAAOkG,CAAQ3D,GACXA,EAAQvC,KAAO,kBACfuC,EAAQgO,UAAY,QACpBhO,EAAQiO,aAAe,YAC3B,CAEA,oBAAOgG,CAAcjU,EAAmCmd,GACpDnd,EAAQgO,UAAYmP,EAAU,QAAU,MACxCnd,EAAQiO,aAAe,aACvBjO,EAAQvC,KAAO,iBACnB,E,qFCjCJ,aACA,SAGA,SACA,SACA,SACA,SAEA,mBAuBI,WAAA5D,CAAYsV,GAZF,KAAAa,MAAqB,EAAAC,YAAYjV,KAavClB,KAAKoG,KAAOiP,EAAMjP,KAClBpG,KAAKmG,SAAWkP,EAAMlP,SACtBnG,KAAKmS,WAAa,IAAI,EAAArS,WAEtBE,KAAKiH,OAASV,SAAS+H,cAAc,EAAAC,IAAIhC,QAEzCvM,KAAKiH,OAAO2B,MAAM0a,eAAiB,EAAAxa,OAAOgJ,eAAeC,UAEzD/R,KAAKoG,KAAKmd,OAAOvjB,KAAKiH,QAEtBjH,KAAK6J,QAAU,IAAI,EAAAuU,QAAQpe,KAAKiH,OAAQjH,KAAKmG,UAE7CnG,KAAKuI,gBACT,CAEA,MAAApB,GACI,MAAMmF,EAAM,EAAAC,OAAOjB,WAAWtL,KAAKiH,QAEnCqF,EAAIgB,UAAY,EAAAhI,MAAMC,iBACtB+G,EAAIiU,SAAS,EAAG,EAAGvgB,KAAKiH,OAAO8F,MAAO/M,KAAKiH,OAAOwC,OACtD,CAEA,OAAAhB,GACIzI,KAAK6J,QAAQpB,UACbzI,KAAKkW,MAAQlW,KAAKmG,SAASmW,qBAAuB,EAAAnG,YAAYC,KAAO,EAAAD,YAAYjV,IACrF,CAEA,UAAAyF,GACI3G,KAAK+V,iBAAmB,IAAIC,WAAW,EAAAvP,OAAOwP,WAC9CjW,KAAKuY,aAAe,IAAIvC,WAAW,EAAAvP,OAAOK,OAC1C9G,KAAKwW,wBAAqBxQ,CAC9B,CAEA,cAAAuC,GACIvI,KAAKqd,eAAiBrd,KAAKiH,OAAOkF,wBAElCnM,KAAKqd,eAAe9b,GAAK6K,QACzBpM,KAAKqd,eAAe3b,GAAK2K,QAErBrM,KAAKkW,OAAS,EAAAC,YAAYjV,MAASlB,KAAKmG,SAASwB,sBACjD3H,KAAKiH,OAAOuc,YAAczc,GAAS/G,KAAK+V,iBAAmBhP,EAC3D/G,KAAKiH,OAAOwc,QAAU1c,GAAS/G,KAAKuY,aAAexR,EACnD/G,KAAKiH,OAAOyc,cAAgB3c,IACxBA,EAAM4c,iBACN3jB,KAAKuV,iBAAcvP,EACfhG,KAAKwW,mBACLxW,KAAKwW,wBAAqBxQ,EAE1BhG,KAAKwW,mBAAqBzP,GAElC/G,KAAKiH,OAAO2c,aAAe,IAAM5jB,KAAK+V,iBAAmB,IAAIC,WAAW,EAAAvP,OAAOwP,WAEvF,E,4sCCtFJ,eACA,SACA,SACA,WAEA,SAEA,SACA,QACA,SACA,SACA,SACA,SACA,SAEA,SACA,SACA,YAEA,MAAa7N,UAAqB,EAAAgN,SAC9B,WAAArV,CAAYsV,GACRnL,MAAMmL,G,YAENrV,KAAKmG,SAASE,cAAe,EAE7BrG,KAAK6L,KAAK4E,OAASzQ,KAAK6L,KAAK4E,OAAOhE,IAAInJ,GAAK,IAAI,EAAAyG,OAAOzG,GAC5D,CAEA,MAAA6D,GAGI,GAFA+C,MAAM/C,SAEkD,GAApDnH,KAAK6L,KAAK4E,OAAOa,OAAOhO,GAAKA,EAAEjD,MAAQ,GAAG8E,OAG1C,OAFA,EAAAnF,KAAI,SAAW,KAAfA,WACAiY,sBAAsBjY,KAAKmH,OAAO+Q,KAAKlY,OAI3C,MAAMgc,EAAchc,KAAKmG,SAASkR,MAAQtH,EAAUkM,OAAOD,YAAc,EAEnE5I,EAAWpT,KAAKiH,OAAO8F,MAA4B,EAApB/M,KAAK6L,KAAKiC,QAC3C+V,EAAY7jB,KAAKiH,OAAOwC,OAA6B,EAApBzJ,KAAK6L,KAAKiC,QAAckO,EAE7D,IASI8H,EACAC,EAVAjN,EAAM9W,KAAK6L,KAAK4E,OAAOrN,OAAO,CAACU,EAAKC,IAAQD,EAAMC,EAAI1D,MAAO,GAC7D2jB,EAAc5Q,EAAWyQ,EAEzBtiB,EAAIvB,KAAK6L,KAAKiC,QACdpM,EAAI1B,KAAK6L,KAAKiC,QAAUkO,EAExBiI,EAAOjkB,KAAK6L,KAAKiC,QACjBoW,EAAOlkB,KAAK6L,KAAKiC,QAAUkO,EAK/B,MAAM1P,EAAM,EAAAC,OAAOjB,WAAWtL,KAAKiH,QAEnC,IAAIkd,GAAa,EACjB,IAAK,IAAI9iB,EAAI,EAAGA,EAAIrB,KAAK6L,KAAK4E,OAAOtL,OAAQ9D,IAAK,CAC9C,MAAMS,EAAO9B,KAAK6L,KAAK4E,OAAOpP,GAExB+iB,EAAchR,GAAY7R,EAAIvB,KAAK6L,KAAKiC,SAC1CuW,EAAeR,GAAaniB,EAAI1B,KAAK6L,KAAKiC,QAAUkO,GAExD,IAAIsI,EAAoB,CACpB,CACI7hB,MAAOX,EAAKW,MACZyO,MAAOpP,EAAKoP,MACZoH,EAAGxW,EAAKzB,MAAQyW,EAAMkN,EACtB3jB,MAAOyB,EAAKzB,MACZF,GAAI2B,EAAK3B,GACToB,EAAGA,EACHG,EAAGA,IAIX,GAAIL,EAAI,GAAKrB,KAAK6L,KAAK4E,OAAOtL,OAAS,EAAG,CACtC,MAAM2a,EAAO9f,KAAK6L,KAAK4E,OAAOpP,EAAI,GAElCijB,EAAM1T,KAAK,CACPnO,MAAOqd,EAAKrd,MACZyO,MAAO4O,EAAK5O,MACZoH,EAAGwH,EAAKzf,MAAQyW,EAAMkN,EACtB3jB,MAAOyf,EAAKzf,MACZF,GAAI2f,EAAK3f,GACToB,EAAGA,EACHG,EAAGA,IAGPL,GACJ,CAEA,MAAMgX,EAA2B,GAAhBiM,EAAMnf,OACnBof,EAASljB,GAAKrB,KAAK6L,KAAK4E,OAAOtL,OAAS,EAE5C,GAAIgf,EACA,IAAK,IAAIK,EAAI,EAAGA,GAAKJ,EAAc/iB,EAAIA,EAAGmjB,IAAK,CAC3C,MAAMnQ,EAAI+P,EAAcI,EACpBC,EAAKH,EAAM,GAAGhM,EAAIjE,EAGtB,GAAIoQ,GAFKpM,EAAW,EAAIiM,EAAM,GAAGhM,EAAIjE,IAEtBgQ,EAAc,CACzBC,EAAM,GAAGjQ,EAAI7S,KAAKgC,MAAM6Q,GACxBiQ,EAAM,GAAGhQ,EAAI9S,KAAKgC,MAAMihB,GAEnBpM,IACDiM,EAAM,GAAGjQ,EAAI7S,KAAKgC,MAAM6Q,GACxBiQ,EAAM,GAAGhQ,EAAI+P,EAAeC,EAAM,GAAGhQ,EAErCgQ,EAAM,GAAG5iB,GAAK4iB,EAAM,GAAGhQ,GAG3B,KACJ,CACJ,MAEA,IAAK,IAAIkQ,EAAI,EAAGA,GAAKH,EAAehjB,EAAIA,EAAGmjB,IAAK,CAC5C,MAAMlQ,EAAI+P,EAAeG,EACrBE,EAAKJ,EAAM,GAAGhM,EAAIhE,EAGtB,GAAIoQ,GAFKrM,EAAW,EAAIiM,EAAM,GAAGhM,EAAIhE,IAEtB8P,EAAa,CACxBE,EAAM,GAAGhQ,EAAI9S,KAAKgC,MAAM8Q,GACxBgQ,EAAM,GAAGjQ,EAAI7S,KAAKgC,MAAMkhB,GAEnBrM,IACDiM,EAAM,GAAGhQ,EAAI9S,KAAKgC,MAAM8Q,GACxBgQ,EAAM,GAAGjQ,EAAI+P,EAAcE,EAAM,GAAGjQ,EAEpCiQ,EAAM,GAAG/iB,GAAK+iB,EAAM,GAAGjQ,GAG3B,KACJ,CACJ,CAGJ,IAAK,MAAMsQ,KAAQL,EAAO,CAClBC,IACIJ,GACAQ,EAAKtQ,EAAI+P,EACL/L,IACAsM,EAAKrQ,EAAI+P,KAEbM,EAAKrQ,EAAI+P,EACLhM,IACAsM,EAAKtQ,EAAI+P,KAIrB9X,EAAIU,YAEJV,EAAIgB,UAAYqX,EAAKliB,MAErB,MAAMmiB,EAAW5kB,KAAKkW,OAAS,EAAAC,YAAYjV,OACnClB,KAAKmS,WAAW1R,SAASkkB,EAAKxkB,GAAI,EAAAc,cAAcC,MAElD2jB,EAAYxjB,EAAIijB,EAAMvL,QAAQ4L,IAASJ,GAAUlM,EAAW,EAAI,GAClElW,EAAW,IAET2iB,EAAU,KACZ,IAAIhhB,EAAM,EACV,IAAK,IAAIzC,EAAI,EAAGA,EAAIwjB,EAAWxjB,IAC3ByC,GAAO3B,EAAWA,GAAYd,EAAIrB,KAAK6L,KAAK4E,OAAOtL,QAAU3D,KAAKujB,EAEtE,OAAOjhB,GAGLkhB,EAAwB7iB,EAAWA,EAAW0iB,GAAa7kB,KAAK6L,KAAK4E,OAAOtL,OAAS,GAE3F,GAAKyf,EAgCE,CACH,MAAMtS,EAAY,CAACpQ,EAAoB6E,KACnC,MAAMke,EACCN,EAAKpjB,EAAIojB,EAAKtQ,EAAI,EADnB4Q,EAECN,EAAKjjB,EAAIijB,EAAKrQ,EAAI,EAIrB2E,EAAU0L,EAAKtQ,EAAIsQ,EAAKrQ,EACZ,EAFD,GAEcqQ,EAAKtQ,EAClB,EAHD,GAGcsQ,EAAKrQ,EAC9B4E,EAAO,EAAID,EAEf3M,EAAIgG,UAAU2S,EAAWA,GAAYhM,EAAU/W,EAAagX,GACxD+L,EAAWA,GAAYhM,EAAU/W,EAAagX,IAClD5M,EAAI6M,MAAMF,EAAU/W,EAAagX,EAAMD,EAAU/W,EAAagX,GAE9DlZ,KAAKmS,WAAWzR,OAAOikB,EAAKxkB,GAAI4G,IAGhC,EAAA/G,KAAI,SAAU,KAAdA,KAAe2kB,KACXb,GACJA,EAAca,EACdZ,EAAkBY,EAAK9Y,KAEvB7L,KAAKmS,WAAWjS,IAAIykB,EAAKxkB,GACrB,EAAAc,cAAcwR,UACd,CACItQ,SAAU4N,EAAUjQ,WAAW8J,KAC/BtH,UAAU,EACVD,KAAMH,IACFoQ,EAAUpQ,EAAY,EAAAjB,cAAcyR,gBAIhD1S,KAAKmS,WAAWjS,IAAIykB,EAAKxkB,GACrB,EAAAc,cAAcyR,WACd,CACI9R,MAAOmP,EAAU4C,MAAMC,QACvBzQ,SAAU4N,EAAUjQ,WAAW8J,KAC/BvH,KAAMH,IACFoQ,EAAUpQ,EAAY,EAAAjB,cAAcwR,aAIxD,MA5EIzS,KAAKmS,WAAWjS,IAAIykB,EAAKxkB,GACrB,EAAAc,cAAcC,KACd,CACIiB,SAAU2iB,IACVviB,YAAY,EACZF,KAAMH,IACF,GAAIA,EAAa4iB,IAAYA,IAAYE,EAAwB,EAC7D,OAAO1Y,EAAIgB,WAAa,KAE5BpL,GAAcA,EAAa4iB,IAAYA,IAAYE,GAAyBA,EAE5E,MAAMC,EACCN,EAAKpjB,EAAIojB,EAAKtQ,EAAI,EADnB4Q,EAECN,EAAKjjB,EAAIijB,EAAKrQ,EAAI,EAGnB2E,EAAU,GACZC,EAAO,EAAID,EAEf3M,EAAIgG,UAAU2S,EAAWA,GAAYhM,EAAU/W,EAAagX,GACxD+L,EAAWA,GAAYhM,EAAU/W,EAAagX,IAClD5M,EAAI6M,MAAOF,EAAU/W,EAAagX,EAAQD,EAAU/W,EAAagX,GAEjE,IAAIrU,EAAUrD,KAAK2B,MAAM,IAAMjB,GAAYa,SAAS,IAEhD8B,EAAQM,OAAS,IACjBN,EAAU,EAAIA,GAElByH,EAAIgB,UAAYqX,EAAKliB,MAAQoC,KAkD7C,MAAMqgB,EAAM,EAEZ5Y,EAAIW,UAAU1L,EAAI2jB,EAAKxjB,EAAIwjB,EAAKP,EAAKtQ,EAAI6Q,EAAKP,EAAKrQ,EAAI4Q,EAAW,EAANA,GAC5D5Y,EAAIkB,OAEAmX,EAAKzT,OACFvE,EAAOC,YAAY+X,EAAKzT,OAASyT,EAAKtQ,EAAI6Q,GAC1CP,EAAKrQ,EAAI4Q,EAAM,KACdllB,KAAKmS,WAAW1R,SAASkkB,EAAKxkB,GAAI,EAAAc,cAAcC,QACpDoL,EAAIU,YACJ,EAAAY,WAAWwO,MAAM9P,GAEjBA,EAAIa,YAAcR,EAAO4F,YAAYoS,EAAKliB,OAAQ,IAClD6J,EAAIe,UAAY,EAChBf,EAAIuM,SAAW,QACfvM,EAAIwM,QAAU,QACdxM,EAAIgB,UAAY,UAEhBhB,EAAI6Y,WAAWR,EAAKzT,MAChB3P,EAAI,EAAIojB,EAAKtQ,EAAI,EACjB3S,EAAI,EAAIijB,EAAKrQ,EAAI,GACrBhI,EAAIuB,SAAS8W,EAAKzT,MACd3P,EAAI,EAAIojB,EAAKtQ,EAAI,EACjB3S,EAAI,EAAIijB,EAAKrQ,EAAI,IAGzBhI,EAAI4O,iBAEAiJ,EACAziB,GAAKijB,EAAKrQ,EAEV/S,GAAKojB,EAAKtQ,EAEd2P,GAAeW,EAAKtQ,EAAIsQ,EAAKrQ,EAC7BwC,GAAO6N,EAAKtkB,KAChB,CAEI8jB,GACA5iB,GAAK+iB,EAAM,GAAGjQ,EACd3S,EAAIwiB,IAEJxiB,GAAK4iB,EAAM,GAAGhQ,EACd/S,EAAI0iB,GAGRA,EAAO1iB,EACP2iB,EAAOxiB,EAEPyiB,GAAcA,CAClB,CAEAnkB,KAAK6J,QAAQ1C,SAAS2c,IAAgB9jB,KAAKyW,UAAUxE,SACjDjS,KAAK+V,iBACL,CACI,IAAI,EAAA+B,aAAa,GAAIgM,GAAa5S,UAAY,EAAAH,UAAUgH,OAAO+L,GAAazjB,WAEhFL,KAAK6L,KAAK4E,OAAO8F,KAAKjT,GAAKA,EAAEnD,IAAM2jB,GAAa3jB,KAE/CH,KAAKgY,WACNC,sBAAsBjY,KAAKmH,OAAO+Q,KAAKlY,OAE3CA,KAAKkW,MAAQ,EAAAC,YAAYC,KAEzBlM,MAAMmM,iBAEFyN,GAAe9jB,KAAKuV,YACpBvV,KAAKsW,kBAAkByN,GAEvB/jB,KAAKwW,wBAAqBxQ,CAClC,CAsBA,OAAAyC,GACIyB,MAAMzB,SACV,CAEA,MAAAD,GACI0B,MAAM1B,SAENxI,KAAKuI,iBACLvI,KAAKmS,WAAWrR,OACpB,CAEA,eAAAuH,GACIrI,KAAK6L,KAAK4E,OAASzQ,KAAK6L,KAAK4E,OAAOa,OAAOhO,GAAKA,EAAEjD,MAAQ,GAE1DL,KAAK6L,KAAK4E,OAAOc,KAAK,CAAClO,EAAGsB,KAAOA,EAAEtE,OAAS,IAAMgD,EAAEhD,OAAS,IAE7D6J,MAAM7B,kBAEN,IAAK,IAAIvG,KAAQ9B,KAAK6L,KAAK4E,OACvB3O,EAAKwI,UAAYxI,EAAKzB,MACtByB,EAAKzB,QAAU,CAEvB,CAEA,YAAAiI,GACI4B,MAAM5B,eAENtI,KAAKyW,SAAW,IAAI,EAAAO,SAAShX,KAAKiH,OAC9B,CACI1F,GAAI,GACJG,EAAG,GACHwQ,KAAM,EAAA+E,KAAKC,WACXhE,MAAO,CACH,CACIxN,KAAM,EAAA+E,cAAcG,UACpBqJ,OAAQ,KACJ,EAAAkD,OAAOG,MAAM,EAAA5B,cAAc6B,QAAQ,EAAA6N,SAAS7U,QAAQvQ,KAAK6L,OAAQ7L,KAAKmG,SAASkR,SAGvF,CACIzD,WAAW,GAEf,CACIlO,KAAM,EAAA+E,cAAcE,iBACpBsJ,OAAQ,KACJ,IAAI,EAAAwB,MAAM,EAAAC,cAAc6B,QAAQ,EAAA6N,SAAS7U,QAAQvQ,KAAK6L,QAAQiK,WAKtF,EAlXJ,iB,yBA4Sc6O,GACN,IAAK3kB,KAAK+V,mBAAqB4O,EAC3B,OAAO,EAEX,MAAMzE,EAAQlgB,KAAKsb,iBAAiBtb,KAAK+V,kBAEzC,OAAS/V,KAAKyW,UAAUxE,UACd0S,EAAKpjB,GAAK2e,EAAM3e,GAAK2e,EAAM3e,GAAKojB,EAAKpjB,EAAIojB,EAAKtQ,GAC9CsQ,EAAKjjB,GAAKwe,EAAMxe,GAAKwe,EAAMxe,GAAKijB,EAAKjjB,EAAIijB,EAAKrQ,CAC5D,EAAC,aAGG,MAAMhI,EAAM,EAAAC,OAAOjB,WAAWtL,KAAKiH,QAEnC,EAAA2G,WAAWiF,QAAQvG,GACnBA,EAAIuB,SAAS,EAAApD,cAAcY,eACvBrL,KAAKiH,OAAO8F,MAAQ,EACpB/M,KAAKiH,OAAOwC,OAAS,EAC7B,C,03BChVJ,iBAGA,SACA,SACA,SAEA,sBACI,cAAO8N,CAAQ9G,GACX,IAAI4U,EAAQ9e,SAAS+H,cAAc,EAAAC,IAAI+W,OAEvCD,EAAME,UAAUrlB,IAAI,WAEpB,IAAIslB,EAAS,IAAIvlB,IACbwlB,EAAO,GACPjV,EAAU,GACVuE,EAAQ,EAER2Q,EAAY,IAAIzlB,IAEpB,IAAK,MAAM0lB,KAAclV,EAAOA,OAAQ,CACpC,IAAImV,EAAa,IAAI3lB,IAErB,IAAK,MAAM4lB,KAAUpV,EAAOD,QACxBoV,EAAWplB,IAAIqlB,EAAOxlB,MAAO,GAEjC,IAAK,MAAOC,EAAKD,KAAUslB,EAAWlV,OAClCmV,EAAWplB,IAAIF,EAAKD,GAExB,IAAIylB,EAAc,GAClB,IAAK,IAAIzkB,EAAI,EAAGA,EAAI0T,EAAO1T,IACvBykB,GAAe,IAEnBJ,EAAUllB,IAAImlB,EAAW1U,KAAO6U,EAAaF,GAE7C7Q,GACJ,CAEA,IAAK,MAAMgR,KAAetV,EAAOD,QAC7BA,GAAW,+CAEAuV,EAAYld,+CAI3B,IAAK,MAAOvI,EAAKD,KAAUqlB,EAAW,CAClC,IAAIM,EAAU,GAEd,IAAK,MAAOC,EAAMC,KAAW7lB,EAOzB,GANA2lB,GAAW,uDAEUhgB,MAAVkgB,EAAsB,GAAK,EAAAnV,UAAUgH,OAAOmO,kDAInDV,EAAOjlB,IAAI0lB,GAAO,CAClB,IAAIE,IAAeX,EAAO7kB,IAAIslB,IAAS,GACvCT,EAAOhlB,IAAIylB,EAAME,IAAcD,EACnC,MACIV,EAAOhlB,IAAIylB,EAAMC,GAIzBT,GAAQ,mGAGOnlB,EAAI8lB,gFAGRJ,yCAGf,CAEA,IAAIK,EAAe,GAEnB,IAAK,MAAO,CAAEhmB,KAAUmlB,EACpBa,GAAgB,+CAEIrgB,MAAT3F,EAAqB,GAAK,EAAA0Q,UAAUgH,OAAO1X,0CA0B1D,OAtBAglB,EAAM5W,UAAY,qHAKH+B,kGAKJiV,0JAOIY,2DAKRhB,CACX,CAEA,cAAO1P,CAAyBxP,EAAyBsK,GACrD,IAAI6V,EAAY/f,SAAS+H,cAAc,EAAAC,IAAIC,KACvC+X,EAAMhgB,SAAS+H,cAAc,EAAAC,IAAIC,KACjCgY,EAASjgB,SAAS+H,cAAc,EAAAC,IAAIkY,QACpCtmB,EAAKwM,EAAOoK,OAEhBuP,EAAU1d,MAAMC,QAAU,EAAAC,OAAOC,QAAQC,KACzCsd,EAAU1d,MAAMa,OAAS,OAEzB8c,EAAIpmB,GAAKA,EACTomB,EAAI3d,MAAM8d,SAAW,IAErB,IAAIC,EAAgBC,KAAKC,MAAMD,KAAKE,UAAU3gB,IAe9C,OAbIwgB,EAActP,QACdsP,EAActP,MAAQsP,EAActP,MAAQ,YAChDsP,EAAc9a,KAAK4E,OAASA,EAC5BkW,EAAchK,cAAW3W,EACzB2gB,EAAc/J,eAAY5W,EAE1BwgB,EAAO/X,UAAY,4DAC+BtO,QAAWymB,KAAKE,UAAUH,2CAI5EL,EAAU/C,OAAOgD,EAAKC,GAEfF,CACX,E,sGCzIJ,aAAS,4EAAAxmB,UAAU,IACnB,aAAS,uEAAA6S,KAAK,IACd,aAAS,wEAAAsJ,MAAM,G,gmDCFf,eAEA,WAEA,SAGA,SACA,SACA,QACA,SACA,SACA,SACA,SACA,SAEA,MAAa/T,UAAsB,EAAAkN,SAK/B,WAAArV,CAAYsV,GACRnL,MAAMmL,G,YALV,mBAEA,mBAKIrV,KAAKmG,SAASE,cAAe,CACjC,CAEA,MAAAc,GACI+C,MAAM/C,SAEN,EAAAnH,KAAI,SAAM,KAAVA,MAEA,MAAMK,EAAQL,KAAK6L,KAAK4E,OAAO,GAC/BzQ,KAAK6J,QAAQ1C,OAAO,EAAAnH,KAAI,SAAgB,KAApBA,KAAqBA,KAAK+V,iBAAkB1V,KAAWL,KAAKyW,UAAUxE,SACtFjS,KAAK+V,iBACL,CACI,IAAI,EAAA+B,aAAa,GAAIzX,GAAO6Q,UAAY,EAAAH,UAAUgH,OAAO1X,GAAOkK,aAEpElK,GAECL,KAAKgY,WACNC,sBAAsBjY,KAAKmH,OAAO+Q,KAAKlY,OAE3CA,KAAKkW,MAAQ,EAAAC,YAAYC,KAEzBlM,MAAMmM,gBACV,CAwHA,OAAA5N,GACIyB,MAAMzB,SACV,CAEA,MAAAD,GACI0B,MAAM1B,SAENxI,KAAKuI,iBACL,EAAAvI,KAAI,SAAgB,KAApBA,KACJ,CAEA,eAAAqI,GACI6B,MAAM7B,kBAEN,IAAK,IAAIvG,KAAQ9B,KAAK6L,KAAK4E,OACvB3O,EAAKwI,UAAYxI,EAAKzB,MACtByB,EAAKzB,QAAU,EAGfL,KAAK6L,KAAK4E,OAAOtL,OAAS,GAAKnF,KAAK6L,KAAK4E,OAAO,GAAGpQ,MAAQL,KAAK6L,KAAKhJ,MACrE7C,KAAK6L,KAAK4E,OAAO,GAAGpQ,MAAQL,KAAK6L,KAAKhJ,IAC9C,CAEA,YAAAyF,GACI4B,MAAM5B,eAENtI,KAAKyW,SAAW,IAAI,EAAAO,SAAShX,KAAKiH,OAC9B,CACI1F,GAAI,GACJG,EAAG,GACHwQ,KAAM,EAAA+E,KAAKC,WACXhE,MAAO,CACH,CACIxN,KAAM,EAAA+E,cAAcC,UACpBuJ,OAAQ,KACJ,EAAAkD,OAAOC,MAAMpX,KAAKiH,OAAQjH,KAAKmG,SAASkR,WAKhE,EA9LJ,kB,uDAiCQ,MAAM/K,EAAM,EAAAC,OAAOjB,WAAWtL,KAAKiH,QAE7B5G,EAAQL,KAAK6L,KAAK4E,OAAO,IAAM,CAAEtQ,GAAIwM,EAAOoK,SAE9C/W,KAAKkW,OAAS,EAAAC,YAAYjV,MAAQlB,KAAKmS,WAAW1R,SAASJ,EAAMF,GAAI,EAAAc,cAAcC,QACnFlB,KAAKmS,WAAWjS,IAAIG,EAAMF,GACtB,EAAAc,cAAcC,KACd,CACIiB,SAAU,IACVI,YAAY,EACZF,KAAMH,IACF7B,EAAMkK,QAAUlK,EAAMA,MAAQ6B,KAI9CoK,EAAIU,YAEJV,EAAIa,YAAc9M,EAAMoC,MACxB6J,EAAIwM,QAAU,QACdxM,EAAIe,UAAY,GAEhB,MAAM8K,EAAQ9X,EAAMkK,QAAUvK,KAAK6L,KAAKhJ,IACpC+U,GAASQ,MAAMD,GAAS,EAAIA,GAAS3W,KAAKmM,GAE1CtN,EAAMA,QACNiM,EAAIoB,IAAI,EAAA1N,KAAI,OAASuB,EAAG,EAAAvB,KAAI,OAAS0B,EAAG,EAAA1B,KAAI,OAAUwB,KAAKmM,GAAIiK,EAAQpW,KAAKmM,IAC5ErB,EAAIiB,UAGRjB,EAAIU,YAEJV,EAAIe,UAAY,EAChBf,EAAIwM,QAAU,SAEd,IAAIuB,EAAmB,EACnBC,EAAa9Y,KAAKmM,GAEtB,KAAO2M,GAAc,GAAG,CACpB,IAAIC,EAAeD,EAAa9Y,KAAKmM,GAAK,GAAK,EAC1BnM,KAAKmM,GAAK,GACV2M,EAErB,MAAMyM,EAAYtZ,IACP,CACHlM,EAAG,EAAAvB,KAAI,OAASuB,GAAK,EAAAvB,KAAI,OAAWyN,GAAUjM,KAAKmX,IAAInX,KAAKmM,GAAK0M,GACjE3Y,EAAG,EAAA1B,KAAI,OAAS0B,GAAK,EAAA1B,KAAI,OAAWyN,GAAUjM,KAAKoX,IAAIpX,KAAKmM,GAAK0M,KAIzE,IAAI2M,EAASD,EAAS,IAClBzN,EAASyN,EAAS,IAClBE,EAASF,EAAS,KAEtB,MAAMliB,EAAUrD,KAAKmM,GAAK2M,EAAa1C,EAAQ,KAAO,KAEtDtL,EAAIuH,OAAOmT,EAAOzlB,EAAGylB,EAAOtlB,GAC5B4K,EAAIwH,OAAOwF,EAAO/X,EAAG+X,EAAO5X,GAC5B4K,EAAIa,YAAc,EAAA7H,MAAMI,KAAOb,EAC/ByH,EAAIiB,SAEJ,EAAAK,WAAWiF,QAAQvG,GACnBA,EAAIgB,UAAY,EAAAhI,MAAMI,KAAOb,EAC7ByH,EAAIuB,SAAS,EAAAkD,UAAUgH,OAAO/X,KAAK6L,KAAKhJ,IAAMyX,EAAa9Y,KAAKmM,GAAK3N,KAAK6L,KAAKhJ,KAAMokB,EAAO1lB,EAAG0lB,EAAOvlB,GAEtG2Y,GAAoBE,EAEpBD,GAAc9Y,KAAKmM,GAAK,EAC5B,CACJ,EAAC,WAEe5G,EAAmB1G,GAC/B,IAAK0G,EACD,OAAO,EAEX,MAmBMsU,EAAQrb,KAAKsb,iBAAiBvU,GAChCwU,EAAQ,CACJha,EAAG8Z,EAAM9Z,EAAI,EAAAvB,KAAI,OAASuB,EAC1BG,EAAG2Z,EAAM3Z,EAAI,EAAA1B,KAAI,OAAS0B,GAGlC,OAAS1B,KAAKyW,UAAUxE,UAzBR,CAACoJ,IACb,IAAIhY,EAAI7B,KAAKia,MAAMJ,EAAM3Z,EAAI,EAAA1B,KAAI,OAAS0B,EAAG2Z,EAAM9Z,EAAI,EAAAvB,KAAI,OAASuB,GAChE8B,EAAI,IACJA,GAAe,EAAV7B,KAAKmM,IAEd,MAAMwK,EAAQ9X,EAAMkK,QAAUvK,KAAK6L,KAAKhJ,IACpC+U,GAASQ,MAAMD,GAAS,EAAIA,GAAS3W,KAAKmM,GAE9C,OAAOtK,EAAI7B,KAAKmM,IAAMnM,KAAKmM,GAAKiK,GAASvU,GAkBnCyY,CAAQT,IAfK,CAAC/X,IACpB,MAAM4jB,EAAc,EAAAlnB,KAAI,OAAW,GAC/B0W,EAAc,EAAA1W,KAAI,OAAW,GAEjC,OAAOsD,EAAE/B,EAAI+B,EAAE/B,EAAI+B,EAAE5B,EAAI4B,EAAE5B,GAAKwlB,EAAcA,GACpC5jB,EAAE/B,EAAI+B,EAAE/B,EAAI+B,EAAE5B,EAAI4B,EAAE5B,GAAKgV,EAAcA,GAW3C0E,CAAeG,EAC7B,EAAC,aAGG,MAAM4L,EAAWnnB,KAAKiH,OAAO8F,MAAQ/M,KAAKiH,OAAOwC,OAC9BzJ,KAAKiH,OAAOwC,OAAS,IACrBzJ,KAAKiH,OAAO8F,MAE/B,EAAA/M,KAAI,EAAWmnB,EAAW,EAAC,KAE3B,EAAAnnB,KAAI,EAAW,CACXuB,EAAGvB,KAAKiH,OAAO8F,MAAQ,EACvBrL,EAAG1B,KAAKiH,OAAOwC,OAAS,EAAAzJ,KAAI,OAAW,GAC1C,IACL,C,m3BCpKJ,eACA,WACA,SACA,SAEA,MAAamX,EACT,YAAOC,CAAMnQ,EAA2BoQ,GACpCY,sBAAsB,KAClB,MAAM3L,EAAM,EAAAC,OAAOjB,WAAWrE,GAE9B,IAAI8F,EAAQJ,EAAOC,YAAY,EAAAqK,KAAKC,YAAc,GAGlD5K,EAAIgB,UAAY,EAAAhI,MAAMC,iBACtB+G,EAAIiU,SAAStZ,EAAO8F,MAAQA,EAAO,EAAGA,EAHzB,IAKb,IAAIqa,EAAY,EACZC,EAAa,EAEjB,MAAMvN,EAAY,IAAIC,YAAYzN,EAAI0N,aAAa,EAAG,EAAG/S,EAAO8F,MAAO9F,EAAOwC,QAAQoC,KAAKoO,QAE3F,IAAIL,GAAS,EAEb,IAAK,IAAIvY,EAAI,EAAGA,EAAI4F,EAAO8F,MAAO1L,IAAK,CACnC,IAAK,IAAImjB,EAAI,EAAGA,EAAIvd,EAAOwC,OAAQ+a,IAC/B,GAAI,EAAAjY,OAAOb,YAAYoO,EAAUzY,EAAImjB,EAAIvd,EAAO8F,QAAS,CACrD6M,GAAS,EACT,KACJ,CAGJ,GAAIA,EACA,MAEJwN,GACJ,CAEAxN,GAAS,EAET,IAAK,IAAIvY,EAAI4F,EAAO8F,MAAO1L,GAAK,EAAGA,IAAK,CACpC,IAAK,IAAImjB,EAAI,EAAGA,EAAIvd,EAAOwC,OAAQ+a,IAC/B,GAAI,EAAAjY,OAAOb,YAAYoO,EAAUzY,EAAImjB,EAAIvd,EAAO8F,QAAS,CACrD6M,GAAS,EACT,KACJ,CAGJ,GAAIA,EACA,MAEJyN,GACJ,CAEID,EAAY,IACZA,GAAa,GACbC,EAAa,IACbA,GAAc,GAEdD,EAAYC,IACZD,EAAYC,GACZA,EAAaD,IACbC,EAAaD,GAEjB,IAAIE,EAAoB/gB,SAAS+H,cAAc,EAAAC,IAAIhC,QACnD+a,EAAkBva,MAAQ9F,EAAO8F,MAAQqa,EAAYC,EACrDC,EAAkB7d,OAASxC,EAAOwC,OAElC,MAAM8d,EAAU,EAAAhb,OAAOjB,WAAWgc,GAElCC,EAAQja,UAAY,EAAAhI,MAAMlB,WAC1BmjB,EAAQhH,SAAS,EAAG,EAAGtZ,EAAO8F,MAAO9F,EAAOwC,QAE5C8d,EAAQxG,UAAU9Z,GAASmgB,EAAW,GAEtCjQ,EAAOqQ,QAAQnQ,GAAS,SAAW,OAC/BiQ,EAAkBG,UAAU,eAExC,CAEA,YAAOnQ,CAAM+N,EAAyBhO,GAClC,IAAIoO,EAAOJ,EAAMvV,iBAAiB,MAC9B4X,EAAM,GAEV,IAAK,IAAIrmB,EAAI,EAAGA,EAAIokB,EAAKtgB,OAAQ9D,IAAK,CAClC,IAAIsmB,EAAM,GACNC,EAAOnC,EAAKpkB,GAAGyO,iBAAiB,UAEpC,IAAK,IAAI0U,EAAI,EAAGA,EAAIoD,EAAKziB,OAAQqf,IAAK,CAClC,IAAI3Y,EAAO+b,EAAKpD,GAAG/V,UACA9L,QAAQ,iBAAkB,IAC1BA,QAAQ,WAAY,KAEvCkJ,EAAOA,EAAKlJ,QAAQ,KAAM,MAC1BglB,EAAI/W,KAAK,IAAM/E,EAAO,IAC1B,CAEA6b,EAAI9W,KAAK+W,EAAIzkB,KAAK,KACtB,CAEAiU,EAAOqQ,QAAQnQ,GAAS,SAAW,OAC/BqQ,EAAIxkB,KAAK,MACT,+BAAiC2kB,mBAAmBH,EAAIxkB,KAAK,QAC7D,EACR,CAEA,aAAOskB,CAAOvW,EAAc6W,EAAiBC,EAA2BC,GACpE,GAAiChiB,MAA7BY,OAAOqhB,mBAAiC,CACxC,MAIMjW,EAAU,CACZkW,cAAejX,EACfkX,MAAO,CACH,CACIC,OARGJ,EACE,CAAE,WAAY,QACd,CAAE,UAAW,UAS1BK,wBAAwB,GAG5B,SAASC,EAAOC,GACZ,MAAMC,EAAaC,KAAKF,EAAQG,MAAM,KAAK,IACvCC,EAAaJ,EAAQG,MAAM,KAAK,GAC3BA,MAAM,KAAK,GACXA,MAAM,KAAK,GAChBzO,EAAS,IAAI2O,YAAYJ,EAAWrjB,QACpC0jB,EAAa,IAAIC,WAAW7O,GAEhC,IAAK,IAAI5Y,EAAI,EAAGA,EAAImnB,EAAWrjB,OAAQ9D,IACnCwnB,EAAWxnB,GAAKmnB,EAAWxkB,WAAW3C,GAE1C,OAAO,IAAI0nB,KAAK,CAAC9O,GAAS,CAAE7Z,KAAMuoB,GACtC,CAEA/hB,OAAOqhB,mBAAmBjW,GACnBuQ,KAAKyG,IACFA,EAAWC,iBACA1G,KAAK2G,IACFA,EAAeC,MAAMnB,EAASF,EAAUQ,EAAOR,IAChCvF,KAAK,IAAM2G,EAAe9U,YAGrE,KAAO,CACH,IAAIgV,EAAW7iB,SAAS+H,cAAc,EAAAC,IAAI8a,GAC1CD,EAASrB,KAAOA,GAAQD,EACxBsB,EAASA,SAAWnY,EACpBmY,EAASE,OACb,CACJ,EAhJJ,U,kFCLA,MAAsBvY,GAAtB,cACW,EAAAgH,OAAU1X,GACbA,GAAOkpB,oBAAevjB,EAAW,CAC7BwjB,sBAAuB,EACvBC,sBAAuB,KACrB,GAEH,EAAAzY,KAAQ3Q,GACXA,EAAMqpB,oB,6lDCRd,eACA,SACA,OACA,WAEA,SACA,SACA,YACA,SAEA,eAaI,WAAA3pB,CAAYkH,EAA2B+K,G,YAZvC,mBAEA,mBAEA,mBAIA,mBAEA,mBAGI,EAAAhS,KAAI,EAAWiH,EAAM,KACrB,EAAAjH,KAAI,EAAYgS,EAAO,KAEvBhS,KAAKmS,WAAa,IAAI,EAAArS,WAEtB,EAAAE,KAAI,SAAgB,KAApBA,KACJ,CAEA,MAAAmH,CAAOiL,EAAuBC,GACrB,EAAArS,KAAI,QACL,EAAAA,KAAI,SAAgB,KAApBA,MAEJ,MAAMsM,EAAM,EAAAC,OAAOjB,WAAW,EAAAtL,KAAI,QAElCsM,EAAIU,YAEJ,MAAMsF,EAAY,CAACpQ,EAAoB6E,KACnC/G,KAAKmS,WAAWzR,OAAO,mBAAoBqG,GAE3CuF,EAAIgB,UAAYX,EAAO4F,YAAY,EAAAjN,MAAMC,kBAAmB/D,KAAK2B,MAAmB,GAAbjB,KA0C3E,OAvCI,EAAAlC,KAAI,SAAY,KAAhBA,KAAiBoS,IACjB,EAAApS,KAAI,OAAS4I,MAAM4J,OAAS,EAAA1J,OAAO0I,OAAOE,QAEtCW,GAAc,EAAArS,KAAI,SAAY,KAAhBA,KAAiBqS,KAC/B,EAAArS,KAAI,OAAUiU,SACd5B,OAAarM,GAGjBhG,KAAKmS,WAAWjS,IAAI,mBAChB,EAAAe,cAAcwR,UACd,CACItQ,SAAU,IACVE,KAAMH,IACFoQ,EAAUpQ,EAAY,EAAAjB,cAAcyR,gBAIhD1S,KAAKmS,WAAWjS,IAAI,mBAChB,EAAAe,cAAcyR,WACd,CACI9R,MAAOmP,EAAU4C,MAAMC,QACvBzQ,SAAU,IACVG,UAAU,EACVD,KAAMH,IACFoQ,EAAUpQ,EAAY,EAAAjB,cAAcwR,cAKpDnG,EAAIW,UAAU,EAAAjN,KAAI,OAAWuB,EAAG,EAAAvB,KAAI,OAAW0B,EAAG,EAAA1B,KAAI,OAAW+M,MAAO,EAAA/M,KAAI,OAAWyJ,OAAQ,GAC/F6C,EAAIkB,OAEJ,EAAAI,WAAWiF,QAAQvG,GACnBA,EAAIuB,SAAS,EAAA7N,KAAI,OAAU0F,KACvB,EAAA1F,KAAI,OAAWuB,EAAI,EAAAvB,KAAI,OAAW+M,MAAQ,EAC1C,EAAA/M,KAAI,OAAW0B,EAAI,EAAA1B,KAAI,OAAWyJ,OAAS,GAE/C,EAAAzJ,KAAI,GAAW,EAAI,KAEZqS,CACX,CAEA,MAAA7J,GACI,EAAAxI,KAAI,SAAgB,KAApBA,KACJ,G,iGAGI,EAAAA,KAAI,EAAmB,EAAAA,KAAI,OAASmM,wBAAuB,KAE3D,EAAAnM,KAAI,OAAiBuB,GAAK6K,QAC1B,EAAApM,KAAI,OAAiB0B,GAAK2K,QAE1B,MAAMU,EAAQJ,EAAOC,YAAY,EAAA5M,KAAI,OAAU0F,MAAQ,GAGvD,EAAA1F,KAAI,EAAsB,CACtBuB,EAAG,EAAAvB,KAAI,OAAUuB,EAAIwL,EAAQ,EAAA/M,KAAI,OAAS+M,MACrC,EAAA/M,KAAI,OAAS+M,MAAQA,EACrB,EAAA/M,KAAI,OAAUuB,EAAI,EAChB,EAAAvB,KAAI,OAAS+M,MAAQ,EAAA/M,KAAI,OAAUuB,EAAIwL,EACvC,EAAA/M,KAAI,OAAUuB,EACrBG,EAAG,EAAA1B,KAAI,OAAU0B,EARR,GAQqB,EAAA1B,KAAI,OAASyJ,OACtC,EAAAzJ,KAAI,OAASyJ,OATT,GAUJ,EAAAzJ,KAAI,OAAU0B,EAAI,EAChB,EAAA1B,KAAI,OAASyJ,OAAS,EAAAzJ,KAAI,OAAU0B,EAXlC,GAYF,EAAA1B,KAAI,OAAU0B,EACrBqL,MAAOA,EACPtD,OAdS,IAeZ,IACL,EAAC,WAEW1C,GACR,IAAKA,EACD,OAAO,EAEX,IAAIwN,EAAQxN,EAAM8F,QAAU,EAAA7M,KAAI,OAAiBuB,EAAI6K,QACjDoI,EAAQzN,EAAM+F,QAAU,EAAA9M,KAAI,OAAiB0B,EAAI2K,QAErD,OAAOkI,GAAS,EAAAvU,KAAI,OAAWuB,GAAKgT,GAAS,EAAAvU,KAAI,OAAWuB,EAAI,EAAAvB,KAAI,OAAW+M,OACrEyH,GAAS,EAAAxU,KAAI,OAAW0B,GAAK8S,GAAS,EAAAxU,KAAI,OAAW0B,EAAI,EAAA1B,KAAI,OAAWyJ,MACtF,C,cC9HJ,IAAYxI,EAcAgO,EAIArH,EAUA4D,EAMA/E,EAcA+W,EAUAyB,EAQAnO,EAIAiN,EAYAxP,EAcA4H,EAMAc,E,mMAtGZ,SAAYhW,GACR,6BAEA,+BAEA,mBAEA,qBAEA,yCAEA,0CACH,CAZD,CAAYA,IAAa,gBAAbA,EAAa,KAczB,SAAYgO,GACR,aACH,CAFD,CAAYA,IAAS,YAATA,EAAS,KAIrB,SAAYrH,GACR,mBAEA,2BAEA,qBAEA,wBACH,CARD,CAAYA,IAAS,YAATA,EAAS,KAUrB,SAAY4D,GACR,mCAEA,0CACH,CAJD,CAAYA,IAAS,YAATA,EAAS,KAMrB,SAAY/E,GACR,uCAEA,cAEA,wBAEA,gBAEA,kBAEA,2BACH,CAZD,CAAYA,IAAM,SAANA,EAAM,KAclB,SAAY+W,GACR,uBAEA,mBAEA,iBAEA,oBACH,CARD,CAAYA,IAAW,cAAXA,EAAW,KAUvB,SAAYyB,GACR,qBAEA,mBAEA,sBACH,CAND,CAAYA,IAAQ,WAARA,EAAQ,KAQpB,SAAYnO,GACR,kBACH,CAFD,CAAYA,IAAY,eAAZA,EAAY,KAIxB,SAAYiN,GACR,mBAEA,qCAEA,uBAEA,iBAEA,sCACH,CAVD,CAAYA,IAAQ,WAARA,EAAQ,KAYpB,SAAYxP,GACR,kBAEA,QAEA,YAEA,kBAEA,gBAEA,iBACH,CAZD,CAAYA,IAAG,MAAHA,EAAG,KAcf,SAAY4H,GACR,mBAEA,kBACH,CAJD,CAAYA,IAAW,cAAXA,EAAW,KAMvB,SAAYc,GACR,gBACH,CAFD,CAAYA,IAAI,OAAJA,EAAI,I,4zBCtGhB,cACA,SAEA,cAKI,WAAAlX,CAAYqO,EAAuBub,G,YAFnC,mBAGI3pB,KAAK4pB,MAAQrjB,SAAS+H,cAAc,EAAAC,IAAIsb,QAExC7pB,KAAK4pB,MAAMrE,UAAUrlB,IAAI,WAErBypB,IACA3pB,KAAK4pB,MAAMhhB,MAAMmE,MAAQ,GAAG4c,EAAK5c,UACjC/M,KAAK4pB,MAAMhhB,MAAMa,OAAS,GAAGkgB,EAAKlgB,YAGtCzJ,KAAK4pB,MAAME,SAAW,IAAM9pB,KAAKoU,QAEjC7N,SAASlE,KAAKoN,YAAYzP,KAAK4pB,OAE/B,EAAA5pB,KAAI,SAAW,KAAfA,MAEA,EAAAA,KAAI,SAAY,KAAhBA,KAAiBoO,EACrB,CAEA,IAAA0H,GACI,EAAAnQ,OAAOG,iBAAiB9F,KAAK4pB,MAAO,EAAApe,UAAUue,iBAE9C/pB,KAAK4pB,MAAOI,WAChB,CAEA,KAAA5V,GACI,EAAAzO,OAAOG,iBAAiB9F,KAAK4pB,MAAO,EAAApe,UAAUue,iBAE9C/pB,KAAK4pB,MAAOxV,QAEZpU,KAAK4pB,MAAOpN,SAEZxc,KAAK4pB,WAAQ5jB,CACjB,G,yCAGI,EAAAL,OAAOG,iBAAiB9F,KAAK4pB,MAAO,EAAApe,UAAUue,iBAE9C,IAAIE,EAAc1jB,SAAS+H,cAAc,UAEzC2b,EAAY1E,UAAUrlB,IAAI,iBAC1B+pB,EAAYxb,UAAY,IAExBzO,KAAK4pB,MAAOna,YAAYwa,GAExBA,EAAYxG,QAAU,IAAMzjB,KAAKoU,OACrC,EAAC,WAEWhG,GACapI,MAAjB,EAAAhG,KAAI,SACJ,EAAAA,KAAI,EAAYuG,SAAS+H,cAAc,EAAAC,IAAIC,KAAI,KAE/C,EAAAxO,KAAI,OAAUulB,UAAUrlB,IAAI,mBAE5BF,KAAK4pB,OAAOna,YAAY,EAAAzP,KAAI,SAGjBgG,MAAXoI,GACA,EAAApO,KAAI,OAAUyP,YAAYrB,EAClC,C,qFCnEJ,eAEA,SAEA,MAAa0P,UAAmB,EAAA9T,MAS5B,WAAAjK,CAAYkK,GACRC,QAHJ,KAAA8U,SAAqB,EAAAC,SAASG,MAK1BjV,OAAOC,OAAOpK,KAAMiK,EACxB,CAEA,MAAAI,CAAOnI,GACHgI,MAAMG,OAAOnI,EACjB,CAEA,cAAAsI,GAGI,OAFAN,MAAMM,kBAEC,CACX,CAEA,KAAA/C,GACIyC,MAAMzC,OACV,EA3BJ,c,ylDCHA,eACA,WACA,SAEA,SAEA,SACA,SACA,SACA,SACA,YACA,SACA,SAEA,MAAanB,UAAe,EAAA+V,WAWxB,WAAAtc,CAAYsV,GACRnL,MAAMmL,G,YAXV,mBAEA,mBAEA,mBAEA,mBAEA,KAAA2C,WAAqB,EAKjB,EAAAhY,KAAI,EAAUqV,EAAK,KAEnBrV,KAAKkqB,iBAEAlqB,KAAKmG,SAASwB,qBACf,EAAA3H,KAAI,EAAW,IAAI,EAAAmqB,OAAOnqB,KAAKiH,OAC3B,CACI1F,GAAI,GACJG,EAAG,GACHgE,KAAM,EAAA+E,cAAchD,MACpBwM,OAAQ,KACJ,IAAK,IAAI5T,KAASL,KAAKmG,SAAS0F,KAAK4E,OACjCpQ,EAAMoH,WAEhB,IACd,CAEA,MAAAN,GACI+C,MAAM/C,SAEN,MAAMmF,EAAM,EAAAC,OAAOjB,WAAWtL,KAAKiH,QAEnC,IAAImjB,EAAY,CAAE7oB,EAAG,GAAIG,EAAG,IAE5B1B,KAAKiH,OAAO2B,MAAM4J,OAAS,EAAA1J,OAAO0I,OAAOC,QAEzC,EAAA7D,WAAWiF,QAAQvG,GACnBA,EAAI4H,UAAY,QAChB5H,EAAI6H,aAAe,aAEnB7H,EAAIgG,UAAU,EAAAtS,KAAI,OAASuB,EAAG,EAAAvB,KAAI,OAAS0B,GAE3C,EAAA1B,KAAI,EAAe,EAAC,KAEpB,IAAK,MAAMK,KAASL,KAAKmG,SAAS0F,KAAK4E,OAAOa,OAAOhO,IAAMA,EAAE+mB,cACzDD,EAAY,EAAApqB,KAAI,SAAM,KAAVA,KAAWK,EAAO+pB,EAAU7oB,EAAG6oB,EAAU1oB,GAEzD4K,EAAIgG,WAAW,EAAAtS,KAAI,OAASuB,GAAI,EAAAvB,KAAI,OAAS0B,GAExC1B,KAAKgY,WACNC,sBAAsBjY,KAAKmH,OAAO+Q,KAAKlY,OAE3CA,KAAKuY,aAAe,EAAAvY,KAAI,QAAUmH,OAAOnH,KAAK+V,iBAAkB/V,KAAKuY,cAErEvY,KAAKkW,MAAQ,EAAAC,YAAYC,IAC7B,CAwHA,OAAA/O,GACIrH,KAAKgY,WAAY,EAEjBhY,KAAKiH,OAAOuV,QAChB,CAEA,OAAA/T,GACIzI,KAAKkW,MAAQ,EAAAC,YAAYjV,IAC7B,CAEA,MAAAsH,GACIxI,KAAKkqB,iBACL,EAAAlqB,KAAI,QAAUwI,SACdxI,KAAKuI,gBACT,CAEA,cAAA2hB,GACI,OAAQlqB,KAAKmG,SAASoX,aAClB,KAAK,EAAAC,YAAYE,OACjB,QACI1d,KAAKiH,OAAO8F,MAAQ/M,KAAKmG,SAAS4G,MAClC/M,KAAKiH,OAAOwC,OAASnD,EAAOqX,gBAAgB3d,KAAKmG,SAAS0F,KAAK4E,OAAQzQ,KAAKiH,OAAO8F,OAEnF/M,KAAKoG,KAAKwC,MAAMK,cAAgB,EAAAH,OAAOI,cAAcC,OAErD,MAEJ,KAAK,EAAAqU,YAAYC,IACbzd,KAAKiH,OAAO8F,MAAQ/M,KAAKmG,SAAS4G,MAClC/M,KAAKiH,OAAOwC,OAASnD,EAAOqX,gBAAgB3d,KAAKmG,SAAS0F,KAAK4E,OAAQzQ,KAAKiH,OAAO8F,OAEnF/M,KAAKoG,KAAKwC,MAAMK,cAAgB,EAAAH,OAAOI,cAAcyI,cAErD,MAEJ,KAAK,EAAA6L,YAAYI,KACb5d,KAAKiH,OAAO8F,MAAQ,IACpB/M,KAAKiH,OAAOwC,OAASzJ,KAAKmG,SAASsD,OAEnCzJ,KAAKoG,KAAKwC,MAAMK,cAAgB,EAAAH,OAAOI,cAAc0I,IAErD,MAEJ,KAAK,EAAA4L,YAAYK,MACb7d,KAAKiH,OAAO8F,MAAQ,IACpB/M,KAAKiH,OAAOwC,OAASzJ,KAAKmG,SAASsD,OAEnCzJ,KAAKoG,KAAKwC,MAAMK,cAAgB,EAAAH,OAAOI,cAAc2I,WAK7D,EAAA7R,KAAI,EAAW,CACXuB,EAAG+E,EAAOgkB,kBAAkBtqB,KAAKmG,SAAS0F,KAAK4E,OAAQzQ,KAAKiH,OAAO8F,OACnErL,GAAI1B,KAAKiH,OAAOwC,OAASnD,EAAOqX,gBAAgB3d,KAAKmG,SAAS0F,KAAK4E,OAAQzQ,KAAKiH,OAAO8F,QAAU,GACpG,IACL,CAEA,wBAAOud,CAAkB7Z,EAAiB1D,GACtC,IAAIqG,EAAW,GAEf,IAAK,MAAM/S,KAASoQ,EAAOa,OAAOhO,IAAMA,EAAE+mB,cAAe,CACrD,MAAME,EAAa5d,EAAOC,YAAYvM,EAAM6Q,OAE5C,GAAIkC,EAAWmX,EAAa,IAAMxd,EAAQ,IACtC,MAEJqG,GAAYmX,EAAa,EAC7B,CAEA,OAAOxd,EAAQ,EAAIqG,EAAW,CAClC,CAEA,sBAAOuK,CAAgBlN,EAAiB1D,GACpC,IAAIyU,EAAQ,EACR1d,EAAM,GACN2J,EAASnH,EAAOgkB,kBAAkB7Z,EAAQ1D,GAE9C,IAAK,MAAM1M,KAASoQ,EAAOa,OAAOhO,IAAMA,EAAE+mB,cAAe,CACrD,MAAME,EAAa5d,EAAOC,YAAYvM,EAAM6Q,OAExCpN,EAAMymB,EAAa,IAAMxd,EAAQ,GAAKU,IACtC3J,EAAM,GACN0d,KAGJ1d,GAAOymB,EAAa,EACxB,CAEA,OAAO,GAAa,GAAR/I,EAA2B,GAAbA,EAAQ,EACtC,EA7QJ,W,iFA6DUnhB,EAAckB,EAAWG,G,MAC3B,MAAM4K,EAAM,EAAAC,OAAOjB,WAAWtL,KAAKiH,QAE7BuF,EAAYG,EAAOC,YAAYvM,EAAM6Q,OAGvC3P,EAAI,GAAKiL,GAAaxM,KAAKiH,OAAO8F,MAAQ,GAAK,EAAA/M,KAAI,OAASuB,IAC5DA,EAAI,GACJG,GAAK,IAGT,IAAI8oB,EAAQjpB,EAPO,IAQfkpB,EAAQ/oB,EAAIgpB,EARG,EASfC,EAAQD,GAA8Ble,EAAY,GAGtD,MAAMoe,EAAW7jB,IACb,IAAKA,EACD,OAAO,EAEX,MAAM8jB,EAAK9jB,EAAM8F,QAAU7M,KAAKqd,eAAe9b,EAAI6K,QAAU,EAAApM,KAAI,OAASuB,EACtEupB,EAAK/jB,EAAM+F,QAAU9M,KAAKqd,eAAe3b,EAAI2K,QAAU,EAAArM,KAAI,OAAS0B,EAExE,OAAOmpB,GAAML,GAASK,GAAML,EAAQG,GAC1BG,GAAML,GAASK,GAAML,EAVvB,IAaNnY,EAAY,CAACpQ,EAAoB6E,KACnC/G,KAAKmS,WAAWzR,OAAOL,EAAMF,GAAI4G,GAEjCuF,EAAIU,YAEJV,EAAIW,UAAUud,EAAOC,EAAOE,EAlBpB,GAVO,GA8Bfre,EAAIgB,UAAYX,EAAO4F,YAAY,EAAAjN,MAAMC,iBAAkB/D,KAAK2B,OAAO,GAAKjB,IAC5EoK,EAAIkB,QA6ER,OA1EAxN,KAAKmS,WAAWjS,IAAIG,EAAMF,GACtB,EAAAc,cAAc6F,MACd,CACI3E,SAAU4N,EAAUjQ,WAAW6J,OAC/BpH,YAAY,EACZH,OAAQ,IACwB4D,MAArBhG,KAAKuY,eACDqS,EAAQ5qB,KAAKuY,eACTlY,aAAiB,EAAA0J,QACI,IAAlB1J,EAAMkK,SACNlK,EAAMA,QAAUA,EAAMkK,UAC9BlK,EAAMmK,iBAEpBnI,KAAMH,IACF7B,EAAMgK,OAAOnI,GAEK,GAAdA,IACAlC,KAAKuY,aAAe,IAAIE,aAAa,EAAAhS,OAAOK,WAIxD8jB,EAAQ5qB,KAAK+V,mBACb/V,KAAKmS,WAAWjS,IAAIG,EAAMF,GACtB,EAAAc,cAAcwR,UACd,CACItQ,SAAU4N,EAAUjQ,WAAWgK,OAC/BzH,KAAMH,IACFoQ,EAAUpQ,EAAY,EAAAjB,cAAcyR,eAI3CrS,EAAMiK,WACP,EAAAtK,KAAA,OAAAA,KAAA,YAAkB,KAElB,EAAAA,KAAI,OAAQwH,UAAUnH,IAG1BL,KAAKiH,OAAO2B,MAAM4J,OAAS,EAAA1J,OAAO0I,OAAOE,SAEzC1R,KAAKmS,WAAWjS,IAAIG,EAAMF,GACtB,EAAAc,cAAcyR,WACd,CACI9R,MAAOmP,EAAU4C,MAAMC,QACvBzQ,SAAU4N,EAAUjQ,WAAWgK,OAC/BxH,UAAU,EACVD,KAAMH,IACFoQ,EAAUpQ,EAAY,EAAAjB,cAAcwR,cAKpDnG,EAAIU,YAEJV,EAAIoB,IAAInM,EAAI,EAAGG,EAAI,EAAG,EAAG,EAAG,EAAIF,KAAKmM,IACrCrB,EAAIgB,UAAYjN,EAAMiK,SAAWqC,EAAOoe,UAAU1qB,EAAMoC,OAASpC,EAAMoC,MACvE6J,EAAIkB,OAEJlB,EAAIgB,UAAY,EAAAhI,MAAMI,KAClBrF,EAAMiK,WACNgC,EAAIgB,WAAa,MAErBhB,EAAIuB,SAASxN,EAAM6Q,MAAO3P,EAAImpB,EAAqB,EAAGhpB,EAAI,GAE1DH,GAAK,GAEDlB,EAAMiK,WACNgC,EAAIuH,OAAOtS,EAAI,GAAIG,EAAI,GACvB4K,EAAIwH,OAAOvS,EAAIiL,EAAY,GAAI9K,EAAI,GACnC4K,EAAIa,YAAc,EAAA7H,MAAMI,KAAO,KAC/B4G,EAAIiB,UAKD,CACHhM,EAHJA,GAAKiL,EAAY,GAIb9K,EAAGA,EAEX,C,+EChMJ,MAAaua,GAAb,WACoB,EAAAD,YAAc,E,GCA9BgP,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBllB,IAAjBmlB,EACH,OAAOA,EAAaC,QAGrB,IAAIC,EAASL,EAAyBE,GAAY,CAGjDE,QAAS,CAAC,GAOX,OAHAE,EAAoBJ,GAAUK,KAAKF,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAGpEI,EAAOD,OACf,CCtBAjW,OAAOqW,UAAU7I,YAAc,YAAalS,GACxC,OAAOA,EAAO+H,SAAiBxY,KACnC,EAEAa,KAAK2qB,UAAUvI,QAAU,SAAUwI,GAC/B,IAAI1mB,EAAS,IAAIlE,KAAKb,MAEtB,OADA+E,EAAO2mB,QAAQ3mB,EAAO4mB,UAAYF,GAC3B1mB,CACX,EAEAlE,KAAK2qB,UAAU3L,gBAAkB,SAAU+L,GACvC,IAAI7mB,EAAS,IAAIlE,KAAKb,MAEtB,OADA+E,EAAO8mB,gBAAgB9mB,EAAO+mB,kBAAoBF,GAC3C7mB,CACX,EAEA9E,IAAIurB,UAAUlK,OAAS,SAAUhhB,EAAUD,GAClCL,KAAKO,IAAID,IACVN,KAAKQ,IAAIF,EAAKD,EACtB,E,MCnBA,cAGA,SAAS0rB,IACT,CAEAA,EAAQ1W,MAAQ,SAASnP,EAAsBC,GAC3C,OAAO,IAAI,EAAA6lB,MAAM9lB,EAASC,EAC9B,EAGAS,OAAOmlB,QAAUA,C","sources":["webpack://charts/./src/Animations.ts","webpack://charts/./src/Helper.ts","webpack://charts/./src/types/TooltipValue.ts","webpack://charts/./src/helpers/Errors.ts","webpack://charts/./src/Chart.ts","webpack://charts/./src/types/Color.ts","webpack://charts/./src/static/constants/Animations.ts","webpack://charts/./src/types/Sector.ts","webpack://charts/./src/static/TextResources.ts","webpack://charts/./src/helpers/Canvas.ts","webpack://charts/./src/Tooltip.ts","webpack://charts/./src/static/ThemeOptions.ts","webpack://charts/./src/types/data/PlotData.ts","webpack://charts/./src/static/constants/Styles.ts","webpack://charts/./src/Dropdown.ts","webpack://charts/./src/Theme.ts","webpack://charts/./src/render/CircularRenderer.ts","webpack://charts/./src/types/base/Renderer.ts","webpack://charts/./src/types/data/TreeData.ts","webpack://charts/./src/types/data/CircularData.ts","webpack://charts/./src/types/base/Value.ts","webpack://charts/./src/render/PlotRenderer.ts","webpack://charts/./src/static/constants/Dates.ts","webpack://charts/./src/helpers/TextStyles.ts","webpack://charts/./src/types/base/Renderable.ts","webpack://charts/./src/render/TreeRenderer.ts","webpack://charts/./src/Decomposition.ts","webpack://charts/./src/static/constants/Index.ts","webpack://charts/./src/render/GaugeRenderer.ts","webpack://charts/./src/Export.ts","webpack://charts/./src/helpers/Formatter.ts","webpack://charts/./src/Button.ts","webpack://charts/./src/static/Enums.ts","webpack://charts/./src/Modal.ts","webpack://charts/./src/types/PlotSeries.ts","webpack://charts/./src/Legend.ts","webpack://charts/./src/static/constants/Values.ts","webpack://charts/webpack/bootstrap","webpack://charts/./src/Prototypes.ts","webpack://charts/./src/OCharts.ts"],"sourcesContent":["import { AnimationItem } from 'types/AnimationItem'\nimport { AnimationType } from 'static/Enums'\n\nexport class Animations {\n    #queue: Map<string, AnimationItem>\n\n    static transitionCurve: Map<number, number> = new Map()\n\n    constructor() {\n        this.#queue = new Map()\n    }\n\n    add(id: string, type: AnimationType, value: AnimationItem) {\n        const key = this.#getKey(id, type)\n        if (!this.#queue.has(key))\n            this.#queue.set(key, value)\n\n        this.#process(key)\n    }\n\n    contains(id: string, type: AnimationType): boolean {\n        return this.#queue.has(this.#getKey(id, type))\n    }\n\n    reload(id: string, type: AnimationType) {\n        if (this.contains(id, type)) {\n            let item = <AnimationItem>this.#queue.get(this.#getKey(id, type))\n\n            item.timer = new Date()\n        }\n    }\n\n    clear() {\n        this.#queue.forEach((_value, key) => !this.#is(key, AnimationType.Init) && this.#queue.delete(key))\n    }\n\n    #process(key: string) {\n        const item = <AnimationItem>this.#queue.get(key),\n            stamp = new Date(),\n            passed = stamp.getTime() - (item.timer ?? stamp).getTime(),\n            transition = Animations.getTransition(passed > item.duration ? 1 : passed / item.duration),\n            before = item.before ? item.before() : true\n\n        if (!item.timer && before)\n            item.timer = stamp\n\n        if (before)\n            item.body(item.backward ? 1 - transition : transition)\n\n        if (transition == 1 && (!before || item.continuous))\n            this.#queue.delete(key)\n    }\n\n    #getKey(id: string, type: number) {\n        return id + '_' + type\n    }\n\n    #is(key: string, type: number) {\n        return key.endsWith('_' + type)\n    }\n\n    static initializeTransitions() {\n        const valuesCount = 30000,\n            offset = .23,\n            p0 = { x: 0, y: 0 },\n            p1 = { x: 1 - offset, y: offset },\n            p2 = { x: offset, y: 1 - offset },\n            p3 = { x: 1, y: 1 }\n\n        for (let i = 0; i < valuesCount; i++) {\n            const t = (i + 1) / valuesCount\n\n            let x = Math.pow(1 - t, 3) * p0.x\n                    + 3 * Math.pow(1 - t, 2) * p1.x * t\n                    + 3 * (1 - t) * Math.pow(t, 2) * p2.x\n                    + Math.pow(t, 3) * p3.x,\n                y = Math.pow(1 - t, 3) * p0.y\n                    + 3 * Math.pow(1 - t, 2) * p1.y * t\n                    + 3 * (1 - t) * Math.pow(t, 2) * p2.y\n                    + Math.pow(t, 3) * p3.y\n\n            Animations.transitionCurve.set(+x.toFixed(4), y)\n        }\n\n        Animations.transitionCurve.set(0, 0)\n    }\n\n    static getTransition(value: number): number {\n        return Animations.transitionCurve.get(+value.toFixed(4)) ?? 0\n    }\n}","import { Color } from 'types/Color'\nimport { Theme } from 'Theme'\n\nexport function adjustColor(color: string, amount: number) {\n    return '#' + color.replace(/^#/, '').replace(/../g, color => ('0' + Math.min(255, Math.max(0, parseInt(color, 16) + amount)).toString(16)).slice(-2))\n}\n\nexport function grayScale(color: string) {\n    return '#' + Array(4).join(Math.round([.3, .59, .11].reduce((a, v, i) => a + v * parseInt(color[2 * i + 1] + color[2 * i + 2], 16), 0) / 3).toString(16).padStart(2, '0'))\n}\n\nexport function randomColor() {\n    let letters = '0123456789ABCDEF',\n        color = '#'\n    for (let i = 0; i < 6; i++)\n        color += letters[Math.floor(Math.random() * 16)]\n\n    return color\n}\n\nexport function stringWidth(str: string | undefined, font?: number) {\n    if (!str)\n        return 0\n\n    const widths = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.2796875, 0.2765625, 0.3546875, 0.5546875, 0.5546875, 0.8890625, 0.665625, 0.190625, 0.3328125, 0.3328125, 0.3890625, 0.5828125, 0.2765625, 0.3328125, 0.2765625, 0.3015625, 0.5546875, 0.5546875, 0.5546875, 0.5546875, 0.5546875, 0.5546875, 0.5546875, 0.5546875, 0.5546875, 0.5546875, 0.2765625, 0.2765625, 0.584375, 0.5828125, 0.584375, 0.5546875, 1.0140625, 0.665625, 0.665625, 0.721875, 0.721875, 0.665625, 0.609375, 0.7765625, 0.721875, 0.2765625, 0.5, 0.665625, 0.5546875, 0.8328125, 0.721875, 0.7765625, 0.665625, 0.7765625, 0.721875, 0.665625, 0.609375, 0.721875, 0.665625, 0.94375, 0.665625, 0.665625, 0.609375, 0.2765625, 0.3546875, 0.2765625, 0.4765625, 0.5546875, 0.3328125, 0.5546875, 0.5546875, 0.5, 0.5546875, 0.5546875, 0.2765625, 0.5546875, 0.5546875, 0.221875, 0.240625, 0.5, 0.221875, 0.8328125, 0.5546875, 0.5546875, 0.5546875, 0.5546875, 0.3328125, 0.5, 0.2765625, 0.5546875, 0.5, 0.721875, 0.5, 0.5, 0.5, 0.3546875, 0.259375, 0.353125, 0.5890625],\n        avg = 0.5279276315789471\n\n    return Array.from(str).reduce((acc, cur) => acc + (widths[cur.charCodeAt(0)] ?? avg), 0) * (font || 14)\n}\n\nexport function guid() {\n    const S4 = () => (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1)\n    return (S4() + S4() + '-' + S4() + '-4' + S4().slice(0, 3) + '-' + S4() + '-' + S4() + S4() + S4()).toLowerCase()\n}\n\nexport function hexToRgb(hex: string): Color {\n    if (hex.length > 4) {\n        const value = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex)\n        if (value)\n            return {\n                r: parseInt(value[1], 16),\n                g: parseInt(value[2], 16),\n                b: parseInt(value[3], 16)\n            }\n    } else {\n        const value = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i.exec(hex)\n        if (value)\n            return {\n                r: parseInt(value[1] + value[1], 16),\n                g: parseInt(value[2] + value[2], 16),\n                b: parseInt(value[3] + value[3], 16)\n            }\n    }\n\n    return new Color()\n}\n\nexport function isColorVisible(background: string, foreground: string) {\n    const backgroundAsRgb = hexToRgb(background),\n        foregroundAsRgb = hexToRgb(foreground),\n        value = .77\n\n    return (backgroundAsRgb.r + backgroundAsRgb.g + backgroundAsRgb.b) / (foregroundAsRgb.r + foregroundAsRgb.g + foregroundAsRgb.b) < value\n}\n\nexport function isISOString(str: string) {\n    return /\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d\\.\\d+/.test(str)\n}\n\nexport function applyAlpha(color: string, opacity: number) {\n    function hexToRgb(hex: string) {\n        let result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex)\n        return result\n               ? {\n                   r: parseInt(result[1], 16),\n                   g: parseInt(result[2], 16),\n                   b: parseInt(result[3], 16)\n               } as Color\n               : {\n                   r: 0,\n                   g: 0,\n                   b: 0\n               } as Color\n    }\n\n    function componentToHex(c: number) {\n        let hex = c.toString(16)\n        return hex.length == 1 ? '0' + hex : hex\n    }\n\n    function rgbToHex(r: number, g: number, b: number) {\n        return '#' + componentToHex(r) + componentToHex(g) + componentToHex(b)\n    }\n\n    const rgb = hexToRgb(color),\n        bg = hexToRgb(Theme.canvasBackground)\n\n    opacity /= 255\n\n    const alpha = 1 - opacity\n\n    return rgbToHex(\n        Math.round((opacity * (rgb.r / 255) + (alpha * (bg.r / 255))) * 255),\n        Math.round((opacity * (rgb.g / 255) + (alpha * (bg.g / 255))) * 255),\n        Math.round((opacity * (rgb.b / 255) + (alpha * (bg.b / 255))) * 255)\n    )\n}","export class TooltipValue {\n    text: string | undefined\n\n    color: string | undefined\n\n    constructor(text?: string, color?: string) {\n        this.text = text\n        this.color = color\n    }\n}","import { ErrorType } from 'static/Enums'\n\nexport abstract class Errors {\n    static throw(error: ErrorType): never {\n        throw new Error(error)\n    }\n\n    static throwIsUndefined(object: any, error: ErrorType) {\n        if (object == undefined)\n            Errors.throw(error)\n    }\n}","import { ChartSettings } from 'types/ChartSettings'\nimport { Renderer } from 'types/base/Renderer'\nimport { Data } from 'types/interfaces/Data'\nimport { Legend } from 'Legend'\nimport { Value } from 'types/base/Value'\nimport { PlotRenderer } from 'render/PlotRenderer'\nimport { CircularRenderer } from 'render/CircularRenderer'\nimport { GaugeRenderer } from 'render/GaugeRenderer'\nimport { TreeRenderer } from 'render/TreeRenderer'\nimport { Animations } from 'Animations'\nimport { Theme } from 'Theme'\nimport { Styles } from 'static/constants/Styles'\nimport { ChartType, Events } from 'static/Enums'\n\nexport class Chart {\n    node: HTMLElement\n\n    settings: ChartSettings\n\n    #renderer: Renderer<Data>\n\n    #legend: Legend\n\n    #observer: ResizeObserver\n\n    constructor(context: HTMLElement, settings: ChartSettings) {\n        this.#initialize(settings)\n\n        this.node = context\n        this.settings = settings\n\n        this.#applyStyles()\n        this.#prepareSettings()\n\n        if (settings.enableLegend)\n            this.#legend = new Legend(this)\n\n        document.addEventListener(Events.VisibilityChanged, () => this.#renderer.resetMouse())\n        window.addEventListener(Events.Blur, () => this.#renderer.resetMouse())\n\n        window.addEventListener(Events.Click, event => {\n            if (event.target != this.#renderer.canvas)\n                this.#renderer.closeDropdowns()\n        })\n    }\n\n    render() {\n        this.#renderer.render()\n        this.#legend?.render()\n\n        this.#observer = new ResizeObserver(() => {\n            if (this.#renderer.canvas)\n                this.#resize()\n            else\n                this.destroy()\n        })\n        this.#observer.observe(this.node)\n\n        this.#refresh()\n    }\n\n    destroy() {\n        this.#renderer.destroy()\n        this.#legend?.destroy()\n\n        this.#observer.disconnect()\n    }\n\n    highlight(value?: Value) {\n        this.#renderer.highlight(value)\n    }\n\n    reset() {\n        Theme.reset()\n\n        this.#initialize(this.settings)\n    }\n\n    #prepareSettings() {\n        this.settings.enableTooltip = !this.settings.disableInteractions && this.settings.enableTooltip\n\n        switch (this.settings.type) {\n            case ChartType.Plot:\n                this.#renderer = new PlotRenderer(this)\n                break\n\n            case ChartType.Circular:\n                this.#renderer = new CircularRenderer(this)\n                break\n\n            case ChartType.Gauge:\n                this.#renderer = new GaugeRenderer(this)\n                break\n\n            case ChartType.TreeMap:\n                this.#renderer = new TreeRenderer(this)\n                break\n        }\n\n        this.#renderer.prepareSettings()\n\n        if (!this.settings.disableInteractions) {\n            this.#renderer.initDropdown()\n            this.#renderer.initAnimations()\n        }\n\n        this.#renderer.resize()\n    }\n\n    #refresh() {\n        this.#renderer.refresh()\n        this.#legend?.refresh()\n    }\n\n    #resize() {\n        this.#renderer.resize()\n        this.#legend?.resize()\n    }\n\n    #initialize(settings: ChartSettings) {\n        Theme.initialize(\n            () => this.#resize(),\n            settings.isDarkThemeFunction\n        )\n        Animations.initializeTransitions()\n    }\n\n    #applyStyles() {\n        this.node.style.display = Styles.Display.Flex\n        this.node.style.flexDirection = Styles.FlexDirection.Column\n        this.node.style.alignItems = Styles.AlignItems.Center\n        this.node.style.justifyContent = Styles.JustifyContent.Center\n        this.node.style.height = '100%'\n    }\n}","export class Color {\n    r: number\n\n    g: number\n\n    b: number\n}","export class Animations {\n    static circular = 335\n\n    static legend = 500\n\n    static tree = 250\n\n    static tooltip = 120\n\n    static button = 200\n}","import { Value } from 'types/base/Value'\nimport { Point } from 'types/Point'\n\nexport class Sector extends Value {\n    current: number\n\n    transition: number\n\n    translate: Point\n\n    innerRadius: number\n\n    constructor(obj: object) {\n        super()\n\n        Object.assign(this, obj)\n    }\n\n    toggle(transition: number) {\n        super.toggle(transition)\n\n        if (this.disabled)\n            this.current = this.value * (1 - transition)\n        else\n            this.current = this.value * transition\n    }\n\n    checkCondition(): boolean {\n        super.checkCondition()\n\n        return (this.current == 0 && !this.disabled) || this.value != 0\n    }\n\n    reset() {\n        super.reset()\n\n        this.current = this.value\n    }\n}","export class TextResources {\n    static exportPNG = 'Save as image...'\n\n    static decomposeToTable = 'Show as table...'\n\n    static reset = 'Reset'\n\n    static exportCSV = 'Save as table...'\n\n    static menu = 'Menu'\n\n    static allDataIsHidden = 'All data is hidden'\n\n    static other = 'Other'\n\n    static thousandShort = 'K'\n\n    static millionShort = 'M'\n\n    static billionShort = 'B'\n\n    static show = 'Show...'\n\n    static noLabel = 'No Label'\n\n    static treeMapIsEmpty = 'Tree Map is empty'\n}","import { Errors } from 'helpers/Errors'\nimport { ErrorType } from 'static/Enums'\nimport { Theme } from 'Theme'\n\nexport abstract class Canvas {\n    static getContext(canvas: HTMLCanvasElement): CanvasRenderingContext2D {\n        return canvas.getContext('2d', { willReadFrequently: true })\n               ?? Errors.throw(ErrorType.NullContext)\n    }\n\n    static isPixelBusy(pixel: number) {\n        return pixel != undefined && pixel - Theme.canvasBackgroundInt != 0\n    }\n}","import { Value } from 'types/base/Value'\nimport { Theme } from 'Theme'\nimport { TextStyles } from 'helpers/TextStyles'\nimport * as Helper from 'Helper'\nimport { ChartSettings } from 'types/ChartSettings'\nimport { TooltipValue } from 'types/TooltipValue'\nimport { Data } from 'types/interfaces/Data'\nimport { Canvas } from 'helpers/Canvas'\nimport * as Constants from 'static/constants/Index'\nimport { Styles } from 'static/constants/Styles'\nimport { HTMLTooltipElement } from 'types/extends/HTMLTooltipElement'\nimport { Attribute, Tag } from 'static/Enums'\n\nexport class Tooltip {\n    canvas: HTMLCanvasElement\n\n    data: Data\n\n    readonly #enabled: boolean\n\n    readonly #isCustom: boolean\n\n    #canvasPosition: DOMRect\n\n    #template: HTMLTemplateElement\n\n    #inProgress: boolean\n\n    #toHide: boolean\n\n    #timer: Date | undefined\n\n    #lines: TooltipValue[]\n\n    constructor(canvas: HTMLCanvasElement, settings: ChartSettings) {\n        this.canvas = canvas\n        this.data = settings.data\n        this.#enabled = settings.enableTooltip\n        this.#isCustom = !!settings.templateId\n\n        if (this.#isCustom)\n            this.#template = <HTMLTemplateElement>document.getElementById(settings.templateId)\n\n        this.refresh()\n    }\n\n    render(condition: boolean, event: MouseEvent, lines: TooltipValue[], value?: Value) {\n        this.#hideAll()\n\n        if (!this.#enabled || !event)\n            return\n\n        if (condition || this.#inProgress || this.#toHide) {\n            if (condition)\n                this.#lines = lines\n\n            if (!this.#timer)\n                this.#timer = new Date()\n\n            if (!this.#toHide)\n                this.#inProgress = true\n            else if (this.#inProgress)\n                this.#timer = new Date()\n\n            if (this.#isCustom)\n                this.#renderCustom(event, value)\n            else\n                this.#renderRegular(event)\n\n            const opacityValue = this.#getOpacityValue()\n\n            if (this.#toHide && opacityValue >= 1) {\n                this.#inProgress = false\n                this.#toHide = false\n            }\n\n            if (this.#toHide && opacityValue <= 0) {\n                this.#inProgress = false\n                this.#toHide = false\n                this.#timer = undefined\n            }\n\n            if (!condition && this.#timer != undefined)\n                this.#toHide = true\n        } else {\n            this.#timer = undefined\n        }\n    }\n\n    #renderRegular(event: MouseEvent) {\n        const ctx = Canvas.getContext(this.canvas)\n\n        const textWidth = Math.max(...this.#lines.map(line => Helper.stringWidth(line.text ?? '') + (line.color ? 8 : 0)))\n\n        const padding = 6,\n            borderRadius = 6\n\n        let x = event.clientX - this.#canvasPosition.x + 10,\n            y = event.clientY - this.#canvasPosition.y + scrollY + 10\n\n        if (x + textWidth + 25 > this.#canvasPosition.width)\n            x = this.#canvasPosition.width - (textWidth + 25)\n\n        if (y + 4 + this.#lines.length * 18 > this.#canvasPosition.height)\n            y = this.#canvasPosition.height - 4 - this.#lines.length * 18\n\n        ctx.beginPath()\n        ctx.roundRect(x, y, textWidth + 24, 16 + 16 * this.#lines.length, borderRadius)\n        let opacity = Math.round(this.#getOpacityValue() * 255).toString(16),\n            baseOpacity = Math.round(this.#getOpacityValue() * 207).toString(16)\n        if (opacity.length == 1)\n            opacity = '0' + opacity\n        if (baseOpacity.length == 1)\n            baseOpacity = '0' + baseOpacity\n\n        ctx.strokeStyle = Theme.dropdownBorder + baseOpacity\n        ctx.lineWidth = 1\n        ctx.fillStyle = Theme.background + baseOpacity\n        ctx.stroke()\n        ctx.fill()\n\n        for (let line of this.#lines) {\n            let offset = 0\n\n            if (line.color) {\n                offset = 12\n\n                ctx.beginPath()\n                ctx.fillStyle = line.color + opacity\n                ctx.arc(x + 16, y + 17, 5, 0, Math.PI * 2)\n                ctx.fill()\n            }\n\n            TextStyles.tooltip(ctx)\n            ctx.fillStyle = Theme.text + opacity\n            ctx.fillText(line.text ?? '', x + offset + padding * 2, y + 21)\n\n            y += 16\n        }\n    }\n\n    #renderCustom(event: MouseEvent, value?: Value) {\n        if (value == undefined)\n            return\n\n        const id = this.#template.id + value.id\n\n        let tooltip = <HTMLTooltipElement>document.getElementById(id)\n\n        const updateVisibility = () => {\n            this.#hideAll()\n\n            tooltip.style.visibility = Styles.Visibility.Visible\n        }\n\n        if (!tooltip) {\n            const regex = /\\${[^}]*}/gm\n\n            let content = <HTMLElement>this.#template.cloneNode(true)\n\n            tooltip = document.createElement(Tag.Div) as HTMLTooltipElement\n\n            tooltip.innerHTML = content.innerHTML\n\n            tooltip.id = id\n            tooltip.style.position = Styles.Position.Absolute\n            tooltip.style.pointerEvents = Styles.PointerEvents.None\n            tooltip.style.visibility = Styles.Visibility.Visible\n\n            tooltip.setAttribute(Attribute.Name, this.#template.id)\n\n            const matches = [...tooltip.innerHTML.matchAll(regex)]\n\n            let html = tooltip.innerHTML\n\n            for (const match of matches) {\n                const property = match[0].replace('${', '')\n                                         .replace('}', '')\n                                         .replaceAll(' ', '')\n\n                html = html.replaceAll(match[0], value.data[property])\n            }\n\n            tooltip.innerHTML = html\n\n            document.body.appendChild(tooltip)\n\n            tooltip.position = tooltip.getBoundingClientRect()\n\n            updateVisibility()\n        }\n\n        if (tooltip.style.visibility == Styles.Visibility.Hidden)\n            updateVisibility()\n\n        if (tooltip.position.height == 0)\n            tooltip.position = tooltip.getBoundingClientRect()\n\n        const offset = 10\n\n        let opacity = '1'\n\n        let x = event.clientX,\n            y = event.clientY + scrollY\n\n        if (x + tooltip.position.width - this.#canvasPosition.x > this.#canvasPosition.width - offset) {\n            x = this.#canvasPosition.width - tooltip.position.width + this.#canvasPosition.x - offset\n            opacity = '.67'\n        }\n\n        if (y + tooltip.position.height - this.#canvasPosition.y > this.#canvasPosition.height - offset) {\n            y = this.#canvasPosition.height - tooltip.position.height + this.#canvasPosition.y - offset\n            opacity = '.67'\n        }\n\n        if (x == 0 && y == 0)\n            opacity = '0'\n\n        tooltip.style.left = x + offset + 'px'\n        tooltip.style.top = y + offset + 'px'\n        tooltip.style.opacity = opacity\n    }\n\n    refresh() {\n        this.#canvasPosition = this.canvas.getBoundingClientRect()\n        this.#canvasPosition.x += scrollX\n        this.#canvasPosition.y += scrollY\n    }\n\n    #hideAll() {\n        if (!this.#isCustom)\n            return\n\n        const tooltips = <NodeListOf<HTMLElement>>document.querySelectorAll(`[name=\"${ this.#template.id }\"]`)\n\n        for (let node of tooltips)\n            node.style.visibility = Styles.Visibility.Hidden\n    }\n\n    #getOpacityValue(): number {\n        if (!this.#timer)\n            return 0\n\n        let opacityValue = this.#toHide\n                           ? 1 - (new Date().getTime() - this.#timer.getTime()) / Constants.Animations.tooltip\n                           : (new Date().getTime() - this.#timer.getTime()) / Constants.Animations.tooltip\n        if (opacityValue > 1)\n            opacityValue = 1\n        if (opacityValue < 0)\n            opacityValue = 0\n\n        return opacityValue\n    }\n}","export class ThemeOptions {\n    static readonly colors = ['#000000', '#ffffff']\n\n    static readonly backgrounds = ['#f7f7f7', '#222222']\n\n    static readonly lines = ['#000000', '#eeeeee']\n\n    static readonly lineAxes = ['#e0e0e0', '#212121']\n\n    static readonly lineActives = ['#898989', '#898989']\n\n    static readonly dropdownBorders = ['#bcbcbc', '#7e7e7e']\n\n    static readonly canvasBackgrounds = ['#ffffff', '#222222']\n}","import { TableValue } from 'types/TableValue'\nimport { PlotSeries } from 'types/PlotSeries'\nimport { TableHeaderValue } from 'types/TableHeaderValue'\nimport { TableData } from 'types/TableData'\nimport { Data } from 'types/interfaces/Data'\nimport { Formatter } from 'helpers/Formatter'\nimport { PlotAxisType } from 'static/Enums'\n\nexport class PlotData implements Data {\n    shortLabels: boolean\n\n    simple: boolean\n\n    yMax: number\n\n    xTitle: string\n\n    yTitle: string\n\n    xType: PlotAxisType\n\n    values: PlotSeries[]\n\n    static getRows(data: PlotData): TableData {\n        let headers: TableHeaderValue[] = []\n\n        let values: TableValue[] = []\n\n        for (const series of data.values) {\n            let seriesValues = new Map<string, any>()\n\n            for (const value of series.values) {\n                seriesValues.set(value.x.toString(), value.y)\n                headers.push({\n                    value: value.x.toString(),\n                    display: data.xType == PlotAxisType.Date\n                             ? Formatter.date(new Date(value.x))\n                             : value.x.toString()\n                })\n            }\n\n            values.push({\n                name: series.label,\n                values: seriesValues\n            })\n        }\n\n        const unique = new Set(),\n            uniqueHeaders = headers.filter(v => !unique.has(v.display) && unique.add(v.display))\n\n        if (data.xType == PlotAxisType.Date)\n            uniqueHeaders.sort((a, b) => new Date(a.value).getTime() - new Date(b.value).getTime())\n\n        return {\n            headers: uniqueHeaders,\n            values: values\n        }\n    }\n}","export namespace Styles {\n    export class Cursor {\n        static Default = 'default'\n\n        static Pointer = 'pointer'\n    }\n\n    export class Display {\n        static Flex = 'flex'\n    }\n\n    export class FlexDirection {\n        static Column = 'column'\n\n        static ColumnReverse = 'column-reverse'\n\n        static Row = 'row'\n\n        static RowReverse = 'row-reverse'\n    }\n\n    export class AlignItems {\n        static Center = 'center'\n    }\n\n    export class Visibility {\n        static Visible = 'visible'\n\n        static Hidden = 'hidden'\n    }\n\n    export class Position {\n        static Absolute = 'absolute'\n    }\n\n    export class PointerEvents {\n        static None = 'none'\n    }\n\n    export class JustifyContent {\n        static Center = 'center'\n    }\n\n    export class ImageRendering {\n        static Pixelated = 'pixelated'\n    }\n}","import { Theme } from 'Theme'\nimport { DropdownOptions } from 'types/DropdownOptions'\nimport { Animations } from 'Animations'\nimport * as Helper from 'Helper'\nimport { TextStyles } from 'helpers/TextStyles'\nimport { Canvas } from 'helpers/Canvas'\nimport { AnimationType } from 'static/Enums'\nimport * as Constants from 'static/constants/Index'\nimport { Styles } from 'static/constants/Styles'\n\nexport class Dropdown {\n    isActive: boolean = false\n\n    #isInit: boolean\n\n    #options: DropdownOptions\n\n    #canvasPosition: DOMRect\n\n    animations: Animations\n\n    #position: DOMRect\n\n    readonly #isOnlyMenu: boolean\n\n    readonly #canvas: HTMLCanvasElement\n\n    constructor(canvas: HTMLCanvasElement, options: DropdownOptions) {\n        this.#canvas = canvas\n        this.#options = options\n\n        if (this.#options.icon)\n            this.#options.text = this.#options.icon\n\n        this.#isOnlyMenu = this.#options.text == undefined\n\n        this.animations = new Animations()\n    }\n\n    render(moveEvent: MouseEvent, clickEvent: MouseEvent | undefined) {\n        if (!this.#isInit)\n            this.#initAnimations()\n\n        if (this.#isOnlyMenu)\n            this.isActive = true\n\n        const ctx = Canvas.getContext(this.#canvas)\n\n        let x = this.#position.x,\n            y = this.#position.y,\n            width = this.#position.width,\n            height = this.#position.height\n\n        ctx.beginPath()\n\n        if (!this.#isOnlyMenu) {\n            const translate = (transition: number, event: AnimationType) => {\n                this.animations.reload('animation-dropdown', event)\n\n                ctx.fillStyle = Helper.adjustColor(Theme.canvasBackground, -Math.round(25 * transition))\n            }\n\n            if (this.#isOnButton(moveEvent, x, y, width, height)) {\n                this.#canvas.style.cursor = Styles.Cursor.Pointer\n\n                if (clickEvent && moveEvent.x == clickEvent.x && moveEvent.y == clickEvent.y) {\n                    this.isActive = !this.isActive\n                    clickEvent = undefined\n                }\n\n                if (!this.isActive)\n                    this.animations.add('animation-dropdown',\n                        AnimationType.MouseOver,\n                        {\n                            duration: 300,\n                            body: transition => {\n                                translate(transition, AnimationType.MouseLeave)\n                            }\n                        })\n                else\n                    ctx.fillStyle = Helper.adjustColor(Theme.canvasBackground, -25)\n            } else {\n                this.#canvas.style.cursor = Styles.Cursor.Default\n\n                if (!this.isActive)\n                    this.animations.add('animation-dropdown',\n                        AnimationType.MouseLeave,\n                        {\n                            timer: Constants.Dates.minDate,\n                            duration: 300,\n                            backward: true,\n                            body: transition => {\n                                translate(transition, AnimationType.MouseOver)\n                            }\n                        })\n                else\n                    ctx.fillStyle = Helper.adjustColor(Theme.canvasBackground, -25)\n            }\n\n            ctx.roundRect(x, y, width, height, 4)\n            ctx.fill()\n\n            TextStyles.regular(ctx)\n\n            if (this.#options.icon)\n                ctx.font = '20px sans-serif'\n\n            const iconOffset = this.#options.icon\n                               ? navigator.platform != 'Win32'\n                                 ? 1\n                                 : -1\n                               : 0\n\n            ctx.fillText(\n                this.#options.text ?? '',\n                x + width / 2,\n                y + height / 2 - iconOffset\n            )\n        }\n\n        if (this.isActive) {\n            const padding = 6,\n                borderRadius = 6\n\n            y += height\n\n            const items = this.#options.items.filter(value => value.text),\n                dividers = this.#options.items.filter(value => !value.text)\n\n            let maxWidth = Math.max(...items.map(value => Helper.stringWidth(value.text)))\n                           + padding * 4\n\n            if (x + maxWidth > this.#canvas.width - 4)\n                x -= x + maxWidth - this.#canvas.width + 4\n\n            const dropdownOpacity = 'bb',\n                itemOpacityDec = 127,\n                itemBackground = Theme.dropdownItemHoverColor,\n                borderColor = Theme.dropdownBorder\n\n            ctx.beginPath()\n\n            const rect = {\n                x: x,\n                y: y,\n                width: maxWidth,\n                height: items.length * 26\n                        + dividers.length * 4\n                        + (items.length == 1 ? padding : 0)\n                        + (items.length == 2 && dividers.length == 1 ? padding : 0)\n            }\n\n            ctx.roundRect(rect.x, rect.y, rect.width, rect.height, borderRadius)\n            ctx.fillStyle = Theme.background + dropdownOpacity\n            ctx.setLineDash([])\n            ctx.lineWidth = 1\n            ctx.strokeStyle = borderColor + dropdownOpacity\n            ctx.fill()\n            ctx.stroke()\n\n            ctx.beginPath()\n\n            y += 6\n\n            for (const item of this.#options.items) {\n                ctx.beginPath()\n\n                if (item.isDivider == true) {\n                    y += 2\n\n                    ctx.moveTo(x + padding, y)\n                    ctx.lineTo(x + maxWidth - padding, y)\n\n                    ctx.lineWidth = .5\n                    ctx.stroke()\n\n                    y += 4\n\n                    continue\n                }\n\n                ctx.fillStyle = 'transparent'\n\n                const animationKey = 'animation-dropdown' + item.text\n\n                const translate = (transition: number, event: AnimationType, isReturn?: boolean) => {\n                    this.animations.reload(animationKey, event)\n\n                    if (isReturn && transition == 1)\n                        return\n\n                    let opacity = Math.round(itemOpacityDec * transition).toString(16)\n                    if (opacity.length == 1)\n                        opacity = '0' + opacity\n\n                    ctx.fillStyle = itemBackground + opacity\n                }\n\n                if (this.#isOnButton(moveEvent, x, y, maxWidth, 20)) {\n                    this.animations.add(animationKey,\n                        AnimationType.MouseOver,\n                        {\n                            duration: 300,\n                            body: transition => {\n                                translate(transition, AnimationType.MouseLeave)\n                            }\n                        })\n\n                    this.#canvas.style.cursor = Styles.Cursor.Pointer\n\n                    if (clickEvent) {\n                        item.action()\n\n                        clickEvent = undefined\n                        this.isActive = false\n                    }\n                } else {\n                    this.animations.add(animationKey,\n                        AnimationType.MouseLeave,\n                        {\n                            timer: Constants.Dates.minDate,\n                            duration: 300,\n                            backward: true,\n                            body: transition => {\n                                translate(transition, AnimationType.MouseOver, true)\n                            }\n                        })\n                }\n\n                ctx.roundRect(x + padding, y, maxWidth - padding * 2, 20, borderRadius)\n                ctx.fill()\n\n                TextStyles.regular(ctx)\n                ctx.fillStyle = Theme.text\n                ctx.textAlign = 'left'\n                ctx.textBaseline = 'hanging'\n                ctx.fillText(item.text, x + padding * 2, y + 5)\n\n                y += 22\n            }\n        }\n\n        ctx.lineWidth = 1\n\n        if (!this.#isOnlyMenu && clickEvent != undefined && this.isActive) {\n            this.isActive = false\n            clickEvent = undefined\n        }\n\n        this.#isInit = true\n\n        if (this.#isOnlyMenu && clickEvent && moveEvent.x == clickEvent.x && moveEvent.y == clickEvent.y) {\n            this.isActive = !this.isActive\n            clickEvent = undefined\n        }\n\n        return clickEvent\n    }\n\n    #initAnimations() {\n        this.#canvasPosition = this.#canvas.getBoundingClientRect()\n\n        this.#canvasPosition.x += scrollX\n        this.#canvasPosition.y += scrollY\n    }\n\n    #isOnButton(event: MouseEvent, x: number, y: number, w: number, h: number): boolean {\n        if (!event)\n            return false\n\n        let trueX = event.clientX - this.#canvasPosition.x + scrollX,\n            trueY = event.clientY - this.#canvasPosition.y + scrollY\n\n        return trueX >= x && trueX <= x + w\n               && trueY >= y && trueY <= y + h\n    }\n\n    refresh() {\n        this.#isInit = false\n    }\n\n    resize() {\n        this.#initAnimations()\n        this.#calculatePosition()\n    }\n\n    close() {\n        this.isActive = false\n    }\n\n    #calculatePosition() {\n        const width = this.#isOnlyMenu ? 0 : Helper.stringWidth(this.#options.text ?? '') + 12,\n            height = this.#isOnlyMenu ? 0 : 20\n\n        this.#position = {\n            x: this.#options.x + width > this.#canvas.width\n               ? this.#canvas.width - width\n               : this.#options.x < 0\n                 ? this.#canvas.width + this.#options.x - width\n                 : this.#options.x,\n            y: this.#options.y + height > this.#canvas.height\n               ? this.#canvas.height - height\n               : this.#options.y < 0\n                 ? this.#canvas.height + this.#options.y - height\n                 : this.#options.y,\n            width: width,\n            height: height\n        } as DOMRect\n    }\n}","import * as Helper from 'Helper'\nimport { ThemeOptions } from 'static/ThemeOptions'\nimport { Events } from 'static/Enums'\n\nexport class Theme {\n    static currentTheme = 0\n\n    static text: string\n\n    static background: string\n\n    static line: string\n\n    static lineAxis: string\n\n    static lineActive: string\n\n    static dropdownItemHoverColor: string\n\n    static dropdownBorder: string\n\n    static canvasBackground: string\n\n    static canvasBackgroundInt: number\n\n    static function: Function | undefined\n\n    static initialize(callback: Function, isDark?: Function) {\n        if (!Theme.function && isDark)\n            Theme.function = isDark\n\n        if (window.matchMedia\n            && window.matchMedia('(prefers-color-scheme: dark)').matches\n            && (!Theme.function || Theme.function()))\n            Theme.setTheme(1)\n        else\n            Theme.setTheme(0)\n\n        window.matchMedia('(prefers-color-scheme: dark)')\n              .addEventListener(Events.Change, event => {\n                  Theme.setTheme(event.matches && (!Theme.function || Theme.function()) ? 1 : 0)\n                  callback()\n              })\n    }\n\n    static setTheme(index: number) {\n        Theme.currentTheme = index\n\n        Theme.text = ThemeOptions.colors[index]\n        Theme.background = ThemeOptions.backgrounds[index]\n        Theme.line = ThemeOptions.lines[index]\n        Theme.lineAxis = ThemeOptions.lineAxes[index]\n        Theme.lineActive = ThemeOptions.lineActives[index]\n        Theme.dropdownItemHoverColor = Helper.adjustColor(Theme.background, index == 0 ? -50 : 50)\n        Theme.dropdownBorder = ThemeOptions.dropdownBorders[index]\n        Theme.canvasBackground = ThemeOptions.canvasBackgrounds[index]\n        Theme.canvasBackgroundInt = Number(`0xff${ Theme.canvasBackground.slice(1) }`)\n    }\n\n    static reset() {\n        this.function = undefined\n    }\n}","import { Renderer } from 'types/base/Renderer'\nimport { CircularData } from 'types/data/CircularData'\nimport { Sector } from 'types/Sector'\nimport { CircularAngle } from 'types/CircularAngle'\nimport { Point } from 'types/Point'\nimport { DropdownItem } from 'types/DropdownItem'\nimport * as Helper from 'Helper'\nimport { Dropdown } from 'Dropdown'\nimport { Theme } from 'Theme'\nimport { TextStyles } from 'helpers/TextStyles'\nimport { Chart } from 'Chart'\nimport { TooltipValue } from 'types/TooltipValue'\nimport { Decomposition } from 'Decomposition'\nimport { Export } from 'Export'\nimport { TextResources } from 'static/TextResources'\nimport { Modal } from 'Modal'\nimport { Canvas } from 'helpers/Canvas'\nimport { Formatter } from 'helpers/Formatter'\nimport { AnimationType, Events, Icon, RenderState } from 'static/Enums'\nimport * as Constants from 'static/constants/Index'\nimport { Styles } from 'static/constants/Styles'\n\nexport class CircularRenderer extends Renderer<CircularData> {\n    #canRenderInnerTitle: boolean\n\n    #isDonut: boolean\n\n    #radius: number\n\n    #sum: number\n\n    #accumulator: number\n\n    #animationOffset: number\n\n    #hoverCount: number\n\n    #currentHover: string | undefined\n\n    #pinned: string[]\n\n    #center: Point\n\n    #startPoint: Point\n\n    #angles: CircularAngle[]\n\n    #other: Sector[]\n\n    #innerTitleStyle: Function\n\n    readonly #startAngle: number\n\n    constructor(chart: Chart) {\n        super(chart)\n\n        this.data.values = this.data.values.map(v => new Sector(v))\n\n        if (this.settings.enableOther) {\n            if (!this.settings.contextMenu)\n                this.settings.contextMenu = [] as DropdownItem[]\n            else\n                this.settings.contextMenu.push({\n                    isDivider: true\n                } as DropdownItem)\n\n            this.settings.contextMenu.push({\n                    text: TextResources.show,\n                    condition: data => data?._other,\n                    action: () => {\n                        new Modal(Decomposition.toChart<Sector>(this.settings, this.#other),\n                            {\n                                width: window.innerWidth * .8,\n                                height: window.innerHeight * .8\n                            } as DOMRect)\n                            .open()\n                    }\n                })\n        }\n\n        this.#startAngle = Math.PI / 4\n\n        this.#pinned = []\n\n        this.onMouseMoveEvent = new MouseEvent(Events.MouseMove)\n    }\n\n    render() {\n        super.render()\n\n        this.#accumulator = this.#startAngle\n        this.#hoverCount = 0\n\n        if (this.data.values.filter(v => !v.disabled).length == 0)\n            this.#drawEmpty()\n        else\n            this.#draw()\n\n        if (this.#hoverCount == 0)\n            this.#currentHover = undefined\n\n        this.state = RenderState.Idle\n\n        super.renderDropdown()\n\n        if (this.#currentHover || this.contextMenu)\n            this.renderContextMenu(this.data.values.find(v => v.id == this.#currentHover)?.data ?? {})\n        else\n            this.onContextMenuEvent = undefined\n\n        if (this.#currentHover)\n            this.canvas.style.cursor = Styles.Cursor.Pointer\n        else\n            this.highlight()\n    }\n\n    #draw() {\n        if (this.onMouseMoveEvent || this.state == RenderState.Init) {\n            this.#sum = this.data.values.reduce((acc, v) => acc + v.current, 0)\n\n            let anglesSum = this.#startAngle\n            this.#angles = this.data.values.flatMap(sector => {\n                                   const angle = sector.current / this.#sum * 2 * Math.PI\n\n                                   return {\n                                       id: sector.id,\n                                       value: angle,\n                                       sum: (anglesSum += angle) - angle\n                                   }\n                               })\n                               .reverse()\n\n            this.#startPoint = this.#getPoint(this.#radius, 0)\n\n            for (const value of this.data.values)\n                this.#drawSector(value)\n\n            const value = this.data.values.find(v => v.id == this.#currentHover)\n            this.tooltip.render(!!value && !this.dropdown?.isActive,\n                this.onMouseMoveEvent,\n                [\n                    new TooltipValue(`${ value?.label }: ${ Formatter.number(value?.current) }`)\n                ],\n                value)\n\n            this.#drawInnerTitle()\n        }\n\n        if (!this.isDestroy)\n            requestAnimationFrame(this.render.bind(this))\n    }\n\n    #drawSector(value: Sector) {\n        const ctx = Canvas.getContext(this.canvas)\n\n        ctx.fillStyle = value.color\n        ctx.strokeStyle = value.color\n\n        const piece = value.current / this.#sum,\n            angle = (isNaN(piece) ? 1 : piece) * 2 * Math.PI\n\n        const isSingle = this.data.values.filter(s => !s.disabled).length == 1\n\n        if ((!!this.onClickEvent || this.#pinned.includes(value.id))\n            && !this.animations.contains(value.id, AnimationType.Init)\n            && !isSingle) {\n            this.animations.add(value.id,\n                AnimationType.Click,\n                {\n                    duration: Constants.Animations.circular,\n                    before: () => {\n                        if (!!this.onClickEvent) {\n                            if (this.#isInsideSector(this.onClickEvent, value)) {\n                                if (this.#pinned.includes(value.id))\n                                    this.#pinned = this.#pinned.filter(id => id != value.id)\n                                else\n                                    this.#pinned.push(value.id)\n\n                                this.onClickEvent = new PointerEvent(Events.Click)\n                            }\n                        }\n\n                        return true\n                    },\n                    body: () => {\n                        if (!this.#pinned.includes(value.id))\n                            return\n\n                        const piece = value.current / this.#sum,\n                            angle = (isNaN(piece) ? 1 : piece) * 2 * Math.PI,\n                            direction = this.#accumulator + angle / 2\n\n                        const transition = {\n                            x: this.#animationOffset * Math.cos(direction),\n                            y: this.#animationOffset * Math.sin(direction)\n                        }\n\n                        ctx.translate(transition.x, transition.y)\n\n                        if (angle > Math.PI / 6)\n                            ctx.lineWidth = 8\n                        ctx.lineJoin = 'round'\n                        ctx.lineCap = 'round'\n\n                        ctx.fillStyle = value.color\n                    }\n                })\n        }\n\n        if (this.onMouseMoveEvent && this.#isInsideSector(this.onMouseMoveEvent, value)) {\n            this.#currentHover = value.id\n            this.#hoverCount++\n        }\n\n        if (this.state == RenderState.Init || this.animations.contains(value.id, AnimationType.Init)) {\n            this.animations.add(value.id,\n                AnimationType.Init,\n                {\n                    duration: Constants.Animations.circular + (this.data.values.indexOf(value) + 1) / this.data.values.length * Constants.Animations.circular,\n                    continuous: true,\n                    body: transition => {\n                        const centerOfSector = {\n                            x: this.#center.x + this.#radius / 2 * Math.cos(this.#accumulator + angle / 2),\n                            y: this.#center.y + this.#radius / 2 * Math.sin(this.#accumulator + angle / 2)\n                        }\n\n                        const minSize = .7,\n                            rest = 1 - minSize\n\n                        ctx.translate(centerOfSector.x - centerOfSector.x * (minSize + transition * rest),\n                            centerOfSector.y - centerOfSector.y * (minSize + transition * rest))\n                        ctx.scale((minSize + transition * rest), (minSize + transition * rest))\n\n                        let opacity = Math.round(255 * transition).toString(16)\n\n                        if (opacity.length < 2)\n                            opacity = 0 + opacity\n\n                        ctx.fillStyle = value.color + opacity\n                        ctx.strokeStyle = Helper.applyAlpha(value.color, 255 * transition)\n                    }\n                })\n        } else if (this.onMouseMoveEvent\n                   && !this.animations.contains(value.id, AnimationType.Init)\n                   && !this.#pinned.includes(value.id)\n                   && !isSingle) {\n            const translate = (transition: number, event: AnimationType, swap: boolean) => {\n                this.animations.reload(value.id, event)\n\n                ctx.lineWidth = 1\n                ctx.lineJoin = 'miter'\n                ctx.lineCap = 'butt'\n\n                if (transition == 0)\n                    return\n\n                if (swap)\n                    transition = value.transition\n\n                const piece = value.current / this.#sum,\n                    angle = (isNaN(piece) ? 1 : piece) * 2 * Math.PI,\n                    direction = this.#accumulator + angle / 2,\n                    translate = {\n                        x: this.#animationOffset * Math.cos(direction) * transition,\n                        y: this.#animationOffset * Math.sin(direction) * transition\n                    }\n\n                ctx.translate(translate.x, translate.y)\n\n                if (angle > Math.PI / 6)\n                    ctx.lineWidth = transition * 8\n                ctx.lineJoin = 'round'\n                ctx.lineCap = 'round'\n\n                value.translate = translate\n                value.transition = transition\n            }\n\n            if (!this.#isInsideSector(this.onMouseMoveEvent, value)\n                || !this.animations.contains(value.id, AnimationType.MouseLeave))\n                this.animations.add(value.id,\n                    AnimationType.MouseLeave,\n                    {\n                        timer: Constants.Dates.minDate,\n                        duration: Constants.Animations.circular,\n                        backward: true,\n                        body: transition => {\n                            translate(transition,\n                                AnimationType.MouseOver,\n                                value.transition < transition)\n                        }\n                    })\n            else\n                this.animations.add(value.id,\n                    AnimationType.MouseOver,\n                    {\n                        duration: Constants.Animations.circular,\n                        body: transition => {\n                            translate(transition,\n                                AnimationType.MouseLeave,\n                                value.transition > transition)\n                        }\n                    })\n        }\n\n        let point2 = this.#getPoint(this.#radius, angle)\n\n        if (angle > 0) {\n            ctx.save()\n\n            if (value.current > 0) {\n                let labelStartPoint = this.#getPoint(this.#radius + 10, angle / 2),\n                    labelMidPoint = this.#getPoint(this.#radius + 20, angle / 2)\n\n                const dir = labelStartPoint.x > this.#center.x ? 1 : -1\n\n                let endPoint = {\n                    x: labelMidPoint.x + 10 * dir,\n                    y: labelMidPoint.y\n                }\n\n                let isBusy = false\n\n                const textWidth = Helper.stringWidth(value.label),\n                    imageDataX = dir == 1 ? endPoint.x + 12 : endPoint.x - textWidth - 12,\n                    imageData = new Uint32Array(ctx.getImageData(imageDataX, endPoint.y - 12, textWidth + 12, 28).data.buffer)\n\n                if (imageDataX < 0 || imageDataX + textWidth > this.canvas.width\n                    || endPoint.y - 12 < 0 || endPoint.y + 12 > this.canvas.height)\n                    isBusy = true\n\n                if (!isBusy)\n                    for (let i = 0; i < imageData.length; i++)\n                        if (Canvas.isPixelBusy(imageData[i])) {\n                            isBusy = true\n                            break\n                        }\n\n                if (!isBusy) {\n                    ctx.beginPath()\n                    ctx.moveTo(labelStartPoint.x, labelStartPoint.y)\n\n                    ctx.quadraticCurveTo(labelMidPoint.x, labelMidPoint.y, endPoint.x, endPoint.y)\n\n                    let opacity = Math.round(255 * (value.current / value.value)).toString(16)\n\n                    if (opacity.length < 2)\n                        opacity = 0 + opacity\n\n                    ctx.strokeStyle = Theme.text + opacity\n                    ctx.lineCap = 'butt'\n                    ctx.lineJoin = 'miter'\n                    ctx.lineWidth = 1\n                    ctx.stroke()\n\n                    ctx.fillStyle = Theme.text + opacity\n                    TextStyles.circularLabel(ctx, dir == 1)\n                    ctx.fillText(value.label, endPoint.x + 8 * dir, endPoint.y + 4)\n                }\n            }\n\n            ctx.restore()\n\n            ctx.beginPath()\n\n            if (!this.#isDonut)\n                ctx.moveTo(this.#center.x, this.#center.y)\n\n            ctx.lineTo(this.#startPoint.x, this.#startPoint.y)\n\n            let localAccumulator = 0,\n                localAngle = angle\n\n            while (localAngle > 0) {\n                let currentAngle = localAngle - Math.PI / 6 > 0\n                                   ? Math.PI / 6\n                                   : localAngle\n\n                point2 = this.#getPoint(this.#radius, localAccumulator + currentAngle)\n\n                const tangentIntersectionAngle = Math.PI - currentAngle,\n                    lengthToTangentIntersection = this.#radius / Math.sin(tangentIntersectionAngle / 2),\n                    tangentIntersectionPoint = this.#getPoint(lengthToTangentIntersection, localAccumulator + currentAngle / 2)\n\n                ctx.quadraticCurveTo(tangentIntersectionPoint.x, tangentIntersectionPoint.y, point2.x, point2.y)\n\n                localAccumulator += currentAngle\n\n                localAngle -= Math.PI / 6\n            }\n\n            if (this.#isDonut || value.innerRadius != 0) {\n                const innerRadius = this.#radius * (value.innerRadius / 100)\n\n                const innerPoint2 = {\n                    x: point2.x - (((this.#radius - innerRadius) * (point2.x - this.#center.x)) / this.#radius),\n                    y: point2.y - (((this.#radius - innerRadius) * (point2.y - this.#center.y)) / this.#radius)\n                }\n\n                ctx.lineTo(innerPoint2.x, innerPoint2.y)\n\n                localAngle = 0\n                localAccumulator = angle\n\n                while (localAngle < angle) {\n                    let currentAngle = localAngle + Math.PI / 6 < angle\n                                       ? Math.PI / 6\n                                       : angle - localAngle\n\n                    point2 = this.#getPoint(innerRadius, localAccumulator - currentAngle)\n\n                    const tangentIntersectionAngle = Math.PI - currentAngle,\n                        lengthToTangentIntersection = innerRadius / Math.sin(tangentIntersectionAngle / 2),\n                        tangentIntersectionPoint = this.#getPoint(lengthToTangentIntersection, localAccumulator - currentAngle / 2)\n\n                    ctx.quadraticCurveTo(tangentIntersectionPoint.x, tangentIntersectionPoint.y, point2.x, point2.y)\n\n                    localAccumulator -= currentAngle\n\n                    localAngle += Math.PI / 6\n                }\n\n                point2 = this.#getPoint(this.#radius, angle)\n            }\n\n            if (!this.animations.contains(value.id, AnimationType.Init)) {\n                const changeColor = (transition: number, event: AnimationType) => {\n                    this.animations.reload(value.id, event)\n\n                    if (transition == 0)\n                        return\n\n                    let opacity = Math.round(255 - 127 * transition).toString(16)\n                    if (opacity.length < 2)\n                        opacity = 0 + opacity\n\n                    ctx.fillStyle = value.color + opacity\n                    ctx.strokeStyle = Helper.applyAlpha(value.color, 255 - 127 * transition)\n                }\n\n                const anyHighlight = this.highlightItems.length != 0\n\n                if ((this.#currentHover && this.#currentHover != value.id)\n                    || (anyHighlight && !this.highlightItems.includes(value.id))) {\n                    this.animations.add(\n                        value.id,\n                        AnimationType.AnotherItemOver,\n                        {\n                            duration: Constants.Animations.circular,\n                            body: transition => {\n                                changeColor(transition, AnimationType.AnotherItemLeave)\n                            }\n                        }\n                    )\n                } else if (this.#currentHover == undefined || !anyHighlight) {\n                    this.animations.add(\n                        value.id,\n                        AnimationType.AnotherItemLeave,\n                        {\n                            timer: Constants.Dates.minDate,\n                            duration: Constants.Animations.circular,\n                            backward: true,\n                            body: transition => {\n                                changeColor(transition, AnimationType.AnotherItemOver)\n                            }\n                        }\n                    )\n                }\n            }\n\n            ctx.closePath()\n\n            ctx.fill()\n            ctx.stroke()\n\n            this.#accumulator += angle\n        }\n\n        ctx.resetTransform()\n\n        this.#startPoint = point2\n    }\n\n    #getPoint(radius: number, angle: number): Point {\n        return {\n            x: this.#center.x + radius * Math.cos(this.#accumulator + angle),\n            y: this.#center.y + radius * Math.sin(this.#accumulator + angle)\n        }\n    }\n\n    #isInsideSector(event: MouseEvent, value: Sector): boolean {\n        const isAngle = (point: Point) => {\n            let a = Math.atan2(point.y - this.#center.y, point.x - this.#center.x)\n            if (a < 0)\n                a += Math.PI * 2\n            if (a < this.#startAngle)\n                a = Math.PI * 2 - Math.abs(this.#startAngle - a) + this.#startAngle\n\n            let index = this.#angles.findIndex(o => o.id == value.id),\n                sumBefore = this.#angles[index].sum\n\n            return !(this.dropdown?.isActive ?? false)\n                   && sumBefore <= a\n                   && sumBefore + this.#angles[index].value - a >= 0\n        }\n\n        const isWithinRadius = (v: Point) => {\n            return v.x * v.x + v.y * v.y <= this.#radius * this.#radius\n                   && (!this.#isDonut || v.x * v.x + v.y * v.y\n                       >= this.#radius * (value.innerRadius / 100) * this.#radius * (value.innerRadius / 100))\n        }\n\n        const point = this.getMousePosition(event),\n            inner = {\n                x: point.x - this.#center.x,\n                y: point.y - this.#center.y\n            },\n            outer = {\n                x: point.x - this.#center.x - value.translate?.x,\n                y: point.y - this.#center.y - value.translate?.y\n            }\n\n        return isAngle(point) && (isWithinRadius(inner) || isWithinRadius(outer))\n    }\n\n    #drawEmpty() {\n        const ctx = Canvas.getContext(this.canvas)\n\n        ctx.beginPath()\n\n        ctx.arc(this.#center.x, this.#center.y, this.#radius, 0, 2 * Math.PI)\n        ctx.strokeStyle = Theme.text\n        ctx.stroke()\n\n        TextStyles.regular(ctx)\n        ctx.fillText(TextResources.allDataIsHidden, this.#center.x, this.#center.y)\n\n        requestAnimationFrame(this.render.bind(this))\n    }\n\n    #drawInnerTitle() {\n        if (this.#canRenderInnerTitle) {\n            const ctx = Canvas.getContext(this.canvas)\n\n            this.#innerTitleStyle(ctx)\n            ctx.fillText(this.data.innerTitle, this.#center.x, this.#center.y)\n        }\n    }\n\n    #calculateSizes() {\n        const titleOffset = this.settings.title\n                            ? Constants.Values.titleOffset\n                            : 0\n\n        const shortSide = this.canvas.width > this.canvas.height - titleOffset * 2\n                          ? this.canvas.height - titleOffset * 2\n                          : this.canvas.width\n\n        this.#center = {\n            x: this.canvas.width / 2,\n            y: titleOffset + this.canvas.height / 2\n        }\n\n        let longestLabel = 0\n\n        for (const value of this.data.values) {\n            const width = Helper.stringWidth(value.label)\n\n            if (width > longestLabel)\n                longestLabel = width\n        }\n\n        this.#radius = shortSide / 2 - (longestLabel + 50)\n\n        if (this.#radius < shortSide / 2 - 50)\n            this.#radius = shortSide / 2 - 50\n\n        if (this.data.innerTitle != undefined && this.data.innerTitle != '') {\n            this.#innerTitleStyle = TextStyles.large\n            this.#canRenderInnerTitle = Helper.stringWidth(this.data.innerTitle, 16)\n                                        < (this.data.innerRadius / 100) * this.#radius * 2\n\n            if (!this.#canRenderInnerTitle) {\n                this.#innerTitleStyle = TextStyles.regular\n                this.#canRenderInnerTitle = Helper.stringWidth(this.data.innerTitle, 14)\n                                            < (this.data.innerRadius / 100) * this.#radius * 2\n            }\n\n            if (!this.#canRenderInnerTitle)\n                console.warn(`Inner title is declared, but can't be rendered`)\n        }\n\n        this.#animationOffset = this.#radius * .1\n    }\n\n    refresh() {\n        super.refresh()\n\n        this.dropdown?.refresh()\n    }\n\n    resize() {\n        super.resize()\n\n        this.initAnimations()\n        this.#calculateSizes()\n        this.dropdown?.resize()\n    }\n\n    prepareSettings() {\n        super.prepareSettings()\n\n        this.#isDonut = (this.data.innerRadius ?? 0) != 0\n\n        for (let item of this.data.values) {\n            item.disabled = !item.value\n            item.value ??= 0\n            item.current = item.value\n            item.innerRadius ??= this.data.innerRadius ?? 0\n\n            if (item.value < 0)\n                console.warn(`\"${ item.label }\" has negative value (${ item.value }) and will not be render`)\n        }\n\n        this.data.values = this.data.values.filter(v => v.value >= 0)\n\n        if (this.settings.enableOther && this.data.values.length > 20) {\n            this.#other = this.data.values.splice(20)\n\n            const sum = this.#other.reduce((acc, v) => acc + v.current, 0)\n\n            this.data.values = this.data.values.slice(0, 20)\n\n            this.data.values.push(new Sector({\n                value: sum,\n                current: sum,\n                label: TextResources.other,\n                id: Helper.guid(),\n                color: this.#other[this.#other.length - 1].color,\n                innerRadius: this.data.innerRadius,\n                data: {\n                    _other: true\n                }\n            }))\n        }\n    }\n\n    initDropdown() {\n        super.initDropdown()\n\n        this.dropdown = new Dropdown(this.canvas,\n            {\n                x: -10,\n                y: 10,\n                icon: Icon.ThreeLines,\n                items: [\n                    {\n                        text: TextResources.exportPNG,\n                        action: () => {\n                            Export.asPng(this.canvas, this.settings.title)\n                        }\n                    },\n                    {\n                        text: TextResources.exportCSV,\n                        action: () => {\n                            Export.asCsv(Decomposition.toTable(CircularData.getRows(this.data)), this.settings.title)\n                        }\n                    },\n                    {\n                        isDivider: true\n                    } as DropdownItem,\n                    {\n                        text: TextResources.decomposeToTable,\n                        action: () => {\n                            new Modal(Decomposition.toTable(CircularData.getRows(this.data))).open()\n                        }\n                    }\n                ]\n            })\n    }\n}","import { Data } from 'types/interfaces/Data'\nimport { Renderable } from 'types/base/Renderable'\nimport * as Helper from 'Helper'\nimport { Value } from 'types/base/Value'\nimport { Legend } from 'Legend'\nimport { Dropdown } from 'Dropdown'\nimport { DropdownItem } from 'types/DropdownItem'\nimport { Point } from 'types/Point'\nimport { TextResources } from 'static/TextResources'\nimport { Chart } from 'Chart'\nimport { Canvas } from 'helpers/Canvas'\nimport { TextStyles } from 'helpers/TextStyles'\nimport { LegendPlace, RenderState } from 'static/Enums'\nimport * as Constants from 'static/constants/Index'\n\nexport class Renderer<T extends Data> extends Renderable {\n    dropdown: Dropdown\n\n    data: T\n\n    protected isDestroy: boolean = false\n\n    protected highlightItems: string[]\n\n    constructor(chart: Chart) {\n        super(chart)\n\n        this.data = <T>this.settings.data\n\n        this.highlightItems = []\n\n        this.state = this.settings.disableInitAnimation ? RenderState.Idle : RenderState.Init\n    }\n\n    render() {\n        super.render()\n\n        this.renderTitle()\n    }\n\n    destroy() {\n        this.isDestroy = true\n\n        this.canvas.remove()\n    }\n\n    renderDropdown() {\n        this.onClickEvent = this.dropdown?.render(this.onMouseMoveEvent, this.onClickEvent)\n    }\n\n    resize() {\n        this.#calculateSizes()\n        this.tooltip.refresh()\n        this.dropdown?.resize()\n    }\n\n    prepareSettings() {\n        const domRect = this.node.parentElement!.getBoundingClientRect()\n\n        this.settings.minWidth = isNaN(+this.settings.width)\n                                 ? 0\n                                 : +this.settings.width\n        this.settings.minHeight = isNaN(+this.settings.height)\n                                  ? 0\n                                  : +this.settings.height\n\n        this.settings.width = this.settings.minWidth != 0 && domRect.width < this.settings.minWidth\n                              ? this.settings.minWidth\n                              : domRect.width\n\n        this.settings.height = this.settings.minHeight != 0 && domRect.height < this.settings.minHeight\n                               ? this.settings.minHeight\n                               : domRect.height\n\n        this.canvas.width = this.settings.width\n        this.canvas.height = this.settings.height\n\n        const baseColor = this.settings.baseColor ?? Helper.randomColor()\n        let adjustStep = Math.round(100 / this.settings.data.values.length),\n            adjustAmount = -50\n\n        if (adjustStep <= 1)\n            adjustStep = 1\n\n        for (let item of this.settings.data.values) {\n            item.id = Helper.guid()\n            item.color ??= Helper.adjustColor(baseColor, adjustAmount += adjustStep)\n            item.label ??= TextResources.noLabel\n\n            if (item.label.length > 30)\n                item.label = item.label.slice(0, 27) + '...'\n        }\n\n        for (let item of this.settings.contextMenu ?? [])\n            if (item.id != undefined)\n                item.action = data => this.node.dispatchEvent(new CustomEvent(item.id ?? '', { detail: data }))\n    }\n\n    initDropdown() {\n    }\n\n    renderContextMenu(data: any) {\n        if (this.dropdown?.isActive) {\n            this.onContextMenuEvent = undefined\n\n            return false\n        }\n\n        if (this.onContextMenuEvent != undefined && this.settings.contextMenu?.length != 0) {\n            if (this.contextMenu == undefined && this.settings.contextMenu != undefined) {\n                let clone: DropdownItem[] = []\n\n                for (const item of this.settings.contextMenu)\n                    if (!item.condition || item.condition(data))\n                        clone.push({\n                            id: item.id,\n                            text: item.text,\n                            isDivider: item.isDivider,\n                            action: () => {\n                                item.action(data)\n\n                                this.onContextMenuEvent = undefined\n                                this.contextMenu = undefined\n                            }\n                        })\n\n                this.contextMenu = new Dropdown(this.canvas, {\n                    x: this.onContextMenuEvent.x - this.canvasPosition.x,\n                    y: this.onContextMenuEvent.y - this.canvasPosition.y,\n                    items: clone,\n                    data: data\n                })\n\n                this.contextMenu.resize()\n\n                this.onClickEvent = undefined\n            }\n\n            const isClick = this.onClickEvent != undefined\n\n            this.onClickEvent = this.contextMenu?.render(this.onMouseMoveEvent, this.onClickEvent)\n\n            if (this.onClickEvent == undefined && isClick) {\n                this.contextMenu = undefined\n                this.onContextMenuEvent = undefined\n\n                return true\n            }\n        }\n\n        return false\n    }\n\n    highlight(value?: Value) {\n        if (value)\n            this.highlightItems = [value.id]\n        else\n            this.highlightItems = []\n    }\n\n    closeDropdowns() {\n        this.dropdown?.close()\n        this.onContextMenuEvent = undefined\n    }\n\n    protected renderTitle() {\n        const ctx = Canvas.getContext(this.canvas)\n\n        if (this.settings.title) {\n            TextStyles.title(ctx)\n            ctx.fillText(this.settings.title, this.canvas.width / 2, Constants.Values.titleOffset)\n        }\n    }\n\n    #calculateSizes() {\n        let domRect = this.node.getBoundingClientRect()\n\n        this.settings.width = this.settings.minWidth && domRect.width < this.settings.minWidth\n                              ? this.settings.minWidth\n                              : domRect.width\n        this.settings.height = this.settings.minHeight && domRect.height < this.settings.minHeight\n                               ? this.settings.minHeight\n                               : domRect.height\n\n        this.canvas.width = this.settings.width\n        this.canvas.height = this.settings.height\n\n        if (this.settings.enableLegend) {\n            if (this.settings.legendPlace == undefined\n                || this.settings.legendPlace == LegendPlace.Top\n                || this.settings.legendPlace == LegendPlace.Bottom)\n                this.canvas.height -= Legend.getLegendHeight(this.settings.data.values, this.canvas.width)\n\n            if (this.settings.legendPlace == LegendPlace.Left\n                || this.settings.legendPlace == LegendPlace.Right)\n                this.canvas.width -= 500\n        }\n    }\n\n    protected getMousePosition(event: MouseEvent): Point {\n        return {\n            x: event.clientX - this.canvasPosition.x + scrollX,\n            y: event.clientY - this.canvasPosition.y + scrollY\n        }\n    }\n}","import { Value } from 'types/base/Value'\nimport { TableValue } from 'types/TableValue'\nimport { TableData } from 'types/TableData'\nimport { Data } from 'types/interfaces/Data'\n\nexport class TreeData implements Data {\n    values: Value[]\n\n    padding: number\n\n    static getRows(data: TreeData): TableData {\n        const key = 'Value'\n\n        let values: TableValue[] = []\n\n        for (const value of data.values)\n            values.push({\n                name: value.label,\n                values: new Map([[key, value.value]])\n            })\n\n        return {\n            headers: [\n                {\n                    value: key,\n                    display: key\n                }\n            ],\n            values: values\n        }\n    }\n}","import { TableValue } from 'types/TableValue'\nimport { Sector } from 'types/Sector'\nimport { TableData } from 'types/TableData'\nimport { Data } from 'types/interfaces/Data'\n\nexport class CircularData implements Data {\n    values: Sector[]\n\n    innerRadius: number\n\n    innerTitle: string\n\n    static getRows(data: CircularData): TableData {\n        const key = 'Value'\n\n        let values: TableValue[] = []\n\n        for (const value of data.values)\n            values.push({\n                name: value.label,\n                values: new Map([[key, value.value]])\n            })\n\n        return {\n            headers: [\n                {\n                    value: key,\n                    display: key\n                }\n            ],\n            values: values\n        }\n    }\n}","export class Value {\n    id: string\n\n    color: string\n\n    label: string\n\n    disabled: boolean\n\n    hideInLegend: boolean\n\n    data: { [key: string]: string }\n\n    value: number\n\n    toggle(transition: number) {\n        if (transition == 0)\n            this.disabled = !this.disabled\n    }\n\n    checkCondition(): boolean {\n        return false\n    }\n\n    reset() {\n        this.disabled = false\n    }\n}","import { PlotData } from 'types/data/PlotData'\nimport { Renderer } from 'types/base/Renderer'\nimport * as Helper from 'Helper'\nimport { DropdownItem } from 'types/DropdownItem'\nimport { PlotAxis } from 'types/PlotAxis'\nimport { Paddings } from 'types/Paddings'\nimport { Dropdown } from 'Dropdown'\nimport { HoverItem } from 'types/HoverItem'\nimport { PlotSeries } from 'types/PlotSeries'\nimport { Tooltip } from 'Tooltip'\nimport { Theme } from 'Theme'\nimport { Chart } from 'Chart'\nimport { TextStyles } from 'helpers/TextStyles'\nimport { TooltipValue } from 'types/TooltipValue'\nimport { Export } from 'Export'\nimport { Decomposition } from 'Decomposition'\nimport { Modal } from 'Modal'\nimport { TextResources } from 'static/TextResources'\nimport { Formatter } from 'helpers/Formatter'\nimport { Canvas } from 'helpers/Canvas'\nimport { AnimationType, Icon, LineType, PlotAxisType, PlotType, RenderState } from 'static/Enums'\nimport * as Constants from 'static/constants/Index'\n\nexport class PlotRenderer extends Renderer<PlotData> {\n    #x: PlotAxis\n\n    #y: PlotAxis\n\n    #paddings: Paddings\n\n    #tooltipX: number\n\n    #tooltipY: number\n\n    #labelsX: Map<number, string>\n\n    #labelsY: Map<number, string>\n\n    #allValuesX: any[]\n\n    #allValuesY: any[]\n\n    #base: ImageBitmap | undefined\n\n    #backLines: ImageData | undefined\n\n    #yAxisStep: number\n\n    #plot: DOMRect\n\n    #hoverX: HoverItem | undefined\n\n    constructor(chart: Chart) {\n        super(chart)\n\n        this.data.values = this.data.values.map(v => new PlotSeries(v))\n\n        if (this.data.values.filter(v => v.type == PlotType.Bar).length > 0) {\n            for (let series of this.data.values) {\n                for (let item of series.values) {\n                    const x = item.x\n                    item['x'] = item.y\n                    item['y'] = x\n                }\n\n                series.values.sort((a, b) => b.x > a.x ? 1 : -1)\n            }\n        }\n\n        this.#paddings = {\n            top: 30,\n            right: 40,\n            bottom: 50,\n            left: 80\n        }\n\n        if (this.data.simple)\n            this.#paddings = {\n                top: 10,\n                right: 10,\n                bottom: 10,\n                left: 10\n            }\n\n        if (this.settings.title)\n            this.#paddings.top += Constants.Values.titleOffset\n\n        this.tooltip = new Tooltip(this.canvas, this.settings)\n\n        this.#labelsX = new Map()\n        this.#labelsY = new Map()\n    }\n\n    render() {\n        super.render()\n\n        let tooltipLines = [\n            new TooltipValue(this.#labelsX.get(Math.round(this.#tooltipX))\n                             ?? this.#labelsY.get(Math.round(this.#tooltipY)))\n        ]\n\n        const ctx = Canvas.getContext(this.canvas)\n\n        TextStyles.regular(ctx)\n        ctx.lineJoin = 'round'\n\n        const axisLineHoverColor = Theme.lineActive\n\n        this.#renderBackLines()\n        this.#renderBase(true)\n\n        let x = 0,\n            y = 0,\n            yValue = 0,\n            yHeight = 0,\n            columnWidth = 0\n\n        const seriesToRender = this.data.values.filter(s => !s.disabled)\n\n        let columnsIndex = 0,\n            columnsCount = seriesToRender.filter(s => s.type == PlotType.Column).length\n\n        let barsIndex = 0,\n            barsCount = seriesToRender.filter(s => s.type == PlotType.Bar).length\n\n        let stackingAccumulator = []\n        for (let i = 0; i < this.#allValuesY.length; i++)\n            stackingAccumulator.push(0)\n\n        for (const series of seriesToRender) {\n            ctx.beginPath()\n\n            ctx.strokeStyle = series.color\n            ctx.fillStyle = series.color\n            ctx.lineWidth = series.width\n            ctx.lineCap = 'round'\n\n            const anyHighlight = this.highlightItems.length != 0\n\n            if (!this.animations.contains(series.id, AnimationType.Init)) {\n                const changeColor = (transition: number, event: AnimationType) => {\n                    this.animations.reload(series.id, event)\n\n                    if (transition == 0)\n                        return\n\n                    let opacity = Math.round(255 - 127 * transition).toString(16)\n                    if (opacity.length < 2)\n                        opacity = 0 + opacity\n\n                    ctx.fillStyle = series.color + opacity\n                    ctx.strokeStyle = series.color + opacity\n                }\n\n                if (anyHighlight && !this.highlightItems.includes(series.id)) {\n                    this.animations.add(\n                        series.id,\n                        AnimationType.AnotherItemOver,\n                        {\n                            duration: Constants.Animations.circular,\n                            body: transition => {\n                                changeColor(transition, AnimationType.AnotherItemLeave)\n                            }\n                        }\n                    )\n                } else if (!anyHighlight) {\n                    this.animations.add(\n                        series.id,\n                        AnimationType.AnotherItemLeave,\n                        {\n                            timer: Constants.Dates.minDate,\n                            duration: Constants.Animations.circular,\n                            backward: true,\n                            body: transition => {\n                                changeColor(transition, AnimationType.AnotherItemOver)\n                            }\n                        }\n                    )\n                }\n            }\n\n            switch (series.lineType) {\n                case LineType.Dash:\n                    ctx.setLineDash([series.width * 3, series.width * 2])\n\n                    break\n\n                case LineType.Dotted:\n                    ctx.setLineDash([series.width, series.width])\n\n                    break\n\n                case LineType.Solid:\n                default:\n                    break\n            }\n\n            for (const value of series.values) {\n                let index = series.values.indexOf(value),\n                    xIndex = this.#allValuesX.indexOf(this.data.xType == PlotAxisType.Date ? value.x?.toString() : value.x),\n                    yIndex = this.#allValuesY.indexOf(value.y)\n\n                const getTooltipValue = () => {\n                    return {\n                        x: value.x\n                           ? this.data.xType == PlotAxisType.Date\n                             ? this.#allValuesX[xIndex]\n                             : Formatter.number(this.#allValuesX[xIndex])\n                           : '0',\n                        y: value.y\n                           ? Formatter.number(this.#allValuesY[yIndex])\n                           : '0'\n                    }\n                }\n\n                x = this.#paddings.left\n                if (series.type != PlotType.Bar)\n                    x += xIndex * this.#x.step\n                if (series.type == PlotType.Line)\n                    x -= this.#x.step / 2 - this.#x.step\n\n                switch (series.type) {\n                    case PlotType.Line:\n                        y = this.#paddings.top + this.#plot.height - <number>value.y / this.#y.unit * this.#y.step\n                            - Math.abs(this.#y.min / this.#y.unit * this.#y.step)\n\n                        const pointDuration = 1500 / series.values.length * 1.2\n\n                        if (this.state == RenderState.Init || this.animations.contains(value.id, AnimationType.Init)) {\n                            this.animations.add(value.id,\n                                AnimationType.Init,\n                                {\n                                    timer: new Date(Date.now()).addMilliseconds(pointDuration * (index - 1)),\n                                    duration: pointDuration,\n                                    continuous: true,\n                                    body: transition => {\n                                        if (index == 0)\n                                            return\n\n                                        x = this.#paddings.left + xIndex * this.#x.step - this.#x.step / 2\n                                        y = this.#paddings.top + this.#plot.height - <number>value.y / this.#y.unit * this.#y.step\n                                            - Math.abs(this.#y.min / this.#y.unit * this.#y.step)\n\n                                        const next = series.values[index - 1]\n\n                                        let prevValue = {\n                                            x: this.#paddings.left + xIndex * this.#x.step - this.#x.step / 2,\n                                            y: this.#paddings.top + this.#plot.height - <number>next.y / this.#y.unit * this.#y.step\n                                               - Math.abs(this.#y.min / this.#y.unit * this.#y.step)\n                                        }\n\n                                        const endPointX = prevValue.x + (this.#x.step + (x - prevValue.x)) * transition,\n                                            endPointY = prevValue.y + (y - prevValue.y) * transition\n\n                                        if (prevValue.x != endPointX && prevValue.y != endPointY) {\n                                            ctx.moveTo(prevValue.x, prevValue.y)\n                                            ctx.lineTo(endPointX, endPointY)\n                                        }\n                                    }\n                                })\n                        } else {\n                            ctx.lineTo(x, y)\n\n                            if (this.#isOnX(x)) {\n                                const mouse = this.getMousePosition(this.onMouseMoveEvent)\n\n                                if (Math.abs(mouse.y - y) < 5) {\n                                    this.#hoverX = {\n                                        x: x,\n                                        y: y,\n                                        index: index,\n                                        data: value.data,\n                                        series: series\n                                    }\n\n                                    tooltipLines.push(new TooltipValue(`${ series.label }: ${ getTooltipValue().y }`, series.color))\n                                    this.#tooltipX = x - this.#x.step / 2\n                                }\n                            }\n                        }\n\n                        break\n\n                    case PlotType.AttentionLine:\n                        yValue = this.canvas.height - this.#paddings.bottom - <number>value.y / this.#y.unit * this.#y.step\n\n                        ctx.moveTo(this.#paddings.left, yValue)\n\n                        if (this.state == RenderState.Init || this.animations.contains(value.id, AnimationType.Init))\n                            this.animations.add(value.id,\n                                AnimationType.Init,\n                                {\n                                    duration: 1500,\n                                    continuous: true,\n                                    body: transition => {\n                                        ctx.lineTo(this.#paddings.left + (this.canvas.width - this.#paddings.left - this.#paddings.right) * transition,\n                                            this.canvas.height - this.#paddings.bottom - <number>value.y / this.#y.unit * this.#y.step)\n                                    }\n                                })\n                        else\n                            ctx.lineTo(this.canvas.width - this.#paddings.right, yValue)\n\n                        break\n\n                    case PlotType.Column:\n                        yValue = <number>value.y > this.data.yMax ? this.data.yMax : <number>value.y\n\n                        y = this.#plot.height * yValue / this.#y.max\n                        if (y < this.#y.minStep)\n                            y = this.#y.minStep\n\n                        columnWidth = this.#x.step * (series.width ? series.width / 100 : .5) / columnsCount\n\n                        ctx.beginPath()\n\n                        if (this.state == RenderState.Init || this.animations.contains(value.id + columnsIndex, AnimationType.Init)) {\n                            this.animations.add(value.id + columnsIndex,\n                                AnimationType.Init,\n                                {\n                                    duration: 800,\n                                    continuous: true,\n                                    body: transition => {\n                                        yValue = <number>value.y > this.data.yMax ? this.data.yMax : <number>value.y\n\n                                        x = this.#paddings.left + xIndex * this.#x.step\n                                        y = this.#plot.height * yValue / this.#y.max * transition\n\n                                        if (y < this.#y.minStep)\n                                            y = this.#y.minStep * transition\n\n                                        columnsIndex = this.data.values.filter(s => s.type == PlotType.Column)\n                                                           .indexOf(series)\n\n                                        ctx.roundRect(x + columnsIndex * columnWidth + (this.#x.step - columnsCount * columnWidth) / 2,\n                                            this.canvas.height - this.#paddings.bottom - y,\n                                            columnWidth,\n                                            y,\n                                            [6, 6, 0, 0])\n                                        ctx.fill()\n                                    }\n                                })\n                        } else {\n                            if (this.#isInArea(x + columnsIndex * columnWidth + (this.#x.step - columnsCount * columnWidth) / 2,\n                                    this.canvas.height - this.#paddings.bottom - y,\n                                    columnWidth,\n                                    y)\n                                && (this.contextMenu?.isActive == undefined\n                                    || this.contextMenu?.isActive == false)) {\n                                this.#hoverX = {\n                                    x: x,\n                                    y: y,\n                                    index: index,\n                                    data: value.data,\n                                    series: series\n                                }\n\n                                tooltipLines.push(new TooltipValue(`${ series.label }: ${ getTooltipValue().y }`, series.color))\n                                this.#tooltipX = x\n                            }\n\n                            ctx.roundRect(x + columnsIndex * columnWidth + (this.#x.step - columnsCount * columnWidth) / 2,\n                                this.canvas.height - this.#paddings.bottom - y,\n                                columnWidth,\n                                y,\n                                [6, 6, 0, 0])\n                            ctx.fill()\n                        }\n\n                        break\n\n                    case PlotType.Bar:\n                        y = this.#paddings.top + yIndex * this.#y.step + this.#y.step / 2\n                            + (100 - series.width) * this.#y.step / 100 / 2\n\n                        const seriesHeight = (series.width * this.#y.step / 100) / barsCount\n\n                        if (this.state == RenderState.Init || this.animations.contains(value.id + barsIndex, AnimationType.Init)) {\n                            this.animations.add(value.id + barsIndex,\n                                AnimationType.Init,\n                                {\n                                    duration: 800,\n                                    continuous: true,\n                                    body: transition => {\n                                        y = this.#paddings.top + yIndex * this.#y.step + this.#y.step / 2\n                                            + (100 - series.width) * this.#y.step / 100 / 2\n\n                                        barsIndex = this.data.values.filter(s => s.type == PlotType.Bar)\n                                                        .indexOf(series)\n\n                                        ctx.fillRect(x,\n                                            y - this.#y.step / 2 + barsIndex * seriesHeight,\n                                            <number>value.x / this.#x.unit * this.#x.step * transition,\n                                            seriesHeight)\n                                    }\n                                })\n                        } else {\n                            if (!anyHighlight) {\n                                if (this.#isInArea(x,\n                                    y - this.#y.step / 2 + barsIndex * seriesHeight,\n                                    <number>value.x / this.#x.unit * this.#x.step,\n                                    seriesHeight)) {\n                                    this.#hoverX = {\n                                        x: x,\n                                        y: y,\n                                        index: index,\n                                        data: value.data,\n                                        series: series\n                                    }\n\n                                    ctx.fillStyle += '88'\n\n                                    tooltipLines.push(new TooltipValue(`${ series.label }: ${ getTooltipValue().x }`, series.color))\n                                    this.#tooltipY = y - this.#y.step / 2\n                                } else {\n                                    ctx.fillStyle = series.color\n                                }\n                            }\n\n                            ctx.fillRect(x,\n                                y - this.#y.step / 2 + barsIndex * seriesHeight,\n                                <number>value.x / this.#x.unit * this.#x.step,\n                                seriesHeight)\n                        }\n\n                        break\n\n                    case PlotType.StackingColumn:\n                        y = this.canvas.height - this.#paddings.bottom - <number>value.y / this.#y.unit * this.#y.step\n\n                        columnWidth = this.#x.step * (series.width ? series.width / 100 : .5)\n\n                        if (this.state == RenderState.Init || this.animations.contains(value.id + index, AnimationType.Init)) {\n                            this.animations.add(value.id + index,\n                                AnimationType.Init,\n                                {\n                                    duration: 800,\n                                    continuous: true,\n                                    body: transition => {\n                                        columnsIndex = this.data.values.filter(s => s.type == PlotType.StackingColumn\n                                                                                    && s.values.filter(v => this.data.xType == PlotAxisType.Date\n                                                                                                            ? (v.x as Date).getTime() == (value.x as Date).getTime()\n                                                                                                            : v.x == value.x)\n                                                                                        .length > 0)\n                                                           .indexOf(series)\n\n                                        x = this.#paddings.left + xIndex * this.#x.step\n                                        y = this.canvas.height - this.#paddings.bottom - <number>value.y / this.#y.unit * this.#y.step\n\n                                        if (columnsIndex == 0)\n                                            stackingAccumulator[xIndex] = 0\n\n                                        let offset = stackingAccumulator[xIndex] != undefined\n                                                     ? stackingAccumulator[xIndex]\n                                                     : 0\n\n                                        yValue = this.canvas.height - this.#paddings.bottom + offset\n                                        yHeight = (y - this.canvas.height + this.#paddings.bottom) * transition\n\n                                        if (yValue > this.#paddings.top) {\n                                            if (yValue + yHeight < this.#paddings.top)\n                                                yHeight -= yValue + yHeight - this.#paddings.top\n\n                                            ctx.fillRect(x + (this.#x.step - columnWidth) / 2,\n                                                yValue,\n                                                columnWidth,\n                                                yHeight)\n                                        }\n\n                                        stackingAccumulator[xIndex] += (y - this.canvas.height + this.#paddings.bottom) * transition\n                                    }\n                                })\n                        } else {\n                            if (columnsIndex == 0)\n                                stackingAccumulator[xIndex] = 0\n\n                            let offset = stackingAccumulator[xIndex] != undefined\n                                         ? stackingAccumulator[xIndex]\n                                         : 0\n\n                            yValue = this.canvas.height - this.#paddings.bottom + offset\n                            yHeight = y - this.canvas.height + this.#paddings.bottom\n\n                            if (yValue > this.#paddings.top) {\n                                if (yValue + yHeight < this.#paddings.top)\n                                    yHeight -= yValue + yHeight - this.#paddings.top\n\n                                if (this.#isInArea(x + (this.#x.step - columnWidth) / 2,\n                                    yValue + yHeight,\n                                    columnWidth,\n                                    Math.abs(yHeight))) {\n                                    this.#hoverX = {\n                                        x: x,\n                                        y: y,\n                                        index: xIndex,\n                                        data: value.data,\n                                        series: series\n                                    }\n\n                                    tooltipLines.push(new TooltipValue(`${ series.label }: ${ getTooltipValue().y }`, series.color))\n                                    this.#tooltipX = x\n                                }\n\n                                ctx.fillRect(x + (this.#x.step - columnWidth) / 2,\n                                    yValue,\n                                    columnWidth,\n                                    yHeight)\n                            }\n\n                            stackingAccumulator[xIndex] += (y - this.canvas.height + this.#paddings.bottom)\n                        }\n\n                        break\n                }\n            }\n\n            ctx.setLineDash([])\n\n            switch (series.type) {\n                case PlotType.Line:\n                    ctx.stroke()\n\n                    if (this.#hoverX && this.#hoverX.series == series) {\n                        ctx.beginPath()\n                        ctx.lineWidth = 1\n                        ctx.strokeStyle = axisLineHoverColor\n                        ctx.moveTo(this.#paddings.left, this.#hoverX.y)\n                        ctx.lineTo(this.canvas.width - this.#paddings.right, this.#hoverX.y)\n                        ctx.stroke()\n\n                        let radius = Math.round(series.width * 1.1)\n                        if (radius < 5)\n                            radius = 5\n\n                        ctx.beginPath()\n                        ctx.arc(this.#hoverX.x, this.#hoverX.y, radius, 0, 2 * Math.PI)\n                        ctx.fill()\n                        ctx.lineWidth = Math.ceil(radius / 2)\n                        ctx.strokeStyle = Helper.adjustColor(series.color, 50)\n                        ctx.stroke()\n                    }\n\n                    break\n\n                case PlotType.AttentionLine:\n                    ctx.stroke()\n\n                    TextStyles.regular(ctx)\n                    ctx.fillText(series.label,\n                        this.#paddings.left + (this.canvas.width - this.#paddings.left - this.#paddings.right) / 2,\n                        this.canvas.height - this.#paddings.bottom - <number>series.values[0].y / this.#y.unit * this.#y.step + 16)\n\n                    break\n\n                case PlotType.Column:\n                case PlotType.StackingColumn:\n                    if (this.#hoverX)\n                        this.highlight(this.#hoverX.series)\n\n                    columnsIndex++\n\n                    break\n\n                case PlotType.Bar:\n                    if (this.#hoverX) {\n                        ctx.lineWidth = 1\n                        ctx.strokeStyle = axisLineHoverColor\n                        ctx.moveTo(this.#paddings.left,\n                            this.#tooltipY + this.#y.step / 2)\n                        ctx.lineTo(this.canvas.width - this.#paddings.right,\n                            this.#tooltipY + this.#y.step / 2)\n                        ctx.stroke()\n                    }\n\n                    barsIndex++\n\n                    break\n            }\n        }\n\n        this.#renderBase()\n\n        this.renderTitle()\n\n        this.tooltip.render(tooltipLines.length > 1 && !this.dropdown?.isActive,\n            this.onMouseMoveEvent,\n            tooltipLines,\n            this.#hoverX\n            ? this.#hoverX.series!.values[this.#hoverX.index]\n            : undefined)\n\n        if (!this.isDestroy)\n            requestAnimationFrame(this.render.bind(this))\n\n        this.state = RenderState.Idle\n\n        super.renderDropdown()\n\n        if (this.onContextMenuEvent && !this.#hoverX)\n            this.onContextMenuEvent = undefined\n\n        if (this.#hoverX == undefined)\n            this.highlight()\n\n        if (this.#hoverX\n            && (this.renderContextMenu(this.#hoverX.data)\n                || !this.onContextMenuEvent))\n            this.#hoverX = undefined\n    }\n\n    refresh() {\n        super.refresh()\n    }\n\n    resize() {\n        super.resize()\n\n        this.#base = undefined\n\n        this.#calculateSizes()\n    }\n\n    #isOnX(x: number): boolean {\n        if (!this.onMouseMoveEvent)\n            return false\n\n        const mouse = this.getMousePosition(this.onMouseMoveEvent)\n\n        return !(this.dropdown?.isActive ?? false)\n               && x - this.#x.step / 2 <= mouse.x && mouse.x < x + this.#x.step / 2\n               && this.#paddings.top <= mouse.y && mouse.y <= this.canvas.height - this.#paddings.bottom\n               && this.#paddings.left < mouse.x\n    }\n\n    #isInArea(x: number, y: number, w: number, h: number): boolean {\n        if (!this.onMouseMoveEvent)\n            return false\n\n        const mouse = this.getMousePosition(this.onMouseMoveEvent)\n\n        return !(this.dropdown?.isActive ?? false)\n               && mouse.x >= x && mouse.x <= x + w\n               && mouse.y >= y && mouse.y <= y + h\n    }\n\n    #renderBase(skip: boolean = false) {\n        if (this.#base && skip)\n            return\n\n        if (this.data.simple)\n            return\n\n        const ctx = Canvas.getContext(this.canvas)\n\n        if (skip)\n            ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)\n\n        if (this.#base) {\n            ctx.drawImage(this.#base, 0, 0)\n            return\n        }\n\n        if (!skip)\n            return\n\n        const axisLabelOffset = 12\n\n        ctx.fillStyle = Theme.canvasBackground\n\n        ctx.fillRect(0, 0, this.#paddings.left, this.canvas.height)\n        ctx.fillRect(0, 0, this.canvas.width, this.#paddings.top)\n        ctx.fillRect(this.canvas.width - this.#paddings.right, 0, this.canvas.width, this.canvas.height)\n        ctx.fillRect(0, this.canvas.height - this.#paddings.bottom, this.canvas.width, this.canvas.height)\n\n        const isContainsBar = this.data.values.filter(s => s.type == PlotType.Bar).length > 0\n\n        if (this.data.xTitle || this.data.yTitle) {\n            ctx.textAlign = 'center'\n            ctx.textBaseline = 'bottom'\n            ctx.fillStyle = Theme.text\n\n            if (this.data.xTitle)\n                ctx.fillText(this.data.xTitle,\n                    this.#paddings.left + (this.canvas.width - this.#paddings.left - this.#paddings.right) / 2,\n                    this.canvas.height - 4)\n\n            if (this.data.yTitle) {\n                ctx.rotate(-Math.PI / 2)\n\n                ctx.textBaseline = 'top'\n\n                ctx.fillText(this.data.yTitle,\n                    -(this.#paddings.top + (this.canvas.height - this.#paddings.top - this.#paddings.bottom) / 2),\n                    8)\n\n                ctx.resetTransform()\n            }\n        }\n\n        ctx.textAlign = 'center'\n        ctx.textBaseline = 'top'\n\n        const step = this.#x.step,\n            xYPos = this.canvas.height - this.#paddings.bottom\n\n        let xCounter = 0,\n            acc = this.#paddings.left + step / 2\n\n        for (let i = 0; i < this.#allValuesX.length + 1; i++)\n            this.#labelsX.trySet(\n                Math.round(this.#paddings.left + i * this.#x.step),\n                this.data.xType == PlotAxisType.Date\n                ? Formatter.date(new Date(this.#allValuesX[i]))\n                : isNaN(+this.#x.min) || !isFinite(+this.#x.min)\n                  ? this.#allValuesX[i - 1]\n                  : Formatter.number(\n                        this.#x.min + i * (this.#x.max - this.#x.min) / (this.#x.count - 1)\n                    )\n            )\n\n        const maxLabelWidth = Math.max(\n            ...[...this.#labelsX.values()].map(label => Math.ceil(Helper.stringWidth(label)))\n        ) + 10\n        const maxCount = Math.floor(\n            (this.canvas.width - this.#paddings.left - this.#paddings.right) / maxLabelWidth\n        )\n        const renderStep = Math.ceil(1 / (maxCount / this.#allValuesX.length))\n\n        while (acc < this.canvas.width - this.#paddings.right) {\n            if (xCounter % renderStep == 0) {\n                ctx.fillStyle = Theme.text + 'b7'\n\n                ctx.fillText(\n                    this.#labelsX.get(Math.round(acc - this.#x.step / 2)) ?? '',\n                    acc,\n                    xYPos + axisLabelOffset / 2\n                )\n            }\n\n            acc += step\n            xCounter++\n        }\n\n        ctx.textAlign = 'right'\n        ctx.textBaseline = 'middle'\n\n        const yCount = this.#y.count > 10 ? 10 : this.#y.count\n\n        let yCounter = isContainsBar ? 1 : 0,\n            yStep = this.#allValuesY.length / yCount\n\n        for (let i = isContainsBar ? 1 : 0; i < this.#allValuesY.length + 1; i++) {\n            const labelY = this.canvas.height - yCounter * yStep * this.#y.step - this.#paddings.bottom,\n                labelYAsKey = Math.round(this.canvas.height - i * this.#y.step - this.#paddings.bottom)\n\n            if (!this.#labelsY.get(labelYAsKey))\n                this.#labelsY.set(labelYAsKey,\n                    Formatter.number(this.#y.min + (i + (isContainsBar ? -1 : 0)) * (this.#y.max - this.#y.min) / this.#y.count))\n\n            if (i >= yCounter * yStep) {\n                const label = {\n                    x: this.#paddings.left,\n                    y: labelY,\n                    label: this.#yAxisStep >= 1\n                           ? Math.round((this.#y.min + (yCounter * yStep + (isContainsBar ? -1 : 0)) * (this.#y.max - this.#y.min) / this.#y.count) / this.#yAxisStep) * this.#yAxisStep\n                           : Math.round(this.#y.min + (yCounter * yStep + (isContainsBar ? -1 : 0)) * (this.#y.max - this.#y.min) / this.#y.count / this.#yAxisStep) * this.#yAxisStep\n                }\n\n                if (label.label == -0)\n                    label.label = 0\n\n                let postfix = ''\n\n                if (this.data.shortLabels) {\n                    const countOfTens = Math.floor(label.label.toString().length / 4)\n\n                    if (countOfTens > 0) {\n                        label.label /= Math.pow(1000, countOfTens)\n\n                        postfix = [\n                            TextResources.thousandShort,\n                            TextResources.millionShort,\n                            TextResources.billionShort\n                        ][countOfTens - 1]\n                    }\n                }\n\n                ctx.fillText(Formatter.number(label.label) + postfix,\n                    label.x - axisLabelOffset,\n                    label.y + (isContainsBar ? this.#y.step / 2 : 0))\n\n                yCounter++\n            }\n        }\n\n        ctx.beginPath()\n\n        ctx.strokeStyle = Theme.line\n        ctx.lineWidth = 1\n\n        const offset = .5,\n            isBar = this.data.values.filter(v => v.type == PlotType.Bar).length > 0\n\n        ctx.moveTo(this.#paddings.left - (isBar ? offset : 0),\n            this.canvas.height - this.#paddings.bottom + (isBar ? -offset : offset))\n\n        if (isBar)\n            ctx.lineTo(this.#paddings.left - offset, this.#paddings.top)\n        else\n            ctx.lineTo(this.canvas.width - this.#paddings.right, this.canvas.height - this.#paddings.bottom + offset)\n\n        ctx.stroke()\n\n        if (this.canvas.width > 0 && this.canvas.height > 0)\n            createImageBitmap(ctx.getImageData(0, 0, this.canvas.width, this.canvas.height))\n                .then(res => this.#base = res)\n    }\n\n    #renderBackLines() {\n        if (this.data.simple)\n            return\n\n        const ctx = Canvas.getContext(this.canvas)\n\n        if (this.#backLines) {\n            ctx.putImageData(this.#backLines, 0, 0)\n            return\n        }\n\n        ctx.fillStyle = Theme.canvasBackground\n        ctx.fillRect(0, 0, this.canvas.width, this.canvas.height)\n\n        const axisLineColor = Theme.lineAxis\n\n        const isContainsBar = this.data.values.filter(s => s.type == PlotType.Bar).length > 0\n\n        if (isContainsBar) {\n            const step = this.#x.step,\n                xYPos = this.canvas.height - this.#paddings.bottom\n\n            let xCounter = 0,\n                acc = this.#paddings.left + step / 2\n\n            for (let i = 0; i < this.#allValuesX.length + 1; i++)\n                this.#labelsX.trySet(\n                    Math.round(this.#paddings.left + i * this.#x.step),\n                    this.data.xType == PlotAxisType.Date\n                    ? Formatter.date(new Date(this.#allValuesX[i - 1]))\n                    : isNaN(+this.#x.min) || !isFinite(+this.#x.min)\n                      ? this.#allValuesX[i - 1]\n                      : Formatter.number(\n                            this.#x.min + i * (this.#x.max - this.#x.min) / (this.#x.count - 1)\n                        )\n                )\n\n            const maxLabelWidth = Math.max(\n                ...[...this.#labelsX.values()].map(label => Math.ceil(Helper.stringWidth(label)))\n            ) + 10\n            const maxCount = Math.floor(\n                (this.canvas.width - this.#paddings.left - this.#paddings.right) / maxLabelWidth\n            )\n            const renderStep = Math.ceil(1 / (maxCount / this.#allValuesX.length))\n\n            while (acc < this.canvas.width - this.#paddings.right) {\n                if (xCounter % renderStep == 0) {\n                    ctx.beginPath()\n\n                    ctx.moveTo(acc, xYPos)\n                    ctx.lineTo(acc, this.#paddings.top)\n\n                    ctx.lineWidth = 1\n                    ctx.strokeStyle = axisLineColor\n                    ctx.setLineDash([6, 6])\n                    ctx.stroke()\n                }\n\n                acc += step\n                xCounter++\n            }\n        }\n\n        ctx.textAlign = 'right'\n        ctx.textBaseline = 'middle'\n\n        const yCount = this.#y.count > 10 ? 10 : this.#y.count\n\n        let yCounter = isContainsBar ? 1 : 0,\n            yStep = this.#allValuesY.length / yCount\n\n        for (let i = isContainsBar ? 1 : 0; i < this.#allValuesY.length + 1; i++) {\n            const labelY = this.canvas.height - yCounter * yStep * this.#y.step - this.#paddings.bottom\n\n            if (i >= yCounter * yStep) {\n                const label = {\n                    x: this.#paddings.left,\n                    y: labelY\n                }\n\n                if (this.data.values.filter(s => s.type.isAnyEquals(PlotType.Column, PlotType.StackingColumn, PlotType.Line)).length > 0) {\n                    ctx.beginPath()\n\n                    ctx.moveTo(label.x, label.y)\n                    ctx.lineTo(this.canvas.width - this.#paddings.right, label.y)\n\n                    ctx.lineWidth = 1\n                    ctx.strokeStyle = axisLineColor\n                    ctx.setLineDash([6, 6])\n                    ctx.stroke()\n                }\n\n                yCounter++\n            }\n        }\n\n        if (this.canvas.width > 0 && this.canvas.height > 0)\n            this.#backLines = ctx.getImageData(0, 0, this.canvas.width, this.canvas.height)\n    }\n\n    #calculateSizes() {\n        let xValues = this.data.values.flatMap(s => s.values.map(p => p.x)),\n            yValues = this.data.values.flatMap(s => s.values.map(p => p.y))\n\n        const isDate = this.data.xType == PlotAxisType.Date\n\n        if (isDate) {\n            let tempDate = new Date(Math.min(...(<number[]>xValues)))\n\n            while (tempDate.getTime() < Math.max(...(<number[]>xValues))) {\n                if (!xValues.includes(tempDate.getTime()))\n                    xValues.push(new Date(tempDate.getTime()))\n\n                tempDate = tempDate.addDays(1)\n            }\n\n            xValues.sort((a, b) => a < b ? -1 : 1)\n        }\n\n        yValues.sort((a, b) => b > a ? -1 : 1)\n\n        this.#allValuesX = [...new Set(xValues.filter(x => x != undefined).map(x => isDate ? x.toString() : x))]\n        this.#allValuesY = [...new Set(yValues.filter(y => y != undefined))]\n\n        this.#x = {\n            min: Math.min(...(<number[]>xValues)),\n            max: Math.max(...(<number[]>xValues)),\n            unit: (Math.abs(Math.min(...(<number[]>xValues))) + Math.abs(Math.max(...(<number[]>xValues)))) / (this.#allValuesX.length - 1),\n            step: (this.canvas.width - this.#paddings.left - this.#paddings.right) / this.#allValuesX.length,\n            minStep: 0,\n            count: this.#allValuesX.length\n        }\n\n        let yMin = Math.min(...(<number[]>yValues))\n        if (yMin > 0)\n            yMin = 0\n\n        this.#y = {\n            min: yMin,\n            max: this.data.yMax ?? Math.max(...(<number[]>yValues)),\n            unit: (Math.abs(yMin) + Math.abs(this.data.yMax ?? Math.max(...(<number[]>yValues)))) / (this.#allValuesY.length - 1),\n            step: (this.canvas.height - this.#paddings.top - this.#paddings.bottom) / this.#allValuesY.length,\n            minStep: 0,\n            count: this.#allValuesY.length\n        }\n\n        let stackingColumns = this.data.values.filter(s => s.type == PlotType.StackingColumn)\n\n        let max\n\n        if (stackingColumns.length > 0) {\n            let values = stackingColumns.map(s => s.values.flatMap(v => +v.y))\n\n            max = this.#y.max\n\n            for (let i = 0; i < values[0].length; i++) {\n                let sum = 0\n\n                for (const v of values)\n                    sum += v[i]\n\n                if (sum > max)\n                    max = sum\n            }\n\n            this.#y.max = max > this.data.yMax ? this.data.yMax : max\n            this.#y.unit = (Math.abs(this.#y.min) + Math.abs(this.#y.max)) / (this.#allValuesY.length - 1)\n        }\n\n        const yMaxWidth = Helper.stringWidth(Formatter.number(this.#y.max))\n        if (yMaxWidth > this.#paddings.left - 40 && !this.data.simple) {\n            this.#paddings.left += yMaxWidth - this.#paddings.left + 40\n            this.#x.step = (this.canvas.width - this.#paddings.left - this.#paddings.right) / this.#allValuesX.length\n        }\n\n        this.#yAxisStep = Math.abs(this.#y.min) + Math.abs(this.#y.max)\n\n        if (.5 <= this.#yAxisStep && this.#yAxisStep < 1)\n            this.#yAxisStep = .05\n        else if (1 <= this.#yAxisStep && this.#yAxisStep < 10)\n            this.#yAxisStep = .1\n        else if (10 <= this.#yAxisStep && this.#yAxisStep < 100)\n            this.#yAxisStep = 2\n        else if (100 <= this.#yAxisStep && this.#yAxisStep < 1000)\n            this.#yAxisStep = 20\n        else if (1000 <= this.#yAxisStep && this.#yAxisStep < 10000)\n            this.#yAxisStep = 50\n        else if (10000 <= this.#yAxisStep && this.#yAxisStep < 100000)\n            this.#yAxisStep = 1000\n        else if (100000 <= this.#yAxisStep && this.#yAxisStep < 1000000)\n            this.#yAxisStep = 10000\n        else if (1000000 <= this.#yAxisStep && this.#yAxisStep < 10000000)\n            this.#yAxisStep = 50000\n        else\n            this.#yAxisStep = 1\n\n        if (this.#yAxisStep != 1) {\n            max = yValues.length > 10\n                  ? (this.#y.max / 10 + this.#yAxisStep - (this.#y.max / 10) % this.#yAxisStep) * 10\n                  : Math.ceil(this.#y.max / this.#yAxisStep) * this.#yAxisStep\n\n            this.#y.max = max > this.data.yMax ? this.data.yMax : max\n            this.#y.unit = (Math.abs(this.#y.min) + Math.abs(this.#y.max)) / this.#allValuesY.length\n        }\n\n        this.#plot = {\n            width: this.canvas.width - this.#paddings.left - this.#paddings.right,\n            height: this.canvas.height - this.#paddings.top - this.#paddings.bottom\n        } as DOMRect\n\n        this.#x.minStep = this.#plot.width * 0.002\n        this.#y.minStep = this.#plot.height * 0.002\n    }\n\n    prepareSettings() {\n        super.prepareSettings()\n\n        for (let item of this.data.values) {\n            item.disabled = !item.values\n            item.type ??= PlotType.Line\n\n            for (let it of item.values) {\n                it.id = Helper.guid()\n\n                if (this.data.xType == PlotAxisType.Date) {\n                    if (Helper.isISOString(it.x as string))\n                        it.x = new Date(it.x)\n                    else\n                        console.warn(`${ it.x } is not a date in ISO format.`)\n                }\n            }\n        }\n    }\n\n    initDropdown() {\n        super.initDropdown()\n\n        this.dropdown = new Dropdown(this.canvas,\n            {\n                x: -10,\n                y: 10,\n                icon: Icon.ThreeLines,\n                items: [\n                    {\n                        text: TextResources.exportPNG,\n                        action: () => {\n                            Export.asPng(this.canvas, this.settings.title)\n                        }\n                    },\n                    {\n                        text: TextResources.exportCSV,\n                        action: () => {\n                            Export.asCsv(Decomposition.toTable(PlotData.getRows(this.data)), this.settings.title)\n                        }\n                    },\n                    {\n                        isDivider: true\n                    } as DropdownItem,\n                    {\n                        text: TextResources.decomposeToTable,\n                        action: () => {\n                            new Modal(Decomposition.toTable(PlotData.getRows(this.data))).open()\n                        }\n                    }\n                ]\n            })\n    }\n}","export class Dates {\n    static minDate = new Date(2000, 1, 1)\n}","import { Theme } from 'Theme'\n\nexport abstract class TextStyles {\n    static title(context: CanvasRenderingContext2D) {\n        context.fillStyle = Theme.text\n        context.textAlign = 'center'\n        context.textBaseline = 'middle'\n        context.font = '20px sans-serif'\n    }\n\n    static regular(context: CanvasRenderingContext2D) {\n        context.fillStyle = Theme.text\n        context.textAlign = 'center'\n        context.textBaseline = 'middle'\n        context.font = '14px sans-serif'\n    }\n\n    static large(context: CanvasRenderingContext2D) {\n        context.fillStyle = Theme.text\n        context.textAlign = 'center'\n        context.textBaseline = 'middle'\n        context.font = '16px sans-serif'\n    }\n\n    static tooltip(context: CanvasRenderingContext2D) {\n        context.font = '14px sans-serif'\n        context.textAlign = 'start'\n        context.textBaseline = 'alphabetic'\n    }\n\n    static circularLabel(context: CanvasRenderingContext2D, isRight: boolean) {\n        context.textAlign = isRight ? 'start' : 'end'\n        context.textBaseline = 'alphabetic'\n        context.font = '14px sans-serif'\n    }\n}","import { ChartSettings } from 'types/ChartSettings'\nimport { Animations } from 'Animations'\nimport { Tooltip } from 'Tooltip'\nimport { Dropdown } from 'Dropdown'\nimport { Chart } from 'Chart'\nimport { Canvas } from 'helpers/Canvas'\nimport { Events, RenderState, Tag } from 'static/Enums'\nimport { Styles } from 'static/constants/Styles'\nimport { Theme } from 'Theme'\n\nexport class Renderable {\n    node: HTMLElement\n\n    canvas: HTMLCanvasElement\n\n    settings: ChartSettings\n\n    animations: Animations\n\n    tooltip: Tooltip\n\n    protected state: RenderState = RenderState.Init\n\n    protected canvasPosition: DOMRect\n\n    protected onMouseMoveEvent: MouseEvent\n\n    protected onClickEvent: MouseEvent | undefined\n\n    protected onContextMenuEvent: MouseEvent | undefined\n\n    protected contextMenu: Dropdown | undefined\n\n    constructor(chart: Chart) {\n        this.node = chart.node\n        this.settings = chart.settings\n        this.animations = new Animations()\n\n        this.canvas = document.createElement(Tag.Canvas)\n\n        this.canvas.style.imageRendering = Styles.ImageRendering.Pixelated\n\n        this.node.append(this.canvas)\n\n        this.tooltip = new Tooltip(this.canvas, this.settings)\n\n        this.initAnimations()\n    }\n\n    render() {\n        const ctx = Canvas.getContext(this.canvas)\n\n        ctx.fillStyle = Theme.canvasBackground\n        ctx.fillRect(0, 0, this.canvas.width, this.canvas.height)\n    }\n\n    refresh() {\n        this.tooltip.refresh()\n        this.state = this.settings.disableInitAnimation ? RenderState.Idle : RenderState.Init\n    }\n\n    resetMouse() {\n        this.onMouseMoveEvent = new MouseEvent(Events.MouseMove)\n        this.onClickEvent = new MouseEvent(Events.Click)\n        this.onContextMenuEvent = undefined\n    }\n\n    initAnimations() {\n        this.canvasPosition = this.canvas.getBoundingClientRect()\n\n        this.canvasPosition.x += scrollX\n        this.canvasPosition.y += scrollY\n\n        if (this.state == RenderState.Init && !this.settings.disableInteractions) {\n            this.canvas.onmousemove = event => this.onMouseMoveEvent = event\n            this.canvas.onclick = event => this.onClickEvent = event\n            this.canvas.oncontextmenu = event => {\n                event.preventDefault()\n                this.contextMenu = undefined\n                if (this.onContextMenuEvent)\n                    this.onContextMenuEvent = undefined\n                else\n                    this.onContextMenuEvent = event\n            }\n            this.canvas.onmouseleave = () => this.onMouseMoveEvent = new MouseEvent(Events.MouseMove)\n        }\n    }\n}","import { TreeData } from 'types/data/TreeData'\nimport { Renderer } from 'types/base/Renderer'\nimport { Sector } from 'types/Sector'\nimport * as Helper from 'Helper'\nimport { DropdownItem } from 'types/DropdownItem'\nimport { Dropdown } from 'Dropdown'\nimport { Chart } from 'Chart'\nimport { TextStyles } from 'helpers/TextStyles'\nimport { TooltipValue } from 'types/TooltipValue'\nimport { Export } from 'Export'\nimport { Decomposition } from 'Decomposition'\nimport { Modal } from 'Modal'\nimport { TextResources } from 'static/TextResources'\nimport { Canvas } from 'helpers/Canvas'\nimport { TreeCell } from 'types/TreeCell'\nimport { Formatter } from 'helpers/Formatter'\nimport { AnimationType, Icon, RenderState } from 'static/Enums'\nimport * as Constants from 'static/constants/Index'\n\nexport class TreeRenderer extends Renderer<TreeData> {\n    constructor(chart: Chart) {\n        super(chart)\n\n        this.settings.enableLegend = false\n\n        this.data.values = this.data.values.map(v => new Sector(v))\n    }\n\n    render() {\n        super.render()\n\n        if (this.data.values.filter(v => v.value > 0).length == 0) {\n            this.#drawEmpty()\n            requestAnimationFrame(this.render.bind(this))\n            return\n        }\n\n        const titleOffset = this.settings.title ? Constants.Values.titleOffset : 0\n\n        const maxWidth = this.canvas.width - this.data.padding * 2,\n            maxHeight = this.canvas.height - this.data.padding * 2 - titleOffset\n\n        let sum = this.data.values.reduce((acc, cur) => acc + cur.value, 0),\n            totalSquare = maxWidth * maxHeight\n\n        let x = this.data.padding,\n            y = this.data.padding + titleOffset\n\n        let minX = this.data.padding,\n            minY = this.data.padding + titleOffset\n\n        let tooltipCell: TreeCell | undefined = undefined\n        let contextMenuData = undefined\n\n        const ctx = Canvas.getContext(this.canvas)\n\n        let isVertical = true\n        for (let i = 0; i < this.data.values.length; i++) {\n            const item = this.data.values[i]\n\n            const remainWidth = maxWidth - (x - this.data.padding),\n                remainHeight = maxHeight - (y - this.data.padding - titleOffset)\n\n            let cells: TreeCell[] = [\n                {\n                    color: item.color,\n                    label: item.label,\n                    s: item.value / sum * totalSquare,\n                    value: item.value,\n                    id: item.id,\n                    x: x,\n                    y: y\n                } as TreeCell\n            ]\n\n            if (i + 1 <= this.data.values.length - 1) {\n                const next = this.data.values[i + 1]\n\n                cells.push({\n                    color: next.color,\n                    label: next.label,\n                    s: next.value / sum * totalSquare,\n                    value: next.value,\n                    id: next.id,\n                    x: x,\n                    y: y\n                } as TreeCell)\n\n                i++\n            }\n\n            const isSingle = cells.length == 1,\n                isLast = i == this.data.values.length - 1\n\n            if (isVertical) {\n                for (let j = 1; j <= remainWidth + i * i; j++) {\n                    const w = remainWidth - j,\n                        h1 = cells[0].s / w,\n                        h2 = isSingle ? 0 : cells[1].s / w\n\n                    if (h1 + h2 >= remainHeight) {\n                        cells[0].w = Math.floor(w)\n                        cells[0].h = Math.floor(h1)\n\n                        if (!isSingle) {\n                            cells[1].w = Math.floor(w)\n                            cells[1].h = remainHeight - cells[0].h\n\n                            cells[1].y += cells[0].h\n                        }\n\n                        break\n                    }\n                }\n            } else {\n                for (let j = 1; j <= remainHeight + i * i; j++) {\n                    const h = remainHeight - j,\n                        w1 = cells[0].s / h,\n                        w2 = isSingle ? 0 : cells[1].s / h\n\n                    if (w1 + w2 >= remainWidth) {\n                        cells[0].h = Math.floor(h)\n                        cells[0].w = Math.floor(w1)\n\n                        if (!isSingle) {\n                            cells[1].h = Math.floor(h)\n                            cells[1].w = remainWidth - cells[0].w\n\n                            cells[1].x += cells[0].w\n                        }\n\n                        break\n                    }\n                }\n            }\n\n            for (const cell of cells) {\n                if (isLast) {\n                    if (isVertical) {\n                        cell.w = remainWidth\n                        if (isSingle)\n                            cell.h = remainHeight\n                    } else {\n                        cell.h = remainHeight\n                        if (isSingle)\n                            cell.w = remainWidth\n                    }\n                }\n\n                ctx.beginPath()\n\n                ctx.fillStyle = cell.color\n\n                const cellInit = this.state != RenderState.Init\n                    && !this.animations.contains(cell.id, AnimationType.Init)\n\n                const cellIndex = i + cells.indexOf(cell) + (isLast && isSingle ? 1 : 0),\n                    duration = 260\n\n                const getPrev = () => {\n                    let acc = 0\n                    for (let i = 0; i < cellIndex; i++)\n                        acc += duration - duration * (i / this.data.values.length) / Math.E\n\n                    return acc\n                }\n\n                const initAnimationDuration = duration - duration * cellIndex / (this.data.values.length + 1)\n\n                if (!cellInit) {\n                    this.animations.add(cell.id,\n                        AnimationType.Init,\n                        {\n                            duration: getPrev(),\n                            continuous: true,\n                            body: transition => {\n                                if (transition * getPrev() - getPrev() + initAnimationDuration < 0)\n                                    return ctx.fillStyle += '00'\n\n                                transition = (transition * getPrev() - getPrev() + initAnimationDuration) / initAnimationDuration\n\n                                const center = {\n                                    x: cell.x + cell.w / 2,\n                                    y: cell.y + cell.h / 2\n                                }\n\n                                const minSize = .7,\n                                    rest = 1 - minSize\n\n                                ctx.translate(center.x - center.x * (minSize + transition * rest),\n                                    center.y - center.y * (minSize + transition * rest))\n                                ctx.scale((minSize + transition * rest), (minSize + transition * rest))\n\n                                let opacity = Math.round(255 * transition).toString(16)\n\n                                if (opacity.length < 2)\n                                    opacity = 0 + opacity\n\n                                ctx.fillStyle = cell.color + opacity\n                            }\n                        })\n                } else {\n                    const translate = (transition: number, event: AnimationType) => {\n                        const center = {\n                            x: cell.x + cell.w / 2,\n                            y: cell.y + cell.h / 2\n                        }\n\n                        const margin = 12,\n                            minSize = cell.w > cell.h\n                                      ? 1 - margin / cell.w\n                                      : 1 - margin / cell.h,\n                            rest = 1 - minSize\n\n                        ctx.translate(center.x - center.x * (minSize + transition * rest),\n                            center.y - center.y * (minSize + transition * rest))\n                        ctx.scale(minSize + transition * rest, minSize + transition * rest)\n\n                        this.animations.reload(cell.id, event)\n                    }\n\n                    if (this.#isInCell(cell)\n                        && !tooltipCell) {\n                        tooltipCell = cell\n                        contextMenuData = cell.data\n\n                        this.animations.add(cell.id,\n                            AnimationType.MouseOver,\n                            {\n                                duration: Constants.Animations.tree,\n                                backward: true,\n                                body: transition => {\n                                    translate(transition, AnimationType.MouseLeave)\n                                }\n                            })\n                    } else {\n                        this.animations.add(cell.id,\n                            AnimationType.MouseLeave,\n                            {\n                                timer: Constants.Dates.minDate,\n                                duration: Constants.Animations.tree,\n                                body: transition => {\n                                    translate(transition, AnimationType.MouseOver)\n                                }\n                            })\n                    }\n                }\n\n                const gap = 4\n\n                ctx.roundRect(x + gap, y + gap, cell.w - gap, cell.h - gap, gap * 2)\n                ctx.fill()\n\n                if (cell.label\n                    && Helper.stringWidth(cell.label) < cell.w - gap\n                    && cell.h - gap > 16\n                    && !this.animations.contains(cell.id, AnimationType.Init)) {\n                    ctx.beginPath()\n                    TextStyles.large(ctx)\n\n                    ctx.strokeStyle = Helper.adjustColor(cell.color, -30)\n                    ctx.lineWidth = 4\n                    ctx.lineJoin = 'round'\n                    ctx.lineCap = 'round'\n                    ctx.fillStyle = '#ffffff'\n\n                    ctx.strokeText(cell.label,\n                        x + 2 + cell.w / 2,\n                        y + 2 + cell.h / 2)\n                    ctx.fillText(cell.label,\n                        x + 2 + cell.w / 2,\n                        y + 2 + cell.h / 2)\n                }\n\n                ctx.resetTransform()\n\n                if (isVertical)\n                    y += cell.h\n                else\n                    x += cell.w\n\n                totalSquare -= cell.w * cell.h\n                sum -= cell.value\n            }\n\n            if (isVertical) {\n                x += cells[0].w\n                y = minY\n            } else {\n                y += cells[0].h\n                x = minX\n            }\n\n            minX = x\n            minY = y\n\n            isVertical = !isVertical\n        }\n\n        this.tooltip.render(!!tooltipCell && !this.dropdown?.isActive,\n            this.onMouseMoveEvent,\n            [\n                new TooltipValue(`${ tooltipCell?.label }: ${ Formatter.number(tooltipCell?.value) }`)\n            ],\n            this.data.values.find(v => v.id == tooltipCell?.id))\n\n        if (!this.isDestroy)\n            requestAnimationFrame(this.render.bind(this))\n\n        this.state = RenderState.Idle\n\n        super.renderDropdown()\n\n        if (tooltipCell || this.contextMenu)\n            this.renderContextMenu(contextMenuData)\n        else\n            this.onContextMenuEvent = undefined\n    }\n\n    #isInCell(cell: TreeCell) {\n        if (!this.onMouseMoveEvent || !cell)\n            return false\n\n        const mouse = this.getMousePosition(this.onMouseMoveEvent)\n\n        return !(this.dropdown?.isActive ?? false)\n               && cell.x <= mouse.x && mouse.x <= cell.x + cell.w\n               && cell.y <= mouse.y && mouse.y <= cell.y + cell.h\n    }\n\n    #drawEmpty() {\n        const ctx = Canvas.getContext(this.canvas)\n\n        TextStyles.regular(ctx)\n        ctx.fillText(TextResources.treeMapIsEmpty,\n            this.canvas.width / 2,\n            this.canvas.height / 2)\n    }\n\n    refresh() {\n        super.refresh()\n    }\n\n    resize() {\n        super.resize()\n\n        this.initAnimations()\n        this.animations.clear()\n    }\n\n    prepareSettings() {\n        this.data.values = this.data.values.filter(v => v.value > 0)\n\n        this.data.values.sort((a, b) => (b.value ?? 0) - (a.value ?? 0))\n\n        super.prepareSettings()\n\n        for (let item of this.data.values) {\n            item.disabled = !item.value\n            item.value ??= 0\n        }\n    }\n\n    initDropdown() {\n        super.initDropdown()\n\n        this.dropdown = new Dropdown(this.canvas,\n            {\n                x: -10,\n                y: 10,\n                icon: Icon.ThreeLines,\n                items: [\n                    {\n                        text: TextResources.exportCSV,\n                        action: () => {\n                            Export.asCsv(Decomposition.toTable(TreeData.getRows(this.data)), this.settings.title)\n                        }\n                    },\n                    {\n                        isDivider: true\n                    } as DropdownItem,\n                    {\n                        text: TextResources.decomposeToTable,\n                        action: () => {\n                            new Modal(Decomposition.toTable(TreeData.getRows(this.data))).open()\n                        }\n                    }\n                ]\n            })\n    }\n}","import { TableData } from 'types/TableData'\nimport * as Helper from 'Helper'\nimport { Value } from 'types/base/Value'\nimport { ChartSettings } from 'types/ChartSettings'\nimport { Formatter } from 'helpers/Formatter'\nimport { Styles } from 'static/constants/Styles'\nimport { Tag } from 'static/Enums'\n\nexport class Decomposition {\n    static toTable(values: TableData) {\n        let table = document.createElement(Tag.Table)\n\n        table.classList.add('o-table')\n\n        let totals = new Map<string, number>()\n        let rows = '',\n            headers = '',\n            index = 0\n\n        let valuesMap = new Map<string, Map<string, any>>()\n\n        for (const tableValue of values.values) {\n            let allColumns = new Map<string, any>()\n\n            for (const header of values.headers)\n                allColumns.set(header.value, 0)\n\n            for (const [key, value] of tableValue.values)\n                allColumns.set(key, value)\n\n            let indexSpaces = ''\n            for (let i = 0; i < index; i++)\n                indexSpaces += ' '\n\n            valuesMap.set(tableValue.name + indexSpaces, allColumns)\n\n            index++\n        }\n\n        for (const tableHeader of values.headers)\n            headers += `\n                <th>\n                    ${ tableHeader.display }\n                </th>\n            `\n\n        for (const [key, value] of valuesMap) {\n            let columns = ''\n\n            for (const [vKey, vValue] of value) {\n                columns += `\n                    <td>\n                        ${ vValue == undefined ? '' : Formatter.number(vValue) }\n                    </td>\n                `\n\n                if (totals.has(vKey)) {\n                    let totalValue = +(totals.get(vKey) ?? 0)\n                    totals.set(vKey, totalValue + +vValue)\n                } else {\n                    totals.set(vKey, vValue)\n                }\n            }\n\n            rows += `\n                <tr>\n                    <td class=\"o-table-label\">\n                        ${ key.trim() }\n                    </td>\n                    \n                    ${ columns } \n                </tr>\n            `\n        }\n\n        let totalColumns = ''\n\n        for (const [, value] of totals)\n            totalColumns += `\n                <td>\n                    ${ value == undefined ? '' : Formatter.number(value) }\n                </td>\n            `\n\n        table.innerHTML = `\n            <thead>\n                <tr>\n                    <th></th>\n                \n                    ${ headers }\n                </tr>\n            </thead>\n        \n            <tbody>\n                ${ rows }\n            </tbody>\n            \n            <tfoot>\n                <tr>\n                    <td></td>\n                \n                    ${ totalColumns }\n                </tr>\n            </tfoot>\n        `\n\n        return table\n    }\n\n    static toChart<T extends Value>(settings: ChartSettings, values: T[]) {\n        let container = document.createElement(Tag.Div),\n            div = document.createElement(Tag.Div),\n            script = document.createElement(Tag.Script),\n            id = Helper.guid()\n\n        container.style.display = Styles.Display.Flex\n        container.style.height = '100%'\n\n        div.id = id\n        div.style.flexGrow = '1'\n\n        let cloneSettings = JSON.parse(JSON.stringify(settings)) as ChartSettings\n\n        if (cloneSettings.title)\n            cloneSettings.title = cloneSettings.title + ' (Other)'\n        cloneSettings.data.values = values\n        cloneSettings.minWidth = undefined\n        cloneSettings.minHeight = undefined\n\n        script.innerHTML = `\n            new OCharts.chart(document.getElementById('${ id }'), ${ JSON.stringify(cloneSettings) })\n                .render()\n        `\n\n        container.append(div, script)\n\n        return container\n    }\n}","export { Animations } from './Animations'\nexport { Dates } from './Dates'\nexport { Values } from './Values'","import { Renderer } from 'types/base/Renderer'\nimport { GaugeData } from 'types/data/GaugeData'\nimport * as Helper from 'Helper'\nimport { Sector } from 'types/Sector'\nimport { Dropdown } from 'Dropdown'\nimport { Point } from 'types/Point'\nimport { Chart } from 'Chart'\nimport { Theme } from 'Theme'\nimport { TextStyles } from 'helpers/TextStyles'\nimport { TooltipValue } from 'types/TooltipValue'\nimport { Export } from 'Export'\nimport { Formatter } from 'helpers/Formatter'\nimport { Canvas } from 'helpers/Canvas'\nimport { TextResources } from 'static/TextResources'\nimport { AnimationType, Icon, RenderState } from 'static/Enums'\n\nexport class GaugeRenderer extends Renderer<GaugeData> {\n    #radius: number\n\n    #center: Point\n\n    constructor(chart: Chart) {\n        super(chart)\n\n        this.settings.enableLegend = false\n    }\n\n    render() {\n        super.render()\n\n        this.#draw()\n\n        const value = this.data.values[0]\n        this.tooltip.render(this.#isInsideSector(this.onMouseMoveEvent, value) && !this.dropdown?.isActive,\n            this.onMouseMoveEvent,\n            [\n                new TooltipValue(`${ value?.label }: ${ Formatter.number(value?.current) }`)\n            ],\n            value)\n\n        if (!this.isDestroy)\n            requestAnimationFrame(this.render.bind(this))\n\n        this.state = RenderState.Idle\n\n        super.renderDropdown()\n    }\n\n    #draw() {\n        const ctx = Canvas.getContext(this.canvas)\n\n        const value = this.data.values[0] ?? { id: Helper.guid() }\n\n        if (this.state == RenderState.Init || this.animations.contains(value.id, AnimationType.Init))\n            this.animations.add(value.id,\n                AnimationType.Init,\n                {\n                    duration: 450,\n                    continuous: true,\n                    body: transition => {\n                        value.current = value.value * transition\n                    }\n                })\n\n        ctx.beginPath()\n\n        ctx.strokeStyle = value.color\n        ctx.lineCap = 'round'\n        ctx.lineWidth = 40\n\n        const piece = value.current / this.data.max,\n            angle = (isNaN(piece) ? 1 : piece) * Math.PI\n\n        if (value.value) {\n            ctx.arc(this.#center.x, this.#center.y, this.#radius, Math.PI, angle - Math.PI)\n            ctx.stroke()\n        }\n\n        ctx.beginPath()\n\n        ctx.lineWidth = 1\n        ctx.lineCap = 'square'\n\n        let localAccumulator = 0,\n            localAngle = Math.PI\n\n        while (localAngle >= 0) {\n            let currentAngle = localAngle - Math.PI / 10 > 0\n                               ? Math.PI / 10\n                               : localAngle\n\n            const getPoint = (offset: number) => {\n                return {\n                    x: this.#center.x + (this.#radius + offset) * Math.cos(Math.PI + localAccumulator),\n                    y: this.#center.y + (this.#radius + offset) * Math.sin(Math.PI + localAccumulator)\n                }\n            }\n\n            let point1 = getPoint(50),\n                point2 = getPoint(90),\n                point3 = getPoint(115)\n\n            const opacity = Math.PI - localAngle > angle ? '66' : 'ff'\n\n            ctx.moveTo(point1.x, point1.y)\n            ctx.lineTo(point2.x, point2.y)\n            ctx.strokeStyle = Theme.text + opacity\n            ctx.stroke()\n\n            TextStyles.regular(ctx)\n            ctx.fillStyle = Theme.text + opacity\n            ctx.fillText(Formatter.number(this.data.max - localAngle / Math.PI * this.data.max), point3.x, point3.y)\n\n            localAccumulator += currentAngle\n\n            localAngle -= Math.PI / 10\n        }\n    }\n\n    #isInsideSector(event: MouseEvent, value: Sector): boolean {\n        if (!event)\n            return false\n\n        const isAngle = (point: Point) => {\n            let a = Math.atan2(point.y - this.#center.y, point.x - this.#center.x)\n            if (a < 0)\n                a += Math.PI * 2\n\n            const piece = value.current / this.data.max,\n                angle = (isNaN(piece) ? 1 : piece) * Math.PI\n\n            return a > Math.PI && Math.PI + angle >= a\n        }\n\n        const isWithinRadius = (v: Point) => {\n            const outerRadius = this.#radius + 20,\n                innerRadius = this.#radius - 20\n\n            return v.x * v.x + v.y * v.y <= outerRadius * outerRadius\n                   && v.x * v.x + v.y * v.y >= innerRadius * innerRadius\n        }\n\n        const point = this.getMousePosition(event),\n            inner = {\n                x: point.x - this.#center.x,\n                y: point.y - this.#center.y\n            }\n\n        return !(this.dropdown?.isActive ?? false)\n               && isAngle(point)\n               && isWithinRadius(inner)\n    }\n\n    #calculateSizes() {\n        const longSide = this.canvas.width < this.canvas.height\n                         ? this.canvas.height - 250\n                         : this.canvas.width\n\n        this.#radius = longSide / 3\n\n        this.#center = {\n            x: this.canvas.width / 2,\n            y: this.canvas.height - this.#radius / 5\n        }\n    }\n\n    refresh() {\n        super.refresh()\n    }\n\n    resize() {\n        super.resize()\n\n        this.initAnimations()\n        this.#calculateSizes()\n    }\n\n    prepareSettings() {\n        super.prepareSettings()\n\n        for (let item of this.data.values) {\n            item.disabled = !item.value\n            item.value ??= 0\n        }\n\n        if (this.data.values.length > 0 && this.data.values[0].value > this.data.max)\n            this.data.values[0].value = this.data.max\n    }\n\n    initDropdown() {\n        super.initDropdown()\n\n        this.dropdown = new Dropdown(this.canvas,\n            {\n                x: -10,\n                y: 10,\n                icon: Icon.ThreeLines,\n                items: [\n                    {\n                        text: TextResources.exportPNG,\n                        action: () => {\n                            Export.asPng(this.canvas, this.settings.title)\n                        }\n                    }\n                ]\n            })\n    }\n}","import { Theme } from 'Theme'\nimport * as Helper from 'Helper'\nimport { Canvas } from 'helpers/Canvas'\nimport { Icon, Tag } from 'static/Enums'\n\nexport class Export {\n    static asPng(canvas: HTMLCanvasElement, title: string) {\n        requestAnimationFrame(() => {\n            const ctx = Canvas.getContext(canvas)\n\n            let width = Helper.stringWidth(Icon.ThreeLines) + 20,\n                height = 64\n\n            ctx.fillStyle = Theme.canvasBackground\n            ctx.fillRect(canvas.width - width, 0, width, height)\n\n            let leftEmpty = 0,\n                rightEmpty = 0\n\n            const imageData = new Uint32Array(ctx.getImageData(0, 0, canvas.width, canvas.height).data.buffer)\n\n            let isBusy = false\n\n            for (let i = 0; i < canvas.width; i++) {\n                for (let j = 0; j < canvas.height; j++) {\n                    if (Canvas.isPixelBusy(imageData[i + j * canvas.width])) {\n                        isBusy = true\n                        break\n                    }\n                }\n\n                if (isBusy)\n                    break\n\n                leftEmpty++\n            }\n\n            isBusy = false\n\n            for (let i = canvas.width; i >= 0; i--) {\n                for (let j = 0; j < canvas.height; j++) {\n                    if (Canvas.isPixelBusy(imageData[i + j * canvas.width])) {\n                        isBusy = true\n                        break\n                    }\n                }\n\n                if (isBusy)\n                    break\n\n                rightEmpty++\n            }\n\n            if (leftEmpty > 4)\n                leftEmpty -= 4\n            if (rightEmpty > 4)\n                rightEmpty -= 4\n\n            if (leftEmpty > rightEmpty)\n                leftEmpty = rightEmpty\n            if (rightEmpty > leftEmpty)\n                rightEmpty = leftEmpty\n\n            let destinationCanvas = document.createElement(Tag.Canvas)\n            destinationCanvas.width = canvas.width - leftEmpty - rightEmpty\n            destinationCanvas.height = canvas.height\n\n            const destCtx = Canvas.getContext(destinationCanvas)\n\n            destCtx.fillStyle = Theme.background\n            destCtx.fillRect(0, 0, canvas.width, canvas.height)\n\n            destCtx.drawImage(canvas, -leftEmpty, 0)\n\n            Export.saveAs((title ?? 'chart') + '.png',\n                destinationCanvas.toDataURL('image/png'))\n        })\n    }\n\n    static asCsv(table: HTMLTableElement, title: string) {\n        let rows = table.querySelectorAll('tr'),\n            csv = []\n\n        for (let i = 0; i < rows.length; i++) {\n            let row = [],\n                cols = rows[i].querySelectorAll('td, th')\n\n            for (let j = 0; j < cols.length; j++) {\n                let data = cols[j].innerHTML\n                                  .replace(/(\\r\\n|\\n|\\r)/gm, '')\n                                  .replace(/(\\s\\s)/gm, ' ')\n\n                data = data.replace(/\"/g, '\"\"')\n                row.push('\"' + data + '\"')\n            }\n\n            csv.push(row.join(','))\n        }\n\n        Export.saveAs((title ?? 'table') + '.csv',\n            csv.join('\\n'),\n            'data:text/csv;charset=utf-8,' + encodeURIComponent(csv.join('\\n')),\n            true)\n    }\n\n    static saveAs(name: string, dataURL: string, href?: string | undefined, isText?: boolean) {\n        if (window.showSaveFilePicker != undefined) {\n            const accept = isText\n                           ? { 'text/csv': '.csv' } as FilePickerAcceptType\n                           : { 'image/*': '.png' } as FilePickerAcceptType\n\n            const options = {\n                suggestedName: name,\n                types: [\n                    {\n                        accept: accept\n                    }\n                ],\n                excludeAcceptAllOption: true\n            } as SaveFilePickerOptions\n\n            function toBlob(dataURI: string) {\n                const byteString = atob(dataURI.split(',')[1]),\n                    mimeString = dataURI.split(',')[0]\n                        .split(':')[1]\n                        .split(';')[0],\n                    buffer = new ArrayBuffer(byteString.length),\n                    imageArray = new Uint8Array(buffer)\n\n                for (let i = 0; i < byteString.length; i++)\n                    imageArray[i] = byteString.charCodeAt(i)\n\n                return new Blob([buffer], { type: mimeString })\n            }\n\n            window.showSaveFilePicker(options)\n                  .then(fileHandle => {\n                      fileHandle.createWritable()\n                                .then(writableStream => {\n                                    writableStream.write(isText ? dataURL : toBlob(dataURL))\n                                                  .then(() => writableStream.close())\n                                })\n                  })\n        } else {\n            let download = document.createElement(Tag.A)\n            download.href = href ?? dataURL\n            download.download = name\n            download.click()\n        }\n    }\n}","export abstract class Formatter {\n    static number = (value: number | undefined) =>\n        value?.toLocaleString(undefined, {\n            minimumFractionDigits: 2,\n            maximumFractionDigits: 2\n        }) ?? ''\n\n    static date = (value: Date) =>\n        value.toLocaleDateString()\n}","import { TextStyles } from 'helpers/TextStyles'\nimport { Theme } from 'Theme'\nimport { Animations } from 'Animations'\nimport * as Helper from 'Helper'\nimport { ButtonOptions } from 'types/ButtonOptions'\nimport { Canvas } from 'helpers/Canvas'\nimport { AnimationType } from 'static/Enums'\nimport * as Constants from 'static/constants/Index'\nimport { Styles } from 'static/constants/Styles'\n\nexport class Button {\n    #canvas: HTMLCanvasElement\n\n    #options: ButtonOptions\n\n    #canvasPosition: DOMRect\n\n    animations: Animations\n\n    #isInit: boolean\n\n    #position: DOMRect\n\n    constructor(canvas: HTMLCanvasElement, options: ButtonOptions) {\n        this.#canvas = canvas\n        this.#options = options\n\n        this.animations = new Animations()\n\n        this.#initAnimations()\n    }\n\n    render(moveEvent: MouseEvent, clickEvent: MouseEvent | undefined) {\n        if (!this.#isInit)\n            this.#initAnimations()\n\n        const ctx = Canvas.getContext(this.#canvas)\n\n        ctx.beginPath()\n\n        const translate = (transition: number, event: AnimationType) => {\n            this.animations.reload('animation-button', event)\n\n            ctx.fillStyle = Helper.adjustColor(Theme.canvasBackground, -Math.round(transition * 25))\n        }\n\n        if (this.#isOnButton(moveEvent)) {\n            this.#canvas.style.cursor = Styles.Cursor.Pointer\n\n            if (clickEvent && this.#isOnButton(clickEvent)) {\n                this.#options.action()\n                clickEvent = undefined\n            }\n\n            this.animations.add('animation-button',\n                AnimationType.MouseOver,\n                {\n                    duration: 300,\n                    body: transition => {\n                        translate(transition, AnimationType.MouseLeave)\n                    }\n                })\n        } else {\n            this.animations.add('animation-button',\n                AnimationType.MouseLeave,\n                {\n                    timer: Constants.Dates.minDate,\n                    duration: 300,\n                    backward: true,\n                    body: transition => {\n                        translate(transition, AnimationType.MouseOver)\n                    }\n                })\n        }\n\n        ctx.roundRect(this.#position.x, this.#position.y, this.#position.width, this.#position.height, 4)\n        ctx.fill()\n\n        TextStyles.regular(ctx)\n        ctx.fillText(this.#options.text,\n            this.#position.x + this.#position.width / 2,\n            this.#position.y + this.#position.height / 2)\n\n        this.#isInit = true\n\n        return clickEvent\n    }\n\n    resize() {\n        this.#initAnimations()\n    }\n\n    #initAnimations() {\n        this.#canvasPosition = this.#canvas.getBoundingClientRect()\n\n        this.#canvasPosition.x += scrollX\n        this.#canvasPosition.y += scrollY\n\n        const width = Helper.stringWidth(this.#options.text) + 12,\n            height = 20\n\n        this.#position = <DOMRect>{\n            x: this.#options.x + width > this.#canvas.width\n               ? this.#canvas.width - width\n               : this.#options.x < 0\n                 ? this.#canvas.width + this.#options.x - width\n                 : this.#options.x,\n            y: this.#options.y + height > this.#canvas.height\n               ? this.#canvas.height - height\n               : this.#options.y < 0\n                 ? this.#canvas.height + this.#options.y - height\n                 : this.#options.y,\n            width: width,\n            height: height\n        }\n    }\n\n    #isOnButton(event: MouseEvent): boolean {\n        if (!event)\n            return false\n\n        let trueX = event.clientX - this.#canvasPosition.x + scrollX,\n            trueY = event.clientY - this.#canvasPosition.y + scrollY\n\n        return trueX >= this.#position.x && trueX <= this.#position.x + this.#position.width\n               && trueY >= this.#position.y && trueY <= this.#position.y + this.#position.height\n    }\n}","export enum AnimationType {\n    MouseOver,\n\n    MouseLeave,\n\n    Init,\n\n    Click,\n\n    AnotherItemOver,\n\n    AnotherItemLeave\n}\n\nexport enum Attribute {\n    Name = 'name'\n}\n\nexport enum ChartType {\n    Plot,\n\n    Circular,\n\n    Gauge,\n\n    TreeMap\n}\n\nexport enum ErrorType {\n    NullContext = 'Can\\'t find context',\n\n    ElementNotExist = 'Element does not exist'\n}\n\nexport enum Events {\n    VisibilityChanged = 'visibilitychange',\n\n    Blur = 'blur',\n\n    MouseMove = 'mousemove',\n\n    Click = 'click',\n\n    Change = 'change',\n\n    ContextMenu = 'contextmenu'\n}\n\nexport enum LegendPlace {\n    Bottom,\n\n    Left,\n\n    Top,\n\n    Right\n}\n\nexport enum LineType {\n    Solid,\n\n    Dash,\n\n    Dotted\n}\n\nexport enum PlotAxisType {\n    Date = 1\n}\n\nexport enum PlotType {\n    Line,\n\n    AttentionLine,\n\n    Column,\n\n    Bar,\n\n    StackingColumn\n}\n\nexport enum Tag {\n    Canvas = 'canvas',\n\n    A = 'a',\n\n    Div = 'div',\n\n    Dialog = 'dialog',\n\n    Table = 'table',\n\n    Script = 'script'\n}\n\nexport enum RenderState {\n    Idle,\n\n    Init\n}\n\nexport enum Icon {\n    ThreeLines = '☰'\n}","import { Errors } from 'helpers/Errors'\nimport { ErrorType, Tag } from 'static/Enums'\n\nexport class Modal {\n    modal: HTMLDialogElement | undefined\n\n    #content: HTMLDivElement | undefined\n\n    constructor(content?: HTMLElement, size?: DOMRect) {\n        this.modal = document.createElement(Tag.Dialog)\n\n        this.modal.classList.add('o-modal')\n\n        if (size) {\n            this.modal.style.width = `${size.width}px`\n            this.modal.style.height = `${size.height}px`\n        }\n\n        this.modal.oncancel = () => this.close()\n\n        document.body.appendChild(this.modal)\n\n        this.#setHeader()\n\n        this.#setContent(content)\n    }\n\n    open() {\n        Errors.throwIsUndefined(this.modal, ErrorType.ElementNotExist)\n\n        this.modal!.showModal()\n    }\n\n    close() {\n        Errors.throwIsUndefined(this.modal, ErrorType.ElementNotExist)\n\n        this.modal!.close()\n\n        this.modal!.remove()\n\n        this.modal = undefined\n    }\n\n    #setHeader() {\n        Errors.throwIsUndefined(this.modal, ErrorType.ElementNotExist)\n\n        let closeButton = document.createElement('button')\n\n        closeButton.classList.add('o-modal-close')\n        closeButton.innerHTML = 'x'\n\n        this.modal!.appendChild(closeButton)\n\n        closeButton.onclick = () => this.close()\n    }\n\n    #setContent(content: HTMLElement | undefined) {\n        if (this.#content == undefined) {\n            this.#content = document.createElement(Tag.Div)\n\n            this.#content.classList.add('o-modal-content')\n\n            this.modal?.appendChild(this.#content)\n        }\n\n        if (content != undefined)\n            this.#content.appendChild(content)\n    }\n}","import { Value } from 'types/base/Value'\nimport { PlotPoint } from 'types/PlotPoint'\nimport { LineType, PlotType } from 'static/Enums'\n\nexport class PlotSeries extends Value {\n    values: PlotPoint[]\n\n    type: PlotType\n\n    width: number\n\n    lineType: LineType = LineType.Solid\n\n    constructor(obj: object) {\n        super()\n\n        Object.assign(this, obj)\n    }\n\n    toggle(transition: number) {\n        super.toggle(transition)\n    }\n\n    checkCondition(): boolean {\n        super.checkCondition()\n\n        return true\n    }\n\n    reset() {\n        super.reset()\n    }\n}","import { Value } from 'types/base/Value'\nimport { Renderable } from 'types/base/Renderable'\nimport * as Helper from 'Helper'\nimport { Sector } from 'types/Sector'\nimport { Point } from 'types/Point'\nimport { Theme } from 'Theme'\nimport { Chart } from 'Chart'\nimport { TextStyles } from 'helpers/TextStyles'\nimport { Canvas } from 'helpers/Canvas'\nimport { Button } from 'Button'\nimport { TextResources } from 'static/TextResources'\nimport * as Constants from 'static/constants/Index'\nimport { Styles } from 'static/constants/Styles'\nimport { AnimationType, Events, LegendPlace, RenderState } from 'static/Enums'\n\nexport class Legend extends Renderable {\n    #button: Button\n\n    #offset: Point\n\n    #chart: Chart\n\n    #hoverCount: number\n\n    isDestroy: boolean = false\n\n    constructor(chart: Chart) {\n        super(chart)\n\n        this.#chart = chart\n\n        this.calculateSizes()\n\n        if (!this.settings.disableInteractions)\n            this.#button = new Button(this.canvas,\n                {\n                    x: -10,\n                    y: 12,\n                    text: TextResources.reset,\n                    action: () => {\n                        for (let value of this.settings.data.values)\n                            value.reset()\n                    }\n                })\n    }\n\n    render() {\n        super.render()\n\n        const ctx = Canvas.getContext(this.canvas)\n\n        let nextPoint = { x: 20, y: 21 }\n\n        this.canvas.style.cursor = Styles.Cursor.Default\n\n        TextStyles.regular(ctx)\n        ctx.textAlign = 'start'\n        ctx.textBaseline = 'alphabetic'\n\n        ctx.translate(this.#offset.x, this.#offset.y)\n\n        this.#hoverCount = 0\n\n        for (const value of this.settings.data.values.filter(v => !v.hideInLegend))\n            nextPoint = this.#draw(value, nextPoint.x, nextPoint.y)\n\n        ctx.translate(-this.#offset.x, -this.#offset.y)\n\n        if (!this.isDestroy)\n            requestAnimationFrame(this.render.bind(this))\n\n        this.onClickEvent = this.#button?.render(this.onMouseMoveEvent, this.onClickEvent)\n\n        this.state = RenderState.Idle\n    }\n\n    #draw(value: Value, x: number, y: number): Point {\n        const ctx = Canvas.getContext(this.canvas)\n\n        const textWidth = Helper.stringWidth(value.label),\n            circleRadius = 6\n\n        if (x + 48 + textWidth >= this.canvas.width - 40 - this.#offset.x) {\n            x = 20\n            y += 26\n        }\n\n        let rectX = x - circleRadius - circleRadius,\n            rectY = y - circleRadius / 2 - circleRadius,\n            rectW = circleRadius + circleRadius + textWidth + 18,\n            rectH = 20\n\n        const isHover = (event: MouseEvent | undefined) => {\n            if (!event)\n                return false\n\n            const px = event.clientX - this.canvasPosition.x + scrollX - this.#offset.x,\n                py = event.clientY - this.canvasPosition.y + scrollY - this.#offset.y\n\n            return px >= rectX && px <= rectX + rectW\n                   && py >= rectY && py <= rectY + rectH\n        }\n\n        const translate = (transition: number, event: AnimationType) => {\n            this.animations.reload(value.id, event)\n\n            ctx.beginPath()\n\n            ctx.roundRect(rectX, rectY, rectW, rectH, circleRadius)\n\n            ctx.fillStyle = Helper.adjustColor(Theme.canvasBackground, Math.round(-25 * transition))\n            ctx.fill()\n        }\n\n        this.animations.add(value.id,\n            AnimationType.Click,\n            {\n                duration: Constants.Animations.legend,\n                continuous: true,\n                before: () => {\n                    return this.onClickEvent != undefined\n                           && (isHover(this.onClickEvent)\n                               || (value instanceof Sector\n                                   && value.current !== 0\n                                   && value.value !== value.current))\n                           && value.checkCondition()\n                },\n                body: transition => {\n                    value.toggle(transition)\n\n                    if (transition == 1)\n                        this.onClickEvent = new PointerEvent(Events.Click)\n                }\n            })\n\n        if (isHover(this.onMouseMoveEvent)) {\n            this.animations.add(value.id,\n                AnimationType.MouseOver,\n                {\n                    duration: Constants.Animations.button,\n                    body: transition => {\n                        translate(transition, AnimationType.MouseLeave)\n                    }\n                })\n\n            if (!value.disabled) {\n                this.#hoverCount++\n\n                this.#chart.highlight(value)\n            }\n\n            this.canvas.style.cursor = Styles.Cursor.Pointer\n        } else {\n            this.animations.add(value.id,\n                AnimationType.MouseLeave,\n                {\n                    timer: Constants.Dates.minDate,\n                    duration: Constants.Animations.button,\n                    backward: true,\n                    body: transition => {\n                        translate(transition, AnimationType.MouseOver)\n                    }\n                })\n        }\n\n        ctx.beginPath()\n\n        ctx.arc(x - 1, y + 1, 3, 0, 2 * Math.PI)\n        ctx.fillStyle = value.disabled ? Helper.grayScale(value.color) : value.color\n        ctx.fill()\n\n        ctx.fillStyle = Theme.text\n        if (value.disabled)\n            ctx.fillStyle += '7f'\n\n        ctx.fillText(value.label, x + circleRadius * 1.5 + 1, y + 6)\n\n        x += 20\n\n        if (value.disabled) {\n            ctx.moveTo(x - 10, y + 2)\n            ctx.lineTo(x + textWidth - 10, y + 2)\n            ctx.strokeStyle = Theme.text + '7f'\n            ctx.stroke()\n        }\n\n        x += textWidth + 22\n\n        return {\n            x: x,\n            y: y\n        }\n    }\n\n    destroy() {\n        this.isDestroy = true\n\n        this.canvas.remove()\n    }\n\n    refresh() {\n        this.state = RenderState.Init\n    }\n\n    resize() {\n        this.calculateSizes()\n        this.#button?.resize()\n        this.initAnimations()\n    }\n\n    calculateSizes() {\n        switch (this.settings.legendPlace) {\n            case LegendPlace.Bottom:\n            default:\n                this.canvas.width = this.settings.width\n                this.canvas.height = Legend.getLegendHeight(this.settings.data.values, this.canvas.width)\n\n                this.node.style.flexDirection = Styles.FlexDirection.Column\n\n                break\n\n            case LegendPlace.Top:\n                this.canvas.width = this.settings.width\n                this.canvas.height = Legend.getLegendHeight(this.settings.data.values, this.canvas.width)\n\n                this.node.style.flexDirection = Styles.FlexDirection.ColumnReverse\n\n                break\n\n            case LegendPlace.Left:\n                this.canvas.width = 500\n                this.canvas.height = this.settings.height\n\n                this.node.style.flexDirection = Styles.FlexDirection.Row\n\n                break\n\n            case LegendPlace.Right:\n                this.canvas.width = 500\n                this.canvas.height = this.settings.height\n\n                this.node.style.flexDirection = Styles.FlexDirection.RowReverse\n\n                break\n        }\n\n        this.#offset = {\n            x: Legend.getOffsetToCenter(this.settings.data.values, this.canvas.width),\n            y: (this.canvas.height - Legend.getLegendHeight(this.settings.data.values, this.canvas.width)) / 2\n        }\n    }\n\n    static getOffsetToCenter(values: Value[], width: number): number {\n        let maxWidth = 20\n\n        for (const value of values.filter(v => !v.hideInLegend)) {\n            const labelWidth = Helper.stringWidth(value.label)\n\n            if (maxWidth + labelWidth + 47 >= width - 100)\n                break\n\n            maxWidth += labelWidth + 47\n        }\n\n        return width / 2 - maxWidth / 2\n    }\n\n    static getLegendHeight(values: Value[], width: number): number {\n        let count = 1,\n            acc = 20,\n            offset = Legend.getOffsetToCenter(values, width)\n\n        for (const value of values.filter(v => !v.hideInLegend)) {\n            const labelWidth = Helper.stringWidth(value.label)\n\n            if (acc + labelWidth + 48 >= width - 32 - offset) {\n                acc = 20\n                count++\n            }\n\n            acc += labelWidth + 48\n        }\n\n        return 24 + count * 20 + (count - 1) * 6\n    }\n}","export class Values {\n    static readonly titleOffset = 30\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","Number.prototype.isAnyEquals = function (...values) {\n    return values.includes(<number>this)\n}\n\nDate.prototype.addDays = function (days: number) {\n    let result = new Date(this)\n    result.setDate(result.getDate() + days)\n    return result\n}\n\nDate.prototype.addMilliseconds = function (milliseconds: number) {\n    let result = new Date(this)\n    result.setMilliseconds(result.getMilliseconds() + milliseconds)\n    return result\n}\n\nMap.prototype.trySet = function (key: any, value: any) {\n    if (!this.has(key))\n        this.set(key, value)\n}","import { Chart } from 'Chart'\nimport { ChartSettings } from 'types/ChartSettings'\n\nfunction OCharts() {\n}\n\nOCharts.chart = function(context: HTMLElement, settings: ChartSettings) {\n    return new Chart(context, settings)\n}\n\n// @ts-ignore\nwindow.OCharts = OCharts"],"names":["Animations","constructor","this","Map","add","id","type","value","key","has","set","contains","reload","get","timer","Date","clear","forEach","_value","AnimationType","Init","delete","initializeTransitions","i","t","x","Math","pow","y","transitionCurve","toFixed","getTransition","item","stamp","passed","getTime","transition","duration","before","body","backward","continuous","endsWith","color","amount","replace","min","max","parseInt","toString","slice","Array","join","round","reduce","a","v","padStart","floor","random","str","font","widths","from","acc","cur","charCodeAt","S4","substring","toLowerCase","background","foreground","backgroundAsRgb","hexToRgb","foregroundAsRgb","r","g","b","test","opacity","hex","result","exec","componentToHex","c","length","rgb","bg","Theme","canvasBackground","alpha","Color","text","Errors","error","Error","throwIsUndefined","object","undefined","throw","context","settings","node","enableLegend","Legend","document","addEventListener","Events","VisibilityChanged","resetMouse","window","Blur","Click","event","target","canvas","closeDropdowns","render","ResizeObserver","destroy","observe","disconnect","highlight","reset","enableTooltip","disableInteractions","ChartType","Plot","PlotRenderer","Circular","CircularRenderer","Gauge","GaugeRenderer","TreeMap","TreeRenderer","prepareSettings","initDropdown","initAnimations","resize","refresh","initialize","isDarkThemeFunction","style","display","Styles","Display","Flex","flexDirection","FlexDirection","Column","alignItems","AlignItems","Center","justifyContent","JustifyContent","height","circular","legend","tree","tooltip","button","Sector","Value","obj","super","Object","assign","toggle","disabled","current","checkCondition","TextResources","exportPNG","decomposeToTable","exportCSV","menu","allDataIsHidden","other","thousandShort","millionShort","billionShort","show","noLabel","treeMapIsEmpty","getContext","willReadFrequently","ErrorType","NullContext","isPixelBusy","pixel","canvasBackgroundInt","data","templateId","getElementById","condition","lines","opacityValue","getBoundingClientRect","scrollX","scrollY","ctx","Canvas","textWidth","map","line","Helper","stringWidth","clientX","clientY","width","beginPath","roundRect","baseOpacity","strokeStyle","dropdownBorder","lineWidth","fillStyle","stroke","fill","offset","arc","PI","TextStyles","fillText","padding","updateVisibility","visibility","Visibility","Visible","regex","content","cloneNode","createElement","Tag","Div","innerHTML","position","Position","Absolute","pointerEvents","PointerEvents","None","setAttribute","Attribute","Name","matches","matchAll","html","match","property","replaceAll","appendChild","Hidden","left","top","tooltips","querySelectorAll","Constants","ThemeOptions","colors","backgrounds","lineAxes","lineActives","dropdownBorders","canvasBackgrounds","getRows","headers","values","series","seriesValues","push","xType","PlotAxisType","Formatter","date","name","label","unique","Set","uniqueHeaders","filter","sort","Cursor","Default","Pointer","ColumnReverse","Row","RowReverse","ImageRendering","Pixelated","options","isActive","icon","animations","moveEvent","clickEvent","translate","adjustColor","cursor","MouseOver","MouseLeave","Dates","minDate","regular","iconOffset","navigator","platform","borderRadius","items","dividers","maxWidth","dropdownOpacity","itemOpacityDec","itemBackground","dropdownItemHoverColor","borderColor","rect","setLineDash","isDivider","moveTo","lineTo","animationKey","isReturn","action","textAlign","textBaseline","close","w","h","trueX","trueY","callback","isDark","function","matchMedia","setTheme","Change","index","currentTheme","lineAxis","lineActive","Number","Renderer","chart","enableOther","contextMenu","_other","Modal","Decomposition","toChart","innerWidth","innerHeight","open","onMouseMoveEvent","MouseEvent","MouseMove","state","RenderState","Idle","renderDropdown","renderContextMenu","find","onContextMenuEvent","dropdown","innerRadius","console","warn","splice","sum","guid","Dropdown","Icon","ThreeLines","Export","asPng","title","asCsv","toTable","CircularData","anglesSum","flatMap","sector","angle","reverse","TooltipValue","number","isDestroy","requestAnimationFrame","bind","piece","isNaN","isSingle","s","onClickEvent","includes","PointerEvent","direction","cos","sin","lineJoin","lineCap","indexOf","centerOfSector","minSize","rest","scale","applyAlpha","swap","point2","save","labelStartPoint","labelMidPoint","dir","endPoint","isBusy","imageDataX","imageData","Uint32Array","getImageData","buffer","quadraticCurveTo","circularLabel","restore","localAccumulator","localAngle","currentAngle","tangentIntersectionAngle","lengthToTangentIntersection","tangentIntersectionPoint","innerPoint2","changeColor","anyHighlight","highlightItems","AnotherItemOver","AnotherItemLeave","closePath","resetTransform","radius","isWithinRadius","point","getMousePosition","inner","outer","atan2","abs","findIndex","o","sumBefore","isAngle","innerTitle","titleOffset","Values","shortSide","longestLabel","large","Renderable","disableInitAnimation","renderTitle","remove","domRect","parentElement","minWidth","minHeight","baseColor","randomColor","adjustStep","adjustAmount","dispatchEvent","CustomEvent","detail","clone","canvasPosition","isClick","legendPlace","LegendPlace","Top","Bottom","getLegendHeight","Left","Right","PlotSeries","PlotType","Bar","right","bottom","simple","Tooltip","tooltipLines","axisLineHoverColor","yValue","yHeight","columnWidth","seriesToRender","columnsIndex","columnsCount","barsIndex","barsCount","stackingAccumulator","lineType","LineType","Dash","Dotted","Solid","xIndex","yIndex","getTooltipValue","step","Line","unit","pointDuration","now","addMilliseconds","next","prevValue","endPointX","endPointY","mouse","AttentionLine","yMax","minStep","seriesHeight","fillRect","StackingColumn","ceil","it","isISOString","PlotData","skip","clearRect","drawImage","isContainsBar","xTitle","yTitle","rotate","xYPos","xCounter","trySet","isFinite","count","maxLabelWidth","maxCount","renderStep","axisLabelOffset","yCount","yCounter","yStep","labelY","labelYAsKey","postfix","shortLabels","countOfTens","isBar","createImageBitmap","then","res","putImageData","axisLineColor","isAnyEquals","xValues","p","yValues","isDate","tempDate","addDays","yMin","stackingColumns","yMaxWidth","isRight","imageRendering","append","onmousemove","onclick","oncontextmenu","preventDefault","onmouseleave","maxHeight","tooltipCell","contextMenuData","totalSquare","minX","minY","isVertical","remainWidth","remainHeight","cells","isLast","j","h1","w1","cell","cellInit","cellIndex","getPrev","E","initAnimationDuration","center","gap","strokeText","TreeData","table","Table","classList","totals","rows","valuesMap","tableValue","allColumns","header","indexSpaces","tableHeader","columns","vKey","vValue","totalValue","trim","totalColumns","container","div","script","Script","flexGrow","cloneSettings","JSON","parse","stringify","getPoint","point1","point3","outerRadius","longSide","leftEmpty","rightEmpty","destinationCanvas","destCtx","saveAs","toDataURL","csv","row","cols","encodeURIComponent","dataURL","href","isText","showSaveFilePicker","suggestedName","types","accept","excludeAcceptAllOption","toBlob","dataURI","byteString","atob","split","mimeString","ArrayBuffer","imageArray","Uint8Array","Blob","fileHandle","createWritable","writableStream","write","download","A","click","toLocaleString","minimumFractionDigits","maximumFractionDigits","toLocaleDateString","size","modal","Dialog","oncancel","ElementNotExist","showModal","closeButton","calculateSizes","Button","nextPoint","hideInLegend","getOffsetToCenter","labelWidth","rectX","rectY","circleRadius","rectW","isHover","px","py","grayScale","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","prototype","days","setDate","getDate","milliseconds","setMilliseconds","getMilliseconds","OCharts","Chart"],"sourceRoot":""}