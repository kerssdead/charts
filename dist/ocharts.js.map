{"version":3,"file":"ocharts.js","mappings":"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","sources":["webpack://charts/./src/Animations.ts","webpack://charts/./src/Helper.ts","webpack://charts/./src/types/TooltipValue.ts","webpack://charts/./src/helpers/Errors.ts","webpack://charts/./src/Chart.ts","webpack://charts/./src/types/Color.ts","webpack://charts/./src/static/constants/Animations.ts","webpack://charts/./src/types/Sector.ts","webpack://charts/./src/static/TextResources.ts","webpack://charts/./src/helpers/Canvas.ts","webpack://charts/./src/Tooltip.ts","webpack://charts/./src/static/ThemeOptions.ts","webpack://charts/./src/types/DrawPoint.ts","webpack://charts/./src/types/data/PlotData.ts","webpack://charts/./src/Prototypes.ts","webpack://charts/./src/static/constants/Styles.ts","webpack://charts/./src/types/Point.ts","webpack://charts/./src/Dropdown.ts","webpack://charts/./src/Theme.ts","webpack://charts/./src/render/CircularRenderer.ts","webpack://charts/./src/types/base/Renderer.ts","webpack://charts/./src/types/data/TreeData.ts","webpack://charts/./src/types/data/CircularData.ts","webpack://charts/./src/types/base/Value.ts","webpack://charts/./src/render/PlotRenderer.ts","webpack://charts/./src/static/constants/Dates.ts","webpack://charts/./src/helpers/TextStyles.ts","webpack://charts/./src/types/base/Renderable.ts","webpack://charts/./src/render/TreeRenderer.ts","webpack://charts/./src/Decomposition.ts","webpack://charts/./src/static/constants/Index.ts","webpack://charts/./src/render/GaugeRenderer.ts","webpack://charts/./src/Export.ts","webpack://charts/./src/helpers/Formatter.ts","webpack://charts/./src/Button.ts","webpack://charts/./src/OCharts.ts","webpack://charts/./src/static/Enums.ts","webpack://charts/./src/Modal.ts","webpack://charts/./src/types/PlotSeries.ts","webpack://charts/./src/Legend.ts","webpack://charts/./src/static/constants/Values.ts","webpack://charts/webpack/bootstrap","webpack://charts/webpack/startup"],"sourcesContent":["import AnimationItem from 'types/AnimationItem'\r\nimport { AnimationType } from 'static/Enums'\r\nimport * as Constants from 'static/constants/Index'\r\n\r\nclass Animations {\r\n    #queue: Map<string, AnimationItem>\r\n\r\n    static transitionCurve: Map<number, number> = new Map()\r\n\r\n    constructor() {\r\n        this.#queue = new Map()\r\n    }\r\n\r\n    handle(id: string, type: AnimationType, value: AnimationItem) {\r\n        const key = this.#getKey(id, type)\r\n        if (!this.#queue.has(key))\r\n            this.#queue.set(key, value)\r\n\r\n        this.#process(key)\r\n    }\r\n\r\n    contains(id: string, type: AnimationType): boolean {\r\n        return this.#queue.has(this.#getKey(id, type))\r\n    }\r\n\r\n    reload(id: string, type: AnimationType) {\r\n        if (this.contains(id, type)) {\r\n            let item = <AnimationItem>this.#queue.get(this.#getKey(id, type))\r\n\r\n            item.timer = new Date()\r\n        }\r\n    }\r\n\r\n    clear() {\r\n        this.#queue.forEach((_value, key) => !this.#is(key, AnimationType.Init) && this.#queue.delete(key))\r\n    }\r\n\r\n    reverse(id: string, type: AnimationType) {\r\n        if (this.contains(id, type)) {\r\n            let item = <AnimationItem>this.#queue.get(this.#getKey(id, type)),\r\n                stamp = new Date(),\r\n                passed = stamp.getTime() - (item.timer ?? stamp).getTime()\r\n\r\n            let reversedPassed = passed > item.duration ? 1 : item.duration - passed\r\n\r\n            item.timer = new Date(new Date().getTime() - reversedPassed)\r\n            item.backward = !item.backward\r\n        }\r\n    }\r\n\r\n    isBackward(id: string, type: AnimationType) {\r\n        return (this.#queue.get(this.#getKey(id, type)) as AnimationItem)?.backward ?? false\r\n    }\r\n\r\n    isEnd(id: string, type: AnimationType) {\r\n        let item = <AnimationItem>this.#queue.get(this.#getKey(id, type)),\r\n            stamp = new Date(),\r\n            passed = stamp.getTime() - (item.timer ?? stamp).getTime()\r\n\r\n        return passed >= item.duration\r\n    }\r\n\r\n    end(id: string, type: AnimationType) {\r\n        let item = <AnimationItem>this.#queue.get(this.#getKey(id, type))\r\n\r\n        if (item)\r\n            item.timer = Constants.Dates.minDate\r\n    }\r\n\r\n    #process(key: string) {\r\n        const item = <AnimationItem>this.#queue.get(key),\r\n            stamp = new Date(),\r\n            passed = stamp.getTime() - (item.timer ?? stamp).getTime(),\r\n            transition = Animations.getTransition(passed > item.duration ? 1 : passed / item.duration),\r\n            before = item.before ? item.before() : true\r\n\r\n        if (!item.timer && before)\r\n            item.timer = stamp\r\n\r\n        if (before)\r\n            item.body(item.backward ? 1 - transition : transition)\r\n\r\n        if (transition == 1 && (!before || item.continuous))\r\n            this.#queue.delete(key)\r\n    }\r\n\r\n    #getKey(id: string, type: number) {\r\n        return id + '_' + type\r\n    }\r\n\r\n    #is(key: string, type: number) {\r\n        return key.endsWith('_' + type)\r\n    }\r\n\r\n    static initializeTransitions() {\r\n        const valuesCount = 22820,\r\n            offset = .23,\r\n            p0 = { x: 0, y: 0 },\r\n            p1 = { x: 1 - offset, y: offset },\r\n            p2 = { x: offset, y: 1 - offset },\r\n            p3 = { x: 1, y: 1 }\r\n\r\n        for (let i = 0; i < valuesCount; i++) {\r\n            const t = (i + 1) / valuesCount\r\n\r\n            let x = Math.pow(1 - t, 3) * p0.x\r\n                    + 3 * Math.pow(1 - t, 2) * p1.x * t\r\n                    + 3 * (1 - t) * Math.pow(t, 2) * p2.x\r\n                    + Math.pow(t, 3) * p3.x,\r\n                y = Math.pow(1 - t, 3) * p0.y\r\n                    + 3 * Math.pow(1 - t, 2) * p1.y * t\r\n                    + 3 * (1 - t) * Math.pow(t, 2) * p2.y\r\n                    + Math.pow(t, 3) * p3.y\r\n\r\n            Animations.transitionCurve.set(+x.toFixed(4), y)\r\n        }\r\n\r\n        Animations.transitionCurve.set(0, 0)\r\n    }\r\n\r\n    static getTransition(value: number): number {\r\n        return Animations.transitionCurve.get(+value.toFixed(4)) ?? 0\r\n    }\r\n}\r\n\r\nexport default Animations","import Color from 'types/Color'\r\nimport Theme from 'Theme'\r\n\r\nexport function adjustColor(color: string, amount: number) {\r\n    return '#' + color.replace(/^#/, '').replace(/../g, color => ('0' + Math.min(255, Math.max(0, parseInt(color, 16) + amount)).toString(16)).slice(-2))\r\n}\r\n\r\nexport function grayScale(color: string) {\r\n    return '#' + Array(4).join(Math.round([.3, .59, .11].reduce((a, v, i) => a + v * parseInt(color[2 * i + 1] + color[2 * i + 2], 16), 0) / 3).toString(16).padStart(2, '0'))\r\n}\r\n\r\nexport function randomColor() {\r\n    let letters = '0123456789ABCDEF',\r\n        color = '#'\r\n    for (let i = 0; i < 6; i++)\r\n        color += letters[Math.floor(Math.random() * 16)]\r\n\r\n    return color\r\n}\r\n\r\nexport function stringWidth(str: any | undefined, font?: number) {\r\n    if (!str)\r\n        return 0\r\n\r\n    const widths = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.559375, 0.2765625, 0.3546875, 0.5546875, 0.5546875, 0.8890625, 0.665625, 0.190625, 0.3328125, 0.3328125, 0.3890625, 0.5828125, 0.2765625, 0.3328125, 0.2765625, 0.3015625, 0.5546875, 0.5546875, 0.5546875, 0.5546875, 0.5546875, 0.5546875, 0.5546875, 0.5546875, 0.5546875, 0.5546875, 0.2765625, 0.2765625, 0.584375, 0.5828125, 0.584375, 0.5546875, 1.0140625, 0.665625, 0.665625, 0.721875, 0.721875, 0.665625, 0.609375, 0.7765625, 0.721875, 0.2765625, 0.5, 0.665625, 0.5546875, 0.8328125, 0.721875, 0.7765625, 0.665625, 0.7765625, 0.721875, 0.665625, 0.609375, 0.721875, 0.665625, 0.94375, 0.665625, 0.665625, 0.609375, 0.2765625, 0.3546875, 0.2765625, 0.4765625, 0.5546875, 0.3328125, 0.5546875, 0.5546875, 0.5, 0.5546875, 0.5546875, 0.2765625, 0.5546875, 0.5546875, 0.221875, 0.240625, 0.5, 0.221875, 0.8328125, 0.5546875, 0.5546875, 0.5546875, 0.5546875, 0.3328125, 0.5, 0.2765625, 0.5546875, 0.5, 0.721875, 0.5, 0.5, 0.5, 0.3546875, 0.259375, 0.353125, 0.5890625],\r\n        avg = 0.5279276315789471\r\n\r\n    return Array.from(String(str)).reduce((acc, cur) => acc + (widths[cur.charCodeAt(0)] ?? avg), 0) * (font || 14)\r\n}\r\n\r\nexport function guid() {\r\n    const S4 = () => (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1)\r\n    return (S4() + S4() + '-' + S4() + '-4' + S4().slice(0, 3) + '-' + S4() + '-' + S4() + S4() + S4()).toLowerCase()\r\n}\r\n\r\nexport function isColorVisible(background: string, foreground: string) {\r\n    const backgroundAsRgb = hexToRgb(background),\r\n        foregroundAsRgb = hexToRgb(foreground),\r\n        value = .77\r\n\r\n    return (backgroundAsRgb.r + backgroundAsRgb.g + backgroundAsRgb.b) / (foregroundAsRgb.r + foregroundAsRgb.g + foregroundAsRgb.b) < value\r\n}\r\n\r\nexport function getColor(red: string, green: string, blue: string) {\r\n    return {\r\n        r: parseInt(red, 16),\r\n        g: parseInt(green, 16),\r\n        b: parseInt(blue, 16)\r\n    } as Color\r\n}\r\n\r\nexport function hexToRgb(hex: string): Color {\r\n    if (hex.length > 4) {\r\n        const value = getHexValues(hex)\r\n        if (value)\r\n            return getColor(value[1], value[2], value[3])\r\n    } else {\r\n        const value = getShortHexValues(hex)\r\n        if (value)\r\n            return getColor(\r\n                value[1] + value[1],\r\n                value[2] + value[2],\r\n                value[3] + value[3]\r\n            )\r\n    }\r\n\r\n    return new Color()\r\n}\r\n\r\nexport function isISOString(str: string) {\r\n    return /\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d\\.\\d+/.test(str)\r\n}\r\n\r\nexport function getHexValues(str: string) {\r\n    return /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(str)\r\n}\r\n\r\nexport function getShortHexValues(str: string) {\r\n    return /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i.exec(str)\r\n}\r\n\r\nexport function applyAlpha(color: string, opacity: number) {\r\n    function hexToRgb(hex: string) {\r\n        const result = getHexValues(hex)\r\n        return result ? getColor(result[1], result[2], result[3]) : new Color()\r\n    }\r\n\r\n    function rgbToHex(r: number, g: number, b: number) {\r\n        function toHex(c: number) {\r\n            let hex = c.toString(16)\r\n            return hex.length == 1 ? '0' + hex : hex\r\n        }\r\n\r\n        return '#' + toHex(r) + toHex(g) + toHex(b)\r\n    }\r\n\r\n    const rgb = hexToRgb(color),\r\n        bg = hexToRgb(Theme.canvasBackground)\r\n\r\n    opacity /= 255\r\n\r\n    const alpha = 1 - opacity\r\n\r\n    return rgbToHex(\r\n        Math.round((opacity * (rgb.r / 255) + (alpha * (bg.r / 255))) * 255),\r\n        Math.round((opacity * (rgb.g / 255) + (alpha * (bg.g / 255))) * 255),\r\n        Math.round((opacity * (rgb.b / 255) + (alpha * (bg.b / 255))) * 255)\r\n    )\r\n}","class TooltipValue {\r\n    text: string | undefined\r\n\r\n    color: string | undefined\r\n\r\n    constructor(text?: string, color?: string) {\r\n        this.text = text\r\n        this.color = color\r\n    }\r\n}\r\n\r\nexport default TooltipValue","import { ErrorType } from 'static/Enums'\r\n\r\nabstract class Errors {\r\n    static throw(error: ErrorType): never {\r\n        throw new Error(error)\r\n    }\r\n\r\n    static throwIsUndefined(object: any, error: ErrorType) {\r\n        if (object == undefined)\r\n            Errors.throw(error)\r\n    }\r\n}\r\n\r\nexport default Errors","import ChartSettings from 'types/ChartSettings'\r\nimport Renderer from 'types/base/Renderer'\r\nimport Data from 'types/interfaces/Data'\r\nimport Legend from 'Legend'\r\nimport Value from 'types/base/Value'\r\nimport PlotRenderer from 'render/PlotRenderer'\r\nimport GaugeRenderer from 'render/GaugeRenderer'\r\nimport TreeRenderer from 'render/TreeRenderer'\r\nimport Animations from 'Animations'\r\nimport Theme from 'Theme'\r\nimport Styles from 'static/constants/Styles'\r\nimport { ChartType, Events } from 'static/Enums'\r\nimport CircularRenderer from 'render/CircularRenderer'\r\n\r\nclass Chart {\r\n    node: HTMLElement\r\n\r\n    settings: ChartSettings\r\n\r\n    #renderer: Renderer<Data>\r\n\r\n    #legend: Legend | undefined\r\n\r\n    #observer: ResizeObserver\r\n\r\n    #currentType: ChartType\r\n\r\n    constructor(context: HTMLElement, settings: ChartSettings) {\r\n        this.node = context\r\n\r\n        this.applySettings(settings)\r\n\r\n        this.#applyStyles()\r\n\r\n        document.addEventListener(Events.VisibilityChanged, () => this.#renderer.resetMouse())\r\n        window.addEventListener(Events.Blur, () => this.#renderer.resetMouse())\r\n\r\n        window.addEventListener(Events.Click, event => {\r\n            if (event.target != this.#renderer.canvas)\r\n                this.#renderer.closeDropdowns()\r\n        })\r\n    }\r\n\r\n    render() {\r\n        this.#renderer.render()\r\n        this.#legend?.render()\r\n\r\n        this.#initializeObserver()\r\n\r\n        this.#refresh()\r\n    }\r\n\r\n    destroy() {\r\n        this.#renderer.destroy()\r\n        this.#legend?.destroy()\r\n\r\n        this.#observer.disconnect()\r\n    }\r\n\r\n    highlight(value?: Value) {\r\n        this.#renderer.highlight(value)\r\n    }\r\n\r\n    reset() {\r\n        Theme.reset()\r\n\r\n        this.#initialize(this.settings)\r\n    }\r\n\r\n    applySettings(settings: ChartSettings) {\r\n        this.settings = settings\r\n\r\n        this.reset()\r\n\r\n        const isNeedRestartRender = this.settings.type != this.#currentType\r\n\r\n        this.#prepareSettings()\r\n\r\n        if (this.settings.enableLegend && this.#legend != undefined)\r\n            this.#legend.applySettings(settings)\r\n\r\n        if (this.settings.enableLegend && this.#legend == undefined) {\r\n            this.#legend = new Legend(this)\r\n\r\n            this.#legend.render()\r\n        }\r\n\r\n        if (!this.settings.enableLegend && this.#legend != undefined) {\r\n            this.#legend.destroy()\r\n\r\n            this.#legend = undefined\r\n        }\r\n\r\n        if (isNeedRestartRender)\r\n            this.#renderer.render()\r\n\r\n        this.#initializeObserver()\r\n    }\r\n\r\n    #prepareSettings() {\r\n        this.settings.enableTooltip = !this.settings.disableInteractions && this.settings.enableTooltip\r\n\r\n        if (this.#renderer == undefined || this.settings.type != this.#currentType) {\r\n            this.#renderer?.destroy()\r\n\r\n            switch (this.settings.type) {\r\n                case ChartType.Plot:\r\n                    this.#renderer = new PlotRenderer(this)\r\n                    this.#currentType = ChartType.Plot\r\n                    break\r\n\r\n                case ChartType.Circular:\r\n                    this.#renderer = new CircularRenderer(this)\r\n                    this.#currentType = ChartType.Circular\r\n                    break\r\n\r\n                case ChartType.Gauge:\r\n                    this.#renderer = new GaugeRenderer(this)\r\n                    this.#currentType = ChartType.Gauge\r\n                    break\r\n\r\n                case ChartType.TreeMap:\r\n                    this.#renderer = new TreeRenderer(this)\r\n                    this.#currentType = ChartType.TreeMap\r\n                    break\r\n            }\r\n        } else {\r\n            this.#renderer.applySettings(this.settings)\r\n        }\r\n\r\n        this.#renderer.prepareSettings()\r\n\r\n        if (!this.settings.disableInteractions) {\r\n            this.#renderer.initDropdown()\r\n            this.#renderer.initAnimations()\r\n        }\r\n\r\n        this.#renderer.resize()\r\n    }\r\n\r\n    #refresh() {\r\n        this.#renderer.refresh()\r\n        this.#legend?.refresh()\r\n    }\r\n\r\n    #resize() {\r\n        this.#renderer.resize()\r\n        this.#legend?.resize()\r\n    }\r\n\r\n    #initialize(settings: ChartSettings) {\r\n        Theme.initialize(\r\n            () => this.#resize(),\r\n            settings.isDarkThemeFunction\r\n        )\r\n        Animations.initializeTransitions()\r\n    }\r\n\r\n    #applyStyles() {\r\n        this.node.style.display = Styles.Display.Flex\r\n        this.node.style.flexDirection = Styles.FlexDirection.Column\r\n        this.node.style.alignItems = Styles.AlignItems.Center\r\n        this.node.style.justifyContent = Styles.JustifyContent.Center\r\n        this.node.style.height = '100%'\r\n    }\r\n\r\n    #initializeObserver() {\r\n        if (this.#observer != undefined)\r\n            return\r\n\r\n        this.#observer = new ResizeObserver(() => {\r\n            if (this.#renderer.canvas)\r\n                this.#resize()\r\n            else\r\n                this.destroy()\r\n        })\r\n        this.#observer.observe(this.node)\r\n    }\r\n}\r\n\r\nexport default Chart","class Color {\r\n    r: number\r\n\r\n    g: number\r\n\r\n    b: number\r\n}\r\n\r\nexport default Color","export class Animations {\r\n    static circular = 335\r\n\r\n    static legend = 500\r\n\r\n    static tree = 250\r\n\r\n    static tooltip = 120\r\n\r\n    static button = 200\r\n}","import Value from 'types/base/Value'\r\nimport Point from 'types/Point'\r\nimport DrawPoint from 'types/DrawPoint'\r\nimport { AnimationType } from 'static/Enums'\r\nimport LineStyles from 'types/LineStyles'\r\n\r\nclass Sector extends Value {\r\n    canRenderLabel: boolean | undefined\r\n\r\n    isMouseInside: boolean\r\n\r\n    current: number\r\n\r\n    transition: number\r\n\r\n    innerRadius: number\r\n\r\n    /**\r\n     * Angle in radians\r\n     */\r\n    direction: number\r\n\r\n    lineStyles: LineStyles | undefined\r\n\r\n    translate: Point\r\n\r\n    state: AnimationType\r\n\r\n    points: DrawPoint[]\r\n\r\n    labelPoints: DrawPoint[]\r\n\r\n    constructor(obj: object) {\r\n        super()\r\n\r\n        Object.assign(this, obj)\r\n\r\n        this.baseColor = this.color\r\n        this.canRenderLabel = false\r\n        this.isMouseInside = false\r\n    }\r\n\r\n    toggle(transition: number) {\r\n        super.toggle(transition)\r\n\r\n        if (this.disabled)\r\n            this.current = this.value * (1 - transition)\r\n        else\r\n            this.current = this.value * transition\r\n    }\r\n\r\n    checkCondition(): boolean {\r\n        super.checkCondition()\r\n\r\n        return (this.current == 0 && !this.disabled) || this.value != 0\r\n    }\r\n\r\n    reset() {\r\n        super.reset()\r\n\r\n        this.current = this.value\r\n    }\r\n}\r\n\r\nexport default Sector","class TextResources {\r\n    static exportPNG = 'Save as image...'\r\n\r\n    static decomposeToTable = 'Show as table...'\r\n\r\n    static reset = 'Reset'\r\n\r\n    static exportCSV = 'Save as table...'\r\n\r\n    static menu = 'Menu'\r\n\r\n    static allDataIsHidden = 'All data is hidden'\r\n\r\n    static other = 'Other'\r\n\r\n    static thousandShort = 'K'\r\n\r\n    static millionShort = 'M'\r\n\r\n    static billionShort = 'B'\r\n\r\n    static show = 'Show...'\r\n\r\n    static noLabel = 'No Label'\r\n\r\n    static treeMapIsEmpty = 'Tree Map is empty'\r\n\r\n    static dataAsTable = 'Data as table'\r\n}\r\n\r\nexport default TextResources","import Errors from 'helpers/Errors'\r\nimport { ErrorType } from 'static/Enums'\r\nimport Theme from 'Theme'\r\n\r\nabstract class Canvas {\r\n    static getContext(canvas: HTMLCanvasElement): CanvasRenderingContext2D {\r\n        return canvas.getContext('2d', { willReadFrequently: true })\r\n               ?? Errors.throw(ErrorType.NullContext)\r\n    }\r\n\r\n    static isPixelBusy(pixel: number) {\r\n        return pixel != undefined && pixel - Theme.canvasBackgroundInt != 0\r\n    }\r\n}\r\n\r\nexport default Canvas","import Value from 'types/base/Value'\r\nimport Theme from 'Theme'\r\nimport TextStyles from 'helpers/TextStyles'\r\nimport * as Helper from 'Helper'\r\nimport ChartSettings from 'types/ChartSettings'\r\nimport TooltipValue from 'types/TooltipValue'\r\nimport Data from 'types/interfaces/Data'\r\nimport Canvas from 'helpers/Canvas'\r\nimport * as Constants from 'static/constants/Index'\r\nimport Styles from 'static/constants/Styles'\r\nimport HTMLTooltipElement from 'types/extends/HTMLTooltipElement'\r\nimport { Attribute, Tag } from 'static/Enums'\r\n\r\nclass Tooltip {\r\n    canvas: HTMLCanvasElement\r\n\r\n    data: Data\r\n\r\n    readonly #enabled: boolean\r\n\r\n    readonly #isCustom: boolean\r\n\r\n    #canvasPosition: DOMRect\r\n\r\n    #template: HTMLTemplateElement\r\n\r\n    #inProgress: boolean\r\n\r\n    #toHide: boolean\r\n\r\n    #timer: Date | undefined\r\n\r\n    #lines: TooltipValue[]\r\n\r\n    constructor(canvas: HTMLCanvasElement, settings: ChartSettings) {\r\n        this.canvas = canvas\r\n        this.data = settings.data\r\n        this.#enabled = settings.enableTooltip\r\n        this.#isCustom = !!settings.templateId\r\n\r\n        if (this.#isCustom)\r\n            this.#template = <HTMLTemplateElement>document.getElementById(settings.templateId)\r\n\r\n        this.refresh()\r\n    }\r\n\r\n    render(condition: boolean, event: MouseEvent, lines: TooltipValue[], value?: Value) {\r\n        this.#hideAll()\r\n\r\n        if (!this.#enabled || !event)\r\n            return\r\n\r\n        if (condition || this.#inProgress || this.#toHide) {\r\n            if (condition)\r\n                this.#lines = lines\r\n\r\n            if (!this.#timer)\r\n                this.#timer = new Date()\r\n\r\n            if (!this.#toHide)\r\n                this.#inProgress = true\r\n            else if (this.#inProgress)\r\n                this.#timer = new Date()\r\n\r\n            if (this.#isCustom)\r\n                this.#renderCustom(event, value)\r\n            else\r\n                this.#renderRegular(event)\r\n\r\n            const opacityValue = this.#getOpacityValue()\r\n\r\n            if (this.#toHide && opacityValue >= 1) {\r\n                this.#inProgress = false\r\n                this.#toHide = false\r\n            }\r\n\r\n            if (this.#toHide && opacityValue <= 0) {\r\n                this.#inProgress = false\r\n                this.#toHide = false\r\n                this.#timer = undefined\r\n            }\r\n\r\n            if (!condition && this.#timer != undefined)\r\n                this.#toHide = true\r\n        } else {\r\n            this.#timer = undefined\r\n        }\r\n    }\r\n\r\n    #renderRegular(event: MouseEvent) {\r\n        const ctx = Canvas.getContext(this.canvas)\r\n\r\n        const textWidth = Math.max(...this.#lines.map(line => Helper.stringWidth(line.text ?? '') + (line.color ? 8 : 0)))\r\n\r\n        const padding = 6,\r\n            borderRadius = 6\r\n\r\n        let x = event.clientX - this.#canvasPosition.x + 10,\r\n            y = event.clientY - this.#canvasPosition.y + scrollY + 10\r\n\r\n        if (x + textWidth + 25 > this.#canvasPosition.width)\r\n            x = this.#canvasPosition.width - (textWidth + 25)\r\n\r\n        if (y + 15 + this.#lines.length * 18 > this.#canvasPosition.height)\r\n            y = this.#canvasPosition.height - 15 - this.#lines.length * 18\r\n\r\n        ctx.beginPath()\r\n        ctx.roundRect(x, y, textWidth + 24, 16 + 16 * this.#lines.length, borderRadius)\r\n        let opacity = Math.round(this.#getOpacityValue() * 255).toString(16),\r\n            baseOpacity = Math.round(this.#getOpacityValue() * 207).toString(16)\r\n        if (opacity.length == 1)\r\n            opacity = '0' + opacity\r\n        if (baseOpacity.length == 1)\r\n            baseOpacity = '0' + baseOpacity\r\n\r\n        ctx.strokeStyle = Theme.dropdownBorder + baseOpacity\r\n        ctx.lineWidth = 1\r\n        ctx.fillStyle = Theme.background + baseOpacity\r\n        ctx.stroke()\r\n        ctx.fill()\r\n\r\n        for (let line of this.#lines) {\r\n            let offset = 0\r\n\r\n            if (line.color) {\r\n                offset = 12\r\n\r\n                ctx.beginPath()\r\n                ctx.fillStyle = line.color + opacity\r\n                ctx.arc(x + 16, y + 17, 5, 0, Math.PI * 2)\r\n                ctx.fill()\r\n            }\r\n\r\n            TextStyles.tooltip(ctx)\r\n            ctx.fillStyle = Theme.text + opacity\r\n            ctx.fillText(line.text ?? '', x + offset + padding * 2, y + 21)\r\n\r\n            y += 16\r\n        }\r\n    }\r\n\r\n    #renderCustom(event: MouseEvent, value?: Value) {\r\n        if (value == undefined)\r\n            return\r\n\r\n        const id = this.#template.id + value.id\r\n\r\n        let tooltip = <HTMLTooltipElement>document.getElementById(id)\r\n\r\n        const updateVisibility = () => {\r\n            this.#hideAll()\r\n\r\n            tooltip.style.visibility = Styles.Visibility.Visible\r\n        }\r\n\r\n        if (!tooltip) {\r\n            const regex = /\\${[^}]*}/gm\r\n\r\n            let content = <HTMLElement>this.#template.cloneNode(true)\r\n\r\n            tooltip = document.createElement(Tag.Div) as HTMLTooltipElement\r\n\r\n            tooltip.innerHTML = content.innerHTML\r\n\r\n            tooltip.id = id\r\n            tooltip.style.position = Styles.Position.Absolute\r\n            tooltip.style.pointerEvents = Styles.PointerEvents.None\r\n            tooltip.style.visibility = Styles.Visibility.Visible\r\n\r\n            tooltip.setAttribute(Attribute.Name, this.#template.id)\r\n\r\n            const matches = [...tooltip.innerHTML.matchAll(regex)]\r\n\r\n            let html = tooltip.innerHTML\r\n\r\n            for (const match of matches) {\r\n                const property = match[0].replace('${', '')\r\n                                         .replace('}', '')\r\n                                         .replaceAll(' ', '')\r\n\r\n                html = html.replaceAll(match[0], value.data[property])\r\n            }\r\n\r\n            tooltip.innerHTML = html\r\n\r\n            document.body.appendChild(tooltip)\r\n\r\n            tooltip.position = tooltip.getBoundingClientRect()\r\n\r\n            updateVisibility()\r\n        }\r\n\r\n        if (tooltip.style.visibility == Styles.Visibility.Hidden)\r\n            updateVisibility()\r\n\r\n        if (tooltip.position.height == 0)\r\n            tooltip.position = tooltip.getBoundingClientRect()\r\n\r\n        const offset = 10\r\n\r\n        let opacity = '1'\r\n\r\n        let x = event.clientX,\r\n            y = event.clientY + scrollY\r\n\r\n        if (x + tooltip.position.width - this.#canvasPosition.x > this.#canvasPosition.width - offset) {\r\n            x = this.#canvasPosition.width - tooltip.position.width + this.#canvasPosition.x - offset\r\n            opacity = '.67'\r\n        }\r\n\r\n        if (y + tooltip.position.height - this.#canvasPosition.y > this.#canvasPosition.height - offset) {\r\n            y = this.#canvasPosition.height - tooltip.position.height + this.#canvasPosition.y - offset\r\n            opacity = '.67'\r\n        }\r\n\r\n        if (x == 0 && y == 0)\r\n            opacity = '0'\r\n\r\n        tooltip.style.left = x + offset + 'px'\r\n        tooltip.style.top = y + offset + 'px'\r\n        tooltip.style.opacity = opacity\r\n    }\r\n\r\n    refresh() {\r\n        this.#canvasPosition = this.canvas.getBoundingClientRect()\r\n        this.#canvasPosition.x += scrollX\r\n        this.#canvasPosition.y += scrollY\r\n    }\r\n\r\n    #hideAll() {\r\n        if (!this.#isCustom)\r\n            return\r\n\r\n        const tooltips = <NodeListOf<HTMLElement>>document.querySelectorAll(`[name=\"${ this.#template.id }\"]`)\r\n\r\n        for (let node of tooltips)\r\n            node.style.visibility = Styles.Visibility.Hidden\r\n    }\r\n\r\n    #getOpacityValue(): number {\r\n        if (!this.#timer)\r\n            return 0\r\n\r\n        let opacityValue = this.#toHide\r\n                           ? 1 - (new Date().getTime() - this.#timer.getTime()) / Constants.Animations.tooltip\r\n                           : (new Date().getTime() - this.#timer.getTime()) / Constants.Animations.tooltip\r\n        if (opacityValue > 1)\r\n            opacityValue = 1\r\n        if (opacityValue < 0)\r\n            opacityValue = 0\r\n\r\n        return opacityValue\r\n    }\r\n}\r\n\r\nexport default Tooltip","class ThemeOptions {\r\n    static readonly colors = ['#000000', '#ffffff']\r\n\r\n    static readonly backgrounds = ['#f7f7f7', '#222222']\r\n\r\n    static readonly lines = ['#000000', '#eeeeee']\r\n\r\n    static readonly lineAxes = ['#e0e0e0', '#212121']\r\n\r\n    static readonly lineActives = ['#898989', '#898989']\r\n\r\n    static readonly dropdownBorders = ['#bcbcbc', '#7e7e7e']\r\n\r\n    static readonly canvasBackgrounds = ['#ffffff', '#222222']\r\n}\r\n\r\nexport default ThemeOptions","import { DrawPointType } from 'static/Enums'\r\n\r\nclass DrawPoint {\r\n    /**\r\n     * Method invocation arguments, where even indexed is x-axis points and odd is y-axis points\r\n     */\r\n    args: any[]\r\n\r\n    type: DrawPointType\r\n\r\n    readonly base: any[]\r\n\r\n    constructor(type: DrawPointType, ...args: any[]) {\r\n        this.args = args\r\n        this.type = type\r\n        this.base = JSON.parse(JSON.stringify(args))\r\n    }\r\n}\r\n\r\nexport default DrawPoint","import TableValue from 'types/TableValue'\r\nimport PlotSeries from 'types/PlotSeries'\r\nimport TableHeaderValue from 'types/TableHeaderValue'\r\nimport TableData from 'types/TableData'\r\nimport Data from 'types/interfaces/Data'\r\nimport Formatter from 'helpers/Formatter'\r\nimport { PlotAxisType } from 'static/Enums'\r\n\r\nclass PlotData implements Data {\r\n    shortLabels: boolean\r\n\r\n    simple: boolean\r\n\r\n    yMax: number\r\n\r\n    xTitle: string\r\n\r\n    yTitle: string\r\n\r\n    xType: PlotAxisType\r\n\r\n    values: PlotSeries[]\r\n\r\n    static getRows(data: PlotData): TableData {\r\n        let headers: TableHeaderValue[] = []\r\n\r\n        let values: TableValue[] = []\r\n\r\n        for (const series of data.values) {\r\n            let seriesValues = new Map<string, any>()\r\n\r\n            for (const value of series.values) {\r\n                seriesValues.set(value.x.toString(), value.y)\r\n                headers.push({\r\n                    value: value.x.toString(),\r\n                    display: data.xType == PlotAxisType.Date\r\n                             ? Formatter.date(new Date(value.x))\r\n                             : value.x.toString()\r\n                })\r\n            }\r\n\r\n            values.push({\r\n                name: series.label,\r\n                values: seriesValues\r\n            })\r\n        }\r\n\r\n        const unique = new Set(),\r\n            uniqueHeaders = headers.filter(v => !unique.has(v.display) && unique.add(v.display))\r\n\r\n        if (data.xType == PlotAxisType.Date)\r\n            uniqueHeaders.sort((a, b) => new Date(a.value).getTime() - new Date(b.value).getTime())\r\n\r\n        return {\r\n            headers: uniqueHeaders,\r\n            values: values\r\n        }\r\n    }\r\n}\r\n\r\nexport default PlotData","Number.prototype.isAnyEquals = function (...values) {\r\n    return values.includes(<number>this)\r\n}\r\n\r\nDate.prototype.addDays = function (days: number) {\r\n    let result = new Date(this)\r\n    result.setDate(result.getDate() + days)\r\n    return result\r\n}\r\n\r\nDate.prototype.addMilliseconds = function (milliseconds: number) {\r\n    let result = new Date(this)\r\n    result.setMilliseconds(result.getMilliseconds() + milliseconds)\r\n    return result\r\n}\r\n\r\nMap.prototype.trySet = function (key: any, value: any) {\r\n    if (!this.has(key))\r\n        this.set(key, value)\r\n}\r\n\r\nArray.prototype.sum = function (predicate: (value: any) => number) {\r\n    return this.reduce((acc, v) => acc + predicate(v), 0)\r\n}","namespace Styles {\r\n    export class Cursor {\r\n        static Default = 'default'\r\n\r\n        static Pointer = 'pointer'\r\n    }\r\n\r\n    export class Display {\r\n        static Flex = 'flex'\r\n    }\r\n\r\n    export class FlexDirection {\r\n        static Column = 'column'\r\n\r\n        static ColumnReverse = 'column-reverse'\r\n\r\n        static Row = 'row'\r\n\r\n        static RowReverse = 'row-reverse'\r\n    }\r\n\r\n    export class AlignItems {\r\n        static Center = 'center'\r\n    }\r\n\r\n    export class Visibility {\r\n        static Visible = 'visible'\r\n\r\n        static Hidden = 'hidden'\r\n    }\r\n\r\n    export class Position {\r\n        static Absolute = 'absolute'\r\n    }\r\n\r\n    export class PointerEvents {\r\n        static None = 'none'\r\n    }\r\n\r\n    export class JustifyContent {\r\n        static Center = 'center'\r\n    }\r\n\r\n    export class ImageRendering {\r\n        static Pixelated = 'pixelated'\r\n    }\r\n}\r\nexport default Styles","class Point {\r\n    x: number\r\n\r\n    y: number\r\n}\r\n\r\nexport default Point","import Theme from 'Theme'\r\nimport DropdownOptions from 'types/DropdownOptions'\r\nimport Animations from 'Animations'\r\nimport * as Helper from 'Helper'\r\nimport TextStyles from 'helpers/TextStyles'\r\nimport Canvas from 'helpers/Canvas'\r\nimport { AnimationType } from 'static/Enums'\r\nimport * as Constants from 'static/constants/Index'\r\nimport Styles from 'static/constants/Styles'\r\n\r\nclass Dropdown {\r\n    isActive: boolean = false\r\n\r\n    #isInit: boolean\r\n\r\n    #options: DropdownOptions\r\n\r\n    #canvasPosition: DOMRect\r\n\r\n    animations: Animations\r\n\r\n    #position: DOMRect\r\n\r\n    readonly #isOnlyMenu: boolean\r\n\r\n    readonly #canvas: HTMLCanvasElement\r\n\r\n    constructor(canvas: HTMLCanvasElement, options: DropdownOptions) {\r\n        this.#canvas = canvas\r\n        this.#options = options\r\n\r\n        if (this.#options.icon)\r\n            this.#options.text = this.#options.icon\r\n\r\n        this.#isOnlyMenu = this.#options.text == undefined\r\n\r\n        this.animations = new Animations()\r\n    }\r\n\r\n    render(moveEvent: MouseEvent, clickEvent: MouseEvent | undefined) {\r\n        if (!this.#isInit)\r\n            this.#initAnimations()\r\n\r\n        if (this.#isOnlyMenu)\r\n            this.isActive = true\r\n\r\n        const ctx = Canvas.getContext(this.#canvas)\r\n\r\n        let x = this.#position.x,\r\n            y = this.#position.y,\r\n            width = this.#position.width,\r\n            height = this.#position.height\r\n\r\n        ctx.beginPath()\r\n\r\n        if (!this.#isOnlyMenu) {\r\n            const translate = (transition: number, event: AnimationType) => {\r\n                this.animations.reload('animation-dropdown', event)\r\n\r\n                ctx.fillStyle = Helper.adjustColor(Theme.canvasBackground, -Math.round(25 * transition))\r\n            }\r\n\r\n            if (this.#isOnButton(moveEvent, x, y, width, height)) {\r\n                this.#canvas.style.cursor = Styles.Cursor.Pointer\r\n\r\n                if (clickEvent && moveEvent.x == clickEvent.x && moveEvent.y == clickEvent.y) {\r\n                    this.isActive = !this.isActive\r\n                    clickEvent = undefined\r\n                }\r\n\r\n                if (!this.isActive)\r\n                    this.animations.handle('animation-dropdown',\r\n                        AnimationType.MouseOver,\r\n                        {\r\n                            duration: 300,\r\n                            body: transition => {\r\n                                translate(transition, AnimationType.MouseLeave)\r\n                            }\r\n                        })\r\n                else\r\n                    ctx.fillStyle = Helper.adjustColor(Theme.canvasBackground, -25)\r\n            } else {\r\n                this.#canvas.style.cursor = Styles.Cursor.Default\r\n\r\n                if (!this.isActive)\r\n                    this.animations.handle('animation-dropdown',\r\n                        AnimationType.MouseLeave,\r\n                        {\r\n                            timer: Constants.Dates.minDate,\r\n                            duration: 300,\r\n                            backward: true,\r\n                            body: transition => {\r\n                                translate(transition, AnimationType.MouseOver)\r\n                            }\r\n                        })\r\n                else\r\n                    ctx.fillStyle = Helper.adjustColor(Theme.canvasBackground, -25)\r\n            }\r\n\r\n            ctx.roundRect(x, y, width, height, 4)\r\n            ctx.fill()\r\n\r\n            TextStyles.regular(ctx)\r\n\r\n            if (this.#options.icon)\r\n                ctx.font = '20px sans-serif'\r\n\r\n            const iconOffset = this.#options.icon\r\n                               ? navigator.platform != 'Win32'\r\n                                 ? 1\r\n                                 : -1\r\n                               : 0\r\n\r\n            ctx.fillText(\r\n                this.#options.text ?? '',\r\n                x + width / 2,\r\n                y + height / 2 - iconOffset\r\n            )\r\n        }\r\n\r\n        if (this.isActive) {\r\n            const padding = 6,\r\n                borderRadius = 6\r\n\r\n            y += height\r\n\r\n            const items = this.#options.items.filter(value => value.text),\r\n                dividers = this.#options.items.filter(value => !value.text)\r\n\r\n            let maxWidth = Math.max(...items.map(value => Helper.stringWidth(value.text)))\r\n                           + padding * 4\r\n\r\n            if (x + maxWidth > this.#canvas.width - 4)\r\n                x -= x + maxWidth - this.#canvas.width + 4\r\n\r\n            const dropdownOpacity = 'bb',\r\n                itemOpacityDec = 127,\r\n                itemBackground = Theme.dropdownItemHoverColor,\r\n                borderColor = Theme.dropdownBorder\r\n\r\n            ctx.beginPath()\r\n\r\n            const rect = {\r\n                x: x,\r\n                y: y,\r\n                width: maxWidth,\r\n                height: items.length * 26\r\n                        + dividers.length * 4\r\n                        + (items.length == 1 ? padding : 0)\r\n                        + (items.length == 2 && dividers.length == 1 ? padding : 0)\r\n            }\r\n\r\n            ctx.roundRect(rect.x, rect.y, rect.width, rect.height, borderRadius)\r\n            ctx.fillStyle = Theme.background + dropdownOpacity\r\n            ctx.setLineDash([])\r\n            ctx.lineWidth = 1\r\n            ctx.strokeStyle = borderColor + dropdownOpacity\r\n            ctx.fill()\r\n            ctx.stroke()\r\n\r\n            ctx.beginPath()\r\n\r\n            y += 6\r\n\r\n            for (const item of this.#options.items) {\r\n                ctx.beginPath()\r\n\r\n                if (item.isDivider == true) {\r\n                    y += 2\r\n\r\n                    ctx.moveTo(x + padding, y)\r\n                    ctx.lineTo(x + maxWidth - padding, y)\r\n\r\n                    ctx.lineWidth = .5\r\n                    ctx.stroke()\r\n\r\n                    y += 4\r\n\r\n                    continue\r\n                }\r\n\r\n                ctx.fillStyle = 'transparent'\r\n\r\n                const animationKey = 'animation-dropdown' + item.text\r\n\r\n                const translate = (transition: number, event: AnimationType, isReturn?: boolean) => {\r\n                    this.animations.reload(animationKey, event)\r\n\r\n                    if (isReturn && transition == 1)\r\n                        return\r\n\r\n                    let opacity = Math.round(itemOpacityDec * transition).toString(16)\r\n                    if (opacity.length == 1)\r\n                        opacity = '0' + opacity\r\n\r\n                    ctx.fillStyle = itemBackground + opacity\r\n                }\r\n\r\n                if (this.#isOnButton(moveEvent, x, y, maxWidth, 20)) {\r\n                    this.animations.handle(animationKey,\r\n                        AnimationType.MouseOver,\r\n                        {\r\n                            duration: 300,\r\n                            body: transition => {\r\n                                translate(transition, AnimationType.MouseLeave)\r\n                            }\r\n                        })\r\n\r\n                    this.#canvas.style.cursor = Styles.Cursor.Pointer\r\n\r\n                    if (clickEvent) {\r\n                        item.action()\r\n\r\n                        clickEvent = undefined\r\n                        this.isActive = false\r\n                    }\r\n                } else {\r\n                    this.animations.handle(animationKey,\r\n                        AnimationType.MouseLeave,\r\n                        {\r\n                            timer: Constants.Dates.minDate,\r\n                            duration: 300,\r\n                            backward: true,\r\n                            body: transition => {\r\n                                translate(transition, AnimationType.MouseOver, true)\r\n                            }\r\n                        })\r\n                }\r\n\r\n                ctx.roundRect(x + padding, y, maxWidth - padding * 2, 20, borderRadius)\r\n                ctx.fill()\r\n\r\n                TextStyles.regular(ctx)\r\n                ctx.fillStyle = Theme.text\r\n                ctx.textAlign = 'left'\r\n                ctx.textBaseline = 'hanging'\r\n                ctx.fillText(item.text, x + padding * 2, y + 5)\r\n\r\n                y += 22\r\n            }\r\n        }\r\n\r\n        ctx.lineWidth = 1\r\n\r\n        if (!this.#isOnlyMenu && clickEvent != undefined && this.isActive) {\r\n            this.isActive = false\r\n            clickEvent = undefined\r\n        }\r\n\r\n        this.#isInit = true\r\n\r\n        if (this.#isOnlyMenu && clickEvent && moveEvent.x == clickEvent.x && moveEvent.y == clickEvent.y) {\r\n            this.isActive = !this.isActive\r\n            clickEvent = undefined\r\n        }\r\n\r\n        return clickEvent\r\n    }\r\n\r\n    #initAnimations() {\r\n        this.#canvasPosition = this.#canvas.getBoundingClientRect()\r\n\r\n        this.#canvasPosition.x += scrollX\r\n        this.#canvasPosition.y += scrollY\r\n    }\r\n\r\n    #isOnButton(event: MouseEvent, x: number, y: number, w: number, h: number): boolean {\r\n        if (!event)\r\n            return false\r\n\r\n        let trueX = event.clientX - this.#canvasPosition.x + scrollX,\r\n            trueY = event.clientY - this.#canvasPosition.y + scrollY\r\n\r\n        return trueX >= x && trueX <= x + w\r\n               && trueY >= y && trueY <= y + h\r\n    }\r\n\r\n    refresh() {\r\n        this.#isInit = false\r\n    }\r\n\r\n    resize() {\r\n        this.#initAnimations()\r\n        this.#calculatePosition()\r\n    }\r\n\r\n    close() {\r\n        this.isActive = false\r\n    }\r\n\r\n    #calculatePosition() {\r\n        const width = this.#isOnlyMenu ? 0 : Helper.stringWidth(this.#options.text ?? '') + 12,\r\n            height = this.#isOnlyMenu ? 0 : 20\r\n\r\n        this.#position = {\r\n            x: this.#options.x + width > this.#canvas.width\r\n               ? this.#canvas.width - width\r\n               : this.#options.x < 0\r\n                 ? this.#canvas.width + this.#options.x - width\r\n                 : this.#options.x,\r\n            y: this.#options.y + height > this.#canvas.height\r\n               ? this.#canvas.height - height\r\n               : this.#options.y < 0\r\n                 ? this.#canvas.height + this.#options.y - height\r\n                 : this.#options.y,\r\n            width: width,\r\n            height: height\r\n        } as DOMRect\r\n    }\r\n}\r\n\r\nexport default Dropdown","import * as Helper from 'Helper'\r\nimport ThemeOptions from 'static/ThemeOptions'\r\nimport { Events } from 'static/Enums'\r\n\r\nclass Theme {\r\n    static currentTheme = 0\r\n\r\n    static text: string\r\n\r\n    static background: string\r\n\r\n    static line: string\r\n\r\n    static lineAxis: string\r\n\r\n    static lineActive: string\r\n\r\n    static dropdownItemHoverColor: string\r\n\r\n    static dropdownBorder: string\r\n\r\n    static canvasBackground: string\r\n\r\n    static canvasBackgroundInt: number\r\n\r\n    static function: Function | undefined\r\n\r\n    static initialize(callback: Function, isDark?: Function) {\r\n        if (!Theme.function && isDark)\r\n            Theme.function = isDark\r\n\r\n        if (window.matchMedia\r\n            && window.matchMedia('(prefers-color-scheme: dark)').matches\r\n            && (!Theme.function || Theme.function()))\r\n            Theme.setTheme(1)\r\n        else\r\n            Theme.setTheme(0)\r\n\r\n        window.matchMedia('(prefers-color-scheme: dark)')\r\n              .addEventListener(Events.Change, event => {\r\n                  Theme.setTheme(event.matches && (!Theme.function || Theme.function()) ? 1 : 0)\r\n                  callback()\r\n              })\r\n    }\r\n\r\n    static setTheme(index: number) {\r\n        Theme.currentTheme = index\r\n\r\n        Theme.text = ThemeOptions.colors[index]\r\n        Theme.background = ThemeOptions.backgrounds[index]\r\n        Theme.line = ThemeOptions.lines[index]\r\n        Theme.lineAxis = ThemeOptions.lineAxes[index]\r\n        Theme.lineActive = ThemeOptions.lineActives[index]\r\n        Theme.dropdownItemHoverColor = Helper.adjustColor(Theme.background, index == 0 ? -50 : 50)\r\n        Theme.dropdownBorder = ThemeOptions.dropdownBorders[index]\r\n        Theme.canvasBackground = ThemeOptions.canvasBackgrounds[index]\r\n        Theme.canvasBackgroundInt = Number(`0xff${ Theme.canvasBackground.slice(1) }`)\r\n    }\r\n\r\n    static reset() {\r\n        this.function = undefined\r\n    }\r\n}\r\n\r\nexport default Theme","import Renderer from 'types/base/Renderer'\r\nimport CircularData from 'types/data/CircularData'\r\nimport Sector from 'types/Sector'\r\nimport CircularAngle from 'types/CircularAngle'\r\nimport Point from 'types/Point'\r\nimport DropdownItem from 'types/DropdownItem'\r\nimport * as Helper from 'Helper'\r\nimport Dropdown from 'Dropdown'\r\nimport Theme from 'Theme'\r\nimport TextStyles from 'helpers/TextStyles'\r\nimport Chart from 'Chart'\r\nimport TooltipValue from 'types/TooltipValue'\r\nimport Decomposition from 'Decomposition'\r\nimport Export from 'Export'\r\nimport TextResources from 'static/TextResources'\r\nimport Modal from 'Modal'\r\nimport Canvas from 'helpers/Canvas'\r\nimport Formatter from 'helpers/Formatter'\r\nimport { AnimationType, DrawPointType, Events, Icon, PlotAxisType } from 'static/Enums'\r\nimport * as Constants from 'static/constants/Index'\r\nimport Styles from 'static/constants/Styles'\r\nimport DrawPoint from 'types/DrawPoint'\r\n\r\nclass CircularRenderer extends Renderer<CircularData> {\r\n    private readonly startAngle: number\r\n\r\n    private isMousePositionChanged: boolean\r\n\r\n    private isInsideCircle: boolean\r\n\r\n    private canRenderInnerTitle: boolean\r\n\r\n    private isDonut: boolean\r\n\r\n    private radius: number\r\n\r\n    private pinned: string[]\r\n\r\n    private hover: string[]\r\n\r\n    private prevMousePos: Point\r\n\r\n    private center: Point\r\n\r\n    private angles: CircularAngle[]\r\n\r\n    private other: Sector[]\r\n\r\n    private innerTitleStyle: Function\r\n\r\n    constructor(chart: Chart) {\r\n        super(chart)\r\n\r\n        this.startAngle = Math.PI / 4\r\n        this.isMousePositionChanged = false\r\n        this.prevMousePos = new Point()\r\n\r\n        this.moveEvent = new MouseEvent(Events.MouseMove)\r\n    }\r\n\r\n    private calculateAngles() {\r\n        const valuesSum = this.data.values.sum(v => v.current)\r\n\r\n        let anglesSum = this.startAngle\r\n        this.angles = this.data.values.flatMap(sector => {\r\n                               const angle = sector.current / valuesSum * 2 * Math.PI\r\n\r\n                               return {\r\n                                   id: sector.id,\r\n                                   value: angle,\r\n                                   sum: (anglesSum += angle) - angle\r\n                               }\r\n                           })\r\n                           .reverse()\r\n    }\r\n\r\n    private getAngle(sector: Sector) {\r\n        return this.angles.find(o => o.id == sector.id)?.value ?? 0\r\n    }\r\n\r\n    private getAccumulator(sector: Sector) {\r\n        return this.angles.find(o => o.id == sector.id)?.sum ?? this.startAngle\r\n    }\r\n\r\n    private calculatePoint(sector: Sector): Sector {\r\n        let accumulator = this.getAccumulator(sector)\r\n\r\n        const getPoint = (radius: number, angle: number, center: Point): Point => {\r\n            return {\r\n                x: center.x + radius * Math.cos(accumulator + angle),\r\n                y: center.y + radius * Math.sin(accumulator + angle)\r\n            }\r\n        }\r\n\r\n        const startPoint = getPoint(this.radius, 0, this.center)\r\n        const angle = this.getAngle(sector)\r\n\r\n        let nextPoint = getPoint(this.radius, angle, this.center)\r\n        let points: DrawPoint[] = []\r\n\r\n        sector.direction = accumulator + angle / 2\r\n\r\n        if (angle > 0) {\r\n            if (sector.current > 0) {\r\n                let labelStartPoint = getPoint(this.radius + 10, angle / 2, this.center),\r\n                    labelMidPoint = getPoint(this.radius + 20, angle / 2, this.center)\r\n\r\n                const dir = labelStartPoint.x > this.center.x ? 1 : -1\r\n\r\n                let endPoint = {\r\n                    x: labelMidPoint.x + 10 * dir,\r\n                    y: labelMidPoint.y\r\n                }\r\n\r\n                sector.labelPoints = [\r\n                    new DrawPoint(DrawPointType.Move, labelStartPoint.x, labelStartPoint.y),\r\n                    new DrawPoint(DrawPointType.QuadraticCurve, labelMidPoint.x, labelMidPoint.y, endPoint.x, endPoint.y)\r\n                ]\r\n            }\r\n\r\n            if (!this.isDonut)\r\n                points.push(new DrawPoint(DrawPointType.Move, this.center.x, this.center.y))\r\n\r\n            points.push(new DrawPoint(DrawPointType.Line, startPoint.x, startPoint.y))\r\n\r\n            let localAccumulator = 0,\r\n                localAngle = angle\r\n\r\n            while (localAngle > 0) {\r\n                let currentAngle = localAngle - Math.PI / 6 > 0\r\n                                   ? Math.PI / 6\r\n                                   : localAngle\r\n\r\n                nextPoint = getPoint(this.radius, localAccumulator + currentAngle, this.center)\r\n\r\n                const tangentIntersectionAngle = Math.PI - currentAngle,\r\n                    lengthToTangentIntersection = this.radius / Math.sin(tangentIntersectionAngle / 2),\r\n                    tangentIntersectionPoint = getPoint(lengthToTangentIntersection, localAccumulator + currentAngle / 2, this.center)\r\n\r\n                points.push(new DrawPoint(DrawPointType.QuadraticCurve, tangentIntersectionPoint.x, tangentIntersectionPoint.y, nextPoint.x, nextPoint.y))\r\n\r\n                localAccumulator += currentAngle\r\n\r\n                localAngle -= Math.PI / 6\r\n            }\r\n\r\n            if (this.isDonut || sector.innerRadius != 0) {\r\n                const innerRadius = this.radius * (sector.innerRadius / 100)\r\n\r\n                const innerPoint2 = {\r\n                    x: nextPoint.x - (((this.radius - innerRadius) * (nextPoint.x - this.center.x)) / this.radius),\r\n                    y: nextPoint.y - (((this.radius - innerRadius) * (nextPoint.y - this.center.y)) / this.radius)\r\n                }\r\n\r\n                points.push(new DrawPoint(DrawPointType.Line, innerPoint2.x, innerPoint2.y))\r\n\r\n                localAngle = 0\r\n                localAccumulator = angle\r\n\r\n                while (localAngle < angle) {\r\n                    let currentAngle = localAngle + Math.PI / 6 < angle\r\n                                       ? Math.PI / 6\r\n                                       : angle - localAngle\r\n\r\n                    nextPoint = getPoint(innerRadius, localAccumulator - currentAngle, this.center)\r\n\r\n                    const tangentIntersectionAngle = Math.PI - currentAngle,\r\n                        lengthToTangentIntersection = innerRadius / Math.sin(tangentIntersectionAngle / 2),\r\n                        tangentIntersectionPoint = getPoint(lengthToTangentIntersection, localAccumulator - currentAngle / 2, this.center)\r\n\r\n                    points.push(new DrawPoint(DrawPointType.QuadraticCurve, tangentIntersectionPoint.x, tangentIntersectionPoint.y, nextPoint.x, nextPoint.y))\r\n\r\n                    localAccumulator -= currentAngle\r\n\r\n                    localAngle += Math.PI / 6\r\n                }\r\n            }\r\n\r\n            accumulator += angle\r\n        }\r\n\r\n        sector.points = points\r\n\r\n        return sector\r\n    }\r\n\r\n    private scale(sector: Sector, value: number, transition: number) {\r\n        const centerOfSector = {\r\n            x: this.center.x + this.radius / 2 * Math.cos(sector.direction),\r\n            y: this.center.y + this.radius / 2 * Math.sin(sector.direction)\r\n        }\r\n\r\n        const setArgs = (points: DrawPoint[]) => {\r\n            for (let p of points) {\r\n                for (let i = 0; i < p.args.length; i += 2) {\r\n                    const x = p.base[i],\r\n                        y = p.base[i + 1],\r\n                        length = Math.sqrt(Math.pow(x - centerOfSector.x, 2) + Math.pow(y - centerOfSector.y, 2)),\r\n                        computed = length * value + length * (1 - value) * transition,\r\n                        ratio = computed / length\r\n\r\n                    p.args[i] = ratio * x + (1 - ratio) * centerOfSector.x\r\n                    p.args[i + 1] = ratio * y + (1 - ratio) * centerOfSector.y\r\n                }\r\n            }\r\n        }\r\n\r\n        setArgs(sector.points)\r\n        setArgs(sector.labelPoints)\r\n    }\r\n\r\n    private focus(sector: Sector, value: number, transition: number) {\r\n        sector.color = Helper.applyAlpha(sector.baseColor, 255 - 255 * value * transition)\r\n        sector.textColor = Helper.applyAlpha(Theme.text, 255 - 255 * value * transition)\r\n    }\r\n\r\n    private translate(sector: Sector, value: number, transition: number) {\r\n        const offset = {\r\n            x: (this.center.x + this.radius * Math.cos(sector.direction) - this.center.x) * value,\r\n            y: (this.center.y + this.radius * Math.sin(sector.direction) - this.center.y) * value\r\n        }\r\n\r\n        sector.translate = {\r\n            x: offset.x * transition,\r\n            y: offset.y * transition\r\n        }\r\n\r\n        const setArgs = (points: DrawPoint[]) => {\r\n            for (let p of points) {\r\n                for (let i = 0; i < p.args.length; i += 2) {\r\n                    p.args[i] = p.base[i] + sector.translate.x\r\n                    p.args[i + 1] = p.base[i + 1] + sector.translate.y\r\n                }\r\n            }\r\n        }\r\n\r\n        setArgs(sector.points)\r\n        setArgs(sector.labelPoints)\r\n    }\r\n\r\n    private outline(sector: Sector, value: number, transition: number) {\r\n        sector.lineStyles = transition == 0\r\n                       ? {\r\n                lineWidth: 1,\r\n                lineJoin: 'miter',\r\n                lineCap: 'butt'\r\n            }\r\n                       : {\r\n                lineWidth: this.getAngle(sector) > Math.PI / 6\r\n                           ? value * transition\r\n                           : 1,\r\n                lineJoin: 'round',\r\n                lineCap: 'round'\r\n            }\r\n    }\r\n\r\n    private canRenderLabel(sector: Sector, ctx: CanvasRenderingContext2D) {\r\n        if (sector.state == AnimationType.None && sector.canRenderLabel != undefined)\r\n            return sector.canRenderLabel\r\n\r\n        if (sector.current == 0)\r\n            return sector.canRenderLabel = false\r\n\r\n        if (sector.state == AnimationType.None && sector.canRenderLabel)\r\n            return sector.canRenderLabel\r\n\r\n        const dir = sector.labelPoints[0].args[0] < sector.labelPoints[1].args[0] ? 1 : -1\r\n\r\n        let isBusy = false\r\n\r\n        const endPoint = {\r\n            x: sector.labelPoints[1].args[0],\r\n            y: sector.labelPoints[1].args[1]\r\n        }\r\n\r\n        const textWidth = Helper.stringWidth(sector.label),\r\n            imageDataX = dir == 1 ? endPoint.x + 12 : endPoint.x - textWidth - 12 + (sector.translate ? sector.translate.x : 0),\r\n            imageDataY = endPoint.y - 12 + (sector.translate ? sector.translate.y : 0),\r\n            imageData = new Uint32Array(ctx.getImageData(imageDataX, imageDataY, textWidth, 28).data.buffer)\r\n\r\n        if (imageDataX < 0 || imageDataX + textWidth > this.canvas.width\r\n            || endPoint.y - 12 < 0 || endPoint.y + 12 > this.canvas.height)\r\n            isBusy = true\r\n\r\n        if (!isBusy)\r\n            for (let i = 0; i < imageData.length; i++)\r\n                if (Canvas.isPixelBusy(imageData[i])) {\r\n                    isBusy = true\r\n                    break\r\n                }\r\n\r\n        return sector.canRenderLabel = !isBusy\r\n    }\r\n\r\n    private drawLabel(sector: Sector, ctx: CanvasRenderingContext2D) {\r\n        if (!this.canRenderLabel(sector, ctx))\r\n            return\r\n\r\n        ctx.beginPath()\r\n\r\n        ctx.moveTo(\r\n            sector.labelPoints[0].args[0],\r\n            sector.labelPoints[0].args[1]\r\n        )\r\n\r\n        ctx.quadraticCurveTo(\r\n            sector.labelPoints[1].args[0],\r\n            sector.labelPoints[1].args[1],\r\n            sector.labelPoints[1].args[2],\r\n            sector.labelPoints[1].args[3]\r\n        )\r\n\r\n        ctx.strokeStyle = sector.textColor\r\n\r\n        if (sector.current != 0 && sector.current != sector.value)\r\n            ctx.strokeStyle = Helper.applyAlpha(sector.textColor, Math.round(255 * (sector.current / sector.value)))\r\n\r\n        ctx.lineWidth = 1\r\n        ctx.lineJoin = 'miter'\r\n        ctx.lineCap = 'butt'\r\n\r\n        ctx.stroke()\r\n\r\n        ctx.fillStyle = sector.textColor\r\n\r\n        if (sector.current != 0 && sector.current != sector.value)\r\n            ctx.fillStyle = Helper.applyAlpha(sector.textColor, Math.round(255 * (sector.current / sector.value)))\r\n\r\n        const dir = sector.labelPoints[0].args[0] < sector.labelPoints[1].args[0] ? 1 : -1\r\n\r\n        TextStyles.circularLabel(ctx, dir == 1)\r\n        ctx.fillText(\r\n            sector.label,\r\n            sector.labelPoints[1].args[0] + 16 * dir,\r\n            sector.labelPoints[1].args[1] + 4\r\n        )\r\n    }\r\n\r\n    private drawSector(sector: Sector, ctx: CanvasRenderingContext2D) {\r\n        ctx.beginPath()\r\n\r\n        if (sector.lineStyles) {\r\n            ctx.lineWidth = sector.lineStyles.lineWidth\r\n            ctx.lineJoin = sector.lineStyles.lineJoin\r\n            ctx.lineCap = sector.lineStyles.lineCap\r\n        }\r\n\r\n        for (const point of sector.points) {\r\n            switch (point.type) {\r\n                case DrawPointType.Move:\r\n                    ctx.moveTo(point.args[0], point.args[1])\r\n\r\n                    break\r\n\r\n                case DrawPointType.Line:\r\n                    ctx.lineTo(point.args[0], point.args[1])\r\n\r\n                    break\r\n\r\n                case DrawPointType.QuadraticCurve:\r\n                    ctx.quadraticCurveTo(point.args[0], point.args[1], point.args[2], point.args[3])\r\n\r\n                    break\r\n            }\r\n        }\r\n\r\n        ctx.fillStyle = sector.color\r\n        ctx.strokeStyle = sector.color\r\n\r\n        ctx.closePath()\r\n\r\n        ctx.fill()\r\n        ctx.stroke()\r\n    }\r\n\r\n    private animate(sector: Sector) {\r\n        this.animations.handle(\r\n            sector.id,\r\n            AnimationType.Init,\r\n            {\r\n                duration: Constants.Animations.circular + (this.data.values.indexOf(sector) + 1) / this.data.values.length * Constants.Animations.circular,\r\n                continuous: true,\r\n                before: () => sector.state == AnimationType.Init,\r\n                body: transition => {\r\n                    this.scale(sector, .7, transition)\r\n                    this.focus(sector, 1, 1 - transition)\r\n\r\n                    if (transition == 1)\r\n                        sector.state = AnimationType.None\r\n                }\r\n            }\r\n        )\r\n\r\n        this.animations.handle(\r\n            sector.id,\r\n            AnimationType.Click,\r\n            {\r\n                duration: 0,\r\n                before: () => sector.state == AnimationType.Click,\r\n                body: _transition => {\r\n                    this.translate(sector, .1, 1)\r\n                    this.outline(sector, 8, 1)\r\n                }\r\n            }\r\n        )\r\n\r\n        this.animations.handle(\r\n            sector.id,\r\n            AnimationType.MouseOver,\r\n            {\r\n                duration: Constants.Animations.circular,\r\n                before: () => sector.state.isAnyEquals(AnimationType.MouseOver, AnimationType.MouseLeave),\r\n                body: transition => {\r\n                    if (sector.color != sector.baseColor)\r\n                        this.focus(sector, .5, transition)\r\n                    this.translate(sector, .1, transition)\r\n                    this.outline(sector, 8, transition)\r\n\r\n                    if (sector.state == AnimationType.MouseLeave\r\n                        && this.data.values.filter(s => s.state == AnimationType.MouseOver).length > 0)\r\n                        this.animations.end(sector.id, AnimationType.AnotherItemOver)\r\n                }\r\n            }\r\n        )\r\n\r\n        this.animations.handle(\r\n            sector.id,\r\n            AnimationType.AnotherItemOver,\r\n            {\r\n                duration: Constants.Animations.circular,\r\n                before: () => sector.state.isAnyEquals(AnimationType.AnotherItemOver, AnimationType.AnotherItemLeave),\r\n                body: transition => {\r\n                    this.focus(sector, .5, transition)\r\n                }\r\n            }\r\n        )\r\n    }\r\n\r\n    private handle(sector: Sector) {\r\n        if (sector.disabled)\r\n            return\r\n\r\n        if (sector.state == AnimationType.None && !this.isInsideCircle)\r\n            return\r\n\r\n        const isInsideSector = this.isInsideSector(this.moveEvent, sector, this.center),\r\n            isInsideSectorClick = this.clickEvent ? this.isInsideSector(this.clickEvent, sector, this.center) : false\r\n\r\n        if (this.moveEvent && isInsideSector)\r\n            this.hover?.push(sector.id)\r\n\r\n        if (this.data.values.filter(s => !s.disabled).length == 1)\r\n            return\r\n\r\n        if (isInsideSectorClick) {\r\n            sector.state = AnimationType.Click\r\n\r\n            if (this.pinned.includes(sector.id))\r\n                this.pinned = this.pinned.filter(id => id != sector.id)\r\n            else\r\n                this.pinned.push(sector.id)\r\n\r\n            this.clickEvent = undefined\r\n\r\n            return\r\n        } else if (this.pinned.includes(sector.id)) {\r\n            return\r\n        }\r\n\r\n        if (isInsideSector) {\r\n            sector.state = AnimationType.MouseOver\r\n\r\n            if (this.animations.isBackward(sector.id, AnimationType.MouseOver))\r\n                this.animations.reverse(sector.id, AnimationType.MouseOver)\r\n\r\n            return\r\n        }\r\n\r\n        if (sector.state == AnimationType.MouseOver\r\n            && !isInsideSector) {\r\n            sector.state = AnimationType.MouseLeave\r\n\r\n            if (!this.animations.isBackward(sector.id, AnimationType.MouseOver))\r\n                this.animations.reverse(sector.id, AnimationType.MouseOver)\r\n\r\n            return\r\n        }\r\n\r\n        if (sector.state == AnimationType.MouseLeave\r\n            && this.animations.isEnd(sector.id, AnimationType.MouseOver)) {\r\n            sector.state = AnimationType.None\r\n\r\n            return\r\n        }\r\n\r\n        if (sector.state == AnimationType.MouseLeave)\r\n            return\r\n\r\n        if (this.data.values.filter(s => s.state == AnimationType.MouseOver).length > 0) {\r\n            sector.state = AnimationType.AnotherItemOver\r\n\r\n            if (this.animations.isBackward(sector.id, AnimationType.AnotherItemOver))\r\n                this.animations.reverse(sector.id, AnimationType.AnotherItemOver)\r\n\r\n            return\r\n        }\r\n\r\n        if (this.data.values.filter(s => s.state == AnimationType.MouseLeave).length > 0) {\r\n            sector.state = AnimationType.AnotherItemLeave\r\n\r\n            if (!this.animations.isBackward(sector.id, AnimationType.AnotherItemOver))\r\n                this.animations.reverse(sector.id, AnimationType.AnotherItemOver)\r\n\r\n            return\r\n        }\r\n\r\n        if (sector.state == AnimationType.AnotherItemLeave\r\n            && this.animations.isEnd(sector.id, AnimationType.AnotherItemOver)) {\r\n            sector.state = AnimationType.None\r\n\r\n            return\r\n        }\r\n    }\r\n\r\n    render() {\r\n        super.render()\r\n\r\n        const isAnyCollapsing = this.data.values.filter(s => s.value != s.current && s.current != 0)\r\n                                    .length > 0\r\n\r\n        this.isMousePositionChanged = this.prevMousePos.x != this.moveEvent.clientX\r\n                                      || this.prevMousePos.y != this.moveEvent.clientY\r\n\r\n        if (this.isMousePositionChanged) {\r\n            const point = this.getMousePosition(this.moveEvent)\r\n            this.isInsideCircle = this.isWithinRadius({\r\n                x: point.x - this.center.x,\r\n                y: point.y - this.center.y\r\n            })\r\n        }\r\n\r\n        this.prevMousePos = {\r\n            x: this.moveEvent.clientX,\r\n            y: this.moveEvent.clientY\r\n        }\r\n\r\n        if (isAnyCollapsing) {\r\n            this.calculateAngles()\r\n            for (let sector of this.data.values)\r\n                sector = this.calculatePoint(sector)\r\n        }\r\n\r\n        if (this.data.values.filter(s => !s.disabled).length == 0) {\r\n            this.empty()\r\n\r\n            return\r\n        }\r\n\r\n        this.hover = []\r\n\r\n        const ctx = Canvas.getContext(this.canvas)\r\n\r\n        for (const sector of this.data.values) {\r\n            this.animate(sector)\r\n\r\n            this.drawSector(sector, ctx)\r\n            this.drawLabel(sector, ctx)\r\n\r\n            if (sector.state != AnimationType.Init)\r\n                this.handle(sector)\r\n        }\r\n\r\n        super.renderDropdown()\r\n\r\n        const currentHover = this.data.values.find(v => v.id == this.hover[0]),\r\n            isAnyHover = this.hover.length > 0\r\n\r\n        if (isAnyHover || this.contextMenu)\r\n            this.renderContextMenu(currentHover?.data ?? {})\r\n        else\r\n            this.menuEvent = undefined\r\n\r\n        this.tooltip.render(isAnyHover && !this.dropdown?.isActive,\r\n            this.moveEvent,\r\n            [\r\n                new TooltipValue(`${ currentHover?.label }: ${ Formatter.format(currentHover?.current, PlotAxisType.Number, this.settings.valuePostfix) }`)\r\n            ],\r\n            currentHover)\r\n\r\n        this.innerTitle()\r\n\r\n        this.canvas.style.cursor = isAnyHover\r\n                                   ? Styles.Cursor.Pointer\r\n                                   : Styles.Cursor.Default\r\n\r\n        if (!this.isDestroy)\r\n            requestAnimationFrame(this.render.bind(this))\r\n    }\r\n\r\n    private isWithinRadius(v: Point) {\r\n        return v.x * v.x + v.y * v.y <= this.radius * this.radius\r\n    }\r\n\r\n    private isInsideSector(event: MouseEvent, sector: Sector, center: Point): boolean {\r\n        if (!this.isMousePositionChanged)\r\n            return sector.isMouseInside\r\n\r\n        const isAngle = (point: Point) => {\r\n            let a = Math.atan2(point.y - center.y, point.x - center.x)\r\n            if (a < 0)\r\n                a += Math.PI * 2\r\n            if (a < this.startAngle)\r\n                a = Math.PI * 2 - Math.abs(this.startAngle - a) + this.startAngle\r\n\r\n            let index = this.angles.findIndex(o => o.id == sector.id),\r\n                sumBefore = this.angles[index].sum\r\n\r\n            return !(this.dropdown?.isActive ?? false)\r\n                   && sumBefore <= a\r\n                   && sumBefore + this.angles[index].value - a >= 0\r\n        }\r\n\r\n        const point = this.getMousePosition(event)\r\n\r\n        return sector.isMouseInside = isAngle(point) && this.isInsideCircle\r\n    }\r\n\r\n    private empty() {\r\n        const ctx = Canvas.getContext(this.canvas)\r\n\r\n        ctx.beginPath()\r\n\r\n        ctx.arc(this.center.x, this.center.y, this.radius, 0, 2 * Math.PI)\r\n        ctx.strokeStyle = Theme.text\r\n        ctx.stroke()\r\n\r\n        TextStyles.regular(ctx)\r\n        ctx.fillText(TextResources.allDataIsHidden, this.center.x, this.center.y)\r\n\r\n        requestAnimationFrame(this.render.bind(this))\r\n    }\r\n\r\n    private innerTitle() {\r\n        if (this.canRenderInnerTitle) {\r\n            const ctx = Canvas.getContext(this.canvas)\r\n\r\n            this.innerTitleStyle(ctx)\r\n            ctx.fillText(this.data.innerTitle, this.center.x, this.center.y)\r\n        }\r\n    }\r\n\r\n    private calculateSizes() {\r\n        const titleOffset = this.settings.title\r\n                            ? Constants.Values.titleOffset\r\n                            : 0\r\n\r\n        const shortSide = this.canvas.width > this.canvas.height - titleOffset * 2\r\n                          ? this.canvas.height - titleOffset * 2\r\n                          : this.canvas.width\r\n\r\n        this.center = {\r\n            x: this.canvas.width / 2,\r\n            y: titleOffset + this.canvas.height / 2\r\n        }\r\n\r\n        let longestLabel = 0\r\n\r\n        for (const value of this.data.values) {\r\n            const width = Helper.stringWidth(value.label)\r\n\r\n            if (width > longestLabel)\r\n                longestLabel = width\r\n        }\r\n\r\n        this.radius = shortSide / 2 - (longestLabel + 50)\r\n\r\n        if (this.radius < shortSide / 2 - 50)\r\n            this.radius = shortSide / 2 - 50\r\n\r\n        if (this.radius < 0)\r\n            this.radius = 0\r\n\r\n        if (this.data.innerTitle != undefined && this.data.innerTitle != '') {\r\n            this.innerTitleStyle = TextStyles.large\r\n            this.canRenderInnerTitle = Helper.stringWidth(this.data.innerTitle, 16)\r\n                                        < (this.data.innerRadius / 100) * this.radius * 2\r\n\r\n            if (!this.canRenderInnerTitle) {\r\n                this.innerTitleStyle = TextStyles.regular\r\n                this.canRenderInnerTitle = Helper.stringWidth(this.data.innerTitle, 14)\r\n                                            < (this.data.innerRadius / 100) * this.radius * 2\r\n            }\r\n\r\n            if (!this.canRenderInnerTitle)\r\n                console.warn(`Inner title is declared, but can't be rendered`)\r\n        }\r\n    }\r\n\r\n    refresh() {\r\n        super.refresh()\r\n\r\n        this.dropdown?.refresh()\r\n    }\r\n\r\n    resize() {\r\n        super.resize()\r\n\r\n        this.initAnimations()\r\n        this.calculateSizes()\r\n        this.dropdown?.resize()\r\n\r\n        for (let sector of this.data.values) {\r\n            sector.canRenderLabel = undefined\r\n            sector = this.calculatePoint(sector)\r\n        }\r\n    }\r\n\r\n    prepareSettings() {\r\n        super.prepareSettings()\r\n\r\n        this.calculateSizes()\r\n\r\n        this.data.values = this.data.values.map(v => new Sector(v))\r\n\r\n        if (this.settings.enableOther) {\r\n            if (!this.settings.contextMenu)\r\n                this.settings.contextMenu = [] as DropdownItem[]\r\n            else\r\n                this.settings.contextMenu.push({\r\n                    isDivider: true\r\n                } as DropdownItem)\r\n\r\n            this.settings.contextMenu.push({\r\n                text: TextResources.show,\r\n                condition: data => data?._other,\r\n                action: () => {\r\n                    new Modal(Decomposition.toChart<Sector>(this.settings, this.other),\r\n                        {\r\n                            width: window.innerWidth * .8,\r\n                            height: window.innerHeight * .8\r\n                        } as DOMRect,\r\n                        TextResources.other)\r\n                        .open()\r\n                }\r\n            })\r\n        }\r\n\r\n        this.pinned = []\r\n\r\n        this.isDonut = (this.data.innerRadius ?? 0) != 0\r\n\r\n        for (let item of this.data.values) {\r\n            item.disabled = !item.value\r\n            item.value ??= 0\r\n            item.current = item.value\r\n            item.innerRadius ??= this.data.innerRadius ?? 0\r\n\r\n            if (item.value < 0)\r\n                console.warn(`\"${ item.label }\" has negative value (${ item.value }) and will not be render`)\r\n        }\r\n\r\n        this.data.values = this.data.values.filter(v => v.value >= 0)\r\n\r\n        if (this.settings.enableOther && this.data.values.length > 20) {\r\n            this.other = this.data.values.splice(20)\r\n\r\n            const sum = this.other.sum(v => v.current)\r\n\r\n            this.data.values = this.data.values.slice(0, 20)\r\n\r\n            this.data.values.push(new Sector({\r\n                value: sum,\r\n                current: sum,\r\n                label: TextResources.other,\r\n                id: Helper.guid(),\r\n                color: this.other[this.other.length - 1].color,\r\n                innerRadius: this.data.innerRadius,\r\n                data: {\r\n                    _other: true\r\n                }\r\n            }))\r\n        }\r\n\r\n        this.calculateAngles()\r\n\r\n        for (let sector of this.data.values) {\r\n            sector = this.calculatePoint(sector)\r\n\r\n            sector.textColor = Theme.text\r\n            sector.state = this.settings.disableInitAnimation\r\n                           ? AnimationType.None\r\n                           : AnimationType.Init\r\n        }\r\n    }\r\n\r\n    initDropdown() {\r\n        super.initDropdown()\r\n\r\n        this.dropdown = new Dropdown(this.canvas,\r\n            {\r\n                x: -10,\r\n                y: 10,\r\n                icon: Icon.ThreeLines,\r\n                items: [\r\n                    {\r\n                        text: TextResources.exportPNG,\r\n                        action: () => {\r\n                            Export.asPng(this.canvas, this.settings.title)\r\n                        }\r\n                    },\r\n                    {\r\n                        text: TextResources.exportCSV,\r\n                        action: () => {\r\n                            Export.asCsv(Decomposition.toTable(CircularData.getRows(this.data)), this.settings.title)\r\n                        }\r\n                    },\r\n                    {\r\n                        isDivider: true\r\n                    } as DropdownItem,\r\n                    {\r\n                        text: TextResources.decomposeToTable,\r\n                        action: () => {\r\n                            new Modal(Decomposition.toTable(CircularData.getRows(this.data)),\r\n                                undefined,\r\n                                this.settings.title ?? TextResources.dataAsTable)\r\n                                .open()\r\n                        }\r\n                    }\r\n                ]\r\n            })\r\n    }\r\n}\r\n\r\nexport default CircularRenderer","import Data from 'types/interfaces/Data'\r\nimport Renderable from 'types/base/Renderable'\r\nimport * as Helper from 'Helper'\r\nimport Value from 'types/base/Value'\r\nimport Legend from 'Legend'\r\nimport Dropdown from 'Dropdown'\r\nimport DropdownItem from 'types/DropdownItem'\r\nimport Point from 'types/Point'\r\nimport TextResources from 'static/TextResources'\r\nimport Chart from 'Chart'\r\nimport Canvas from 'helpers/Canvas'\r\nimport TextStyles from 'helpers/TextStyles'\r\nimport { LegendPlace, RenderState } from 'static/Enums'\r\nimport * as Constants from 'static/constants/Index'\r\nimport ChartSettings from '../ChartSettings'\r\n\r\nclass Renderer<T extends Data> extends Renderable {\r\n    dropdown: Dropdown | undefined\r\n\r\n    data: T\r\n\r\n    protected isDestroy: boolean = false\r\n\r\n    protected highlightItems: string[]\r\n\r\n    constructor(chart: Chart) {\r\n        super(chart)\r\n\r\n        this.highlightItems = []\r\n\r\n        this.state = this.settings.disableInitAnimation ? RenderState.Idle : RenderState.Init\r\n    }\r\n\r\n    render() {\r\n        super.render()\r\n\r\n        this.renderTitle()\r\n    }\r\n\r\n    destroy() {\r\n        this.isDestroy = true\r\n\r\n        this.canvas.remove()\r\n    }\r\n\r\n    renderDropdown() {\r\n        this.clickEvent = this.dropdown?.render(this.moveEvent, this.clickEvent)\r\n    }\r\n\r\n    resize() {\r\n        this.#calculateSizes()\r\n        this.tooltip.refresh()\r\n        this.dropdown?.resize()\r\n    }\r\n\r\n    prepareSettings() {\r\n        this.data = <T>this.settings.data\r\n\r\n        const domRect = this.node.parentElement!.getBoundingClientRect()\r\n\r\n        this.settings.minWidth = isNaN(+this.settings.width)\r\n                                 ? 0\r\n                                 : +this.settings.width\r\n        this.settings.minHeight = isNaN(+this.settings.height)\r\n                                  ? 0\r\n                                  : +this.settings.height\r\n\r\n        this.settings.width = this.settings.minWidth != 0 && domRect.width < this.settings.minWidth\r\n                              ? this.settings.minWidth\r\n                              : domRect.width\r\n\r\n        this.settings.height = this.settings.minHeight != 0 && domRect.height < this.settings.minHeight\r\n                               ? this.settings.minHeight\r\n                               : domRect.height\r\n\r\n        this.canvas.width = this.settings.width\r\n        this.canvas.height = this.settings.height\r\n\r\n        for (let item of this.settings.data.values) {\r\n            item.id = Helper.guid()\r\n            item.label ??= TextResources.noLabel\r\n        }\r\n\r\n        this.calculateColors()\r\n\r\n        for (let item of this.settings.contextMenu ?? [])\r\n            if (item.id != undefined)\r\n                item.action = data => this.node.dispatchEvent(new CustomEvent(item.id ?? '', { detail: data }))\r\n    }\r\n\r\n    calculateColors(force: boolean = false) {\r\n        const baseColor = Helper.adjustColor(this.settings.baseColor ?? Helper.randomColor(), -67),\r\n            adjustAmount = 134\r\n\r\n        let index = 0\r\n\r\n        for (let item of this.settings.data.values) {\r\n            if (item.color == undefined || force) {\r\n                let amount = Math.round(index / this.settings.data.values.length  * adjustAmount)\r\n\r\n                item.color = Helper.adjustColor(baseColor, amount)\r\n            }\r\n\r\n            index++\r\n        }\r\n    }\r\n\r\n    initDropdown() {\r\n    }\r\n\r\n    renderContextMenu(data: any) {\r\n        if (this.dropdown?.isActive) {\r\n            this.menuEvent = undefined\r\n\r\n            return false\r\n        }\r\n\r\n        if (this.menuEvent != undefined && this.settings.contextMenu?.length != 0) {\r\n            if (this.contextMenu == undefined && this.settings.contextMenu != undefined) {\r\n                let clone: DropdownItem[] = []\r\n\r\n                for (const item of this.settings.contextMenu)\r\n                    if (!item.condition || item.condition(data))\r\n                        clone.push({\r\n                            id: item.id,\r\n                            text: item.text,\r\n                            isDivider: item.isDivider,\r\n                            action: () => {\r\n                                item.action(data)\r\n\r\n                                this.menuEvent = undefined\r\n                                this.contextMenu = undefined\r\n                            }\r\n                        })\r\n\r\n                this.contextMenu = new Dropdown(this.canvas, {\r\n                    x: this.menuEvent.x - this.canvasPosition.x,\r\n                    y: this.menuEvent.y - this.canvasPosition.y,\r\n                    items: clone,\r\n                    data: data\r\n                })\r\n\r\n                this.contextMenu.resize()\r\n\r\n                this.clickEvent = undefined\r\n            }\r\n\r\n            const isClick = this.clickEvent != undefined\r\n\r\n            this.clickEvent = this.contextMenu?.render(this.moveEvent, this.clickEvent)\r\n\r\n            if (this.clickEvent == undefined && isClick) {\r\n                this.contextMenu = undefined\r\n                this.menuEvent = undefined\r\n\r\n                return true\r\n            }\r\n        }\r\n\r\n        return false\r\n    }\r\n\r\n    highlight(value?: Value) {\r\n        if (value)\r\n            this.highlightItems = [value.id]\r\n        else\r\n            this.highlightItems = []\r\n    }\r\n\r\n    closeDropdowns() {\r\n        this.dropdown?.close()\r\n        this.menuEvent = undefined\r\n    }\r\n\r\n    protected renderTitle() {\r\n        const ctx = Canvas.getContext(this.canvas)\r\n\r\n        if (this.settings.title) {\r\n            TextStyles.title(ctx)\r\n            ctx.fillText(this.settings.title, this.canvas.width / 2, Constants.Values.titleOffset)\r\n        }\r\n    }\r\n\r\n    #calculateSizes() {\r\n        let domRect = this.node.getBoundingClientRect()\r\n\r\n        this.settings.width = this.settings.minWidth && domRect.width < this.settings.minWidth\r\n                              ? this.settings.minWidth\r\n                              : domRect.width\r\n        this.settings.height = this.settings.minHeight && domRect.height < this.settings.minHeight\r\n                               ? this.settings.minHeight\r\n                               : domRect.height\r\n\r\n        this.canvas.width = this.settings.width\r\n        this.canvas.height = this.settings.height\r\n\r\n        if (this.settings.enableLegend) {\r\n            if (this.settings.legendPlace == undefined\r\n                || this.settings.legendPlace == LegendPlace.Top\r\n                || this.settings.legendPlace == LegendPlace.Bottom)\r\n                this.canvas.height -= Legend.getLegendHeight(this.settings.data.values, this.canvas.width)\r\n\r\n            if (this.settings.legendPlace == LegendPlace.Left\r\n                || this.settings.legendPlace == LegendPlace.Right)\r\n                this.canvas.width -= 500\r\n        }\r\n    }\r\n\r\n    protected getMousePosition(event: MouseEvent): Point {\r\n        return {\r\n            x: event.clientX - this.canvasPosition.x + scrollX,\r\n            y: event.clientY - this.canvasPosition.y + scrollY\r\n        }\r\n    }\r\n\r\n    applySettings(settings: ChartSettings) {\r\n        this.settings = settings\r\n    }\r\n}\r\n\r\nexport default Renderer","import Value from 'types/base/Value'\r\nimport TableValue from 'types/TableValue'\r\nimport TableData from 'types/TableData'\r\nimport Data from 'types/interfaces/Data'\r\n\r\nclass TreeData implements Data {\r\n    values: Value[]\r\n\r\n    padding: number\r\n\r\n    static getRows(data: TreeData): TableData {\r\n        const key = 'Value'\r\n\r\n        let values: TableValue[] = []\r\n\r\n        for (const value of data.values)\r\n            values.push({\r\n                name: value.label,\r\n                values: new Map([[key, value.value]])\r\n            })\r\n\r\n        return {\r\n            headers: [\r\n                {\r\n                    value: key,\r\n                    display: key\r\n                }\r\n            ],\r\n            values: values\r\n        }\r\n    }\r\n}\r\n\r\nexport default TreeData","import TableValue from 'types/TableValue'\r\nimport Sector from 'types/Sector'\r\nimport TableData from 'types/TableData'\r\nimport Data from 'types/interfaces/Data'\r\n\r\nclass CircularData implements Data {\r\n    values: Sector[]\r\n\r\n    innerRadius: number\r\n\r\n    innerTitle: string\r\n\r\n    static getRows(data: CircularData): TableData {\r\n        const key = 'Value'\r\n\r\n        let values: TableValue[] = []\r\n\r\n        for (const value of data.values)\r\n            values.push({\r\n                name: value.label,\r\n                values: new Map([[key, value.value]])\r\n            })\r\n\r\n        return {\r\n            headers: [\r\n                {\r\n                    value: key,\r\n                    display: key\r\n                }\r\n            ],\r\n            values: values\r\n        }\r\n    }\r\n}\r\n\r\nexport default CircularData","class Value {\r\n    id: string\r\n\r\n    baseColor: string\r\n\r\n    color: string\r\n\r\n    textColor: string\r\n\r\n    label: string\r\n\r\n    disabled: boolean\r\n\r\n    hideInLegend: boolean\r\n\r\n    data: { [key: string]: string }\r\n\r\n    value: number\r\n\r\n    toggle(transition: number) {\r\n        if (transition == 0)\r\n            this.disabled = !this.disabled\r\n    }\r\n\r\n    checkCondition(): boolean {\r\n        return false\r\n    }\r\n\r\n    reset() {\r\n        this.disabled = false\r\n    }\r\n}\r\n\r\nexport default Value","import PlotData from 'types/data/PlotData'\r\nimport Renderer from 'types/base/Renderer'\r\nimport * as Helper from 'Helper'\r\nimport DropdownItem from 'types/DropdownItem'\r\nimport PlotAxis from 'types/PlotAxis'\r\nimport Paddings from 'types/Paddings'\r\nimport Dropdown from 'Dropdown'\r\nimport HoverItem from 'types/HoverItem'\r\nimport PlotSeries from 'types/PlotSeries'\r\nimport Tooltip from 'Tooltip'\r\nimport Theme from 'Theme'\r\nimport Chart from 'Chart'\r\nimport TextStyles from 'helpers/TextStyles'\r\nimport TooltipValue from 'types/TooltipValue'\r\nimport Export from 'Export'\r\nimport Decomposition from 'Decomposition'\r\nimport Modal from 'Modal'\r\nimport TextResources from 'static/TextResources'\r\nimport Formatter from 'helpers/Formatter'\r\nimport Canvas from 'helpers/Canvas'\r\nimport { AnimationType, Icon, LineType, PlotAxisType, PlotType, RenderState } from 'static/Enums'\r\nimport * as Constants from 'static/constants/Index'\r\n\r\nclass PlotRenderer extends Renderer<PlotData> {\r\n    #x: PlotAxis\r\n\r\n    #y: PlotAxis\r\n\r\n    #paddings: Paddings\r\n\r\n    #tooltipX: number\r\n\r\n    #tooltipY: number\r\n\r\n    #labelsX: Map<number, string>\r\n\r\n    #labelsY: Map<number, string>\r\n\r\n    #allValuesX: any[]\r\n\r\n    #allValuesY: any[]\r\n\r\n    #base: ImageBitmap | undefined\r\n\r\n    #backLines: ImageData | undefined\r\n\r\n    #yAxisStep: number\r\n\r\n    #plot: DOMRect\r\n\r\n    #hoverX: HoverItem | undefined\r\n\r\n    constructor(chart: Chart) {\r\n        super(chart)\r\n    }\r\n\r\n    render() {\r\n        super.render()\r\n\r\n        let tooltipLines = [\r\n            new TooltipValue(this.#labelsX.get(Math.round(this.#tooltipX))\r\n                             ?? this.#labelsY.get(Math.round(this.#tooltipY)))\r\n        ]\r\n\r\n        const ctx = Canvas.getContext(this.canvas)\r\n\r\n        TextStyles.regular(ctx)\r\n        ctx.lineJoin = 'round'\r\n\r\n        const axisLineHoverColor = Theme.lineActive\r\n\r\n        this.#renderBackLines()\r\n        this.#renderBase(true)\r\n\r\n        let x = 0,\r\n            y = 0,\r\n            yValue = 0,\r\n            yHeight = 0,\r\n            columnWidth = 0\r\n\r\n        const seriesToRender = this.data.values.filter(s => !s.disabled)\r\n\r\n        let columnsIndex = 0,\r\n            columnsCount = seriesToRender.filter(s => s.type == PlotType.Column).length\r\n\r\n        let barsIndex = 0,\r\n            barsCount = seriesToRender.filter(s => s.type == PlotType.Bar).length\r\n\r\n        let stackingAccumulator = []\r\n        for (let i = 0; i < this.#allValuesY.length; i++)\r\n            stackingAccumulator.push(0)\r\n\r\n        for (const series of seriesToRender) {\r\n            ctx.beginPath()\r\n\r\n            ctx.strokeStyle = series.color\r\n            ctx.fillStyle = series.color\r\n            ctx.lineWidth = series.width\r\n            ctx.lineCap = 'round'\r\n\r\n            const anyHighlight = this.highlightItems.length != 0\r\n\r\n            if (!this.animations.contains(series.id, AnimationType.Init)) {\r\n                const changeColor = (transition: number, event: AnimationType) => {\r\n                    this.animations.reload(series.id, event)\r\n\r\n                    if (transition == 0)\r\n                        return\r\n\r\n                    let opacity = Math.round(255 - 127 * transition).toString(16)\r\n                    if (opacity.length < 2)\r\n                        opacity = 0 + opacity\r\n\r\n                    ctx.fillStyle = series.color + opacity\r\n                    ctx.strokeStyle = series.color + opacity\r\n                }\r\n\r\n                if (anyHighlight && !this.highlightItems.includes(series.id)) {\r\n                    this.animations.handle(\r\n                        series.id,\r\n                        AnimationType.AnotherItemOver,\r\n                        {\r\n                            duration: Constants.Animations.circular,\r\n                            body: transition => {\r\n                                changeColor(transition, AnimationType.AnotherItemLeave)\r\n                            }\r\n                        }\r\n                    )\r\n                } else if (!anyHighlight) {\r\n                    this.animations.handle(\r\n                        series.id,\r\n                        AnimationType.AnotherItemLeave,\r\n                        {\r\n                            timer: Constants.Dates.minDate,\r\n                            duration: Constants.Animations.circular,\r\n                            backward: true,\r\n                            body: transition => {\r\n                                changeColor(transition, AnimationType.AnotherItemOver)\r\n                            }\r\n                        }\r\n                    )\r\n                }\r\n            }\r\n\r\n            switch (series.lineType) {\r\n                case LineType.Dash:\r\n                    ctx.setLineDash([series.width * 3, series.width * 2])\r\n\r\n                    break\r\n\r\n                case LineType.Dotted:\r\n                    ctx.setLineDash([series.width, series.width])\r\n\r\n                    break\r\n\r\n                case LineType.Solid:\r\n                default:\r\n                    break\r\n            }\r\n\r\n            for (const value of series.values) {\r\n                let index = series.values.indexOf(value),\r\n                    xIndex = this.#allValuesX.indexOf(this.data.xType == PlotAxisType.Date ? value.x?.toString() : value.x),\r\n                    yIndex = this.#allValuesY.indexOf(value.y)\r\n\r\n                const getTooltipValue = () => {\r\n                    return {\r\n                        x: Formatter.format(value.x, this.data.xType),\r\n                        y: Formatter.format(value.y, this.data.xType, this.settings.valuePostfix)\r\n                    }\r\n                }\r\n\r\n                x = this.#paddings.left\r\n                if (series.type != PlotType.Bar)\r\n                    x += xIndex * this.#x.step\r\n                if (series.type == PlotType.Line)\r\n                    x -= this.#x.step / 2 - this.#x.step\r\n\r\n                switch (series.type) {\r\n                    case PlotType.Line:\r\n                        y = this.#paddings.top + this.#plot.height - <number>value.y / this.#y.unit * this.#y.step\r\n                            - Math.abs(this.#y.min / this.#y.unit * this.#y.step)\r\n\r\n                        const pointDuration = 1500 / series.values.length * 1.2\r\n\r\n                        if (this.state == RenderState.Init || this.animations.contains(value.id, AnimationType.Init)) {\r\n                            this.animations.handle(value.id,\r\n                                AnimationType.Init,\r\n                                {\r\n                                    timer: new Date(Date.now()).addMilliseconds(pointDuration * (index - 1)),\r\n                                    duration: pointDuration,\r\n                                    continuous: true,\r\n                                    body: transition => {\r\n                                        if (index == 0)\r\n                                            return\r\n\r\n                                        x = this.#paddings.left + xIndex * this.#x.step - this.#x.step / 2\r\n                                        y = this.#paddings.top + this.#plot.height - <number>value.y / this.#y.unit * this.#y.step\r\n                                            - Math.abs(this.#y.min / this.#y.unit * this.#y.step)\r\n\r\n                                        const next = series.values[index - 1]\r\n\r\n                                        let prevValue = {\r\n                                            x: this.#paddings.left + xIndex * this.#x.step - this.#x.step / 2,\r\n                                            y: this.#paddings.top + this.#plot.height - <number>next.y / this.#y.unit * this.#y.step\r\n                                               - Math.abs(this.#y.min / this.#y.unit * this.#y.step)\r\n                                        }\r\n\r\n                                        const endPointX = prevValue.x + (this.#x.step + (x - prevValue.x)) * transition,\r\n                                            endPointY = prevValue.y + (y - prevValue.y) * transition\r\n\r\n                                        if (prevValue.x != endPointX && prevValue.y != endPointY) {\r\n                                            ctx.moveTo(prevValue.x, prevValue.y)\r\n                                            ctx.lineTo(endPointX, endPointY)\r\n                                        }\r\n                                    }\r\n                                })\r\n                        } else {\r\n                            ctx.lineTo(x, y)\r\n\r\n                            if (this.#isOnX(x)) {\r\n                                const mouse = this.getMousePosition(this.moveEvent)\r\n\r\n                                if (Math.abs(mouse.y - y) < 5) {\r\n                                    this.#hoverX = {\r\n                                        x: x,\r\n                                        y: y,\r\n                                        index: index,\r\n                                        data: value.data,\r\n                                        series: series\r\n                                    }\r\n\r\n                                    tooltipLines.push(new TooltipValue(`${ series.label }: ${ getTooltipValue().y }`, series.color))\r\n                                    this.#tooltipX = x - this.#x.step / 2\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        break\r\n\r\n                    case PlotType.AttentionLine:\r\n                        yValue = this.canvas.height - this.#paddings.bottom - <number>value.y / this.#y.unit * this.#y.step\r\n\r\n                        ctx.moveTo(this.#paddings.left, yValue)\r\n\r\n                        if (this.state == RenderState.Init || this.animations.contains(value.id, AnimationType.Init))\r\n                            this.animations.handle(value.id,\r\n                                AnimationType.Init,\r\n                                {\r\n                                    duration: 1500,\r\n                                    continuous: true,\r\n                                    body: transition => {\r\n                                        ctx.lineTo(this.#paddings.left + (this.canvas.width - this.#paddings.left - this.#paddings.right) * transition,\r\n                                            this.canvas.height - this.#paddings.bottom - <number>value.y / this.#y.unit * this.#y.step)\r\n                                    }\r\n                                })\r\n                        else\r\n                            ctx.lineTo(this.canvas.width - this.#paddings.right, yValue)\r\n\r\n                        break\r\n\r\n                    case PlotType.Column:\r\n                        yValue = <number>value.y > this.data.yMax ? this.data.yMax : <number>value.y\r\n\r\n                        y = this.#plot.height * yValue / this.#y.max\r\n                        if (y < this.#y.minStep)\r\n                            y = this.#y.minStep\r\n\r\n                        columnWidth = this.#x.step * (series.width ? series.width / 100 : .5) / columnsCount\r\n\r\n                        ctx.beginPath()\r\n\r\n                        if (this.state == RenderState.Init || this.animations.contains(value.id + columnsIndex, AnimationType.Init)) {\r\n                            this.animations.handle(value.id + columnsIndex,\r\n                                AnimationType.Init,\r\n                                {\r\n                                    duration: 800,\r\n                                    continuous: true,\r\n                                    body: transition => {\r\n                                        yValue = <number>value.y > this.data.yMax ? this.data.yMax : <number>value.y\r\n\r\n                                        x = this.#paddings.left + xIndex * this.#x.step\r\n                                        y = this.#plot.height * yValue / this.#y.max * transition\r\n\r\n                                        if (y < this.#y.minStep)\r\n                                            y = this.#y.minStep * transition\r\n\r\n                                        columnsIndex = this.data.values.filter(s => s.type == PlotType.Column)\r\n                                                           .indexOf(series)\r\n\r\n                                        ctx.roundRect(x + columnsIndex * columnWidth + (this.#x.step - columnsCount * columnWidth) / 2,\r\n                                            this.canvas.height - this.#paddings.bottom - y,\r\n                                            columnWidth,\r\n                                            y,\r\n                                            [6, 6, 0, 0])\r\n                                        ctx.fill()\r\n                                    }\r\n                                })\r\n                        } else {\r\n                            if (this.#isInArea(x + columnsIndex * columnWidth + (this.#x.step - columnsCount * columnWidth) / 2,\r\n                                    this.canvas.height - this.#paddings.bottom - y,\r\n                                    columnWidth,\r\n                                    y)\r\n                                && (this.contextMenu?.isActive == undefined\r\n                                    || this.contextMenu?.isActive == false)) {\r\n                                this.#hoverX = {\r\n                                    x: x,\r\n                                    y: y,\r\n                                    index: index,\r\n                                    data: value.data,\r\n                                    series: series\r\n                                }\r\n\r\n                                tooltipLines.push(new TooltipValue(`${ series.label }: ${ getTooltipValue().y }`, series.color))\r\n                                this.#tooltipX = x\r\n                            }\r\n\r\n                            ctx.roundRect(x + columnsIndex * columnWidth + (this.#x.step - columnsCount * columnWidth) / 2,\r\n                                this.canvas.height - this.#paddings.bottom - y,\r\n                                columnWidth,\r\n                                y,\r\n                                [6, 6, 0, 0])\r\n                            ctx.fill()\r\n                        }\r\n\r\n                        break\r\n\r\n                    case PlotType.Bar:\r\n                        y = this.#paddings.top + yIndex * this.#y.step + this.#y.step / 2\r\n                            + (100 - series.width) * this.#y.step / 100 / 2\r\n\r\n                        const seriesHeight = (series.width * this.#y.step / 100) / barsCount\r\n\r\n                        if (this.state == RenderState.Init || this.animations.contains(value.id + barsIndex, AnimationType.Init)) {\r\n                            this.animations.handle(value.id + barsIndex,\r\n                                AnimationType.Init,\r\n                                {\r\n                                    duration: 800,\r\n                                    continuous: true,\r\n                                    body: transition => {\r\n                                        y = this.#paddings.top + yIndex * this.#y.step + this.#y.step / 2\r\n                                            + (100 - series.width) * this.#y.step / 100 / 2\r\n\r\n                                        barsIndex = this.data.values.filter(s => s.type == PlotType.Bar)\r\n                                                        .indexOf(series)\r\n\r\n                                        ctx.fillRect(x,\r\n                                            y - this.#y.step / 2 + barsIndex * seriesHeight,\r\n                                            <number>value.x / this.#x.unit * this.#x.step * transition,\r\n                                            seriesHeight)\r\n                                    }\r\n                                })\r\n                        } else {\r\n                            if (!anyHighlight) {\r\n                                if (this.#isInArea(x,\r\n                                    y - this.#y.step / 2 + barsIndex * seriesHeight,\r\n                                    <number>value.x / this.#x.unit * this.#x.step,\r\n                                    seriesHeight)) {\r\n                                    this.#hoverX = {\r\n                                        x: x,\r\n                                        y: y,\r\n                                        index: index,\r\n                                        data: value.data,\r\n                                        series: series\r\n                                    }\r\n\r\n                                    ctx.fillStyle += '88'\r\n\r\n                                    tooltipLines.push(new TooltipValue(`${ series.label }: ${ getTooltipValue().x }`, series.color))\r\n                                    this.#tooltipY = y - this.#y.step / 2\r\n                                } else {\r\n                                    ctx.fillStyle = series.color\r\n                                }\r\n                            }\r\n\r\n                            ctx.fillRect(x,\r\n                                y - this.#y.step / 2 + barsIndex * seriesHeight,\r\n                                <number>value.x / this.#x.unit * this.#x.step,\r\n                                seriesHeight)\r\n                        }\r\n\r\n                        break\r\n\r\n                    case PlotType.StackingColumn:\r\n                        y = this.canvas.height - this.#paddings.bottom - <number>value.y / this.#y.unit * this.#y.step\r\n\r\n                        columnWidth = this.#x.step * (series.width ? series.width / 100 : .5)\r\n\r\n                        if (this.state == RenderState.Init || this.animations.contains(value.id + index, AnimationType.Init)) {\r\n                            this.animations.handle(value.id + index,\r\n                                AnimationType.Init,\r\n                                {\r\n                                    duration: 800,\r\n                                    continuous: true,\r\n                                    body: transition => {\r\n                                        columnsIndex = this.data.values.filter(s => s.type == PlotType.StackingColumn\r\n                                                                                    && s.values.filter(v => this.data.xType == PlotAxisType.Date\r\n                                                                                                            ? (v.x as Date).getTime() == (value.x as Date).getTime()\r\n                                                                                                            : v.x == value.x)\r\n                                                                                        .length > 0)\r\n                                                           .indexOf(series)\r\n\r\n                                        x = this.#paddings.left + xIndex * this.#x.step\r\n                                        y = this.canvas.height - this.#paddings.bottom - <number>value.y / this.#y.unit * this.#y.step\r\n\r\n                                        if (columnsIndex == 0)\r\n                                            stackingAccumulator[xIndex] = 0\r\n\r\n                                        let offset = stackingAccumulator[xIndex] != undefined\r\n                                                     ? stackingAccumulator[xIndex]\r\n                                                     : 0\r\n\r\n                                        yValue = this.canvas.height - this.#paddings.bottom + offset\r\n                                        yHeight = (y - this.canvas.height + this.#paddings.bottom) * transition\r\n\r\n                                        if (yValue > this.#paddings.top) {\r\n                                            if (yValue + yHeight < this.#paddings.top)\r\n                                                yHeight -= yValue + yHeight - this.#paddings.top\r\n\r\n                                            ctx.fillRect(x + (this.#x.step - columnWidth) / 2,\r\n                                                yValue,\r\n                                                columnWidth,\r\n                                                yHeight)\r\n                                        }\r\n\r\n                                        stackingAccumulator[xIndex] += (y - this.canvas.height + this.#paddings.bottom) * transition\r\n                                    }\r\n                                })\r\n                        } else {\r\n                            if (columnsIndex == 0)\r\n                                stackingAccumulator[xIndex] = 0\r\n\r\n                            let offset = stackingAccumulator[xIndex] != undefined\r\n                                         ? stackingAccumulator[xIndex]\r\n                                         : 0\r\n\r\n                            yValue = this.canvas.height - this.#paddings.bottom + offset\r\n                            yHeight = y - this.canvas.height + this.#paddings.bottom\r\n\r\n                            if (yValue > this.#paddings.top) {\r\n                                if (yValue + yHeight < this.#paddings.top)\r\n                                    yHeight -= yValue + yHeight - this.#paddings.top\r\n\r\n                                if (this.#isInArea(x + (this.#x.step - columnWidth) / 2,\r\n                                    yValue + yHeight,\r\n                                    columnWidth,\r\n                                    Math.abs(yHeight))) {\r\n                                    this.#hoverX = {\r\n                                        x: x,\r\n                                        y: y,\r\n                                        index: xIndex,\r\n                                        data: value.data,\r\n                                        series: series\r\n                                    }\r\n\r\n                                    tooltipLines.push(new TooltipValue(`${ series.label }: ${ getTooltipValue().y }`, series.color))\r\n                                    this.#tooltipX = x\r\n                                }\r\n\r\n                                ctx.fillRect(x + (this.#x.step - columnWidth) / 2,\r\n                                    yValue,\r\n                                    columnWidth,\r\n                                    yHeight)\r\n                            }\r\n\r\n                            stackingAccumulator[xIndex] += (y - this.canvas.height + this.#paddings.bottom)\r\n                        }\r\n\r\n                        break\r\n                }\r\n            }\r\n\r\n            ctx.setLineDash([])\r\n\r\n            switch (series.type) {\r\n                case PlotType.Line:\r\n                    ctx.stroke()\r\n\r\n                    if (this.#hoverX && this.#hoverX.series == series) {\r\n                        ctx.beginPath()\r\n                        ctx.lineWidth = 1\r\n                        ctx.strokeStyle = axisLineHoverColor\r\n                        ctx.moveTo(this.#paddings.left, this.#hoverX.y)\r\n                        ctx.lineTo(this.canvas.width - this.#paddings.right, this.#hoverX.y)\r\n                        ctx.stroke()\r\n\r\n                        let radius = Math.round(series.width * 1.1)\r\n                        if (radius < 5)\r\n                            radius = 5\r\n\r\n                        ctx.beginPath()\r\n                        ctx.arc(this.#hoverX.x, this.#hoverX.y, radius, 0, 2 * Math.PI)\r\n                        ctx.fill()\r\n                        ctx.lineWidth = Math.ceil(radius / 2)\r\n                        ctx.strokeStyle = Helper.adjustColor(series.color, 50)\r\n                        ctx.stroke()\r\n                    }\r\n\r\n                    break\r\n\r\n                case PlotType.AttentionLine:\r\n                    ctx.stroke()\r\n\r\n                    TextStyles.regular(ctx)\r\n                    ctx.fillText(series.label,\r\n                        this.#paddings.left + (this.canvas.width - this.#paddings.left - this.#paddings.right) / 2,\r\n                        this.canvas.height - this.#paddings.bottom - <number>series.values[0].y / this.#y.unit * this.#y.step + 16)\r\n\r\n                    break\r\n\r\n                case PlotType.Column:\r\n                case PlotType.StackingColumn:\r\n                    if (this.#hoverX)\r\n                        this.highlight(this.#hoverX.series)\r\n\r\n                    columnsIndex++\r\n\r\n                    break\r\n\r\n                case PlotType.Bar:\r\n                    if (this.#hoverX) {\r\n                        ctx.lineWidth = 1\r\n                        ctx.strokeStyle = axisLineHoverColor\r\n                        ctx.moveTo(this.#paddings.left,\r\n                            this.#tooltipY + this.#y.step / 2)\r\n                        ctx.lineTo(this.canvas.width - this.#paddings.right,\r\n                            this.#tooltipY + this.#y.step / 2)\r\n                        ctx.stroke()\r\n                    }\r\n\r\n                    barsIndex++\r\n\r\n                    break\r\n            }\r\n        }\r\n\r\n        this.#renderBase()\r\n\r\n        this.renderTitle()\r\n\r\n        this.tooltip.render(\r\n            tooltipLines.length > 1 && !this.dropdown?.isActive,\r\n            this.moveEvent,\r\n            tooltipLines,\r\n            this.#hoverX\r\n                ? this.#hoverX.series!.values[this.#hoverX.index]\r\n                : undefined\r\n        )\r\n\r\n        if (!this.isDestroy)\r\n            requestAnimationFrame(this.render.bind(this))\r\n\r\n        this.state = RenderState.Idle\r\n\r\n        super.renderDropdown()\r\n\r\n        if (this.menuEvent && !this.#hoverX)\r\n            this.menuEvent = undefined\r\n\r\n        if (this.#hoverX == undefined)\r\n            this.highlight()\r\n\r\n        if (this.#hoverX\r\n            && (this.renderContextMenu(this.#hoverX.data)\r\n                || !this.menuEvent))\r\n            this.#hoverX = undefined\r\n    }\r\n\r\n    refresh() {\r\n        super.refresh()\r\n    }\r\n\r\n    resize() {\r\n        super.resize()\r\n\r\n        this.#base = undefined\r\n\r\n        this.#calculateSizes()\r\n    }\r\n\r\n    #isOnX(x: number): boolean {\r\n        if (!this.moveEvent)\r\n            return false\r\n\r\n        const mouse = this.getMousePosition(this.moveEvent)\r\n\r\n        return !(this.dropdown?.isActive ?? false)\r\n               && x - this.#x.step / 2 <= mouse.x && mouse.x < x + this.#x.step / 2\r\n               && this.#paddings.top <= mouse.y && mouse.y <= this.canvas.height - this.#paddings.bottom\r\n               && this.#paddings.left < mouse.x\r\n    }\r\n\r\n    #isInArea(x: number, y: number, w: number, h: number): boolean {\r\n        if (!this.moveEvent)\r\n            return false\r\n\r\n        const mouse = this.getMousePosition(this.moveEvent)\r\n\r\n        return !(this.dropdown?.isActive ?? false)\r\n               && mouse.x >= x && mouse.x <= x + w\r\n               && mouse.y >= y && mouse.y <= y + h\r\n    }\r\n\r\n    #renderBase(skip: boolean = false) {\r\n        if (this.#base && skip)\r\n            return\r\n\r\n        if (this.data.simple)\r\n            return\r\n\r\n        const ctx = Canvas.getContext(this.canvas)\r\n\r\n        if (skip)\r\n            ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)\r\n\r\n        if (this.#base) {\r\n            ctx.drawImage(this.#base, 0, 0)\r\n            return\r\n        }\r\n\r\n        if (!skip)\r\n            return\r\n\r\n        const axisLabelOffset = 12\r\n\r\n        ctx.fillStyle = Theme.canvasBackground\r\n\r\n        ctx.fillRect(0, 0, this.#paddings.left, this.canvas.height)\r\n        ctx.fillRect(0, 0, this.canvas.width, this.#paddings.top)\r\n        ctx.fillRect(this.canvas.width - this.#paddings.right, 0, this.canvas.width, this.canvas.height)\r\n        ctx.fillRect(0, this.canvas.height - this.#paddings.bottom, this.canvas.width, this.canvas.height)\r\n\r\n        const isContainsBar = this.data.values.filter(s => s.type == PlotType.Bar).length > 0\r\n\r\n        ctx.setLineDash([])\r\n\r\n        if (this.data.xTitle || this.data.yTitle) {\r\n            ctx.textAlign = 'center'\r\n            ctx.textBaseline = 'bottom'\r\n            ctx.fillStyle = Theme.text\r\n\r\n            if (this.data.xTitle)\r\n                ctx.fillText(this.data.xTitle,\r\n                    this.#paddings.left + (this.canvas.width - this.#paddings.left - this.#paddings.right) / 2,\r\n                    this.canvas.height - 4)\r\n\r\n            if (this.data.yTitle) {\r\n                ctx.rotate(-Math.PI / 2)\r\n\r\n                ctx.textBaseline = 'top'\r\n\r\n                ctx.fillText(this.data.yTitle,\r\n                    -(this.#paddings.top + (this.canvas.height - this.#paddings.top - this.#paddings.bottom) / 2),\r\n                    8)\r\n\r\n                ctx.resetTransform()\r\n            }\r\n        }\r\n\r\n        ctx.textAlign = 'center'\r\n        ctx.textBaseline = 'top'\r\n\r\n        const step = this.#x.step,\r\n            xYPos = this.canvas.height - this.#paddings.bottom\r\n\r\n        let xCounter = 0,\r\n            acc = this.#paddings.left + step / 2\r\n\r\n        for (let i = 0; i < this.#allValuesX.length + 1; i++)\r\n            this.#labelsX.trySet(\r\n                Math.round(this.#paddings.left + i * this.#x.step),\r\n                Formatter.format(this.#allValuesX[i], this.data.xType)\r\n            )\r\n\r\n        const maxLabelWidth = Math.max(\r\n            ...[...this.#labelsX.values()].map(label => Math.ceil(Helper.stringWidth(label)))\r\n        ) + 10\r\n        const maxCount = Math.floor(\r\n            (this.canvas.width - this.#paddings.left - this.#paddings.right) / maxLabelWidth\r\n        )\r\n        const renderStep = Math.ceil(1 / (maxCount / this.#allValuesX.length))\r\n\r\n        while (acc < this.canvas.width - this.#paddings.right) {\r\n            if (xCounter % renderStep == 0) {\r\n                ctx.fillStyle = Theme.text + 'b7'\r\n\r\n                ctx.fillText(\r\n                    (this.#labelsX.get(Math.round(acc - this.#x.step / 2)) ?? '')\r\n                        + (!isContainsBar ? '' : this.settings.valuePostfix),\r\n                    acc,\r\n                    xYPos + axisLabelOffset / 2\r\n                )\r\n            }\r\n\r\n            acc += step\r\n            xCounter++\r\n        }\r\n\r\n        ctx.textAlign = 'right'\r\n        ctx.textBaseline = 'middle'\r\n\r\n        const yCount = this.#y.count > 10 ? 10 : this.#y.count\r\n\r\n        let yCounter = isContainsBar ? 1 : 0,\r\n            yStep = this.#allValuesY.length / yCount\r\n\r\n        for (let i = isContainsBar ? 1 : 0; i < this.#allValuesY.length + 1; i++) {\r\n            const labelY = this.canvas.height - yCounter * yStep * this.#y.step - this.#paddings.bottom,\r\n                labelYAsKey = Math.round(this.canvas.height - i * this.#y.step - this.#paddings.bottom)\r\n\r\n            if (!this.#labelsY.get(labelYAsKey))\r\n                this.#labelsY.set(labelYAsKey,\r\n                    Formatter.format(\r\n                        this.#y.min + (i + (isContainsBar ? -1 : 0)) * (this.#y.max - this.#y.min) / this.#y.count,\r\n                        PlotAxisType.Number,\r\n                        this.settings.valuePostfix\r\n                    ))\r\n\r\n            if (i >= yCounter * yStep) {\r\n                const label = {\r\n                    x: this.#paddings.left,\r\n                    y: labelY,\r\n                    label: this.#yAxisStep >= 1\r\n                           ? Math.round((this.#y.min + (yCounter * yStep + (isContainsBar ? -1 : 0)) * (this.#y.max - this.#y.min) / this.#y.count) / this.#yAxisStep) * this.#yAxisStep\r\n                           : Math.round(this.#y.min + (yCounter * yStep + (isContainsBar ? -1 : 0)) * (this.#y.max - this.#y.min) / this.#y.count / this.#yAxisStep) * this.#yAxisStep\r\n                }\r\n\r\n                if (label.label == -0)\r\n                    label.label = 0\r\n\r\n                let postfix = ''\r\n\r\n                if (this.data.shortLabels) {\r\n                    const countOfTens = Math.floor(label.label.toString().length / 4)\r\n\r\n                    if (countOfTens > 0) {\r\n                        label.label /= Math.pow(1000, countOfTens)\r\n\r\n                        postfix = [\r\n                            TextResources.thousandShort,\r\n                            TextResources.millionShort,\r\n                            TextResources.billionShort\r\n                        ][countOfTens - 1]\r\n                    }\r\n                }\r\n\r\n                ctx.fillText(\r\n                    Formatter.number(label.label)\r\n                        + postfix\r\n                        + (isContainsBar ? '' : this.settings.valuePostfix ?? ''),\r\n                    label.x - axisLabelOffset,\r\n                    label.y + (isContainsBar ? this.#y.step / 2 : 0)\r\n                )\r\n\r\n                yCounter++\r\n            }\r\n        }\r\n\r\n        ctx.beginPath()\r\n\r\n        ctx.strokeStyle = Theme.line\r\n        ctx.lineWidth = 1\r\n\r\n        const offset = .5,\r\n            isBar = this.data.values.filter(v => v.type == PlotType.Bar).length > 0\r\n\r\n        ctx.moveTo(this.#paddings.left - (isBar ? offset : 0),\r\n            this.canvas.height - this.#paddings.bottom + (isBar ? -offset : offset))\r\n\r\n        if (isBar)\r\n            ctx.lineTo(this.#paddings.left - offset, this.#paddings.top)\r\n        else\r\n            ctx.lineTo(this.canvas.width - this.#paddings.right, this.canvas.height - this.#paddings.bottom + offset)\r\n\r\n        ctx.stroke()\r\n\r\n        if (this.canvas.width > 0 && this.canvas.height > 0)\r\n            createImageBitmap(ctx.getImageData(0, 0, this.canvas.width, this.canvas.height))\r\n                .then(res => this.#base = res)\r\n    }\r\n\r\n    #renderBackLines() {\r\n        if (this.data.simple)\r\n            return\r\n\r\n        const ctx = Canvas.getContext(this.canvas)\r\n\r\n        if (this.#backLines) {\r\n            ctx.putImageData(this.#backLines, 0, 0)\r\n            return\r\n        }\r\n\r\n        ctx.fillStyle = Theme.canvasBackground\r\n        ctx.fillRect(0, 0, this.canvas.width, this.canvas.height)\r\n\r\n        const axisLineColor = Theme.lineAxis\r\n\r\n        const isContainsBar = this.data.values.filter(s => s.type == PlotType.Bar).length > 0\r\n\r\n        if (isContainsBar) {\r\n            const step = this.#x.step,\r\n                xYPos = this.canvas.height - this.#paddings.bottom\r\n\r\n            let xCounter = 0,\r\n                acc = this.#paddings.left + step / 2\r\n\r\n            for (let i = 0; i < this.#allValuesX.length + 1; i++)\r\n                this.#labelsX.trySet(\r\n                    Math.round(this.#paddings.left + i * this.#x.step),\r\n                    Formatter.format(this.#allValuesX[i - 1], this.data.xType)\r\n                )\r\n\r\n            const maxLabelWidth = Math.max(\r\n                ...[...this.#labelsX.values()].map(label => Math.ceil(Helper.stringWidth(label)))\r\n            ) + 10\r\n            const maxCount = Math.floor(\r\n                (this.canvas.width - this.#paddings.left - this.#paddings.right) / maxLabelWidth\r\n            )\r\n            const renderStep = Math.ceil(1 / (maxCount / this.#allValuesX.length))\r\n\r\n            while (acc < this.canvas.width - this.#paddings.right) {\r\n                if (xCounter % renderStep == 0) {\r\n                    ctx.beginPath()\r\n\r\n                    ctx.moveTo(acc, xYPos)\r\n                    ctx.lineTo(acc, this.#paddings.top)\r\n\r\n                    ctx.lineWidth = 1\r\n                    ctx.strokeStyle = axisLineColor\r\n                    ctx.setLineDash([6, 6])\r\n                    ctx.stroke()\r\n                }\r\n\r\n                acc += step\r\n                xCounter++\r\n            }\r\n        }\r\n\r\n        ctx.textAlign = 'right'\r\n        ctx.textBaseline = 'middle'\r\n\r\n        const yCount = this.#y.count > 10 ? 10 : this.#y.count\r\n\r\n        let yCounter = isContainsBar ? 1 : 0,\r\n            yStep = this.#allValuesY.length / yCount\r\n\r\n        for (let i = isContainsBar ? 1 : 0; i < this.#allValuesY.length + 1; i++) {\r\n            const labelY = this.canvas.height - yCounter * yStep * this.#y.step - this.#paddings.bottom\r\n\r\n            if (i >= yCounter * yStep) {\r\n                const label = {\r\n                    x: this.#paddings.left,\r\n                    y: labelY\r\n                }\r\n\r\n                if (this.data.values.filter(s => s.type.isAnyEquals(PlotType.Column, PlotType.StackingColumn, PlotType.Line)).length > 0) {\r\n                    ctx.beginPath()\r\n\r\n                    ctx.moveTo(label.x, label.y)\r\n                    ctx.lineTo(this.canvas.width - this.#paddings.right, label.y)\r\n\r\n                    ctx.lineWidth = 1\r\n                    ctx.strokeStyle = axisLineColor\r\n                    ctx.setLineDash([6, 6])\r\n                    ctx.stroke()\r\n                }\r\n\r\n                yCounter++\r\n            }\r\n        }\r\n\r\n        if (this.canvas.width > 0 && this.canvas.height > 0)\r\n            this.#backLines = ctx.getImageData(0, 0, this.canvas.width, this.canvas.height)\r\n    }\r\n\r\n    #calculateSizes() {\r\n        let xValues = this.data.values.flatMap(s => s.values.map(p => p.x)),\r\n            yValues = this.data.values.flatMap(s => s.values.map(p => p.y))\r\n\r\n        const isDate = this.data.xType == PlotAxisType.Date\r\n\r\n        if (isDate) {\r\n            let tempDate = new Date(Math.min(...(<number[]>xValues)))\r\n\r\n            while (tempDate.getTime() < Math.max(...(<number[]>xValues))) {\r\n                if (!xValues.includes(tempDate.getTime()))\r\n                    xValues.push(new Date(tempDate.getTime()))\r\n\r\n                tempDate = tempDate.addDays(1)\r\n            }\r\n\r\n            xValues.sort((a, b) => a < b ? -1 : 1)\r\n        }\r\n\r\n        yValues.sort((a, b) => b > a ? -1 : 1)\r\n\r\n        this.#allValuesX = [...new Set(xValues.filter(x => x != undefined).map(x => isDate ? x.toString() : x))]\r\n        this.#allValuesY = [...new Set(yValues.filter(y => y != undefined))]\r\n\r\n        this.#x = {\r\n            min: Math.min(...(<number[]>xValues)),\r\n            max: Math.max(...(<number[]>xValues)),\r\n            unit: (Math.abs(Math.min(...(<number[]>xValues))) + Math.abs(Math.max(...(<number[]>xValues)))) / (this.#allValuesX.length - 1),\r\n            step: (this.canvas.width - this.#paddings.left - this.#paddings.right) / this.#allValuesX.length,\r\n            minStep: 0,\r\n            count: this.#allValuesX.length\r\n        }\r\n\r\n        let yMin = Math.min(...(<number[]>yValues))\r\n        if (yMin > 0)\r\n            yMin = 0\r\n\r\n        this.#y = {\r\n            min: yMin,\r\n            max: this.data.yMax ?? Math.max(...(<number[]>yValues)),\r\n            unit: (Math.abs(yMin) + Math.abs(this.data.yMax ?? Math.max(...(<number[]>yValues)))) / (this.#allValuesY.length - 1),\r\n            step: (this.canvas.height - this.#paddings.top - this.#paddings.bottom) / this.#allValuesY.length,\r\n            minStep: 0,\r\n            count: this.#allValuesY.length\r\n        }\r\n\r\n        let stackingColumns = this.data.values.filter(s => s.type == PlotType.StackingColumn)\r\n\r\n        let max\r\n\r\n        if (stackingColumns.length > 0) {\r\n            let values = stackingColumns.map(s => s.values.flatMap(v => +v.y))\r\n\r\n            max = this.#y.max\r\n\r\n            for (let i = 0; i < values[0].length; i++) {\r\n                let sum = 0\r\n\r\n                for (const v of values)\r\n                    sum += v[i]\r\n\r\n                if (sum > max)\r\n                    max = sum\r\n            }\r\n\r\n            this.#y.max = max > this.data.yMax ? this.data.yMax : max\r\n            this.#y.unit = (Math.abs(this.#y.min) + Math.abs(this.#y.max)) / (this.#allValuesY.length - 1)\r\n        }\r\n\r\n        const yMaxWidth = Helper.stringWidth(Formatter.number(this.#y.max))\r\n        if (yMaxWidth > this.#paddings.left - 40 && !this.data.simple) {\r\n            this.#paddings.left += yMaxWidth - this.#paddings.left + 40\r\n            this.#x.step = (this.canvas.width - this.#paddings.left - this.#paddings.right) / this.#allValuesX.length\r\n        }\r\n\r\n        this.#yAxisStep = Math.abs(this.#y.min) + Math.abs(this.#y.max)\r\n\r\n        if (.5 <= this.#yAxisStep && this.#yAxisStep < 1)\r\n            this.#yAxisStep = .05\r\n        else if (1 <= this.#yAxisStep && this.#yAxisStep < 10)\r\n            this.#yAxisStep = .1\r\n        else if (10 <= this.#yAxisStep && this.#yAxisStep < 100)\r\n            this.#yAxisStep = 2\r\n        else if (100 <= this.#yAxisStep && this.#yAxisStep < 1000)\r\n            this.#yAxisStep = 20\r\n        else if (1000 <= this.#yAxisStep && this.#yAxisStep < 10000)\r\n            this.#yAxisStep = 50\r\n        else if (10000 <= this.#yAxisStep && this.#yAxisStep < 100000)\r\n            this.#yAxisStep = 1000\r\n        else if (100000 <= this.#yAxisStep && this.#yAxisStep < 1000000)\r\n            this.#yAxisStep = 10000\r\n        else if (1000000 <= this.#yAxisStep && this.#yAxisStep < 10000000)\r\n            this.#yAxisStep = 50000\r\n        else\r\n            this.#yAxisStep = 1\r\n\r\n        if (this.#yAxisStep != 1) {\r\n            max = yValues.length > 10\r\n                  ? (this.#y.max / 10 + this.#yAxisStep - (this.#y.max / 10) % this.#yAxisStep) * 10\r\n                  : Math.ceil(this.#y.max / this.#yAxisStep) * this.#yAxisStep\r\n\r\n            this.#y.max = max > this.data.yMax ? this.data.yMax : max\r\n            this.#y.unit = (Math.abs(this.#y.min) + Math.abs(this.#y.max)) / this.#allValuesY.length\r\n        }\r\n\r\n        this.#plot = {\r\n            width: this.canvas.width - this.#paddings.left - this.#paddings.right,\r\n            height: this.canvas.height - this.#paddings.top - this.#paddings.bottom\r\n        } as DOMRect\r\n\r\n        this.#x.minStep = this.#plot.width * 0.002\r\n        this.#y.minStep = this.#plot.height * 0.002\r\n    }\r\n\r\n    prepareSettings() {\r\n        super.prepareSettings()\r\n\r\n        this.#base = undefined\r\n        this.#backLines = undefined\r\n\r\n        this.data.values = this.data.values.map(v => new PlotSeries(v))\r\n\r\n        if (this.data.values.filter(v => v.type == PlotType.Bar).length > 0) {\r\n            for (let series of this.data.values) {\r\n                for (let item of series.values) {\r\n                    const x = item.x\r\n                    item['x'] = item.y\r\n                    item['y'] = x\r\n                }\r\n\r\n                series.values.sort((a, b) => b.x > a.x ? 1 : -1)\r\n            }\r\n        }\r\n\r\n        for (let item of this.data.values) {\r\n            item.disabled = !item.values\r\n            item.type ??= PlotType.Line\r\n\r\n            for (let it of item.values) {\r\n                it.id = Helper.guid()\r\n\r\n                if (this.data.xType == PlotAxisType.Date) {\r\n                    if (Helper.isISOString(it.x as string))\r\n                        it.x = new Date(it.x)\r\n                    else\r\n                        console.warn(`${ it.x } is not a date in ISO format.`)\r\n                }\r\n            }\r\n        }\r\n\r\n        this.#paddings = {\r\n            top: 30,\r\n            right: 40,\r\n            bottom: 50,\r\n            left: 80\r\n        }\r\n\r\n        if (this.data.simple)\r\n            this.#paddings = {\r\n                top: 10,\r\n                right: 10,\r\n                bottom: 10,\r\n                left: 10\r\n            }\r\n\r\n        if (this.settings.title)\r\n            this.#paddings.top += Constants.Values.titleOffset\r\n\r\n        this.tooltip = new Tooltip(this.canvas, this.settings)\r\n\r\n        this.#labelsX = new Map()\r\n        this.#labelsY = new Map()\r\n    }\r\n\r\n    initDropdown() {\r\n        super.initDropdown()\r\n\r\n        if (!this.data.simple)\r\n            this.dropdown = new Dropdown(this.canvas,\r\n                {\r\n                    x: -10,\r\n                    y: 10,\r\n                    icon: Icon.ThreeLines,\r\n                    items: [\r\n                        {\r\n                            text: TextResources.exportPNG,\r\n                            action: () => {\r\n                                Export.asPng(this.canvas, this.settings.title)\r\n                            }\r\n                        },\r\n                        {\r\n                            text: TextResources.exportCSV,\r\n                            action: () => {\r\n                                Export.asCsv(Decomposition.toTable(PlotData.getRows(this.data)), this.settings.title)\r\n                            }\r\n                        },\r\n                        {\r\n                            isDivider: true\r\n                        } as DropdownItem,\r\n                        {\r\n                            text: TextResources.decomposeToTable,\r\n                            action: () => {\r\n                                new Modal(Decomposition.toTable(PlotData.getRows(this.data)),\r\n                                    undefined,\r\n                                    this.settings.title ?? TextResources.dataAsTable)\r\n                                    .open()\r\n                            }\r\n                        }\r\n                    ]\r\n                })\r\n        else\r\n            this.dropdown = undefined\r\n    }\r\n}\r\n\r\nexport default PlotRenderer","export class Dates {\r\n    static minDate = new Date(2000, 1, 1)\r\n}","import Theme from 'Theme'\r\n\r\nabstract class TextStyles {\r\n    static title(context: CanvasRenderingContext2D) {\r\n        context.fillStyle = Theme.text\r\n        context.textAlign = 'center'\r\n        context.textBaseline = 'middle'\r\n        context.font = '20px sans-serif'\r\n    }\r\n\r\n    static regular(context: CanvasRenderingContext2D) {\r\n        context.fillStyle = Theme.text\r\n        context.textAlign = 'center'\r\n        context.textBaseline = 'middle'\r\n        context.font = '14px sans-serif'\r\n    }\r\n\r\n    static large(context: CanvasRenderingContext2D) {\r\n        context.fillStyle = Theme.text\r\n        context.textAlign = 'center'\r\n        context.textBaseline = 'middle'\r\n        context.font = '16px sans-serif'\r\n    }\r\n\r\n    static tooltip(context: CanvasRenderingContext2D) {\r\n        context.font = '14px sans-serif'\r\n        context.textAlign = 'start'\r\n        context.textBaseline = 'alphabetic'\r\n    }\r\n\r\n    static circularLabel(context: CanvasRenderingContext2D, isRight: boolean) {\r\n        context.textAlign = isRight ? 'start' : 'end'\r\n        context.textBaseline = 'alphabetic'\r\n        context.font = '14px sans-serif'\r\n    }\r\n}\r\n\r\nexport default TextStyles","import ChartSettings from 'types/ChartSettings'\r\nimport Animations from 'Animations'\r\nimport Tooltip from 'Tooltip'\r\nimport Dropdown from 'Dropdown'\r\nimport Chart from 'Chart'\r\nimport Canvas from 'helpers/Canvas'\r\nimport { Events, RenderState, Tag } from 'static/Enums'\r\nimport Styles from 'static/constants/Styles'\r\nimport Theme from 'Theme'\r\n\r\nclass Renderable {\r\n    node: HTMLElement\r\n\r\n    canvas: HTMLCanvasElement\r\n\r\n    settings: ChartSettings\r\n\r\n    animations: Animations\r\n\r\n    tooltip: Tooltip\r\n\r\n    protected state: RenderState = RenderState.Init\r\n\r\n    protected canvasPosition: DOMRect\r\n\r\n    protected moveEvent: MouseEvent\r\n\r\n    protected clickEvent: MouseEvent | undefined\r\n\r\n    protected menuEvent: MouseEvent | undefined\r\n\r\n    protected contextMenu: Dropdown | undefined\r\n\r\n    constructor(chart: Chart) {\r\n        this.node = chart.node\r\n        this.settings = chart.settings\r\n        this.animations = new Animations()\r\n\r\n        this.canvas = document.createElement(Tag.Canvas)\r\n\r\n        this.canvas.style.imageRendering = Styles.ImageRendering.Pixelated\r\n\r\n        this.node.append(this.canvas)\r\n\r\n        this.initAnimations()\r\n    }\r\n\r\n    render() {\r\n        const ctx = Canvas.getContext(this.canvas)\r\n\r\n        ctx.fillStyle = Theme.canvasBackground\r\n        ctx.fillRect(0, 0, this.canvas.width, this.canvas.height)\r\n    }\r\n\r\n    refresh() {\r\n        this.tooltip.refresh()\r\n        this.state = this.settings.disableInitAnimation ? RenderState.Idle : RenderState.Init\r\n    }\r\n\r\n    resetMouse() {\r\n        this.moveEvent = new MouseEvent(Events.MouseMove)\r\n        this.clickEvent = new MouseEvent(Events.Click)\r\n        this.menuEvent = undefined\r\n    }\r\n\r\n    initAnimations() {\r\n        this.tooltip = new Tooltip(this.canvas, this.settings)\r\n\r\n        this.canvasPosition = this.canvas.getBoundingClientRect()\r\n\r\n        this.canvasPosition.x += scrollX\r\n        this.canvasPosition.y += scrollY\r\n\r\n        if (this.state == RenderState.Init && !this.settings.disableInteractions) {\r\n            this.canvas.onmousemove = event => this.moveEvent = event\r\n            this.canvas.onclick = event => this.clickEvent = event\r\n            this.canvas.oncontextmenu = event => {\r\n                event.preventDefault()\r\n                this.contextMenu = undefined\r\n                if (this.menuEvent)\r\n                    this.menuEvent = undefined\r\n                else\r\n                    this.menuEvent = event\r\n            }\r\n            this.canvas.onmouseleave = () => this.moveEvent = new MouseEvent(Events.MouseMove)\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        this.canvas.remove()\r\n    }\r\n}\r\n\r\nexport default Renderable","import TreeData from 'types/data/TreeData'\r\nimport Renderer from 'types/base/Renderer'\r\nimport Sector from 'types/Sector'\r\nimport * as Helper from 'Helper'\r\nimport DropdownItem from 'types/DropdownItem'\r\nimport Dropdown from 'Dropdown'\r\nimport Chart from 'Chart'\r\nimport TextStyles from 'helpers/TextStyles'\r\nimport TooltipValue from 'types/TooltipValue'\r\nimport Export from 'Export'\r\nimport Decomposition from 'Decomposition'\r\nimport Modal from 'Modal'\r\nimport TextResources from 'static/TextResources'\r\nimport Canvas from 'helpers/Canvas'\r\nimport TreeCell from 'types/TreeCell'\r\nimport Formatter from 'helpers/Formatter'\r\nimport { AnimationType, Icon, PlotAxisType, RenderState } from 'static/Enums'\r\nimport * as Constants from 'static/constants/Index'\r\n\r\nclass TreeRenderer extends Renderer<TreeData> {\r\n    constructor(chart: Chart) {\r\n        super(chart)\r\n\r\n        this.settings.enableLegend = false\r\n    }\r\n\r\n    render() {\r\n        super.render()\r\n\r\n        if (this.data.values.filter(v => v.value > 0).length == 0) {\r\n            this.#drawEmpty()\r\n            requestAnimationFrame(this.render.bind(this))\r\n            return\r\n        }\r\n\r\n        const titleOffset = this.settings.title ? Constants.Values.titleOffset : 0\r\n\r\n        const maxWidth = this.canvas.width - this.data.padding * 2,\r\n            maxHeight = this.canvas.height - this.data.padding * 2 - titleOffset\r\n\r\n        let sum = this.data.values.sum(cur => cur.value),\r\n            totalSquare = maxWidth * maxHeight\r\n\r\n        let x = this.data.padding,\r\n            y = this.data.padding + titleOffset\r\n\r\n        let minX = this.data.padding,\r\n            minY = this.data.padding + titleOffset\r\n\r\n        let tooltipCell: TreeCell | undefined = undefined\r\n        let contextMenuData = undefined\r\n\r\n        const ctx = Canvas.getContext(this.canvas)\r\n\r\n        let isVertical = true\r\n        for (let i = 0; i < this.data.values.length; i++) {\r\n            const item = this.data.values[i]\r\n\r\n            const remainWidth = maxWidth - (x - this.data.padding),\r\n                remainHeight = maxHeight - (y - this.data.padding - titleOffset)\r\n\r\n            let cells: TreeCell[] = [\r\n                {\r\n                    color: item.color,\r\n                    label: item.label,\r\n                    s: item.value / sum * totalSquare,\r\n                    value: item.value,\r\n                    id: item.id,\r\n                    x: x,\r\n                    y: y\r\n                } as TreeCell\r\n            ]\r\n\r\n            if (i + 1 <= this.data.values.length - 1) {\r\n                const next = this.data.values[i + 1]\r\n\r\n                cells.push({\r\n                    color: next.color,\r\n                    label: next.label,\r\n                    s: next.value / sum * totalSquare,\r\n                    value: next.value,\r\n                    id: next.id,\r\n                    x: x,\r\n                    y: y\r\n                } as TreeCell)\r\n\r\n                i++\r\n            }\r\n\r\n            const isSingle = cells.length == 1,\r\n                isLast = i == this.data.values.length - 1\r\n\r\n            if (isVertical) {\r\n                for (let j = 1; j <= remainWidth + i * i; j++) {\r\n                    const w = remainWidth - j,\r\n                        h1 = cells[0].s / w,\r\n                        h2 = isSingle ? 0 : cells[1].s / w\r\n\r\n                    if (h1 + h2 >= remainHeight) {\r\n                        cells[0].w = Math.floor(w)\r\n                        cells[0].h = Math.floor(h1)\r\n\r\n                        if (!isSingle) {\r\n                            cells[1].w = Math.floor(w)\r\n                            cells[1].h = remainHeight - cells[0].h\r\n\r\n                            cells[1].y += cells[0].h\r\n                        }\r\n\r\n                        break\r\n                    }\r\n                }\r\n            } else {\r\n                for (let j = 1; j <= remainHeight + i * i; j++) {\r\n                    const h = remainHeight - j,\r\n                        w1 = cells[0].s / h,\r\n                        w2 = isSingle ? 0 : cells[1].s / h\r\n\r\n                    if (w1 + w2 >= remainWidth) {\r\n                        cells[0].h = Math.floor(h)\r\n                        cells[0].w = Math.floor(w1)\r\n\r\n                        if (!isSingle) {\r\n                            cells[1].h = Math.floor(h)\r\n                            cells[1].w = remainWidth - cells[0].w\r\n\r\n                            cells[1].x += cells[0].w\r\n                        }\r\n\r\n                        break\r\n                    }\r\n                }\r\n            }\r\n\r\n            for (const cell of cells) {\r\n                if (isLast) {\r\n                    if (isVertical) {\r\n                        cell.w = remainWidth\r\n                        if (isSingle)\r\n                            cell.h = remainHeight\r\n                    } else {\r\n                        cell.h = remainHeight\r\n                        if (isSingle)\r\n                            cell.w = remainWidth\r\n                    }\r\n                }\r\n\r\n                ctx.beginPath()\r\n\r\n                ctx.fillStyle = cell.color\r\n\r\n                const cellInit = this.state != RenderState.Init\r\n                                 && !this.animations.contains(cell.id, AnimationType.Init)\r\n\r\n                const cellIndex = i + cells.indexOf(cell) + (isLast && isSingle ? 1 : 0),\r\n                    duration = 260\r\n\r\n                const getPrev = () => {\r\n                    let acc = 0\r\n                    for (let i = 0; i < cellIndex; i++)\r\n                        acc += duration - duration * (i / this.data.values.length) / Math.E\r\n\r\n                    return acc\r\n                }\r\n\r\n                const initAnimationDuration = duration - duration * cellIndex / (this.data.values.length + 1)\r\n\r\n                if (!cellInit) {\r\n                    this.animations.handle(cell.id,\r\n                        AnimationType.Init,\r\n                        {\r\n                            duration: getPrev(),\r\n                            continuous: true,\r\n                            body: transition => {\r\n                                if (transition * getPrev() - getPrev() + initAnimationDuration < 0)\r\n                                    return ctx.fillStyle += '00'\r\n\r\n                                transition = (transition * getPrev() - getPrev() + initAnimationDuration) / initAnimationDuration\r\n\r\n                                const center = {\r\n                                    x: cell.x + cell.w / 2,\r\n                                    y: cell.y + cell.h / 2\r\n                                }\r\n\r\n                                const minSize = .7,\r\n                                    rest = 1 - minSize\r\n\r\n                                ctx.translate(center.x - center.x * (minSize + transition * rest),\r\n                                    center.y - center.y * (minSize + transition * rest))\r\n                                ctx.scale((minSize + transition * rest), (minSize + transition * rest))\r\n\r\n                                let opacity = Math.round(255 * transition).toString(16)\r\n\r\n                                if (opacity.length < 2)\r\n                                    opacity = 0 + opacity\r\n\r\n                                ctx.fillStyle = cell.color + opacity\r\n                            }\r\n                        })\r\n                } else {\r\n                    const translate = (transition: number, event: AnimationType) => {\r\n                        const center = {\r\n                            x: cell.x + cell.w / 2,\r\n                            y: cell.y + cell.h / 2\r\n                        }\r\n\r\n                        const margin = 12,\r\n                            minSize = cell.w > cell.h\r\n                                      ? 1 - margin / cell.w\r\n                                      : 1 - margin / cell.h,\r\n                            rest = 1 - minSize\r\n\r\n                        ctx.translate(center.x - center.x * (minSize + transition * rest),\r\n                            center.y - center.y * (minSize + transition * rest))\r\n                        ctx.scale(minSize + transition * rest, minSize + transition * rest)\r\n\r\n                        this.animations.reload(cell.id, event)\r\n                    }\r\n\r\n                    if (this.#isInCell(cell)\r\n                        && !tooltipCell) {\r\n                        tooltipCell = cell\r\n                        contextMenuData = cell.data\r\n\r\n                        this.animations.handle(cell.id,\r\n                            AnimationType.MouseOver,\r\n                            {\r\n                                duration: Constants.Animations.tree,\r\n                                backward: true,\r\n                                body: transition => {\r\n                                    translate(transition, AnimationType.MouseLeave)\r\n                                }\r\n                            })\r\n                    } else {\r\n                        this.animations.handle(cell.id,\r\n                            AnimationType.MouseLeave,\r\n                            {\r\n                                timer: Constants.Dates.minDate,\r\n                                duration: Constants.Animations.tree,\r\n                                body: transition => {\r\n                                    translate(transition, AnimationType.MouseOver)\r\n                                }\r\n                            })\r\n                    }\r\n                }\r\n\r\n                const gap = 4\r\n\r\n                ctx.roundRect(x + gap, y + gap, cell.w - gap, cell.h - gap, gap * 2)\r\n                ctx.fill()\r\n\r\n                if (cell.label\r\n                    && Helper.stringWidth(cell.label) < cell.w - gap\r\n                    && cell.h - gap > 16\r\n                    && !this.animations.contains(cell.id, AnimationType.Init)) {\r\n                    ctx.beginPath()\r\n                    TextStyles.large(ctx)\r\n                    ctx.fillStyle = !Helper.isColorVisible(cell.color, '#ffffff')\r\n                                    ? '#000000'\r\n                                    : '#ffffff'\r\n                    ctx.fillText(cell.label,\r\n                        x + 2 + cell.w / 2,\r\n                        y + 2 + cell.h / 2)\r\n                }\r\n\r\n                ctx.resetTransform()\r\n\r\n                if (isVertical)\r\n                    y += cell.h\r\n                else\r\n                    x += cell.w\r\n\r\n                totalSquare -= cell.w * cell.h\r\n                sum -= cell.value\r\n            }\r\n\r\n            if (isVertical) {\r\n                x += cells[0].w\r\n                y = minY\r\n            } else {\r\n                y += cells[0].h\r\n                x = minX\r\n            }\r\n\r\n            minX = x\r\n            minY = y\r\n\r\n            isVertical = !isVertical\r\n        }\r\n\r\n        this.tooltip.render(\r\n            !!tooltipCell && !this.dropdown?.isActive,\r\n            this.moveEvent,\r\n            [\r\n                new TooltipValue(`${ tooltipCell?.label }: ${ Formatter.format(tooltipCell?.value, PlotAxisType.Number, this.settings.valuePostfix) }`)\r\n            ],\r\n            this.data.values.find(v => v.id == tooltipCell?.id)\r\n        )\r\n\r\n        if (!this.isDestroy)\r\n            requestAnimationFrame(this.render.bind(this))\r\n\r\n        this.state = RenderState.Idle\r\n\r\n        super.renderDropdown()\r\n\r\n        if (tooltipCell || this.contextMenu)\r\n            this.renderContextMenu(contextMenuData)\r\n        else\r\n            this.menuEvent = undefined\r\n    }\r\n\r\n    #isInCell(cell: TreeCell) {\r\n        if (!this.moveEvent || !cell)\r\n            return false\r\n\r\n        const mouse = this.getMousePosition(this.moveEvent)\r\n\r\n        return !(this.dropdown?.isActive ?? false)\r\n               && cell.x <= mouse.x && mouse.x <= cell.x + cell.w\r\n               && cell.y <= mouse.y && mouse.y <= cell.y + cell.h\r\n    }\r\n\r\n    #drawEmpty() {\r\n        const ctx = Canvas.getContext(this.canvas)\r\n\r\n        TextStyles.regular(ctx)\r\n        ctx.fillText(TextResources.treeMapIsEmpty,\r\n            this.canvas.width / 2,\r\n            this.canvas.height / 2)\r\n    }\r\n\r\n    refresh() {\r\n        super.refresh()\r\n    }\r\n\r\n    resize() {\r\n        super.resize()\r\n\r\n        this.initAnimations()\r\n        this.animations.clear()\r\n    }\r\n\r\n    prepareSettings() {\r\n        super.prepareSettings()\r\n\r\n        this.data.values = this.data.values.map(v => new Sector(v))\r\n\r\n        this.data.values = this.data.values.filter(v => v.value > 0)\r\n\r\n        this.data.values.sort((a, b) => (b.value ?? 0) - (a.value ?? 0))\r\n\r\n        this.calculateColors(true)\r\n\r\n        for (let item of this.data.values) {\r\n            item.disabled = !item.value\r\n            item.value ??= 0\r\n        }\r\n    }\r\n\r\n    initDropdown() {\r\n        super.initDropdown()\r\n\r\n        this.dropdown = new Dropdown(this.canvas,\r\n            {\r\n                x: -10,\r\n                y: 10,\r\n                icon: Icon.ThreeLines,\r\n                items: [\r\n                    {\r\n                        text: TextResources.exportCSV,\r\n                        action: () => {\r\n                            Export.asCsv(Decomposition.toTable(TreeData.getRows(this.data)), this.settings.title)\r\n                        }\r\n                    },\r\n                    {\r\n                        isDivider: true\r\n                    } as DropdownItem,\r\n                    {\r\n                        text: TextResources.decomposeToTable,\r\n                        action: () => {\r\n                            new Modal(Decomposition.toTable(TreeData.getRows(this.data)),\r\n                                undefined,\r\n                                this.settings.title ?? TextResources.dataAsTable)\r\n                                .open()\r\n                        }\r\n                    }\r\n                ]\r\n            })\r\n    }\r\n}\r\n\r\nexport default TreeRenderer","import TableData from 'types/TableData'\r\nimport * as Helper from 'Helper'\r\nimport Value from 'types/base/Value'\r\nimport ChartSettings from 'types/ChartSettings'\r\nimport Formatter from 'helpers/Formatter'\r\nimport Styles from 'static/constants/Styles'\r\nimport { Tag } from 'static/Enums'\r\n\r\nclass Decomposition {\r\n    static toTable(values: TableData) {\r\n        let table = document.createElement(Tag.Div)\r\n\r\n        table.classList.add('o-table')\r\n\r\n        let totals = new Map<string, number>()\r\n        let rows = '',\r\n            headers = '',\r\n            index = 0\r\n\r\n        let valuesMap = new Map<string, Map<string, any>>()\r\n\r\n        for (const tableValue of values.values) {\r\n            let allColumns = new Map<string, any>()\r\n\r\n            for (const header of values.headers)\r\n                allColumns.set(header.value, 0)\r\n\r\n            for (const [key, value] of tableValue.values)\r\n                allColumns.set(key, value)\r\n\r\n            let indexSpaces = ''\r\n            for (let i = 0; i < index; i++)\r\n                indexSpaces += ' '\r\n\r\n            valuesMap.set(tableValue.name + indexSpaces, allColumns)\r\n\r\n            index++\r\n        }\r\n\r\n        for (const tableHeader of values.headers)\r\n            headers += `\r\n                <div>\r\n                    ${ tableHeader.display }\r\n                </div>\r\n            `\r\n\r\n        for (const [key, value] of valuesMap) {\r\n            let columns = ''\r\n\r\n            for (const [vKey, vValue] of value) {\r\n                columns += `\r\n                    <div>\r\n                        ${ vValue == undefined ? '' : Formatter.number(vValue) }\r\n                    </div>\r\n                `\r\n\r\n                if (totals.has(vKey)) {\r\n                    let totalValue = +(totals.get(vKey) ?? 0)\r\n                    totals.set(vKey, totalValue + +vValue)\r\n                } else {\r\n                    totals.set(vKey, vValue)\r\n                }\r\n            }\r\n\r\n            rows += `\r\n                <div class=\"o-table-row\">\r\n                    <div>\r\n                        ${ key.trim() }\r\n                    </div>\r\n                    \r\n                    ${ columns } \r\n                </div>\r\n            `\r\n        }\r\n\r\n        let totalColumns = ''\r\n\r\n        for (const [, value] of totals)\r\n            totalColumns += `\r\n                <div>\r\n                    ${ value == undefined ? '' : Formatter.number(value) }\r\n                </div>\r\n            `\r\n\r\n        table.innerHTML = `\r\n            <div class=\"o-table-header\">\r\n                <div></div>\r\n\r\n                ${ headers }\r\n            </div>\r\n        \r\n            <div class=\"o-table-body\">\r\n                ${ rows }\r\n            </div>\r\n            \r\n            <div class=\"o-table-footer\">\r\n                <div></div>\r\n\r\n                ${ totalColumns }\r\n            </div>\r\n        `\r\n\r\n        return table\r\n    }\r\n\r\n    static toChart<T extends Value>(settings: ChartSettings, values: T[]) {\r\n        let container = document.createElement(Tag.Div),\r\n            div = document.createElement(Tag.Div),\r\n            script = document.createElement(Tag.Script),\r\n            id = Helper.guid()\r\n\r\n        container.style.display = Styles.Display.Flex\r\n        container.style.height = '100%'\r\n\r\n        div.id = id\r\n        div.style.flexGrow = '1'\r\n\r\n        let cloneSettings = JSON.parse(JSON.stringify(settings)) as ChartSettings\r\n\r\n        if (cloneSettings.title)\r\n            cloneSettings.title = cloneSettings.title + ' (Other)'\r\n        cloneSettings.data.values = values\r\n        cloneSettings.minWidth = undefined\r\n        cloneSettings.minHeight = undefined\r\n\r\n        script.innerHTML = `\r\n            new OCharts.chart(document.getElementById('${ id }'), ${ JSON.stringify(cloneSettings) })\r\n                .render()\r\n        `\r\n\r\n        container.append(div, script)\r\n\r\n        return container\r\n    }\r\n}\r\n\r\nexport default Decomposition","export { Animations } from './Animations'\r\nexport { Dates } from './Dates'\r\nexport { Values } from './Values'","import Renderer from 'types/base/Renderer'\r\nimport GaugeData from 'types/data/GaugeData'\r\nimport * as Helper from 'Helper'\r\nimport Sector from 'types/Sector'\r\nimport Dropdown from 'Dropdown'\r\nimport Point from 'types/Point'\r\nimport Chart from 'Chart'\r\nimport Theme from 'Theme'\r\nimport TextStyles from 'helpers/TextStyles'\r\nimport TooltipValue from 'types/TooltipValue'\r\nimport Export from 'Export'\r\nimport Formatter from 'helpers/Formatter'\r\nimport Canvas from 'helpers/Canvas'\r\nimport TextResources from 'static/TextResources'\r\nimport { AnimationType, Icon, PlotAxisType, RenderState } from 'static/Enums'\r\n\r\nclass GaugeRenderer extends Renderer<GaugeData> {\r\n    #radius: number\r\n\r\n    #center: Point\r\n\r\n    constructor(chart: Chart) {\r\n        super(chart)\r\n\r\n        this.settings.enableLegend = false\r\n    }\r\n\r\n    render() {\r\n        super.render()\r\n\r\n        this.#draw()\r\n\r\n        const value = this.data.values[0]\r\n        this.tooltip.render(\r\n            this.#isInsideSector(this.moveEvent, value) && !this.dropdown?.isActive,\r\n            this.moveEvent,\r\n            [\r\n                new TooltipValue(`${ value?.label }: ${ Formatter.format(value?.current, PlotAxisType.Number, this.settings.valuePostfix) }`)\r\n            ],\r\n            value\r\n        )\r\n\r\n        if (!this.isDestroy)\r\n            requestAnimationFrame(this.render.bind(this))\r\n\r\n        this.state = RenderState.Idle\r\n\r\n        super.renderDropdown()\r\n    }\r\n\r\n    #draw() {\r\n        const ctx = Canvas.getContext(this.canvas)\r\n\r\n        const value = this.data.values[0] ?? { id: Helper.guid() }\r\n\r\n        if (this.state == RenderState.Init || this.animations.contains(value.id, AnimationType.Init))\r\n            this.animations.handle(value.id,\r\n                AnimationType.Init,\r\n                {\r\n                    duration: 450,\r\n                    continuous: true,\r\n                    body: transition => {\r\n                        value.current = value.value * transition\r\n                    }\r\n                })\r\n\r\n        ctx.beginPath()\r\n\r\n        ctx.strokeStyle = value.color\r\n        ctx.lineCap = 'round'\r\n        ctx.lineWidth = 40\r\n\r\n        const piece = value.current / this.data.max,\r\n            angle = (isNaN(piece) ? 1 : piece) * Math.PI\r\n\r\n        if (value.value) {\r\n            ctx.arc(this.#center.x, this.#center.y, this.#radius, Math.PI, angle - Math.PI)\r\n            ctx.stroke()\r\n        }\r\n\r\n        ctx.beginPath()\r\n\r\n        ctx.lineWidth = 1\r\n        ctx.lineCap = 'square'\r\n\r\n        let localAccumulator = 0,\r\n            localAngle = Math.PI\r\n\r\n        while (localAngle >= 0) {\r\n            let currentAngle = localAngle - Math.PI / 10 > 0\r\n                               ? Math.PI / 10\r\n                               : localAngle\r\n\r\n            const getPoint = (offset: number) => {\r\n                return {\r\n                    x: this.#center.x + (this.#radius + offset) * Math.cos(Math.PI + localAccumulator),\r\n                    y: this.#center.y + (this.#radius + offset) * Math.sin(Math.PI + localAccumulator)\r\n                }\r\n            }\r\n\r\n            let point1 = getPoint(50),\r\n                point2 = getPoint(90),\r\n                point3 = getPoint(115)\r\n\r\n            const opacity = Math.PI - localAngle > angle ? '66' : 'ff'\r\n\r\n            ctx.moveTo(point1.x, point1.y)\r\n            ctx.lineTo(point2.x, point2.y)\r\n            ctx.strokeStyle = Theme.text + opacity\r\n            ctx.stroke()\r\n\r\n            TextStyles.regular(ctx)\r\n            ctx.fillStyle = Theme.text + opacity\r\n            ctx.fillText(Formatter.number(this.data.max - localAngle / Math.PI * this.data.max), point3.x, point3.y)\r\n\r\n            localAccumulator += currentAngle\r\n\r\n            localAngle -= Math.PI / 10\r\n        }\r\n    }\r\n\r\n    #isInsideSector(event: MouseEvent, value: Sector): boolean {\r\n        if (!event)\r\n            return false\r\n\r\n        const isAngle = (point: Point) => {\r\n            let a = Math.atan2(point.y - this.#center.y, point.x - this.#center.x)\r\n            if (a < 0)\r\n                a += Math.PI * 2\r\n\r\n            const piece = value.current / this.data.max,\r\n                angle = (isNaN(piece) ? 1 : piece) * Math.PI\r\n\r\n            return a > Math.PI && Math.PI + angle >= a\r\n        }\r\n\r\n        const isWithinRadius = (v: Point) => {\r\n            const outerRadius = this.#radius + 20,\r\n                innerRadius = this.#radius - 20\r\n\r\n            return v.x * v.x + v.y * v.y <= outerRadius * outerRadius\r\n                   && v.x * v.x + v.y * v.y >= innerRadius * innerRadius\r\n        }\r\n\r\n        const point = this.getMousePosition(event),\r\n            inner = {\r\n                x: point.x - this.#center.x,\r\n                y: point.y - this.#center.y\r\n            }\r\n\r\n        return !(this.dropdown?.isActive ?? false)\r\n               && isAngle(point)\r\n               && isWithinRadius(inner)\r\n    }\r\n\r\n    #calculateSizes() {\r\n        const longSide = this.canvas.width < this.canvas.height / 2\r\n                         ? this.canvas.height / 2\r\n                         : this.canvas.width\r\n\r\n        this.#radius = longSide / 2 - 200\r\n\r\n        this.#center = {\r\n            x: this.canvas.width / 2,\r\n            y: this.canvas.height - this.#radius / 5\r\n        }\r\n    }\r\n\r\n    refresh() {\r\n        super.refresh()\r\n    }\r\n\r\n    resize() {\r\n        super.resize()\r\n\r\n        this.initAnimations()\r\n        this.#calculateSizes()\r\n    }\r\n\r\n    prepareSettings() {\r\n        super.prepareSettings()\r\n\r\n        for (let item of this.data.values) {\r\n            item.disabled = !item.value\r\n            item.value ??= 0\r\n        }\r\n\r\n        if (this.data.values.length > 0 && this.data.values[0].value > this.data.max)\r\n            this.data.values[0].value = this.data.max\r\n    }\r\n\r\n    initDropdown() {\r\n        super.initDropdown()\r\n\r\n        this.dropdown = new Dropdown(this.canvas,\r\n            {\r\n                x: -10,\r\n                y: 10,\r\n                icon: Icon.ThreeLines,\r\n                items: [\r\n                    {\r\n                        text: TextResources.exportPNG,\r\n                        action: () => {\r\n                            Export.asPng(this.canvas, this.settings.title)\r\n                        }\r\n                    }\r\n                ]\r\n            })\r\n    }\r\n}\r\n\r\nexport default GaugeRenderer","import Theme from 'Theme'\r\nimport * as Helper from 'Helper'\r\nimport Canvas from 'helpers/Canvas'\r\nimport { Icon, Tag } from 'static/Enums'\r\n\r\nclass Export {\r\n    static asPng(canvas: HTMLCanvasElement, title: string) {\r\n        requestAnimationFrame(() => {\r\n            const ctx = Canvas.getContext(canvas)\r\n\r\n            let width = Helper.stringWidth(Icon.ThreeLines) + 20,\r\n                height = 64\r\n\r\n            ctx.fillStyle = Theme.canvasBackground\r\n            ctx.fillRect(canvas.width - width, 0, width, height)\r\n\r\n            let leftEmpty = 0,\r\n                rightEmpty = 0\r\n\r\n            const imageData = new Uint32Array(ctx.getImageData(0, 0, canvas.width, canvas.height).data.buffer)\r\n\r\n            let isBusy = false\r\n\r\n            for (let i = 0; i < canvas.width; i++) {\r\n                for (let j = 0; j < canvas.height; j++) {\r\n                    if (Canvas.isPixelBusy(imageData[i + j * canvas.width])) {\r\n                        isBusy = true\r\n                        break\r\n                    }\r\n                }\r\n\r\n                if (isBusy)\r\n                    break\r\n\r\n                leftEmpty++\r\n            }\r\n\r\n            isBusy = false\r\n\r\n            for (let i = canvas.width; i >= 0; i--) {\r\n                for (let j = 0; j < canvas.height; j++) {\r\n                    if (Canvas.isPixelBusy(imageData[i + j * canvas.width])) {\r\n                        isBusy = true\r\n                        break\r\n                    }\r\n                }\r\n\r\n                if (isBusy)\r\n                    break\r\n\r\n                rightEmpty++\r\n            }\r\n\r\n            if (leftEmpty > 4)\r\n                leftEmpty -= 4\r\n            if (rightEmpty > 4)\r\n                rightEmpty -= 4\r\n\r\n            if (leftEmpty > rightEmpty)\r\n                leftEmpty = rightEmpty\r\n            if (rightEmpty > leftEmpty)\r\n                rightEmpty = leftEmpty\r\n\r\n            let destinationCanvas = document.createElement(Tag.Canvas)\r\n            destinationCanvas.width = canvas.width - leftEmpty - rightEmpty\r\n            destinationCanvas.height = canvas.height\r\n\r\n            const destCtx = Canvas.getContext(destinationCanvas)\r\n\r\n            destCtx.fillStyle = Theme.background\r\n            destCtx.fillRect(0, 0, canvas.width, canvas.height)\r\n\r\n            destCtx.drawImage(canvas, -leftEmpty, 0)\r\n\r\n            Export.saveAs((title ?? 'chart') + '.png',\r\n                destinationCanvas.toDataURL('image/png'))\r\n        })\r\n    }\r\n\r\n    static asCsv(table: HTMLElement, title: string) {\r\n        let rows = table.querySelectorAll('tr'),\r\n            csv = []\r\n\r\n        for (let i = 0; i < rows.length; i++) {\r\n            let row = [],\r\n                cols = rows[i].querySelectorAll('td, th')\r\n\r\n            for (let j = 0; j < cols.length; j++) {\r\n                let data = cols[j].innerHTML\r\n                                  .replace(/(\\r\\n|\\n|\\r)/gm, '')\r\n                                  .replace(/(\\s\\s)/gm, ' ')\r\n\r\n                data = data.replace(/\"/g, '\"\"')\r\n                row.push('\"' + data + '\"')\r\n            }\r\n\r\n            csv.push(row.join(','))\r\n        }\r\n\r\n        Export.saveAs((title ?? 'table') + '.csv',\r\n            csv.join('\\n'),\r\n            'data:text/csv;charset=utf-8,' + encodeURIComponent(csv.join('\\n')),\r\n            true)\r\n    }\r\n\r\n    static saveAs(name: string, dataURL: string, href?: string | undefined, isText?: boolean) {\r\n        if (window.showSaveFilePicker != undefined) {\r\n            const accept = isText\r\n                           ? { 'text/csv': '.csv' } as FilePickerAcceptType\r\n                           : { 'image/*': '.png' } as FilePickerAcceptType\r\n\r\n            const options = {\r\n                suggestedName: name,\r\n                types: [\r\n                    {\r\n                        accept: accept\r\n                    }\r\n                ],\r\n                excludeAcceptAllOption: true\r\n            } as SaveFilePickerOptions\r\n\r\n            function toBlob(dataURI: string) {\r\n                const byteString = atob(dataURI.split(',')[1]),\r\n                    mimeString = dataURI.split(',')[0]\r\n                        .split(':')[1]\r\n                        .split(';')[0],\r\n                    buffer = new ArrayBuffer(byteString.length),\r\n                    imageArray = new Uint8Array(buffer)\r\n\r\n                for (let i = 0; i < byteString.length; i++)\r\n                    imageArray[i] = byteString.charCodeAt(i)\r\n\r\n                return new Blob([buffer], { type: mimeString })\r\n            }\r\n\r\n            window.showSaveFilePicker(options)\r\n                  .then(fileHandle => {\r\n                      fileHandle.createWritable()\r\n                                .then(writableStream => {\r\n                                    writableStream.write(isText ? dataURL : toBlob(dataURL))\r\n                                                  .then(() => writableStream.close())\r\n                                })\r\n                  })\r\n        } else {\r\n            let download = document.createElement(Tag.A)\r\n            download.href = href ?? dataURL\r\n            download.download = name\r\n            download.click()\r\n        }\r\n    }\r\n}\r\n\r\nexport default Export","import { PlotAxisType } from 'static/Enums'\r\n\r\nabstract class Formatter {\r\n    static number = (value: number | undefined) =>\r\n        value?.toLocaleString(undefined, {\r\n            minimumFractionDigits: 2,\r\n            maximumFractionDigits: 2\r\n        }) ?? ''\r\n\r\n    static date = (value: Date | undefined) =>\r\n        value?.toLocaleDateString() ?? ''\r\n\r\n    static text = (value: string | undefined) =>\r\n        value ?? ''\r\n\r\n    static format(value: any | undefined, type: PlotAxisType, postfix?: string | undefined) {\r\n        let result = ''\r\n\r\n        switch (type) {\r\n            case PlotAxisType.Number:\r\n                result = Formatter.number(value)\r\n                break\r\n\r\n            case PlotAxisType.Date:\r\n                result = Formatter.date(new Date(value))\r\n                break\r\n\r\n            case PlotAxisType.Text:\r\n                result = Formatter.text(value)\r\n                break\r\n        }\r\n\r\n        return result + (postfix ?? '')\r\n    }\r\n\r\n}\r\n\r\nexport default Formatter","import TextStyles from 'helpers/TextStyles'\r\nimport Theme from 'Theme'\r\nimport Animations from 'Animations'\r\nimport * as Helper from 'Helper'\r\nimport ButtonOptions from 'types/ButtonOptions'\r\nimport Canvas from 'helpers/Canvas'\r\nimport { AnimationType } from 'static/Enums'\r\nimport * as Constants from 'static/constants/Index'\r\nimport Styles from 'static/constants/Styles'\r\n\r\nclass Button {\r\n    #canvas: HTMLCanvasElement\r\n\r\n    #options: ButtonOptions\r\n\r\n    #canvasPosition: DOMRect\r\n\r\n    animations: Animations\r\n\r\n    #isInit: boolean\r\n\r\n    #position: DOMRect\r\n\r\n    constructor(canvas: HTMLCanvasElement, options: ButtonOptions) {\r\n        this.#canvas = canvas\r\n        this.#options = options\r\n\r\n        this.animations = new Animations()\r\n\r\n        this.#initAnimations()\r\n    }\r\n\r\n    render(moveEvent: MouseEvent, clickEvent: MouseEvent | undefined) {\r\n        if (!this.#isInit)\r\n            this.#initAnimations()\r\n\r\n        const ctx = Canvas.getContext(this.#canvas)\r\n\r\n        ctx.beginPath()\r\n\r\n        const translate = (transition: number, event: AnimationType) => {\r\n            this.animations.reload('animation-button', event)\r\n\r\n            ctx.fillStyle = Helper.adjustColor(Theme.canvasBackground, -Math.round(transition * 25))\r\n        }\r\n\r\n        if (this.#isOnButton(moveEvent)) {\r\n            this.#canvas.style.cursor = Styles.Cursor.Pointer\r\n\r\n            if (clickEvent && this.#isOnButton(clickEvent)) {\r\n                this.#options.action()\r\n                clickEvent = undefined\r\n            }\r\n\r\n            this.animations.handle('animation-button',\r\n                AnimationType.MouseOver,\r\n                {\r\n                    duration: 300,\r\n                    body: transition => {\r\n                        translate(transition, AnimationType.MouseLeave)\r\n                    }\r\n                })\r\n        } else {\r\n            this.animations.handle('animation-button',\r\n                AnimationType.MouseLeave,\r\n                {\r\n                    timer: Constants.Dates.minDate,\r\n                    duration: 300,\r\n                    backward: true,\r\n                    body: transition => {\r\n                        translate(transition, AnimationType.MouseOver)\r\n                    }\r\n                })\r\n        }\r\n\r\n        ctx.roundRect(this.#position.x, this.#position.y, this.#position.width, this.#position.height, 4)\r\n        ctx.fill()\r\n\r\n        TextStyles.regular(ctx)\r\n        ctx.fillText(this.#options.text,\r\n            this.#position.x + this.#position.width / 2,\r\n            this.#position.y + this.#position.height / 2)\r\n\r\n        this.#isInit = true\r\n\r\n        return clickEvent\r\n    }\r\n\r\n    resize() {\r\n        this.#initAnimations()\r\n    }\r\n\r\n    #initAnimations() {\r\n        this.#canvasPosition = this.#canvas.getBoundingClientRect()\r\n\r\n        this.#canvasPosition.x += scrollX\r\n        this.#canvasPosition.y += scrollY\r\n\r\n        const width = Helper.stringWidth(this.#options.text) + 12,\r\n            height = 20\r\n\r\n        this.#position = <DOMRect>{\r\n            x: this.#options.x + width > this.#canvas.width\r\n               ? this.#canvas.width - width\r\n               : this.#options.x < 0\r\n                 ? this.#canvas.width + this.#options.x - width\r\n                 : this.#options.x,\r\n            y: this.#options.y + height > this.#canvas.height\r\n               ? this.#canvas.height - height\r\n               : this.#options.y < 0\r\n                 ? this.#canvas.height + this.#options.y - height\r\n                 : this.#options.y,\r\n            width: width,\r\n            height: height\r\n        }\r\n    }\r\n\r\n    #isOnButton(event: MouseEvent): boolean {\r\n        if (!event)\r\n            return false\r\n\r\n        let trueX = event.clientX - this.#canvasPosition.x + scrollX,\r\n            trueY = event.clientY - this.#canvasPosition.y + scrollY\r\n\r\n        return trueX >= this.#position.x && trueX <= this.#position.x + this.#position.width\r\n               && trueY >= this.#position.y && trueY <= this.#position.y + this.#position.height\r\n    }\r\n}\r\n\r\nexport default Button","import Chart from 'Chart'\r\nimport ChartSettings from 'types/ChartSettings'\r\n\r\nfunction OCharts() {\r\n}\r\n\r\nOCharts.chart = function(context: HTMLElement, settings: ChartSettings) {\r\n    return new Chart(context, settings)\r\n}\r\n\r\n// @ts-ignore\r\nwindow.OCharts = OCharts","export enum AnimationType {\r\n    None,\r\n\r\n    MouseOver,\r\n\r\n    MouseLeave,\r\n\r\n    Init,\r\n\r\n    Click,\r\n\r\n    AnotherItemOver,\r\n\r\n    AnotherItemLeave\r\n}\r\n\r\nexport enum Attribute {\r\n    Name = 'name'\r\n}\r\n\r\nexport enum ChartType {\r\n    Plot,\r\n\r\n    Circular,\r\n\r\n    Gauge,\r\n\r\n    TreeMap\r\n}\r\n\r\nexport enum ErrorType {\r\n    NullContext = 'Can\\'t find context',\r\n\r\n    ElementNotExist = 'Element does not exist'\r\n}\r\n\r\nexport enum Events {\r\n    VisibilityChanged = 'visibilitychange',\r\n\r\n    Blur = 'blur',\r\n\r\n    MouseMove = 'mousemove',\r\n\r\n    Click = 'click',\r\n\r\n    Change = 'change',\r\n\r\n    ContextMenu = 'contextmenu'\r\n}\r\n\r\nexport enum LegendPlace {\r\n    Bottom,\r\n\r\n    Left,\r\n\r\n    Top,\r\n\r\n    Right\r\n}\r\n\r\nexport enum LineType {\r\n    Solid,\r\n\r\n    Dash,\r\n\r\n    Dotted\r\n}\r\n\r\nexport enum PlotAxisType {\r\n    Number,\r\n\r\n    Date,\r\n\r\n    Text\r\n}\r\n\r\nexport enum PlotType {\r\n    Line,\r\n\r\n    AttentionLine,\r\n\r\n    Column,\r\n\r\n    Bar,\r\n\r\n    StackingColumn\r\n}\r\n\r\nexport enum Tag {\r\n    Canvas = 'canvas',\r\n\r\n    A = 'a',\r\n\r\n    Div = 'div',\r\n\r\n    Dialog = 'dialog',\r\n\r\n    Table = 'table',\r\n\r\n    Script = 'script',\r\n\r\n    Button = 'button',\r\n\r\n    Span = 'span'\r\n}\r\n\r\nexport enum RenderState {\r\n    Idle,\r\n\r\n    Init\r\n}\r\n\r\nexport enum Icon {\r\n    ThreeLines = '',\r\n\r\n    Close = ''\r\n}\r\n\r\nexport enum DrawPointType {\r\n    Move,\r\n\r\n    Line,\r\n\r\n    QuadraticCurve\r\n}","import Errors from 'helpers/Errors'\r\nimport { ErrorType, Icon, Tag } from 'static/Enums'\r\n\r\nclass Modal {\r\n    modal: HTMLDialogElement | undefined\r\n\r\n    #content: HTMLDivElement | undefined\r\n\r\n    constructor(content?: HTMLElement, size?: DOMRect, title?: string) {\r\n        this.modal = document.createElement(Tag.Dialog)\r\n\r\n        this.modal.classList.add(ModalClasses.modal)\r\n\r\n        if (size) {\r\n            this.modal.style.width = `${ size.width }px`\r\n            this.modal.style.height = `${ size.height }px`\r\n        }\r\n\r\n        this.modal.oncancel = () => this.close()\r\n\r\n        document.body.appendChild(this.modal)\r\n\r\n        this.#setHeader(title)\r\n\r\n        this.#setContent(content)\r\n    }\r\n\r\n    open() {\r\n        Errors.throwIsUndefined(this.modal, ErrorType.ElementNotExist)\r\n\r\n        this.modal!.showModal()\r\n    }\r\n\r\n    close() {\r\n        Errors.throwIsUndefined(this.modal, ErrorType.ElementNotExist)\r\n\r\n        this.modal!.close()\r\n\r\n        this.modal!.remove()\r\n\r\n        this.modal = undefined\r\n    }\r\n\r\n    #setHeader(title: string | undefined) {\r\n        Errors.throwIsUndefined(this.modal, ErrorType.ElementNotExist)\r\n\r\n        let titleSpan = document.createElement(Tag.Span)\r\n\r\n        titleSpan.classList.add(ModalClasses.title)\r\n        titleSpan.innerHTML = title ?? ''\r\n\r\n        let closeButton = document.createElement(Tag.Button)\r\n\r\n        closeButton.classList.add(ModalClasses.close)\r\n        closeButton.innerHTML = Icon.Close\r\n\r\n        let header = document.createElement(Tag.Div)\r\n\r\n        header.classList.add(ModalClasses.header)\r\n\r\n        header.appendChild(titleSpan)\r\n        header.appendChild(closeButton)\r\n\r\n        this.modal!.appendChild(header)\r\n\r\n        closeButton.onclick = () => this.close()\r\n    }\r\n\r\n    #setContent(content: HTMLElement | undefined) {\r\n        if (this.#content == undefined) {\r\n            this.#content = document.createElement(Tag.Div)\r\n\r\n            this.#content.classList.add(ModalClasses.content)\r\n\r\n            this.modal?.appendChild(this.#content)\r\n        }\r\n\r\n        if (content != undefined)\r\n            this.#content.appendChild(content)\r\n    }\r\n}\r\n\r\nexport default Modal\r\n\r\nclass ModalClasses {\r\n    static modal = 'o-modal'\r\n\r\n    static title = 'o-modal-title'\r\n\r\n    static close = 'o-modal-close'\r\n\r\n    static header = 'o-modal-header'\r\n\r\n    static content = 'o-modal-content'\r\n}","import Value from 'types/base/Value'\r\nimport PlotPoint from 'types/PlotPoint'\r\nimport { LineType, PlotType } from 'static/Enums'\r\n\r\nclass PlotSeries extends Value {\r\n    values: PlotPoint[]\r\n\r\n    type: PlotType\r\n\r\n    width: number\r\n\r\n    lineType: LineType = LineType.Solid\r\n\r\n    constructor(obj: object) {\r\n        super()\r\n\r\n        Object.assign(this, obj)\r\n    }\r\n\r\n    toggle(transition: number) {\r\n        super.toggle(transition)\r\n    }\r\n\r\n    checkCondition(): boolean {\r\n        super.checkCondition()\r\n\r\n        return true\r\n    }\r\n\r\n    reset() {\r\n        super.reset()\r\n    }\r\n}\r\n\r\nexport default PlotSeries","import Value from 'types/base/Value'\r\nimport Renderable from 'types/base/Renderable'\r\nimport * as Helper from 'Helper'\r\nimport Sector from 'types/Sector'\r\nimport Point from 'types/Point'\r\nimport Theme from 'Theme'\r\nimport Chart from 'Chart'\r\nimport TextStyles from 'helpers/TextStyles'\r\nimport Canvas from 'helpers/Canvas'\r\nimport Button from 'Button'\r\nimport TextResources from 'static/TextResources'\r\nimport * as Constants from 'static/constants/Index'\r\nimport Styles from 'static/constants/Styles'\r\nimport { AnimationType, Events, LegendPlace, RenderState } from 'static/Enums'\r\nimport ChartSettings from './types/ChartSettings'\r\n\r\nclass Legend extends Renderable {\r\n    #button: Button\r\n\r\n    #offset: Point\r\n\r\n    #chart: Chart\r\n\r\n    #hoverCount: number\r\n\r\n    isDestroy: boolean = false\r\n\r\n    constructor(chart: Chart) {\r\n        super(chart)\r\n\r\n        this.#chart = chart\r\n\r\n        this.prepareSettings()\r\n    }\r\n\r\n    render() {\r\n        super.render()\r\n\r\n        const ctx = Canvas.getContext(this.canvas)\r\n\r\n        let nextPoint = { x: 20, y: 21 }\r\n\r\n        this.canvas.style.cursor = Styles.Cursor.Default\r\n\r\n        TextStyles.regular(ctx)\r\n        ctx.textAlign = 'start'\r\n        ctx.textBaseline = 'alphabetic'\r\n\r\n        ctx.translate(this.#offset.x, this.#offset.y)\r\n\r\n        this.#hoverCount = 0\r\n\r\n        for (const value of this.settings.data.values.filter(v => !v.hideInLegend))\r\n            nextPoint = this.#draw(value, nextPoint.x, nextPoint.y)\r\n\r\n        ctx.translate(-this.#offset.x, -this.#offset.y)\r\n\r\n        if (!this.isDestroy)\r\n            requestAnimationFrame(this.render.bind(this))\r\n\r\n        this.clickEvent = this.#button?.render(this.moveEvent, this.clickEvent)\r\n\r\n        this.state = RenderState.Idle\r\n    }\r\n\r\n    #draw(value: Value, x: number, y: number): Point {\r\n        const ctx = Canvas.getContext(this.canvas)\r\n\r\n        const textWidth = Helper.stringWidth(value.label),\r\n            circleRadius = 6\r\n\r\n        if (x + 48 + textWidth >= this.canvas.width - 40 - this.#offset.x) {\r\n            x = 20\r\n            y += 26\r\n        }\r\n\r\n        let rectX = x - circleRadius - circleRadius,\r\n            rectY = y - circleRadius / 2 - circleRadius,\r\n            rectW = circleRadius + circleRadius + textWidth + 18,\r\n            rectH = 20\r\n\r\n        const isHover = (event: MouseEvent | undefined) => {\r\n            if (!event)\r\n                return false\r\n\r\n            const px = event.clientX - this.canvasPosition.x + scrollX - this.#offset.x,\r\n                py = event.clientY - this.canvasPosition.y + scrollY - this.#offset.y\r\n\r\n            return px >= rectX && px <= rectX + rectW\r\n                   && py >= rectY && py <= rectY + rectH\r\n        }\r\n\r\n        const translate = (transition: number, event: AnimationType) => {\r\n            this.animations.reload(value.id, event)\r\n\r\n            ctx.beginPath()\r\n\r\n            ctx.roundRect(rectX, rectY, rectW, rectH, circleRadius)\r\n\r\n            ctx.fillStyle = Helper.adjustColor(Theme.canvasBackground, Math.round(-25 * transition))\r\n            ctx.fill()\r\n        }\r\n\r\n        this.animations.handle(value.id,\r\n            AnimationType.Click,\r\n            {\r\n                duration: Constants.Animations.legend,\r\n                continuous: true,\r\n                before: () => {\r\n                    return this.clickEvent != undefined\r\n                           && (isHover(this.clickEvent)\r\n                               || (value instanceof Sector\r\n                                   && value.current !== 0\r\n                                   && value.value !== value.current))\r\n                           && value.checkCondition()\r\n                },\r\n                body: transition => {\r\n                    value.toggle(transition)\r\n\r\n                    if (transition == 1)\r\n                        this.clickEvent = new PointerEvent(Events.Click)\r\n                }\r\n            })\r\n\r\n        if (isHover(this.moveEvent)) {\r\n            this.animations.handle(value.id,\r\n                AnimationType.MouseOver,\r\n                {\r\n                    duration: Constants.Animations.button,\r\n                    body: transition => {\r\n                        translate(transition, AnimationType.MouseLeave)\r\n                    }\r\n                })\r\n\r\n            if (!value.disabled) {\r\n                this.#hoverCount++\r\n\r\n                this.#chart.highlight(value)\r\n            }\r\n\r\n            this.canvas.style.cursor = Styles.Cursor.Pointer\r\n        } else {\r\n            this.animations.handle(value.id,\r\n                AnimationType.MouseLeave,\r\n                {\r\n                    timer: Constants.Dates.minDate,\r\n                    duration: Constants.Animations.button,\r\n                    backward: true,\r\n                    body: transition => {\r\n                        translate(transition, AnimationType.MouseOver)\r\n                    }\r\n                })\r\n        }\r\n\r\n        ctx.beginPath()\r\n\r\n        ctx.arc(x - 1, y + 1, 3, 0, 2 * Math.PI)\r\n        ctx.fillStyle = value.disabled ? Helper.grayScale(value.color) : value.color\r\n        ctx.fill()\r\n\r\n        ctx.fillStyle = Theme.text\r\n        if (value.disabled)\r\n            ctx.fillStyle += '7f'\r\n\r\n        ctx.fillText(value.label, x + circleRadius * 1.5 + 1, y + 6)\r\n\r\n        x += 20\r\n\r\n        if (value.disabled) {\r\n            ctx.moveTo(x - 10, y + 2)\r\n            ctx.lineTo(x + textWidth - 10, y + 2)\r\n            ctx.strokeStyle = Theme.text + '7f'\r\n            ctx.stroke()\r\n        }\r\n\r\n        x += textWidth + 22\r\n\r\n        return {\r\n            x: x,\r\n            y: y\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        this.isDestroy = true\r\n\r\n        this.canvas.remove()\r\n    }\r\n\r\n    refresh() {\r\n        this.state = RenderState.Init\r\n    }\r\n\r\n    resize() {\r\n        this.calculateSizes()\r\n        this.#button?.resize()\r\n        this.initAnimations()\r\n    }\r\n\r\n    calculateSizes() {\r\n        switch (this.settings.legendPlace) {\r\n            case LegendPlace.Bottom:\r\n            default:\r\n                this.canvas.width = this.settings.width\r\n                this.canvas.height = Legend.getLegendHeight(this.settings.data.values, this.canvas.width)\r\n\r\n                this.node.style.flexDirection = Styles.FlexDirection.Column\r\n\r\n                break\r\n\r\n            case LegendPlace.Top:\r\n                this.canvas.width = this.settings.width\r\n                this.canvas.height = Legend.getLegendHeight(this.settings.data.values, this.canvas.width)\r\n\r\n                this.node.style.flexDirection = Styles.FlexDirection.ColumnReverse\r\n\r\n                break\r\n\r\n            case LegendPlace.Left:\r\n                this.canvas.width = 500\r\n                this.canvas.height = this.settings.height\r\n\r\n                this.node.style.flexDirection = Styles.FlexDirection.Row\r\n\r\n                break\r\n\r\n            case LegendPlace.Right:\r\n                this.canvas.width = 500\r\n                this.canvas.height = this.settings.height\r\n\r\n                this.node.style.flexDirection = Styles.FlexDirection.RowReverse\r\n\r\n                break\r\n        }\r\n\r\n        this.#offset = {\r\n            x: Legend.getOffsetToCenter(this.settings.data.values, this.canvas.width),\r\n            y: (this.canvas.height - Legend.getLegendHeight(this.settings.data.values, this.canvas.width)) / 2\r\n        }\r\n    }\r\n\r\n    applySettings(settings: ChartSettings) {\r\n        this.settings = settings\r\n\r\n        this.prepareSettings()\r\n    }\r\n\r\n    prepareSettings() {\r\n        this.resize()\r\n\r\n        if (!this.settings.disableInteractions)\r\n            this.#button = new Button(this.canvas,\r\n                {\r\n                    x: -10,\r\n                    y: 12,\r\n                    text: TextResources.reset,\r\n                    action: () => {\r\n                        for (let value of this.settings.data.values)\r\n                            value.reset()\r\n                    }\r\n                })\r\n    }\r\n\r\n    static getOffsetToCenter(values: Value[], width: number): number {\r\n        let maxWidth = 20\r\n\r\n        for (const value of values.filter(v => !v.hideInLegend)) {\r\n            const labelWidth = Helper.stringWidth(value.label)\r\n\r\n            if (maxWidth + labelWidth + 47 >= width - 100)\r\n                break\r\n\r\n            maxWidth += labelWidth + 47\r\n        }\r\n\r\n        return width / 2 - maxWidth / 2\r\n    }\r\n\r\n    static getLegendHeight(values: Value[], width: number): number {\r\n        let count = 1,\r\n            acc = 20,\r\n            offset = Legend.getOffsetToCenter(values, width)\r\n\r\n        for (const value of values.filter(v => !v.hideInLegend)) {\r\n            const labelWidth = Helper.stringWidth(value.label)\r\n\r\n            if (acc + labelWidth + 48 >= width - 32 - offset) {\r\n                acc = 20\r\n                count++\r\n            }\r\n\r\n            acc += labelWidth + 48\r\n        }\r\n\r\n        return 24 + count * 20 + (count - 1) * 6\r\n    }\r\n}\r\n\r\nexport default Legend","export class Values {\r\n    static readonly titleOffset = 30\r\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n__webpack_require__(281);\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(832);\n"],"names":["Animations","constructor","this","Map","handle","id","type","value","key","has","set","contains","reload","get","timer","Date","clear","forEach","_value","AnimationType","Init","delete","reverse","item","stamp","passed","getTime","reversedPassed","duration","backward","isBackward","isEnd","end","Constants","Dates","minDate","initializeTransitions","i","t","x","Math","pow","y","transitionCurve","toFixed","getTransition","transition","before","body","continuous","endsWith","color","amount","replace","min","max","parseInt","toString","slice","Array","join","round","reduce","a","v","padStart","floor","random","str","font","widths","from","String","acc","cur","charCodeAt","S4","substring","toLowerCase","background","foreground","backgroundAsRgb","hexToRgb","foregroundAsRgb","r","g","b","test","opacity","hex","result","getHexValues","getColor","rgb","bg","canvasBackground","alpha","toHex","c","length","rgbToHex","red","green","blue","getShortHexValues","exec","text","Errors","error","Error","throwIsUndefined","object","undefined","throw","settings","enableTooltip","disableInteractions","destroy","ChartType","Plot","Circular","Gauge","TreeMap","applySettings","prepareSettings","initDropdown","initAnimations","resize","refresh","initialize","isDarkThemeFunction","node","style","display","Display","Flex","flexDirection","FlexDirection","Column","alignItems","AlignItems","Center","justifyContent","JustifyContent","height","ResizeObserver","canvas","observe","context","document","addEventListener","Events","VisibilityChanged","resetMouse","window","Blur","Click","event","target","closeDropdowns","render","disconnect","highlight","reset","isNeedRestartRender","enableLegend","circular","legend","tree","tooltip","button","Sector","obj","super","Object","assign","baseColor","canRenderLabel","isMouseInside","toggle","disabled","current","checkCondition","TextResources","exportPNG","decomposeToTable","exportCSV","menu","allDataIsHidden","other","thousandShort","millionShort","billionShort","show","noLabel","treeMapIsEmpty","dataAsTable","getContext","willReadFrequently","ErrorType","NullContext","isPixelBusy","pixel","canvasBackgroundInt","ctx","textWidth","map","line","Helper","stringWidth","clientX","clientY","scrollY","width","beginPath","roundRect","baseOpacity","strokeStyle","dropdownBorder","lineWidth","fillStyle","stroke","fill","offset","arc","PI","fillText","padding","getElementById","updateVisibility","visibility","Visibility","Visible","regex","content","cloneNode","createElement","Tag","Div","innerHTML","position","Position","Absolute","pointerEvents","PointerEvents","None","setAttribute","Attribute","Name","matches","matchAll","html","match","property","replaceAll","data","appendChild","getBoundingClientRect","Hidden","left","top","tooltips","querySelectorAll","opacityValue","templateId","condition","lines","scrollX","ThemeOptions","colors","backgrounds","lineAxes","lineActives","dropdownBorders","canvasBackgrounds","args","base","JSON","parse","stringify","getRows","headers","values","series","seriesValues","push","xType","PlotAxisType","date","name","label","unique","Set","uniqueHeaders","filter","add","sort","Number","prototype","isAnyEquals","includes","addDays","days","setDate","getDate","addMilliseconds","milliseconds","setMilliseconds","getMilliseconds","trySet","sum","predicate","Styles","Cursor","Default","Pointer","ColumnReverse","Row","RowReverse","ImageRendering","Pixelated","w","h","trueX","trueY","options","isActive","icon","animations","moveEvent","clickEvent","translate","adjustColor","cursor","MouseOver","MouseLeave","regular","iconOffset","navigator","platform","borderRadius","items","dividers","maxWidth","dropdownOpacity","itemOpacityDec","itemBackground","dropdownItemHoverColor","borderColor","rect","setLineDash","isDivider","moveTo","lineTo","animationKey","isReturn","action","textAlign","textBaseline","close","Theme","callback","isDark","function","matchMedia","setTheme","Change","index","currentTheme","lineAxis","lineActive","CircularRenderer","chart","startAngle","isMousePositionChanged","prevMousePos","MouseEvent","MouseMove","calculateAngles","valuesSum","anglesSum","angles","flatMap","sector","angle","getAngle","find","o","getAccumulator","calculatePoint","accumulator","getPoint","radius","center","cos","sin","startPoint","nextPoint","points","direction","labelStartPoint","labelMidPoint","dir","endPoint","labelPoints","DrawPointType","Move","QuadraticCurve","isDonut","Line","localAccumulator","localAngle","currentAngle","tangentIntersectionAngle","tangentIntersectionPoint","innerRadius","innerPoint2","scale","centerOfSector","setArgs","p","sqrt","ratio","focus","applyAlpha","textColor","outline","lineStyles","lineJoin","lineCap","state","isBusy","imageDataX","imageDataY","imageData","Uint32Array","getImageData","buffer","drawLabel","quadraticCurveTo","circularLabel","drawSector","point","closePath","animate","indexOf","_transition","s","AnotherItemOver","AnotherItemLeave","isInsideCircle","isInsideSector","isInsideSectorClick","hover","pinned","isAnyCollapsing","getMousePosition","isWithinRadius","empty","renderDropdown","currentHover","isAnyHover","contextMenu","renderContextMenu","menuEvent","dropdown","format","valuePostfix","innerTitle","isDestroy","requestAnimationFrame","bind","atan2","abs","findIndex","sumBefore","isAngle","canRenderInnerTitle","innerTitleStyle","calculateSizes","titleOffset","title","Values","shortSide","longestLabel","large","console","warn","enableOther","_other","toChart","innerWidth","innerHeight","open","splice","guid","disableInitAnimation","Icon","ThreeLines","asPng","asCsv","toTable","Renderer","highlightItems","RenderState","Idle","renderTitle","remove","domRect","parentElement","minWidth","isNaN","minHeight","calculateColors","dispatchEvent","CustomEvent","detail","force","randomColor","clone","canvasPosition","isClick","legendPlace","LegendPlace","Top","Bottom","getLegendHeight","Left","Right","PlotRenderer","tooltipLines","axisLineHoverColor","yValue","yHeight","columnWidth","seriesToRender","columnsIndex","columnsCount","PlotType","barsIndex","barsCount","Bar","stackingAccumulator","anyHighlight","changeColor","lineType","LineType","Dash","Dotted","Solid","xIndex","yIndex","getTooltipValue","step","unit","pointDuration","now","next","prevValue","endPointX","endPointY","mouse","AttentionLine","bottom","right","yMax","minStep","seriesHeight","fillRect","StackingColumn","ceil","it","isISOString","simple","skip","clearRect","drawImage","isContainsBar","xTitle","yTitle","rotate","resetTransform","xYPos","xCounter","maxLabelWidth","maxCount","renderStep","axisLabelOffset","yCount","count","yCounter","yStep","labelY","labelYAsKey","postfix","shortLabels","countOfTens","number","isBar","createImageBitmap","then","res","putImageData","axisLineColor","xValues","yValues","isDate","tempDate","yMin","stackingColumns","yMaxWidth","isRight","Canvas","imageRendering","append","onmousemove","onclick","oncontextmenu","preventDefault","onmouseleave","TreeRenderer","maxHeight","tooltipCell","contextMenuData","totalSquare","minX","minY","isVertical","remainWidth","remainHeight","cells","isSingle","isLast","j","h1","w1","cell","cellInit","cellIndex","getPrev","E","initAnimationDuration","minSize","rest","gap","isColorVisible","table","classList","totals","rows","valuesMap","tableValue","allColumns","header","indexSpaces","tableHeader","columns","vKey","vValue","totalValue","trim","totalColumns","container","div","script","Script","flexGrow","cloneSettings","GaugeRenderer","piece","point1","point2","point3","inner","outerRadius","longSide","Export","leftEmpty","rightEmpty","destinationCanvas","destCtx","saveAs","toDataURL","csv","row","cols","encodeURIComponent","dataURL","href","isText","showSaveFilePicker","suggestedName","types","accept","excludeAcceptAllOption","toBlob","dataURI","byteString","atob","split","mimeString","ArrayBuffer","imageArray","Uint8Array","Blob","fileHandle","createWritable","writableStream","write","download","A","click","Formatter","Text","toLocaleString","minimumFractionDigits","maximumFractionDigits","toLocaleDateString","OCharts","modal","ElementNotExist","titleSpan","Span","ModalClasses","closeButton","Button","Close","size","Dialog","oncancel","showModal","PlotSeries","Legend","hideInLegend","getOffsetToCenter","labelWidth","rectX","rectY","circleRadius","rectW","isHover","px","py","PointerEvent","grayScale","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call"],"sourceRoot":""}