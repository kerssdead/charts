{"version":3,"file":"ocharts.js","mappings":"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","sources":["webpack://charts/./src/Animations.ts","webpack://charts/./src/Helper.ts","webpack://charts/./src/types/TooltipValue.ts","webpack://charts/./src/helpers/Errors.ts","webpack://charts/./src/Chart.ts","webpack://charts/./src/types/Color.ts","webpack://charts/./src/static/constants/Animations.ts","webpack://charts/./src/types/PlotPoint.ts","webpack://charts/./src/types/Sector.ts","webpack://charts/./src/static/TextResources.ts","webpack://charts/./src/static/constants/Plot.ts","webpack://charts/./src/helpers/Canvas.ts","webpack://charts/./src/Tooltip.ts","webpack://charts/./src/static/ThemeOptions.ts","webpack://charts/./src/types/DrawPoint.ts","webpack://charts/./src/types/data/PlotData.ts","webpack://charts/./src/Prototypes.ts","webpack://charts/./src/static/constants/Styles.ts","webpack://charts/./src/types/Box.ts","webpack://charts/./src/types/Point.ts","webpack://charts/./src/Dropdown.ts","webpack://charts/./src/Theme.ts","webpack://charts/./src/render/CircularRenderer.ts","webpack://charts/./src/types/base/Renderer.ts","webpack://charts/./src/types/data/TreeData.ts","webpack://charts/./src/types/data/CircularData.ts","webpack://charts/./src/types/base/Value.ts","webpack://charts/./src/render/PlotRenderer.ts","webpack://charts/./src/static/constants/Dates.ts","webpack://charts/./src/helpers/TextStyles.ts","webpack://charts/./src/types/base/Renderable.ts","webpack://charts/./src/render/TreeRenderer.ts","webpack://charts/./src/Decomposition.ts","webpack://charts/./src/static/constants/Index.ts","webpack://charts/./src/render/GaugeRenderer.ts","webpack://charts/./src/Export.ts","webpack://charts/./src/helpers/Formatter.ts","webpack://charts/./src/Button.ts","webpack://charts/./src/OCharts.ts","webpack://charts/./src/static/Enums.ts","webpack://charts/./src/Modal.ts","webpack://charts/./src/types/PlotSeries.ts","webpack://charts/./src/types/DropdownItem.ts","webpack://charts/./src/Legend.ts","webpack://charts/./src/static/constants/Values.ts","webpack://charts/webpack/bootstrap","webpack://charts/webpack/startup"],"sourcesContent":["import AnimationItem from 'types/AnimationItem'\r\nimport { AnimationType } from 'static/Enums'\r\nimport * as Constants from 'static/constants/Index'\r\n\r\nclass Animations {\r\n    #queue: Map<string, AnimationItem>\r\n\r\n    static transitionCurve: Map<number, number> = new Map()\r\n\r\n    constructor() {\r\n        this.#queue = new Map()\r\n    }\r\n\r\n    handle(id: string, type: AnimationType, value: AnimationItem) {\r\n        const key = this.#getKey(id, type)\r\n        if (!this.#queue.has(key))\r\n            this.#queue.set(key, value)\r\n\r\n        this.#process(key)\r\n    }\r\n\r\n    contains(id: string, type: AnimationType): boolean {\r\n        return this.#queue.has(this.#getKey(id, type))\r\n    }\r\n\r\n    reload(id: string, type: AnimationType) {\r\n        if (this.contains(id, type)) {\r\n            let item = <AnimationItem>this.#queue.get(this.#getKey(id, type))\r\n\r\n            item.timer = new Date()\r\n        }\r\n    }\r\n\r\n    clear() {\r\n        this.#queue.forEach((_value, key) => !this.#is(key, AnimationType.Init) && this.#queue.delete(key))\r\n    }\r\n\r\n    reverse(id: string, type: AnimationType) {\r\n        if (this.contains(id, type)) {\r\n            let item = <AnimationItem>this.#queue.get(this.#getKey(id, type)),\r\n                stamp = new Date(),\r\n                passed = stamp.getTime() - (item.timer ?? stamp).getTime()\r\n\r\n            let reversedPassed = passed > item.duration ? 1 : item.duration - passed\r\n\r\n            item.timer = new Date(new Date().getTime() - reversedPassed)\r\n            item.backward = !item.backward\r\n        }\r\n    }\r\n\r\n    isBackward(id: string, type: AnimationType) {\r\n        return (this.#queue.get(this.#getKey(id, type)) as AnimationItem)?.backward ?? false\r\n    }\r\n\r\n    isEnd(id: string, type: AnimationType) {\r\n        let item = <AnimationItem>this.#queue.get(this.#getKey(id, type)),\r\n            stamp = new Date(),\r\n            passed = stamp.getTime() - (item.timer ?? stamp).getTime()\r\n\r\n        return passed >= item.duration\r\n    }\r\n\r\n    end(id: string, type: AnimationType) {\r\n        let item = <AnimationItem>this.#queue.get(this.#getKey(id, type))\r\n\r\n        if (item)\r\n            item.timer = Constants.Dates.minDate\r\n    }\r\n\r\n    #process(key: string) {\r\n        const item = <AnimationItem>this.#queue.get(key),\r\n            stamp = new Date(),\r\n            passed = stamp.getTime() - (item.timer ?? stamp).getTime(),\r\n            transition = Animations.getTransition(passed > item.duration ? 1 : passed / item.duration),\r\n            before = item.before ? item.before() : true\r\n\r\n        if (!item.timer && before)\r\n            item.timer = stamp\r\n\r\n        if (before)\r\n            item.body(item.backward ? 1 - transition : transition)\r\n\r\n        if (transition == 1 && (!before || item.continuous))\r\n            this.#queue.delete(key)\r\n    }\r\n\r\n    #getKey(id: string, type: number) {\r\n        return id + '_' + type\r\n    }\r\n\r\n    #is(key: string, type: number) {\r\n        return key.endsWith('_' + type)\r\n    }\r\n\r\n    static initializeTransitions() {\r\n        const valuesCount = 22820,\r\n            offset = .23,\r\n            p0 = { x: 0, y: 0 },\r\n            p1 = { x: 1 - offset, y: offset },\r\n            p2 = { x: offset, y: 1 - offset },\r\n            p3 = { x: 1, y: 1 }\r\n\r\n        for (let i = 0; i < valuesCount; i++) {\r\n            const t = (i + 1) / valuesCount\r\n\r\n            let x = Math.pow(1 - t, 3) * p0.x\r\n                    + 3 * Math.pow(1 - t, 2) * p1.x * t\r\n                    + 3 * (1 - t) * Math.pow(t, 2) * p2.x\r\n                    + Math.pow(t, 3) * p3.x,\r\n                y = Math.pow(1 - t, 3) * p0.y\r\n                    + 3 * Math.pow(1 - t, 2) * p1.y * t\r\n                    + 3 * (1 - t) * Math.pow(t, 2) * p2.y\r\n                    + Math.pow(t, 3) * p3.y\r\n\r\n            Animations.transitionCurve.set(+x.toFixed(4), y)\r\n        }\r\n\r\n        Animations.transitionCurve.set(0, 0)\r\n    }\r\n\r\n    static getTransition(value: number): number {\r\n        return Animations.transitionCurve.get(+value.toFixed(4)) ?? 0\r\n    }\r\n}\r\n\r\nexport default Animations","import Color from 'types/Color'\r\nimport Theme from 'Theme'\r\nimport Errors from 'helpers/Errors'\r\nimport { ErrorType } from 'static/Enums'\r\nimport { Plot } from 'static/constants/Index'\r\n\r\nexport function adjustColor(color: string, amount: number) {\r\n    return '#' + color.replace(/^#/, '').replace(/../g, color => ('0' + Math.min(255, Math.max(0, parseInt(color, 16) + amount)).toString(16)).slice(-2))\r\n}\r\n\r\nexport function grayScale(color: string) {\r\n    return '#' + Array(4).join(Math.round([.3, .59, .11].reduce((a, v, i) => a + v * parseInt(color[2 * i + 1] + color[2 * i + 2], 16), 0) / 3).toString(16).padStart(2, '0'))\r\n}\r\n\r\nexport function randomColor() {\r\n    let letters = '0123456789ABCDEF',\r\n        color = '#'\r\n    for (let i = 0; i < 6; i++)\r\n        color += letters[Math.floor(Math.random() * 16)]\r\n\r\n    return color\r\n}\r\n\r\nexport function stringWidth(str: any | undefined, font?: number) {\r\n    if (!str)\r\n        return 0\r\n\r\n    const widths = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.559375, 0.2765625, 0.3546875, 0.5546875, 0.5546875, 0.8890625, 0.665625, 0.190625, 0.3328125, 0.3328125, 0.3890625, 0.5828125, 0.2765625, 0.3328125, 0.2765625, 0.3015625, 0.5546875, 0.5546875, 0.5546875, 0.5546875, 0.5546875, 0.5546875, 0.5546875, 0.5546875, 0.5546875, 0.5546875, 0.2765625, 0.2765625, 0.584375, 0.5828125, 0.584375, 0.5546875, 1.0140625, 0.665625, 0.665625, 0.721875, 0.721875, 0.665625, 0.609375, 0.7765625, 0.721875, 0.2765625, 0.5, 0.665625, 0.5546875, 0.8328125, 0.721875, 0.7765625, 0.665625, 0.7765625, 0.721875, 0.665625, 0.609375, 0.721875, 0.665625, 0.94375, 0.665625, 0.665625, 0.609375, 0.2765625, 0.3546875, 0.2765625, 0.4765625, 0.5546875, 0.3328125, 0.5546875, 0.5546875, 0.5, 0.5546875, 0.5546875, 0.2765625, 0.5546875, 0.5546875, 0.221875, 0.240625, 0.5, 0.221875, 0.8328125, 0.5546875, 0.5546875, 0.5546875, 0.5546875, 0.3328125, 0.5, 0.2765625, 0.5546875, 0.5, 0.721875, 0.5, 0.5, 0.5, 0.3546875, 0.259375, 0.353125, 0.5890625],\r\n        avg = 0.5279276315789471\r\n\r\n    return Array.from(String(str)).reduce((acc, cur) => acc + (widths[cur.charCodeAt(0)] ?? avg), 0) * (font || 14)\r\n}\r\n\r\nexport function guid() {\r\n    const S4 = () => (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1)\r\n    return (S4() + S4() + '-' + S4() + '-4' + S4().slice(0, 3) + '-' + S4() + '-' + S4() + S4() + S4()).toLowerCase()\r\n}\r\n\r\nexport function isColorVisible(background: string, foreground: string) {\r\n    const backgroundAsRgb = hexToRgb(background),\r\n        foregroundAsRgb = hexToRgb(foreground),\r\n        value = .77\r\n\r\n    return (backgroundAsRgb.r + backgroundAsRgb.g + backgroundAsRgb.b) / (foregroundAsRgb.r + foregroundAsRgb.g + foregroundAsRgb.b) < value\r\n}\r\n\r\nexport function getColor(red: string, green: string, blue: string) {\r\n    return {\r\n        r: parseInt(red, 16),\r\n        g: parseInt(green, 16),\r\n        b: parseInt(blue, 16)\r\n    } as Color\r\n}\r\n\r\nexport function hexToRgb(hex: string): Color {\r\n    if (hex.length > 4) {\r\n        const value = getHexValues(hex)\r\n        if (value)\r\n            return getColor(value[1], value[2], value[3])\r\n    } else {\r\n        const value = getShortHexValues(hex)\r\n        if (value)\r\n            return getColor(\r\n                value[1] + value[1],\r\n                value[2] + value[2],\r\n                value[3] + value[3]\r\n            )\r\n    }\r\n\r\n    return new Color()\r\n}\r\n\r\nexport function isISOString(str: string) {\r\n    return /\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d\\.\\d+/.test(str)\r\n}\r\n\r\nexport function getHexValues(str: string) {\r\n    return /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(str)\r\n}\r\n\r\nexport function getShortHexValues(str: string) {\r\n    return /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i.exec(str)\r\n}\r\n\r\nexport function applyAlpha(color: string, opacity: number) {\r\n    function hexToRgb(hex: string) {\r\n        const result = getHexValues(hex)\r\n        return result ? getColor(result[1], result[2], result[3]) : new Color()\r\n    }\r\n\r\n    function rgbToHex(r: number, g: number, b: number) {\r\n        function toHex(c: number) {\r\n            let hex = c.toString(16)\r\n            return hex.length == 1 ? '0' + hex : hex\r\n        }\r\n\r\n        return '#' + toHex(r) + toHex(g) + toHex(b)\r\n    }\r\n\r\n    const rgb = hexToRgb(color),\r\n        bg = hexToRgb(Theme.canvasBackground)\r\n\r\n    opacity /= 255\r\n\r\n    const alpha = 1 - opacity\r\n\r\n    return rgbToHex(\r\n        Math.round((opacity * (rgb.r / 255) + (alpha * (bg.r / 255))) * 255),\r\n        Math.round((opacity * (rgb.g / 255) + (alpha * (bg.g / 255))) * 255),\r\n        Math.round((opacity * (rgb.b / 255) + (alpha * (bg.b / 255))) * 255)\r\n    )\r\n}\r\n\r\nexport function getRoundedValues(all: number[]) {\r\n    let min = Math.min(...all),\r\n        max = Math.max(...all)\r\n\r\n    if (min > 0)\r\n        min = 0\r\n\r\n    const negativeElements = all.filter(v => v < 0).length,\r\n        hasNegative = negativeElements > 0\r\n\r\n    let countOfElements = all.length\r\n    if (!all.includes(0))\r\n        countOfElements++\r\n    if (countOfElements > Plot.maxLabelsCount)\r\n        countOfElements = Plot.maxLabelsCount\r\n    if (countOfElements % 2 == 0)\r\n        countOfElements++\r\n    if (hasNegative)\r\n        countOfElements++\r\n\r\n    const isSatisfyDividing = (value: number) => {\r\n        const divides = [10, 7.5, 5, 2.5, 2]\r\n\r\n        let satisfied = 0\r\n\r\n        value = Math.abs(value)\r\n\r\n        for (const d of divides)\r\n            satisfied += value % d == 0 ? 1 : 0\r\n\r\n        return satisfied >= 4\r\n    }\r\n\r\n    const isSatisfyElementsCount = (values: number[]) => {\r\n        return values.length == countOfElements\r\n    }\r\n\r\n    const amplitude = Math.abs(min) + Math.abs(max)\r\n\r\n    let startValue = amplitude / countOfElements\r\n\r\n    let attempt = 0,\r\n        value = 0\r\n\r\n    let step = 1\r\n\r\n    const isFractional = Math.abs(min) < 10 && Math.abs(max) < 10\r\n\r\n    if (isFractional)\r\n        step = .1\r\n    else\r\n        value = Math.round(startValue)\r\n\r\n    const round = (value: number) => {\r\n        return Math.round((value + Number.EPSILON) * 100) / 100\r\n    }\r\n\r\n    let startIndex = 0,\r\n        endIndex = countOfElements + startIndex\r\n\r\n    if (hasNegative) {\r\n        const negativeWeight = Math.abs(min) / amplitude\r\n        startIndex = -Math.floor(countOfElements * negativeWeight)\r\n        endIndex = countOfElements + startIndex\r\n\r\n        if (max > 0 && endIndex <= 1) {\r\n            startIndex++\r\n            endIndex++\r\n        }\r\n    }\r\n\r\n    while (true) {\r\n        if (!isFinite(value))\r\n            return []\r\n\r\n        if (isSatisfyDividing(value) || isFractional) {\r\n            let result = []\r\n\r\n            for (let i = startIndex; i < endIndex; i++)\r\n                result.push(round(value * i))\r\n\r\n            if (result[0] > min || result[result.length - 1] <= max)\r\n                result = []\r\n\r\n            if (isSatisfyElementsCount(result))\r\n                return result\r\n        }\r\n\r\n        value = round(value + step)\r\n        attempt = round(attempt + step)\r\n\r\n        if (attempt > amplitude)\r\n            throw Errors.throw(ErrorType.MaxCallsReach)\r\n    }\r\n}","class TooltipValue {\r\n    text: string | undefined\r\n\r\n    color: string | undefined\r\n\r\n    constructor(text?: string, color?: string) {\r\n        this.text = text\r\n        this.color = color\r\n    }\r\n}\r\n\r\nexport default TooltipValue","import { ErrorType } from 'static/Enums'\r\n\r\nabstract class Errors {\r\n    static throw(error: ErrorType): never {\r\n        throw new Error(error)\r\n    }\r\n\r\n    static throwIsUndefined(object: any, error: ErrorType) {\r\n        if (object == undefined)\r\n            Errors.throw(error)\r\n    }\r\n}\r\n\r\nexport default Errors","import ChartSettings from 'types/ChartSettings'\r\nimport Renderer from 'types/base/Renderer'\r\nimport Data from 'types/interfaces/Data'\r\nimport Legend from 'Legend'\r\nimport Value from 'types/base/Value'\r\nimport PlotRenderer from 'render/PlotRenderer'\r\nimport GaugeRenderer from 'render/GaugeRenderer'\r\nimport TreeRenderer from 'render/TreeRenderer'\r\nimport Animations from 'Animations'\r\nimport Theme from 'Theme'\r\nimport Styles from 'static/constants/Styles'\r\nimport { ChartType, Events } from 'static/Enums'\r\nimport CircularRenderer from 'render/CircularRenderer'\r\n\r\nclass Chart {\r\n    node: HTMLElement\r\n\r\n    settings: ChartSettings\r\n\r\n    #renderer: Renderer<Data>\r\n\r\n    #legend: Legend | undefined\r\n\r\n    #observer: ResizeObserver\r\n\r\n    #currentType: ChartType\r\n\r\n    constructor(context: HTMLElement, settings: ChartSettings) {\r\n        this.node = context\r\n\r\n        this.applySettings(settings)\r\n\r\n        this.#applyStyles()\r\n\r\n        document.addEventListener(Events.VisibilityChanged, () => this.#renderer.resetMouse())\r\n        window.addEventListener(Events.Blur, () => this.#renderer.resetMouse())\r\n\r\n        window.addEventListener(Events.Click, event => {\r\n            if (event.target != this.#renderer.canvas)\r\n                this.#renderer.closeDropdowns()\r\n        })\r\n    }\r\n\r\n    render() {\r\n        this.#renderer.render()\r\n        this.#legend?.render()\r\n\r\n        this.#initializeObserver()\r\n\r\n        this.#refresh()\r\n    }\r\n\r\n    destroy() {\r\n        this.#renderer.destroy()\r\n        this.#legend?.destroy()\r\n\r\n        this.#observer.disconnect()\r\n    }\r\n\r\n    highlight(value?: Value) {\r\n        this.#renderer.highlight(value)\r\n    }\r\n\r\n    reset() {\r\n        Theme.reset()\r\n\r\n        this.#initialize(this.settings)\r\n    }\r\n\r\n    applySettings(settings: ChartSettings) {\r\n        this.settings = settings\r\n\r\n        this.reset()\r\n\r\n        const isNeedRestartRender = this.settings.type != this.#currentType\r\n\r\n        this.#prepareSettings()\r\n\r\n        if (this.settings.enableLegend && this.#legend != undefined)\r\n            this.#legend.applySettings(settings)\r\n\r\n        if (this.settings.enableLegend && this.#legend == undefined) {\r\n            this.#legend = new Legend(this)\r\n\r\n            this.#legend.render()\r\n        }\r\n\r\n        if (!this.settings.enableLegend && this.#legend != undefined) {\r\n            this.#legend.destroy()\r\n\r\n            this.#legend = undefined\r\n        }\r\n\r\n        if (isNeedRestartRender)\r\n            this.#renderer.render()\r\n\r\n        this.#initializeObserver()\r\n    }\r\n\r\n    #prepareSettings() {\r\n        this.settings.enableTooltip = !this.settings.disableInteractions && this.settings.enableTooltip\r\n\r\n        if (this.#renderer == undefined || this.settings.type != this.#currentType) {\r\n            this.#renderer?.destroy()\r\n\r\n            switch (this.settings.type) {\r\n                case ChartType.Plot:\r\n                    this.#renderer = new PlotRenderer(this)\r\n                    this.#currentType = ChartType.Plot\r\n                    break\r\n\r\n                case ChartType.Circular:\r\n                    this.#renderer = new CircularRenderer(this)\r\n                    this.#currentType = ChartType.Circular\r\n                    break\r\n\r\n                case ChartType.Gauge:\r\n                    this.#renderer = new GaugeRenderer(this)\r\n                    this.#currentType = ChartType.Gauge\r\n                    break\r\n\r\n                case ChartType.TreeMap:\r\n                    this.#renderer = new TreeRenderer(this)\r\n                    this.#currentType = ChartType.TreeMap\r\n                    break\r\n            }\r\n        } else {\r\n            this.#renderer.applySettings(this.settings)\r\n        }\r\n\r\n        this.#renderer.prepareSettings()\r\n\r\n        if (!this.settings.disableInteractions) {\r\n            this.#renderer.initDropdown()\r\n            this.#renderer.initAnimations()\r\n        }\r\n\r\n        this.#renderer.resize()\r\n    }\r\n\r\n    #refresh() {\r\n        this.#renderer.refresh()\r\n        this.#legend?.refresh()\r\n    }\r\n\r\n    #resize() {\r\n        this.#renderer.resize()\r\n        this.#legend?.resize()\r\n    }\r\n\r\n    #initialize(settings: ChartSettings) {\r\n        Theme.initialize(\r\n            () => this.#resize(),\r\n            settings.isDarkThemeFunction\r\n        )\r\n        Animations.initializeTransitions()\r\n    }\r\n\r\n    #applyStyles() {\r\n        this.node.style.display = Styles.Display.Flex\r\n        this.node.style.flexDirection = Styles.FlexDirection.Column\r\n        this.node.style.alignItems = Styles.AlignItems.Center\r\n        this.node.style.justifyContent = Styles.JustifyContent.Center\r\n        this.node.style.height = '100%'\r\n    }\r\n\r\n    #initializeObserver() {\r\n        if (this.#observer != undefined)\r\n            return\r\n\r\n        this.#observer = new ResizeObserver(() => {\r\n            if (this.#renderer.canvas)\r\n                this.#resize()\r\n            else\r\n                this.destroy()\r\n        })\r\n        this.#observer.observe(this.node)\r\n    }\r\n}\r\n\r\nexport default Chart","class Color {\r\n    r: number\r\n\r\n    g: number\r\n\r\n    b: number\r\n}\r\n\r\nexport default Color","export class Animations {\r\n    static circular = 335\r\n\r\n    static legend = 500\r\n\r\n    static tree = 250\r\n\r\n    static tooltip = 120\r\n\r\n    static button = 200\r\n}","import Value from 'types/base/Value'\r\n\r\nclass PlotPoint extends Value {\r\n    x: number | Date | string\r\n\r\n    y: number | Date | string\r\n\r\n    constructor(obj: object) {\r\n        super()\r\n\r\n        Object.assign(this, obj)\r\n    }\r\n\r\n    // TODO: better name ?\r\n    inverse() {\r\n        const x = this.x\r\n        this.x = this.y as any\r\n        this.y = x as any\r\n    }\r\n}\r\n\r\nexport default PlotPoint","import Value from 'types/base/Value'\r\nimport Point from 'types/Point'\r\nimport DrawPoint from 'types/DrawPoint'\r\nimport { AnimationType } from 'static/Enums'\r\nimport LineStyles from 'types/LineStyles'\r\n\r\nclass Sector extends Value {\r\n    canRenderLabel: boolean | undefined\r\n\r\n    isMouseInside: boolean\r\n\r\n    current: number\r\n\r\n    transition: number\r\n\r\n    innerRadius: number\r\n\r\n    /**\r\n     * Angle in radians\r\n     */\r\n    direction: number\r\n\r\n    lineStyles: LineStyles | undefined\r\n\r\n    translate: Point\r\n\r\n    state: AnimationType\r\n\r\n    points: DrawPoint[]\r\n\r\n    labelPoints: DrawPoint[]\r\n\r\n    constructor(obj: object) {\r\n        super()\r\n\r\n        Object.assign(this, obj)\r\n\r\n        this.baseColor = this.color\r\n        this.canRenderLabel = false\r\n        this.isMouseInside = false\r\n    }\r\n\r\n    toggle(transition: number) {\r\n        super.toggle(transition)\r\n\r\n        if (this.disabled)\r\n            this.current = this.value * (1 - transition)\r\n        else\r\n            this.current = this.value * transition\r\n    }\r\n\r\n    checkCondition(): boolean {\r\n        super.checkCondition()\r\n\r\n        return (this.current == 0 && !this.disabled) || this.value != 0\r\n    }\r\n\r\n    reset() {\r\n        super.reset()\r\n\r\n        this.current = this.value\r\n    }\r\n}\r\n\r\nexport default Sector","class TextResources {\r\n    static exportPNG = 'Save as image...'\r\n\r\n    static decomposeToTable = 'Show as table...'\r\n\r\n    static reset = 'Reset'\r\n\r\n    static exportCSV = 'Save as table...'\r\n\r\n    static menu = 'Menu'\r\n\r\n    static allDataIsHidden = 'All data is hidden'\r\n\r\n    static other = 'Other'\r\n\r\n    static thousandShort = 'K'\r\n\r\n    static millionShort = 'M'\r\n\r\n    static billionShort = 'B'\r\n\r\n    static show = 'Show...'\r\n\r\n    static noLabel = 'No Label'\r\n\r\n    static treeMapIsEmpty = 'Tree Map is empty'\r\n\r\n    static dataAsTable = 'Data as table'\r\n}\r\n\r\nexport default TextResources","export class Plot {\r\n    static readonly maxLabelsCount = 6\r\n}","import Errors from 'helpers/Errors'\r\nimport { ErrorType } from 'static/Enums'\r\nimport Theme from 'Theme'\r\nimport * as Helper from 'Helper'\r\n\r\nabstract class Canvas {\r\n    static getContext(canvas: HTMLCanvasElement): CanvasRenderingContext2D {\r\n        return canvas.getContext('2d', { willReadFrequently: true })\r\n               ?? Errors.throw(ErrorType.NullContext)\r\n    }\r\n\r\n    static isPixelBusy(pixel: number) {\r\n        return pixel != undefined && pixel - Theme.canvasBackgroundInt != 0\r\n    }\r\n\r\n    static isCanRender(\r\n        ctx: CanvasRenderingContext2D,\r\n        x: number,\r\n        y: number,\r\n        w: number | string,\r\n        h: number,\r\n        isLeft?: boolean\r\n    ) {\r\n        const width = typeof w == 'number' ? w : Helper.stringWidth(w)\r\n\r\n        const pos = !isLeft\r\n                    ? { x: x - width / 2, y: y - h / 2 }\r\n                    : { x: x, y: y + h / 2 }\r\n\r\n        const imageData = isLeft\r\n                          ? new Uint32Array(ctx.getImageData(pos.x - width, pos.y - h, width, h).data.buffer)\r\n                          : new Uint32Array(ctx.getImageData(pos.x, pos.y, width, h).data.buffer)\r\n\r\n        for (let i = 0; i < imageData.length; i++)\r\n            if (Canvas.isPixelBusy(imageData[i]))\r\n                return false\r\n\r\n        return true\r\n    }\r\n}\r\n\r\nexport default Canvas","import Value from 'types/base/Value'\r\nimport Theme from 'Theme'\r\nimport TextStyles from 'helpers/TextStyles'\r\nimport * as Helper from 'Helper'\r\nimport ChartSettings from 'types/ChartSettings'\r\nimport TooltipValue from 'types/TooltipValue'\r\nimport Data from 'types/interfaces/Data'\r\nimport Canvas from 'helpers/Canvas'\r\nimport * as Constants from 'static/constants/Index'\r\nimport Styles from 'static/constants/Styles'\r\nimport HTMLTooltipElement from 'types/extends/HTMLTooltipElement'\r\nimport { Attribute, Tag } from 'static/Enums'\r\n\r\nclass Tooltip {\r\n    canvas: HTMLCanvasElement\r\n\r\n    data: Data\r\n\r\n    readonly #enabled: boolean\r\n\r\n    readonly #isCustom: boolean\r\n\r\n    #canvasPosition: DOMRect\r\n\r\n    #template: HTMLTemplateElement\r\n\r\n    #inProgress: boolean\r\n\r\n    #toHide: boolean\r\n\r\n    #timer: Date | undefined\r\n\r\n    #lines: TooltipValue[]\r\n\r\n    constructor(canvas: HTMLCanvasElement, settings: ChartSettings) {\r\n        this.canvas = canvas\r\n        this.data = settings.data\r\n        this.#enabled = settings.enableTooltip\r\n        this.#isCustom = !!settings.templateId\r\n\r\n        if (this.#isCustom)\r\n            this.#template = <HTMLTemplateElement>document.getElementById(settings.templateId)\r\n\r\n        this.refresh()\r\n    }\r\n\r\n    render(condition: boolean, event: MouseEvent, lines: TooltipValue[], value?: Value) {\r\n        this.#hideAll()\r\n\r\n        if (!this.#enabled || !event)\r\n            return\r\n\r\n        if (condition || this.#inProgress || this.#toHide) {\r\n            if (condition)\r\n                this.#lines = lines\r\n\r\n            if (!this.#timer)\r\n                this.#timer = new Date()\r\n\r\n            if (!this.#toHide)\r\n                this.#inProgress = true\r\n            else if (this.#inProgress)\r\n                this.#timer = new Date()\r\n\r\n            if (this.#isCustom)\r\n                this.#renderCustom(event, value)\r\n            else\r\n                this.#renderRegular(event)\r\n\r\n            const opacityValue = this.#getOpacityValue()\r\n\r\n            if (this.#toHide && opacityValue >= 1) {\r\n                this.#inProgress = false\r\n                this.#toHide = false\r\n            }\r\n\r\n            if (this.#toHide && opacityValue <= 0) {\r\n                this.#inProgress = false\r\n                this.#toHide = false\r\n                this.#timer = undefined\r\n            }\r\n\r\n            if (!condition && this.#timer != undefined)\r\n                this.#toHide = true\r\n        } else {\r\n            this.#timer = undefined\r\n        }\r\n    }\r\n\r\n    #renderRegular(event: MouseEvent) {\r\n        const ctx = Canvas.getContext(this.canvas)\r\n\r\n        const textWidth = Math.max(...this.#lines.map(line => Helper.stringWidth(line.text ?? '') + (line.color ? 8 : 0)))\r\n\r\n        const padding = 6,\r\n            borderRadius = 6\r\n\r\n        let x = event.offsetX + 10,\r\n            y = event.offsetY + 10\r\n\r\n        if (x + textWidth + 25 > this.#canvasPosition.width)\r\n            x = this.#canvasPosition.width - (textWidth + 25)\r\n\r\n        if (y + 15 + this.#lines.length * 18 > this.#canvasPosition.height)\r\n            y = this.#canvasPosition.height - 15 - this.#lines.length * 18\r\n\r\n        ctx.beginPath()\r\n        ctx.roundRect(x, y, textWidth + 24, 16 + 16 * this.#lines.length, borderRadius)\r\n        let opacity = Math.round(this.#getOpacityValue() * 255).toString(16),\r\n            baseOpacity = Math.round(this.#getOpacityValue() * 207).toString(16)\r\n        if (opacity.length == 1)\r\n            opacity = '0' + opacity\r\n        if (baseOpacity.length == 1)\r\n            baseOpacity = '0' + baseOpacity\r\n\r\n        ctx.strokeStyle = Theme.dropdownBorder + baseOpacity\r\n        ctx.lineWidth = 1\r\n        ctx.fillStyle = Theme.background + baseOpacity\r\n        ctx.stroke()\r\n        ctx.fill()\r\n\r\n        for (let line of this.#lines) {\r\n            let offset = 0\r\n\r\n            if (line.color) {\r\n                offset = 12\r\n\r\n                ctx.beginPath()\r\n                ctx.fillStyle = line.color + opacity\r\n                ctx.arc(x + 16, y + 17, 5, 0, Math.PI * 2)\r\n                ctx.fill()\r\n            }\r\n\r\n            TextStyles.tooltip(ctx)\r\n            ctx.fillStyle = Theme.text + opacity\r\n            ctx.fillText(line.text ?? '', x + offset + padding * 2, y + 21)\r\n\r\n            y += 16\r\n        }\r\n    }\r\n\r\n    #renderCustom(event: MouseEvent, value?: Value) {\r\n        if (value == undefined)\r\n            return\r\n\r\n        const id = this.#template.id + value.id\r\n\r\n        let tooltip = <HTMLTooltipElement>document.getElementById(id)\r\n\r\n        const updateVisibility = () => {\r\n            this.#hideAll()\r\n\r\n            tooltip.style.visibility = Styles.Visibility.Visible\r\n        }\r\n\r\n        if (!tooltip) {\r\n            const regex = /\\${[^}]*}/gm\r\n\r\n            let content = <HTMLElement>this.#template.cloneNode(true)\r\n\r\n            tooltip = document.createElement(Tag.Div) as HTMLTooltipElement\r\n\r\n            tooltip.innerHTML = content.innerHTML\r\n\r\n            tooltip.id = id\r\n            tooltip.style.position = Styles.Position.Absolute\r\n            tooltip.style.pointerEvents = Styles.PointerEvents.None\r\n            tooltip.style.visibility = Styles.Visibility.Visible\r\n\r\n            tooltip.setAttribute(Attribute.Name, this.#template.id)\r\n\r\n            const matches = [...tooltip.innerHTML.matchAll(regex)]\r\n\r\n            let html = tooltip.innerHTML\r\n\r\n            for (const match of matches) {\r\n                const property = match[0].replace('${', '')\r\n                                         .replace('}', '')\r\n                                         .replaceAll(' ', '')\r\n\r\n                html = html.replaceAll(match[0], value.data[property])\r\n            }\r\n\r\n            tooltip.innerHTML = html\r\n\r\n            document.body.appendChild(tooltip)\r\n\r\n            tooltip.position = tooltip.getBoundingClientRect()\r\n\r\n            updateVisibility()\r\n        }\r\n\r\n        if (tooltip.style.visibility == Styles.Visibility.Hidden)\r\n            updateVisibility()\r\n\r\n        if (tooltip.position.height == 0)\r\n            tooltip.position = tooltip.getBoundingClientRect()\r\n\r\n        const offset = 10\r\n\r\n        let opacity = '1'\r\n\r\n        let x = event.pageX,\r\n            y = event.pageY\r\n\r\n        if (event.offsetX + tooltip.position.width > this.#canvasPosition.width - offset) {\r\n            x = this.#canvasPosition.width + event.pageX - event.offsetX - tooltip.position.width - offset\r\n            opacity = '.67'\r\n        }\r\n\r\n        if (event.offsetY + tooltip.position.height > this.#canvasPosition.height - offset) {\r\n            y = this.#canvasPosition.height + event.pageY - event.offsetY - tooltip.position.height - offset\r\n            opacity = '.67'\r\n        }\r\n\r\n        if (x == 0 && y == 0)\r\n            opacity = '0'\r\n\r\n        tooltip.style.left = x + offset + 'px'\r\n        tooltip.style.top = y + offset + 'px'\r\n        tooltip.style.opacity = opacity\r\n    }\r\n\r\n    refresh() {\r\n        this.#canvasPosition = this.canvas.getBoundingClientRect()\r\n    }\r\n\r\n    #hideAll() {\r\n        if (!this.#isCustom)\r\n            return\r\n\r\n        const tooltips = <NodeListOf<HTMLElement>>document.querySelectorAll(`[name=\"${ this.#template.id }\"]`)\r\n\r\n        for (let node of tooltips)\r\n            node.style.visibility = Styles.Visibility.Hidden\r\n    }\r\n\r\n    #getOpacityValue(): number {\r\n        if (!this.#timer)\r\n            return 0\r\n\r\n        let opacityValue = this.#toHide\r\n                           ? 1 - (new Date().getTime() - this.#timer.getTime()) / Constants.Animations.tooltip\r\n                           : (new Date().getTime() - this.#timer.getTime()) / Constants.Animations.tooltip\r\n        if (opacityValue > 1)\r\n            opacityValue = 1\r\n        if (opacityValue < 0)\r\n            opacityValue = 0\r\n\r\n        return opacityValue\r\n    }\r\n}\r\n\r\nexport default Tooltip","class ThemeOptions {\r\n    static readonly colors = ['#000000', '#ffffff']\r\n\r\n    static readonly backgrounds = ['#f7f7f7', '#222222']\r\n\r\n    static readonly lines = ['#000000', '#eeeeee']\r\n\r\n    static readonly lineAxes = ['#e0e0e0', '#434343']\r\n\r\n    static readonly lineActives = ['#898989', '#898989']\r\n\r\n    static readonly dropdownBorders = ['#bcbcbc', '#7e7e7e']\r\n\r\n    static readonly canvasBackgrounds = ['#ffffff', '#222222']\r\n}\r\n\r\nexport default ThemeOptions","import { DrawPointType } from 'static/Enums'\r\n\r\nclass DrawPoint {\r\n    /**\r\n     * Method invocation arguments, where even indexed is x-axis points and odd is y-axis points\r\n     */\r\n    args: any[]\r\n\r\n    type: DrawPointType\r\n\r\n    readonly base: any[]\r\n\r\n    constructor(type: DrawPointType, ...args: any[]) {\r\n        this.args = args\r\n        this.type = type\r\n        this.base = JSON.parse(JSON.stringify(args))\r\n    }\r\n}\r\n\r\nexport default DrawPoint","import TableValue from 'types/TableValue'\r\nimport PlotSeries from 'types/PlotSeries'\r\nimport TableHeaderValue from 'types/TableHeaderValue'\r\nimport TableData from 'types/TableData'\r\nimport Data from 'types/interfaces/Data'\r\nimport Formatter from 'helpers/Formatter'\r\nimport { PlotAxisType } from 'static/Enums'\r\n\r\nclass PlotData implements Data {\r\n    shortLabels: boolean\r\n\r\n    simple: boolean\r\n\r\n    yMax: number\r\n\r\n    xTitle: string\r\n\r\n    yTitle: string\r\n\r\n    xType: PlotAxisType\r\n\r\n    values: PlotSeries[]\r\n\r\n    static getRows(data: PlotData): TableData {\r\n        let headers: TableHeaderValue[] = []\r\n\r\n        let values: TableValue[] = []\r\n\r\n        for (const series of data.values) {\r\n            let seriesValues = new Map<string, any>()\r\n\r\n            for (const value of series.values) {\r\n                seriesValues.set(value.x.toString(), value.y)\r\n                headers.push({\r\n                    value: value.x.toString(),\r\n                    display: data.xType == PlotAxisType.Date\r\n                             ? Formatter.date(new Date(value.x))\r\n                             : value.x.toString()\r\n                })\r\n            }\r\n\r\n            values.push({\r\n                name: series.label,\r\n                values: seriesValues\r\n            })\r\n        }\r\n\r\n        const unique = new Set(),\r\n            uniqueHeaders = headers.filter(v => !unique.has(v.display) && unique.add(v.display))\r\n\r\n        if (data.xType == PlotAxisType.Date)\r\n            uniqueHeaders.sort((a, b) => new Date(a.value).getTime() - new Date(b.value).getTime())\r\n\r\n        return {\r\n            headers: uniqueHeaders,\r\n            values: values\r\n        }\r\n    }\r\n}\r\n\r\nexport default PlotData","Number.prototype.isAnyEquals = function (...values) {\r\n    return values.includes(<number>this)\r\n}\r\n\r\nDate.prototype.addDays = function (days: number) {\r\n    let result = new Date(this)\r\n    result.setDate(result.getDate() + days)\r\n    return result\r\n}\r\n\r\nDate.prototype.addMilliseconds = function (milliseconds: number) {\r\n    let result = new Date(this)\r\n    result.setMilliseconds(result.getMilliseconds() + milliseconds)\r\n    return result\r\n}\r\n\r\nMap.prototype.trySet = function (key: any, value: any) {\r\n    if (!this.has(key))\r\n        this.set(key, value)\r\n}\r\n\r\nArray.prototype.sum = function (predicate: (value: any) => number) {\r\n    return this.reduce((acc, v) => acc + predicate(v), 0)\r\n}\r\n\r\nCanvasRenderingContext2D.prototype.resetLine = function () {\r\n    this.lineWidth = 1\r\n    this.lineJoin = 'miter'\r\n    this.lineCap = 'butt'\r\n}","namespace Styles {\r\n    export class Cursor {\r\n        static Default = 'default'\r\n\r\n        static Pointer = 'pointer'\r\n    }\r\n\r\n    export class Display {\r\n        static Flex = 'flex'\r\n    }\r\n\r\n    export class FlexDirection {\r\n        static Column = 'column'\r\n\r\n        static ColumnReverse = 'column-reverse'\r\n\r\n        static Row = 'row'\r\n\r\n        static RowReverse = 'row-reverse'\r\n    }\r\n\r\n    export class AlignItems {\r\n        static Center = 'center'\r\n    }\r\n\r\n    export class Visibility {\r\n        static Visible = 'visible'\r\n\r\n        static Hidden = 'hidden'\r\n    }\r\n\r\n    export class Position {\r\n        static Absolute = 'absolute'\r\n    }\r\n\r\n    export class PointerEvents {\r\n        static None = 'none'\r\n    }\r\n\r\n    export class JustifyContent {\r\n        static Center = 'center'\r\n    }\r\n\r\n    export class ImageRendering {\r\n        static Pixelated = 'pixelated'\r\n    }\r\n}\r\nexport default Styles","export default class Box {\r\n    width: number\r\n\r\n    height: number\r\n\r\n    set(width: number, height: number) {\r\n        this.width = width\r\n        this.height = height\r\n    }\r\n}","class Point {\r\n    x: number\r\n\r\n    y: number\r\n}\r\n\r\nexport default Point","import Theme from 'Theme'\r\nimport DropdownOptions from 'types/DropdownOptions'\r\nimport Animations from 'Animations'\r\nimport * as Helper from 'Helper'\r\nimport TextStyles from 'helpers/TextStyles'\r\nimport Canvas from 'helpers/Canvas'\r\nimport { AnimationType } from 'static/Enums'\r\nimport * as Constants from 'static/constants/Index'\r\nimport Styles from 'static/constants/Styles'\r\n\r\nclass Dropdown {\r\n    isActive: boolean = false\r\n\r\n    #isInit: boolean\r\n\r\n    #options: DropdownOptions\r\n\r\n    #canvasPosition: DOMRect\r\n\r\n    animations: Animations\r\n\r\n    #position: DOMRect\r\n\r\n    readonly #isOnlyMenu: boolean\r\n\r\n    readonly #canvas: HTMLCanvasElement\r\n\r\n    constructor(canvas: HTMLCanvasElement, options: DropdownOptions) {\r\n        this.#canvas = canvas\r\n        this.#options = options\r\n\r\n        if (this.#options.icon)\r\n            this.#options.text = this.#options.icon\r\n\r\n        this.#isOnlyMenu = this.#options.text == undefined\r\n\r\n        this.animations = new Animations()\r\n    }\r\n\r\n    render(moveEvent: MouseEvent, clickEvent: MouseEvent | undefined) {\r\n        if (!this.#isInit)\r\n            this.#initAnimations()\r\n\r\n        if (this.#isOnlyMenu)\r\n            this.isActive = true\r\n\r\n        const ctx = Canvas.getContext(this.#canvas)\r\n\r\n        let x = this.#position.x,\r\n            y = this.#position.y,\r\n            width = this.#position.width,\r\n            height = this.#position.height\r\n\r\n        ctx.beginPath()\r\n\r\n        if (!this.#isOnlyMenu) {\r\n            const translate = (transition: number, event: AnimationType) => {\r\n                this.animations.reload('animation-dropdown', event)\r\n\r\n                ctx.fillStyle = Helper.adjustColor(Theme.canvasBackground, -Math.round(25 * transition))\r\n            }\r\n\r\n            if (this.#isOnButton(moveEvent, x, y, width, height)) {\r\n                this.#canvas.style.cursor = Styles.Cursor.Pointer\r\n\r\n                if (clickEvent && moveEvent.x == clickEvent.x && moveEvent.y == clickEvent.y) {\r\n                    this.isActive = !this.isActive\r\n                    clickEvent = undefined\r\n                }\r\n\r\n                if (!this.isActive)\r\n                    this.animations.handle('animation-dropdown',\r\n                        AnimationType.MouseOver,\r\n                        {\r\n                            duration: 300,\r\n                            body: transition => {\r\n                                translate(transition, AnimationType.MouseLeave)\r\n                            }\r\n                        })\r\n                else\r\n                    ctx.fillStyle = Helper.adjustColor(Theme.canvasBackground, -25)\r\n            } else {\r\n                this.#canvas.style.cursor = Styles.Cursor.Default\r\n\r\n                if (!this.isActive)\r\n                    this.animations.handle('animation-dropdown',\r\n                        AnimationType.MouseLeave,\r\n                        {\r\n                            timer: Constants.Dates.minDate,\r\n                            duration: 300,\r\n                            backward: true,\r\n                            body: transition => {\r\n                                translate(transition, AnimationType.MouseOver)\r\n                            }\r\n                        })\r\n                else\r\n                    ctx.fillStyle = Helper.adjustColor(Theme.canvasBackground, -25)\r\n            }\r\n\r\n            ctx.roundRect(x, y, width, height, 4)\r\n            ctx.fill()\r\n\r\n            TextStyles.regular(ctx)\r\n\r\n            if (this.#options.icon)\r\n                ctx.font = '20px sans-serif'\r\n\r\n            const iconOffset = this.#options.icon\r\n                               ? navigator.platform != 'Win32'\r\n                                 ? 1\r\n                                 : -1\r\n                               : 0\r\n\r\n            ctx.fillText(\r\n                this.#options.text ?? '',\r\n                x + width / 2,\r\n                y + height / 2 - iconOffset\r\n            )\r\n        }\r\n\r\n        if (this.isActive) {\r\n            const padding = 6,\r\n                borderRadius = 6\r\n\r\n            y += height\r\n\r\n            const items = this.#options.items.filter(value => value.text),\r\n                dividers = this.#options.items.filter(value => !value.text)\r\n\r\n            let maxWidth = Math.max(...items.map(value => Helper.stringWidth(value.text)))\r\n                           + padding * 4\r\n\r\n            if (x + maxWidth > this.#canvas.width - 4)\r\n                x -= x + maxWidth - this.#canvas.width + 4\r\n\r\n            const dropdownOpacity = 'bb',\r\n                itemOpacityDec = 127,\r\n                itemBackground = Theme.dropdownItemHoverColor,\r\n                borderColor = Theme.dropdownBorder\r\n\r\n            ctx.beginPath()\r\n\r\n            const rect = {\r\n                x: x,\r\n                y: y,\r\n                width: maxWidth,\r\n                height: items.length * 26\r\n                        + dividers.length * 4\r\n                        + (items.length == 1 ? padding : 0)\r\n                        + (items.length == 2 && dividers.length == 1 ? padding : 0)\r\n            }\r\n\r\n            ctx.roundRect(rect.x, rect.y, rect.width, rect.height, borderRadius)\r\n            ctx.fillStyle = Theme.background + dropdownOpacity\r\n            ctx.setLineDash([])\r\n            ctx.lineWidth = 1\r\n            ctx.strokeStyle = borderColor + dropdownOpacity\r\n            ctx.fill()\r\n            ctx.stroke()\r\n\r\n            ctx.beginPath()\r\n\r\n            y += 6\r\n\r\n            for (const item of this.#options.items) {\r\n                ctx.beginPath()\r\n\r\n                if (item.isDivider == true) {\r\n                    y += 2\r\n\r\n                    ctx.moveTo(x + padding, y)\r\n                    ctx.lineTo(x + maxWidth - padding, y)\r\n\r\n                    ctx.lineWidth = .5\r\n                    ctx.stroke()\r\n\r\n                    y += 4\r\n\r\n                    continue\r\n                }\r\n\r\n                ctx.fillStyle = 'transparent'\r\n\r\n                const animationKey = 'animation-dropdown' + item.text\r\n\r\n                const translate = (transition: number, event: AnimationType, isReturn?: boolean) => {\r\n                    this.animations.reload(animationKey, event)\r\n\r\n                    if (isReturn && transition == 1)\r\n                        return\r\n\r\n                    let opacity = Math.round(itemOpacityDec * transition).toString(16)\r\n                    if (opacity.length == 1)\r\n                        opacity = '0' + opacity\r\n\r\n                    ctx.fillStyle = itemBackground + opacity\r\n                }\r\n\r\n                if (this.#isOnButton(moveEvent, x, y, maxWidth, 20)) {\r\n                    this.animations.handle(animationKey,\r\n                        AnimationType.MouseOver,\r\n                        {\r\n                            duration: 300,\r\n                            body: transition => {\r\n                                translate(transition, AnimationType.MouseLeave)\r\n                            }\r\n                        })\r\n\r\n                    this.#canvas.style.cursor = Styles.Cursor.Pointer\r\n\r\n                    if (clickEvent) {\r\n                        item.action()\r\n\r\n                        clickEvent = undefined\r\n                        this.isActive = false\r\n                    }\r\n                } else {\r\n                    this.animations.handle(animationKey,\r\n                        AnimationType.MouseLeave,\r\n                        {\r\n                            timer: Constants.Dates.minDate,\r\n                            duration: 300,\r\n                            backward: true,\r\n                            body: transition => {\r\n                                translate(transition, AnimationType.MouseOver, true)\r\n                            }\r\n                        })\r\n                }\r\n\r\n                ctx.roundRect(x + padding, y, maxWidth - padding * 2, 20, borderRadius)\r\n                ctx.fill()\r\n\r\n                TextStyles.regular(ctx)\r\n                ctx.fillStyle = Theme.text\r\n                ctx.textAlign = 'left'\r\n                ctx.textBaseline = 'hanging'\r\n                ctx.fillText(item.text, x + padding * 2, y + 5)\r\n\r\n                y += 22\r\n            }\r\n        }\r\n\r\n        ctx.lineWidth = 1\r\n\r\n        if (!this.#isOnlyMenu && clickEvent != undefined && this.isActive) {\r\n            this.isActive = false\r\n            clickEvent = undefined\r\n        }\r\n\r\n        this.#isInit = true\r\n\r\n        if (this.#isOnlyMenu && clickEvent && moveEvent.x == clickEvent.x && moveEvent.y == clickEvent.y) {\r\n            this.isActive = !this.isActive\r\n            clickEvent = undefined\r\n        }\r\n\r\n        return clickEvent\r\n    }\r\n\r\n    #initAnimations() {\r\n        this.#canvasPosition = this.#canvas.getBoundingClientRect()\r\n    }\r\n\r\n    #isOnButton(event: MouseEvent, x: number, y: number, w: number, h: number): boolean {\r\n        if (!event)\r\n            return false\r\n\r\n        return event.offsetX >= x && event.offsetX <= x + w\r\n               && event.offsetY >= y && event.offsetY <= y + h\r\n    }\r\n\r\n    refresh() {\r\n        this.#isInit = false\r\n    }\r\n\r\n    resize() {\r\n        this.#initAnimations()\r\n        this.#calculatePosition()\r\n    }\r\n\r\n    close() {\r\n        this.isActive = false\r\n    }\r\n\r\n    #calculatePosition() {\r\n        const width = this.#isOnlyMenu ? 0 : Helper.stringWidth(this.#options.text ?? '') + 12,\r\n            height = this.#isOnlyMenu ? 0 : 20\r\n\r\n        this.#position = {\r\n            x: this.#options.x + width > this.#canvas.width\r\n               ? this.#canvas.width - width\r\n               : this.#options.x < 0\r\n                 ? this.#canvas.width + this.#options.x - width\r\n                 : this.#options.x,\r\n            y: this.#options.y + height > this.#canvas.height\r\n               ? this.#canvas.height - height\r\n               : this.#options.y < 0\r\n                 ? this.#canvas.height + this.#options.y - height\r\n                 : this.#options.y,\r\n            width: width,\r\n            height: height\r\n        } as DOMRect\r\n    }\r\n}\r\n\r\nexport default Dropdown","import * as Helper from 'Helper'\r\nimport ThemeOptions from 'static/ThemeOptions'\r\nimport { Events } from 'static/Enums'\r\n\r\nclass Theme {\r\n    static currentTheme = 0\r\n\r\n    static text: string\r\n\r\n    static background: string\r\n\r\n    static line: string\r\n\r\n    static lineAxis: string\r\n\r\n    static lineActive: string\r\n\r\n    static dropdownItemHoverColor: string\r\n\r\n    static dropdownBorder: string\r\n\r\n    static canvasBackground: string\r\n\r\n    static canvasBackgroundInt: number\r\n\r\n    static function: Function | undefined\r\n\r\n    static initialize(callback: Function, isDark?: Function) {\r\n        if (!Theme.function && isDark)\r\n            Theme.function = isDark\r\n\r\n        if (window.matchMedia\r\n            && window.matchMedia('(prefers-color-scheme: dark)').matches\r\n            && (!Theme.function || Theme.function()))\r\n            Theme.setTheme(1)\r\n        else\r\n            Theme.setTheme(0)\r\n\r\n        window.matchMedia('(prefers-color-scheme: dark)')\r\n              .addEventListener(Events.Change, event => {\r\n                  Theme.setTheme(event.matches && (!Theme.function || Theme.function()) ? 1 : 0)\r\n                  callback()\r\n              })\r\n    }\r\n\r\n    static setTheme(index: number) {\r\n        Theme.currentTheme = index\r\n\r\n        Theme.text = ThemeOptions.colors[index]\r\n        Theme.background = ThemeOptions.backgrounds[index]\r\n        Theme.line = ThemeOptions.lines[index]\r\n        Theme.lineAxis = ThemeOptions.lineAxes[index]\r\n        Theme.lineActive = ThemeOptions.lineActives[index]\r\n        Theme.dropdownItemHoverColor = Helper.adjustColor(Theme.background, index == 0 ? -50 : 50)\r\n        Theme.dropdownBorder = ThemeOptions.dropdownBorders[index]\r\n        Theme.canvasBackground = ThemeOptions.canvasBackgrounds[index]\r\n        Theme.canvasBackgroundInt = Number(`0xff${ Theme.canvasBackground.slice(1) }`)\r\n    }\r\n\r\n    static reset() {\r\n        this.function = undefined\r\n    }\r\n}\r\n\r\nexport default Theme","import Renderer from 'types/base/Renderer'\r\nimport CircularData from 'types/data/CircularData'\r\nimport Sector from 'types/Sector'\r\nimport CircularAngle from 'types/CircularAngle'\r\nimport Point from 'types/Point'\r\nimport DropdownItem from 'types/DropdownItem'\r\nimport * as Helper from 'Helper'\r\nimport Dropdown from 'Dropdown'\r\nimport Theme from 'Theme'\r\nimport TextStyles from 'helpers/TextStyles'\r\nimport Chart from 'Chart'\r\nimport TooltipValue from 'types/TooltipValue'\r\nimport Decomposition from 'Decomposition'\r\nimport Export from 'Export'\r\nimport TextResources from 'static/TextResources'\r\nimport Modal from 'Modal'\r\nimport Canvas from 'helpers/Canvas'\r\nimport Formatter from 'helpers/Formatter'\r\nimport { AnimationType, DrawPointType, Events, Icon, PlotAxisType } from 'static/Enums'\r\nimport * as Constants from 'static/constants/Index'\r\nimport Styles from 'static/constants/Styles'\r\nimport DrawPoint from 'types/DrawPoint'\r\n\r\nclass CircularRenderer extends Renderer<CircularData> {\r\n    private readonly startAngle: number\r\n\r\n    private isMousePositionChanged: boolean\r\n\r\n    private isInsideCircle: boolean\r\n\r\n    private canRenderInnerTitle: boolean\r\n\r\n    private isDonut: boolean\r\n\r\n    private radius: number\r\n\r\n    private pinned: string[]\r\n\r\n    private hover: string[]\r\n\r\n    private prevMousePos: Point\r\n\r\n    private center: Point\r\n\r\n    private angles: CircularAngle[]\r\n\r\n    private other: Sector[]\r\n\r\n    private innerTitleStyle: Function\r\n\r\n    constructor(chart: Chart) {\r\n        super(chart)\r\n\r\n        this.startAngle = Math.PI / 4\r\n        this.isMousePositionChanged = false\r\n        this.prevMousePos = new Point()\r\n\r\n        this.moveEvent = new MouseEvent(Events.MouseMove)\r\n    }\r\n\r\n    private calculateAngles() {\r\n        const valuesSum = this.data.values.sum(v => v.current)\r\n\r\n        let anglesSum = this.startAngle\r\n        this.angles = this.data.values.flatMap(sector => {\r\n                              const angle = sector.current / valuesSum * 2 * Math.PI\r\n\r\n                              return {\r\n                                  id: sector.id,\r\n                                  value: angle,\r\n                                  sum: (anglesSum += angle) - angle\r\n                              }\r\n                          })\r\n                          .reverse()\r\n    }\r\n\r\n    private getAngle(sector: Sector) {\r\n        return this.angles.find(o => o.id == sector.id)?.value ?? 0\r\n    }\r\n\r\n    private getAccumulator(sector: Sector) {\r\n        return this.angles.find(o => o.id == sector.id)?.sum ?? this.startAngle\r\n    }\r\n\r\n    private calculatePoint(sector: Sector): Sector {\r\n        let accumulator = this.getAccumulator(sector)\r\n\r\n        const getPoint = (radius: number, angle: number, center: Point): Point => {\r\n            return {\r\n                x: center.x + radius * Math.cos(accumulator + angle),\r\n                y: center.y + radius * Math.sin(accumulator + angle)\r\n            }\r\n        }\r\n\r\n        const startPoint = getPoint(this.radius, 0, this.center)\r\n        const angle = this.getAngle(sector)\r\n\r\n        let nextPoint = getPoint(this.radius, angle, this.center)\r\n        let points: DrawPoint[] = []\r\n\r\n        sector.direction = accumulator + angle / 2\r\n\r\n        if (angle > 0) {\r\n            if (sector.current > 0) {\r\n                let labelStartPoint = getPoint(this.radius + 10, angle / 2, this.center),\r\n                    labelMidPoint = getPoint(this.radius + 20, angle / 2, this.center)\r\n\r\n                const dir = labelStartPoint.x > this.center.x ? 1 : -1\r\n\r\n                let endPoint = {\r\n                    x: labelMidPoint.x + 10 * dir,\r\n                    y: labelMidPoint.y\r\n                }\r\n\r\n                sector.labelPoints = [\r\n                    new DrawPoint(DrawPointType.Move, labelStartPoint.x, labelStartPoint.y),\r\n                    new DrawPoint(DrawPointType.QuadraticCurve, labelMidPoint.x, labelMidPoint.y, endPoint.x, endPoint.y)\r\n                ]\r\n            }\r\n\r\n            if (!this.isDonut)\r\n                points.push(new DrawPoint(DrawPointType.Move, this.center.x, this.center.y))\r\n\r\n            points.push(new DrawPoint(DrawPointType.Move, startPoint.x, startPoint.y))\r\n\r\n            let localAccumulator = 0,\r\n                localAngle = angle\r\n\r\n            while (localAngle > 0) {\r\n                let currentAngle = localAngle - Math.PI / 2 > 0\r\n                                   ? Math.PI / 2\r\n                                   : localAngle\r\n\r\n                nextPoint = getPoint(this.radius, localAccumulator + currentAngle, this.center)\r\n\r\n                const p1Angle = Math.PI - currentAngle,\r\n                    p1Length = this.radius / Math.sin(p1Angle / 2),\r\n                    p1 = getPoint(p1Length, localAccumulator + currentAngle / 2, this.center)\r\n\r\n                points.push(new DrawPoint(DrawPointType.ArcTo, p1.x, p1.y, nextPoint.x, nextPoint.y, this.radius))\r\n\r\n                localAccumulator += currentAngle\r\n\r\n                if (this.data.values.length == 1)\r\n                    accumulator += localAccumulator\r\n\r\n                localAngle -= Math.PI / 2\r\n            }\r\n\r\n            if (this.isDonut || sector.innerRadius != 0) {\r\n                const innerRadius = this.radius * (sector.innerRadius / 100)\r\n\r\n                const innerPoint2 = {\r\n                    x: nextPoint.x - (((this.radius - innerRadius) * (nextPoint.x - this.center.x)) / this.radius),\r\n                    y: nextPoint.y - (((this.radius - innerRadius) * (nextPoint.y - this.center.y)) / this.radius)\r\n                }\r\n\r\n                points.push(new DrawPoint(DrawPointType.Line, innerPoint2.x, innerPoint2.y))\r\n\r\n                localAngle = 0\r\n                localAccumulator = angle\r\n\r\n                while (localAngle < angle) {\r\n                    let currentAngle = localAngle + Math.PI / 2 < angle\r\n                                       ? Math.PI / 2\r\n                                       : angle - localAngle\r\n\r\n                    nextPoint = getPoint(innerRadius, localAccumulator - currentAngle, this.center)\r\n\r\n                    const p1Angle = Math.PI - currentAngle,\r\n                        p1Length = innerRadius / Math.sin(p1Angle / 2),\r\n                        p1 = getPoint(p1Length, localAccumulator - currentAngle / 2, this.center)\r\n\r\n                    points.push(new DrawPoint(DrawPointType.ArcTo, p1.x, p1.y, nextPoint.x, nextPoint.y, innerRadius))\r\n\r\n                    localAccumulator -= currentAngle\r\n\r\n                    localAngle += Math.PI / 2\r\n                }\r\n            } else {\r\n                points.push(new DrawPoint(DrawPointType.Line, this.center.x, this.center.y))\r\n            }\r\n\r\n            accumulator += angle\r\n        }\r\n\r\n        if (this.data.values.length == 1)\r\n            points = [\r\n                new DrawPoint(DrawPointType.SemiCircle, this.center.x, this.center.y, this.radius, 0, Math.PI * 2)\r\n            ]\r\n\r\n        sector.points = points\r\n\r\n        return sector\r\n    }\r\n\r\n    private scale(sector: Sector, value: number, transition: number) {\r\n        const centerOfSector = {\r\n            x: this.center.x + this.radius / 2 * Math.cos(sector.direction),\r\n            y: this.center.y + this.radius / 2 * Math.sin(sector.direction)\r\n        }\r\n\r\n        const setArgs = (points: DrawPoint[]) => {\r\n            for (let p of points ?? []) {\r\n                if (p.type == DrawPointType.SemiCircle) {\r\n                    p.args[2] = p.base[2] * value + p.base[2] * (1 - value) * transition\r\n\r\n                    continue\r\n                }\r\n\r\n                for (let i = 0; i < p.args.length; i += 2) {\r\n                    const x = p.base[i],\r\n                        y = p.base[i + 1],\r\n                        length = Math.sqrt(Math.pow(x - centerOfSector.x, 2) + Math.pow(y - centerOfSector.y, 2)),\r\n                        computed = length * value + length * (1 - value) * transition,\r\n                        ratio = computed / length\r\n\r\n                    const xx = ratio * x + (1 - ratio) * centerOfSector.x,\r\n                        yy = ratio * y + (1 - ratio) * centerOfSector.y\r\n\r\n                    if (!isNaN(xx) && !isNaN(yy)) {\r\n                        p.args[i] = xx\r\n                        p.args[i + 1] = yy\r\n                    } else {\r\n                        p.args[i] = p.base[i] * value + p.base[i] * (1 - value) * transition\r\n                        p.args[i + 1] = p.base[i + 1] * value + p.base[i + 1] * (1 - value) * transition\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        setArgs(sector.points)\r\n        setArgs(sector.labelPoints)\r\n    }\r\n\r\n    private focus(sector: Sector, value: number, transition: number) {\r\n        sector.color = Helper.applyAlpha(sector.baseColor, 255 - 255 * value * transition)\r\n        sector.textColor = Helper.applyAlpha(Theme.text, 255 - 255 * value * transition)\r\n    }\r\n\r\n    private translate(sector: Sector, value: number, transition: number) {\r\n        const offset = {\r\n            x: (this.center.x + this.radius * Math.cos(sector.direction) - this.center.x) * value,\r\n            y: (this.center.y + this.radius * Math.sin(sector.direction) - this.center.y) * value\r\n        }\r\n\r\n        sector.translate = {\r\n            x: offset.x * transition,\r\n            y: offset.y * transition\r\n        }\r\n\r\n        const setArgs = (points: DrawPoint[]) => {\r\n            for (let p of points ?? []) {\r\n                switch (p.type) {\r\n                    case DrawPointType.SemiCircle:\r\n                        p.args[0] = p.base[0] + sector.translate.x\r\n                        p.args[1] = p.base[1] + sector.translate.y\r\n\r\n                        break\r\n\r\n                    case DrawPointType.ArcTo:\r\n                        p.args[0] = p.base[0] + sector.translate.x\r\n                        p.args[1] = p.base[1] + sector.translate.y\r\n                        p.args[2] = p.base[2] + sector.translate.x\r\n                        p.args[3] = p.base[3] + sector.translate.y\r\n\r\n                        break\r\n\r\n                    default:\r\n                        for (let i = 0; i < p.args.length; i += 2) {\r\n                            p.args[i] = p.base[i] + sector.translate.x\r\n                            p.args[i + 1] = p.base[i + 1] + sector.translate.y\r\n                        }\r\n\r\n                        break\r\n                }\r\n            }\r\n        }\r\n\r\n        setArgs(sector.points)\r\n        setArgs(sector.labelPoints)\r\n    }\r\n\r\n    private outline(sector: Sector, value: number, transition: number) {\r\n        sector.lineStyles = transition == 0\r\n                            ? {\r\n                lineWidth: 1,\r\n                lineJoin: 'miter',\r\n                lineCap: 'butt'\r\n            }\r\n                            : {\r\n                lineWidth: this.getAngle(sector) > Math.PI / 6\r\n                           ? value * transition\r\n                           : 1,\r\n                lineJoin: 'round',\r\n                lineCap: 'round'\r\n            }\r\n    }\r\n\r\n    private canRenderLabel(sector: Sector, ctx: CanvasRenderingContext2D) {\r\n        if (sector.state == AnimationType.None && sector.canRenderLabel != undefined)\r\n            return sector.canRenderLabel\r\n\r\n        if (sector.current == 0)\r\n            return sector.canRenderLabel = false\r\n\r\n        if (sector.state == AnimationType.None && sector.canRenderLabel)\r\n            return sector.canRenderLabel\r\n\r\n        const dir = sector.labelPoints[0].args[0] < sector.labelPoints[1].args[0] ? 1 : -1\r\n\r\n        let isBusy = false\r\n\r\n        const endPoint = {\r\n            x: sector.labelPoints[1].args[0],\r\n            y: sector.labelPoints[1].args[1]\r\n        }\r\n\r\n        const textWidth = Helper.stringWidth(sector.label),\r\n            imageDataX = dir == 1 ? endPoint.x + 12 : endPoint.x - textWidth - 12 + (sector.translate ? sector.translate.x : 0),\r\n            imageDataY = endPoint.y - 12 + (sector.translate ? sector.translate.y : 0),\r\n            imageData = new Uint32Array(ctx.getImageData(imageDataX, imageDataY, textWidth, 28).data.buffer)\r\n\r\n        if (imageDataX < 0 || imageDataX + textWidth > this.canvas.width\r\n            || endPoint.y - 12 < 0 || endPoint.y + 12 > this.canvas.height)\r\n            isBusy = true\r\n\r\n        if (!isBusy)\r\n            for (let i = 0; i < imageData.length; i++)\r\n                if (Canvas.isPixelBusy(imageData[i])) {\r\n                    isBusy = true\r\n                    break\r\n                }\r\n\r\n        return sector.canRenderLabel = !isBusy\r\n    }\r\n\r\n    private drawLabel(sector: Sector, ctx: CanvasRenderingContext2D) {\r\n        if (!this.canRenderLabel(sector, ctx))\r\n            return\r\n\r\n        ctx.beginPath()\r\n\r\n        ctx.moveTo(\r\n            sector.labelPoints[0].args[0],\r\n            sector.labelPoints[0].args[1]\r\n        )\r\n\r\n        ctx.quadraticCurveTo(\r\n            sector.labelPoints[1].args[0],\r\n            sector.labelPoints[1].args[1],\r\n            sector.labelPoints[1].args[2],\r\n            sector.labelPoints[1].args[3]\r\n        )\r\n\r\n        ctx.strokeStyle = sector.textColor\r\n\r\n        if (sector.current != 0 && sector.current != sector.value)\r\n            ctx.strokeStyle = Helper.applyAlpha(sector.textColor, Math.round(255 * (sector.current / sector.value)))\r\n\r\n        ctx.resetLine()\r\n\r\n        ctx.stroke()\r\n\r\n        ctx.fillStyle = sector.textColor\r\n\r\n        if (sector.current != 0 && sector.current != sector.value)\r\n            ctx.fillStyle = Helper.applyAlpha(sector.textColor, Math.round(255 * (sector.current / sector.value)))\r\n\r\n        const dir = sector.labelPoints[0].args[0] < sector.labelPoints[1].args[0] ? 1 : -1\r\n\r\n        TextStyles.circularLabel(ctx, dir == 1)\r\n        ctx.fillText(\r\n            sector.label,\r\n            sector.labelPoints[1].args[0] + 16 * dir,\r\n            sector.labelPoints[1].args[1] + 4\r\n        )\r\n    }\r\n\r\n    private drawSector(sector: Sector, ctx: CanvasRenderingContext2D) {\r\n        ctx.beginPath()\r\n\r\n        if (sector.lineStyles) {\r\n            ctx.lineWidth = sector.lineStyles.lineWidth\r\n            ctx.lineJoin = sector.lineStyles.lineJoin\r\n            ctx.lineCap = sector.lineStyles.lineCap\r\n        } else {\r\n            ctx.resetLine()\r\n        }\r\n\r\n        for (const point of sector.points) {\r\n            switch (point.type) {\r\n                case DrawPointType.Move:\r\n                    ctx.moveTo(point.args[0], point.args[1])\r\n\r\n                    break\r\n\r\n                case DrawPointType.Line:\r\n                    ctx.lineTo(point.args[0], point.args[1])\r\n\r\n                    break\r\n\r\n                case DrawPointType.QuadraticCurve:\r\n                    ctx.quadraticCurveTo(point.args[0], point.args[1], point.args[2], point.args[3])\r\n\r\n                    break\r\n\r\n                case DrawPointType.ArcTo:\r\n                    ctx.arcTo(point.args[0], point.args[1], point.args[2], point.args[3], point.args[4])\r\n\r\n                    break\r\n\r\n                case DrawPointType.SemiCircle:\r\n                    ctx.arc(point.args[0], point.args[1], point.args[2], point.args[3], point.args[4], point.args[5])\r\n\r\n                    break\r\n            }\r\n        }\r\n\r\n        ctx.fillStyle = sector.color\r\n        ctx.strokeStyle = sector.color\r\n\r\n        ctx.closePath()\r\n\r\n        ctx.fill()\r\n        ctx.stroke()\r\n    }\r\n\r\n    private animate(sector: Sector) {\r\n        this.animations.handle(\r\n            sector.id,\r\n            AnimationType.Init,\r\n            {\r\n                duration: Constants.Animations.circular + (this.data.values.indexOf(sector) + 1) / this.data.values.length * Constants.Animations.circular,\r\n                continuous: true,\r\n                before: () => sector.state == AnimationType.Init,\r\n                body: transition => {\r\n                    this.scale(sector, .7, transition)\r\n                    this.focus(sector, 1, 1 - transition)\r\n\r\n                    if (transition == 1)\r\n                        sector.state = AnimationType.None\r\n                }\r\n            }\r\n        )\r\n\r\n        this.animations.handle(\r\n            sector.id,\r\n            AnimationType.Click,\r\n            {\r\n                duration: 0,\r\n                before: () => sector.state == AnimationType.Click,\r\n                body: _transition => {\r\n                    this.translate(sector, .1, 1)\r\n                    this.outline(sector, 8, 1)\r\n                }\r\n            }\r\n        )\r\n\r\n        this.animations.handle(\r\n            sector.id,\r\n            AnimationType.MouseOver,\r\n            {\r\n                duration: Constants.Animations.circular,\r\n                before: () => sector.state.isAnyEquals(AnimationType.MouseOver, AnimationType.MouseLeave),\r\n                body: transition => {\r\n                    if (sector.color != sector.baseColor)\r\n                        this.focus(sector, .5, transition)\r\n                    this.translate(sector, .1, transition)\r\n                    this.outline(sector, 8, transition)\r\n\r\n                    if (sector.state == AnimationType.MouseLeave\r\n                        && this.data.values.filter(s => s.state == AnimationType.MouseOver).length > 0)\r\n                        this.animations.end(sector.id, AnimationType.AnotherItemOver)\r\n                }\r\n            }\r\n        )\r\n\r\n        this.animations.handle(\r\n            sector.id,\r\n            AnimationType.AnotherItemOver,\r\n            {\r\n                duration: Constants.Animations.circular,\r\n                before: () => sector.state.isAnyEquals(AnimationType.AnotherItemOver, AnimationType.AnotherItemLeave),\r\n                body: transition => {\r\n                    this.focus(sector, .5, transition)\r\n                }\r\n            }\r\n        )\r\n    }\r\n\r\n    private handle(sector: Sector) {\r\n        if (sector.disabled)\r\n            return\r\n\r\n        if (sector.state == AnimationType.None && !this.isInsideCircle)\r\n            return\r\n\r\n        const isInsideSector = this.isInsideSector(this.moveEvent, sector, this.center),\r\n            isInsideSectorClick = this.clickEvent ? this.isInsideSector(this.clickEvent, sector, this.center) : false\r\n\r\n        if (this.moveEvent && isInsideSector)\r\n            this.hover?.push(sector.id)\r\n\r\n        if (this.data.values.filter(s => !s.disabled).length == 1)\r\n            return\r\n\r\n        if (isInsideSectorClick) {\r\n            sector.state = AnimationType.Click\r\n\r\n            if (this.pinned.includes(sector.id))\r\n                this.pinned = this.pinned.filter(id => id != sector.id)\r\n            else\r\n                this.pinned.push(sector.id)\r\n\r\n            this.clickEvent = undefined\r\n\r\n            return\r\n        } else if (this.pinned.includes(sector.id)) {\r\n            return\r\n        }\r\n\r\n        if (isInsideSector) {\r\n            sector.state = AnimationType.MouseOver\r\n\r\n            if (this.animations.isBackward(sector.id, AnimationType.MouseOver))\r\n                this.animations.reverse(sector.id, AnimationType.MouseOver)\r\n\r\n            return\r\n        }\r\n\r\n        if (sector.state == AnimationType.MouseOver\r\n            && !isInsideSector) {\r\n            sector.state = AnimationType.MouseLeave\r\n\r\n            if (!this.animations.isBackward(sector.id, AnimationType.MouseOver))\r\n                this.animations.reverse(sector.id, AnimationType.MouseOver)\r\n\r\n            return\r\n        }\r\n\r\n        if (sector.state == AnimationType.MouseLeave\r\n            && this.animations.isEnd(sector.id, AnimationType.MouseOver)) {\r\n            sector.state = AnimationType.None\r\n\r\n            return\r\n        }\r\n\r\n        if (sector.state == AnimationType.MouseLeave)\r\n            return\r\n\r\n        if (this.data.values.filter(s => s.state == AnimationType.MouseOver).length > 0) {\r\n            sector.state = AnimationType.AnotherItemOver\r\n\r\n            if (this.animations.isBackward(sector.id, AnimationType.AnotherItemOver))\r\n                this.animations.reverse(sector.id, AnimationType.AnotherItemOver)\r\n\r\n            return\r\n        }\r\n\r\n        if (this.data.values.filter(s => s.state == AnimationType.MouseLeave).length > 0) {\r\n            sector.state = AnimationType.AnotherItemLeave\r\n\r\n            if (!this.animations.isBackward(sector.id, AnimationType.AnotherItemOver))\r\n                this.animations.reverse(sector.id, AnimationType.AnotherItemOver)\r\n\r\n            return\r\n        }\r\n\r\n        if (sector.state == AnimationType.AnotherItemLeave\r\n            && this.animations.isEnd(sector.id, AnimationType.AnotherItemOver)) {\r\n            sector.state = AnimationType.None\r\n\r\n            return\r\n        }\r\n    }\r\n\r\n    render() {\r\n        super.render()\r\n\r\n        const isAnyCollapsing = this.data.values.filter(s => s.value != s.current && s.current != 0)\r\n                                    .length > 0\r\n\r\n        this.isMousePositionChanged = this.prevMousePos.x != this.moveEvent.clientX\r\n                                      || this.prevMousePos.y != this.moveEvent.clientY\r\n\r\n        if (this.isMousePositionChanged) {\r\n            const point = this.getMousePosition(this.moveEvent)\r\n            this.isInsideCircle = this.isWithinRadius({\r\n                x: point.x - this.center.x,\r\n                y: point.y - this.center.y\r\n            })\r\n        }\r\n\r\n        this.prevMousePos = {\r\n            x: this.moveEvent.clientX,\r\n            y: this.moveEvent.clientY\r\n        }\r\n\r\n        if (isAnyCollapsing) {\r\n            this.calculateAngles()\r\n            for (let sector of this.data.values)\r\n                sector = this.calculatePoint(sector)\r\n        }\r\n\r\n        if (this.data.values.filter(s => !s.disabled).length == 0) {\r\n            this.empty()\r\n\r\n            return\r\n        }\r\n\r\n        this.hover = []\r\n\r\n        const ctx = Canvas.getContext(this.canvas)\r\n\r\n        for (const sector of this.data.values) {\r\n            this.animate(sector)\r\n\r\n            this.drawSector(sector, ctx)\r\n            this.drawLabel(sector, ctx)\r\n\r\n            if (sector.state != AnimationType.Init)\r\n                this.handle(sector)\r\n        }\r\n\r\n        super.renderDropdown()\r\n\r\n        const currentHover = this.data.values.find(v => v.id == this.hover[0]),\r\n            isAnyHover = this.hover.length > 0\r\n\r\n        if (isAnyHover || this.contextMenu)\r\n            this.renderContextMenu(currentHover?.data ?? {})\r\n        else\r\n            this.menuEvent = undefined\r\n\r\n        this.tooltip.render(isAnyHover && !this.dropdown?.isActive,\r\n            this.moveEvent,\r\n            [\r\n                new TooltipValue(`${ currentHover?.label }: ${ Formatter.format(currentHover?.current, PlotAxisType.Number, this.settings.valuePostfix) }`)\r\n            ],\r\n            currentHover)\r\n\r\n        this.innerTitle()\r\n\r\n        this.canvas.style.cursor = isAnyHover\r\n                                   ? Styles.Cursor.Pointer\r\n                                   : Styles.Cursor.Default\r\n\r\n        if (!this.isDestroy)\r\n            requestAnimationFrame(this.render.bind(this))\r\n    }\r\n\r\n    private isWithinRadius(v: Point) {\r\n        return v.x * v.x + v.y * v.y <= this.radius * this.radius\r\n    }\r\n\r\n    private isInsideSector(event: MouseEvent, sector: Sector, center: Point): boolean {\r\n        if (!this.isMousePositionChanged)\r\n            return sector.isMouseInside\r\n\r\n        const isAngle = (point: Point) => {\r\n            let a = Math.atan2(point.y - center.y, point.x - center.x)\r\n            if (a < 0)\r\n                a += Math.PI * 2\r\n            if (a < this.startAngle)\r\n                a = Math.PI * 2 - Math.abs(this.startAngle - a) + this.startAngle\r\n\r\n            let index = this.angles.findIndex(o => o.id == sector.id),\r\n                sumBefore = this.angles[index].sum\r\n\r\n            return !(this.dropdown?.isActive ?? false)\r\n                   && sumBefore <= a\r\n                   && sumBefore + this.angles[index].value - a >= 0\r\n        }\r\n\r\n        const point = this.getMousePosition(event)\r\n\r\n        return sector.isMouseInside = isAngle(point) && this.isInsideCircle\r\n    }\r\n\r\n    private empty() {\r\n        const ctx = Canvas.getContext(this.canvas)\r\n\r\n        ctx.beginPath()\r\n\r\n        ctx.arc(this.center.x, this.center.y, this.radius, 0, 2 * Math.PI)\r\n        ctx.strokeStyle = Theme.text\r\n        ctx.stroke()\r\n\r\n        TextStyles.regular(ctx)\r\n        ctx.fillText(TextResources.allDataIsHidden, this.center.x, this.center.y)\r\n\r\n        requestAnimationFrame(this.render.bind(this))\r\n    }\r\n\r\n    private innerTitle() {\r\n        if (this.canRenderInnerTitle) {\r\n            const ctx = Canvas.getContext(this.canvas)\r\n\r\n            this.innerTitleStyle(ctx)\r\n            ctx.fillText(this.data.innerTitle, this.center.x, this.center.y)\r\n        }\r\n    }\r\n\r\n    private calculateSizes() {\r\n        const titleOffset = this.settings.title\r\n                            ? Constants.Values.titleOffset\r\n                            : 0\r\n\r\n        const shortSide = this.canvas.width > this.canvas.height - titleOffset * 2\r\n                          ? this.canvas.height - titleOffset * 2\r\n                          : this.canvas.width\r\n\r\n        this.center = {\r\n            x: this.canvas.width / 2,\r\n            y: titleOffset + this.canvas.height / 2\r\n        }\r\n\r\n        let longestLabel = 0\r\n\r\n        for (const value of this.data.values) {\r\n            const width = Helper.stringWidth(value.label)\r\n\r\n            if (width > longestLabel)\r\n                longestLabel = width\r\n        }\r\n\r\n        this.radius = shortSide / 2 - (longestLabel + 50)\r\n\r\n        if (this.radius < shortSide / 2 - 50)\r\n            this.radius = shortSide / 2 - 50\r\n\r\n        if (this.radius < 0)\r\n            this.radius = 0\r\n\r\n        if (this.data.innerTitle != undefined && this.data.innerTitle != '') {\r\n            this.innerTitleStyle = TextStyles.large\r\n            this.canRenderInnerTitle = Helper.stringWidth(this.data.innerTitle, 16)\r\n                                       < (this.data.innerRadius / 100) * this.radius * 2\r\n\r\n            if (!this.canRenderInnerTitle) {\r\n                this.innerTitleStyle = TextStyles.regular\r\n                this.canRenderInnerTitle = Helper.stringWidth(this.data.innerTitle, 14)\r\n                                           < (this.data.innerRadius / 100) * this.radius * 2\r\n            }\r\n\r\n            if (!this.canRenderInnerTitle)\r\n                console.warn(`Inner title is declared, but can't be rendered`)\r\n        }\r\n    }\r\n\r\n    refresh() {\r\n        super.refresh()\r\n\r\n        this.dropdown?.refresh()\r\n    }\r\n\r\n    resize() {\r\n        super.resize()\r\n\r\n        this.initAnimations()\r\n        this.calculateSizes()\r\n        this.dropdown?.resize()\r\n\r\n        for (let sector of this.data.values) {\r\n            sector.canRenderLabel = undefined\r\n            sector = this.calculatePoint(sector)\r\n        }\r\n    }\r\n\r\n    prepareSettings() {\r\n        super.prepareSettings()\r\n\r\n        this.calculateSizes()\r\n\r\n        this.data.values = this.data.values.map(v => new Sector(v))\r\n\r\n        if (this.settings.enableOther) {\r\n            if (!this.settings.contextMenu)\r\n                this.settings.contextMenu = [] as DropdownItem[]\r\n            else\r\n                this.settings.contextMenu.push({\r\n                    isDivider: true\r\n                } as DropdownItem)\r\n\r\n            this.settings.contextMenu.push({\r\n                text: TextResources.show,\r\n                condition: data => data?._other,\r\n                action: () => {\r\n                    new Modal(Decomposition.toChart<Sector>(this.settings, this.other),\r\n                        {\r\n                            width: window.innerWidth * .8,\r\n                            height: window.innerHeight * .8\r\n                        } as DOMRect,\r\n                        TextResources.other)\r\n                        .open()\r\n                }\r\n            })\r\n        }\r\n\r\n        this.pinned = []\r\n\r\n        this.isDonut = (this.data.innerRadius ?? 0) != 0\r\n\r\n        for (let item of this.data.values) {\r\n            item.disabled = !item.value\r\n            item.value ??= 0\r\n            item.current = item.value\r\n            item.innerRadius ??= this.data.innerRadius ?? 0\r\n\r\n            if (item.value < 0)\r\n                console.warn(`\"${ item.label }\" has negative value (${ item.value }) and will not be render`)\r\n        }\r\n\r\n        this.data.values = this.data.values.filter(v => v.value >= 0)\r\n\r\n        if (this.settings.enableOther && this.data.values.length > 20) {\r\n            this.other = this.data.values.splice(20)\r\n\r\n            const sum = this.other.sum(v => v.current)\r\n\r\n            this.data.values = this.data.values.slice(0, 20)\r\n\r\n            this.data.values.push(new Sector({\r\n                value: sum,\r\n                current: sum,\r\n                label: TextResources.other,\r\n                id: Helper.guid(),\r\n                color: this.other[this.other.length - 1].color,\r\n                innerRadius: this.data.innerRadius,\r\n                data: {\r\n                    _other: true\r\n                }\r\n            }))\r\n        }\r\n\r\n        this.calculateAngles()\r\n\r\n        for (let sector of this.data.values) {\r\n            sector = this.calculatePoint(sector)\r\n\r\n            sector.textColor = Theme.text\r\n            sector.state = this.settings.disableInitAnimation || this.data.values.length == 1\r\n                           ? AnimationType.None\r\n                           : AnimationType.Init\r\n        }\r\n    }\r\n\r\n    initDropdown() {\r\n        super.initDropdown()\r\n\r\n        this.dropdown = new Dropdown(this.canvas,\r\n            {\r\n                x: -10,\r\n                y: 10,\r\n                icon: Icon.ThreeLines,\r\n                items: [\r\n                    {\r\n                        text: TextResources.exportPNG,\r\n                        action: () => {\r\n                            Export.asPng(this.canvas, this.settings.title)\r\n                        }\r\n                    },\r\n                    {\r\n                        text: TextResources.exportCSV,\r\n                        action: () => {\r\n                            Export.asCsv(Decomposition.toTable(CircularData.getRows(this.data)), this.settings.title)\r\n                        }\r\n                    },\r\n                    {\r\n                        isDivider: true\r\n                    } as DropdownItem,\r\n                    {\r\n                        text: TextResources.decomposeToTable,\r\n                        action: () => {\r\n                            new Modal(Decomposition.toTable(CircularData.getRows(this.data)),\r\n                                undefined,\r\n                                this.settings.title ?? TextResources.dataAsTable)\r\n                                .open()\r\n                        }\r\n                    }\r\n                ]\r\n            })\r\n    }\r\n}\r\n\r\nexport default CircularRenderer","import Data from 'types/interfaces/Data'\r\nimport Renderable from 'types/base/Renderable'\r\nimport * as Helper from 'Helper'\r\nimport Value from 'types/base/Value'\r\nimport Legend from 'Legend'\r\nimport Dropdown from 'Dropdown'\r\nimport DropdownItem from 'types/DropdownItem'\r\nimport Point from 'types/Point'\r\nimport TextResources from 'static/TextResources'\r\nimport Chart from 'Chart'\r\nimport Canvas from 'helpers/Canvas'\r\nimport TextStyles from 'helpers/TextStyles'\r\nimport { LegendPlace, RenderState } from 'static/Enums'\r\nimport * as Constants from 'static/constants/Index'\r\nimport ChartSettings from '../ChartSettings'\r\n\r\nclass Renderer<T extends Data> extends Renderable {\r\n    dropdown: Dropdown | undefined\r\n\r\n    data: T\r\n\r\n    protected isDestroy: boolean = false\r\n\r\n    protected highlightItems: string[]\r\n\r\n    constructor(chart: Chart) {\r\n        super(chart)\r\n\r\n        this.highlightItems = []\r\n\r\n        this.state = this.settings.disableInitAnimation ? RenderState.Idle : RenderState.Init\r\n    }\r\n\r\n    render() {\r\n        super.render()\r\n\r\n        this.renderTitle()\r\n    }\r\n\r\n    destroy() {\r\n        this.isDestroy = true\r\n\r\n        this.canvas.remove()\r\n    }\r\n\r\n    renderDropdown() {\r\n        this.clickEvent = this.dropdown?.render(this.moveEvent, this.clickEvent)\r\n    }\r\n\r\n    resize() {\r\n        this.#calculateSizes()\r\n        this.tooltip.refresh()\r\n        this.dropdown?.resize()\r\n    }\r\n\r\n    prepareSettings() {\r\n        this.data = <T>this.settings.data\r\n\r\n        const domRect = this.node.parentElement!.getBoundingClientRect()\r\n\r\n        this.settings.minWidth = isNaN(+this.settings.width)\r\n                                 ? 0\r\n                                 : +this.settings.width\r\n        this.settings.minHeight = isNaN(+this.settings.height)\r\n                                  ? 0\r\n                                  : +this.settings.height\r\n\r\n        this.settings.width = this.settings.minWidth != 0 && domRect.width < this.settings.minWidth\r\n                              ? this.settings.minWidth\r\n                              : domRect.width\r\n\r\n        this.settings.height = this.settings.minHeight != 0 && domRect.height < this.settings.minHeight\r\n                               ? this.settings.minHeight\r\n                               : domRect.height\r\n\r\n        this.canvas.width = this.settings.width\r\n        this.canvas.height = this.settings.height\r\n\r\n        for (let item of this.settings.data.values) {\r\n            item.id = Helper.guid()\r\n            item.label ??= TextResources.noLabel\r\n        }\r\n\r\n        this.calculateColors()\r\n\r\n        for (let item of this.settings.contextMenu ?? [])\r\n            if (item.id != undefined)\r\n                item.action = data => this.node.dispatchEvent(new CustomEvent(item.id ?? '', { detail: data }))\r\n    }\r\n\r\n    calculateColors(force: boolean = false) {\r\n        const baseColor = Helper.adjustColor(this.settings.baseColor ?? Helper.randomColor(), -67),\r\n            adjustAmount = 134\r\n\r\n        let index = 0\r\n\r\n        for (let item of this.settings.data.values) {\r\n            if (item.color == undefined || force) {\r\n                let amount = Math.round(index / this.settings.data.values.length  * adjustAmount)\r\n\r\n                item.color = Helper.adjustColor(baseColor, amount)\r\n            }\r\n\r\n            index++\r\n        }\r\n    }\r\n\r\n    initDropdown() {\r\n    }\r\n\r\n    renderContextMenu(data: any) {\r\n        if (this.dropdown?.isActive) {\r\n            this.menuEvent = undefined\r\n\r\n            return false\r\n        }\r\n\r\n        if (this.menuEvent != undefined && this.settings.contextMenu?.length != 0) {\r\n            if (this.contextMenu == undefined && this.settings.contextMenu != undefined) {\r\n                let clone: DropdownItem[] = []\r\n\r\n                for (const item of this.settings.contextMenu)\r\n                    if (!item.condition || item.condition(data))\r\n                        clone.push({\r\n                            id: item.id,\r\n                            text: item.text,\r\n                            isDivider: item.isDivider,\r\n                            action: () => {\r\n                                item.action(data)\r\n\r\n                                this.menuEvent = undefined\r\n                                this.contextMenu = undefined\r\n                            }\r\n                        })\r\n\r\n                this.contextMenu = new Dropdown(this.canvas, {\r\n                    x: this.menuEvent.x - this.canvasPosition.x,\r\n                    y: this.menuEvent.y - this.canvasPosition.y,\r\n                    items: clone,\r\n                    data: data\r\n                })\r\n\r\n                this.contextMenu.resize()\r\n\r\n                this.clickEvent = undefined\r\n            }\r\n\r\n            const isClick = this.clickEvent != undefined\r\n\r\n            this.clickEvent = this.contextMenu?.render(this.moveEvent, this.clickEvent)\r\n\r\n            if (this.clickEvent == undefined && isClick) {\r\n                this.contextMenu = undefined\r\n                this.menuEvent = undefined\r\n\r\n                return true\r\n            }\r\n        }\r\n\r\n        return false\r\n    }\r\n\r\n    highlight(value?: Value) {\r\n        if (value)\r\n            this.highlightItems = [value.id]\r\n        else\r\n            this.highlightItems = []\r\n    }\r\n\r\n    closeDropdowns() {\r\n        this.dropdown?.close()\r\n        this.menuEvent = undefined\r\n    }\r\n\r\n    renderTitle() {\r\n        const ctx = Canvas.getContext(this.canvas)\r\n\r\n        if (this.settings.title) {\r\n            TextStyles.title(ctx)\r\n            ctx.fillText(this.settings.title, this.canvas.width / 2, Constants.Values.titleOffset)\r\n        }\r\n    }\r\n\r\n    #calculateSizes() {\r\n        let domRect = this.node.getBoundingClientRect()\r\n\r\n        this.settings.width = this.settings.minWidth && domRect.width < this.settings.minWidth\r\n                              ? this.settings.minWidth\r\n                              : domRect.width\r\n        this.settings.height = this.settings.minHeight && domRect.height < this.settings.minHeight\r\n                               ? this.settings.minHeight\r\n                               : domRect.height\r\n\r\n        this.canvas.width = this.settings.width\r\n        this.canvas.height = this.settings.height\r\n\r\n        if (this.settings.enableLegend) {\r\n            if (this.settings.legendPlace == undefined\r\n                || this.settings.legendPlace == LegendPlace.Top\r\n                || this.settings.legendPlace == LegendPlace.Bottom)\r\n                this.canvas.height -= Legend.getLegendHeight(this.settings.data.values, this.canvas.width)\r\n\r\n            if (this.settings.legendPlace == LegendPlace.Left\r\n                || this.settings.legendPlace == LegendPlace.Right)\r\n                this.canvas.width -= 500\r\n        }\r\n    }\r\n\r\n    protected getMousePosition(event: MouseEvent): Point {\r\n        return {\r\n            x: event.clientX - this.canvasPosition.x + scrollX,\r\n            y: event.clientY - this.canvasPosition.y + scrollY\r\n        }\r\n    }\r\n\r\n    applySettings(settings: ChartSettings) {\r\n        this.settings = settings\r\n    }\r\n}\r\n\r\nexport default Renderer","import Value from 'types/base/Value'\r\nimport TableValue from 'types/TableValue'\r\nimport TableData from 'types/TableData'\r\nimport Data from 'types/interfaces/Data'\r\n\r\nclass TreeData implements Data {\r\n    values: Value[]\r\n\r\n    padding: number\r\n\r\n    static getRows(data: TreeData): TableData {\r\n        const key = 'Value'\r\n\r\n        let values: TableValue[] = []\r\n\r\n        for (const value of data.values)\r\n            values.push({\r\n                name: value.label,\r\n                values: new Map([[key, value.value]])\r\n            })\r\n\r\n        return {\r\n            headers: [\r\n                {\r\n                    value: key,\r\n                    display: key\r\n                }\r\n            ],\r\n            values: values\r\n        }\r\n    }\r\n}\r\n\r\nexport default TreeData","import TableValue from 'types/TableValue'\r\nimport Sector from 'types/Sector'\r\nimport TableData from 'types/TableData'\r\nimport Data from 'types/interfaces/Data'\r\n\r\nclass CircularData implements Data {\r\n    values: Sector[]\r\n\r\n    innerRadius: number\r\n\r\n    innerTitle: string\r\n\r\n    static getRows(data: CircularData): TableData {\r\n        const key = 'Value'\r\n\r\n        let values: TableValue[] = []\r\n\r\n        for (const value of data.values)\r\n            values.push({\r\n                name: value.label,\r\n                values: new Map([[key, value.value]])\r\n            })\r\n\r\n        return {\r\n            headers: [\r\n                {\r\n                    value: key,\r\n                    display: key\r\n                }\r\n            ],\r\n            values: values\r\n        }\r\n    }\r\n}\r\n\r\nexport default CircularData","class Value {\r\n    id: string\r\n\r\n    baseColor: string\r\n\r\n    color: string\r\n\r\n    textColor: string\r\n\r\n    label: string\r\n\r\n    disabled: boolean\r\n\r\n    hideInLegend: boolean\r\n\r\n    data: { [key: string]: string }\r\n\r\n    value: number\r\n\r\n    toggle(transition: number) {\r\n        if (transition == 0)\r\n            this.disabled = !this.disabled\r\n    }\r\n\r\n    checkCondition(): boolean {\r\n        return false\r\n    }\r\n\r\n    reset() {\r\n        this.disabled = false\r\n    }\r\n}\r\n\r\nexport default Value","import PlotData from 'types/data/PlotData'\r\nimport Renderer from 'types/base/Renderer'\r\nimport * as Helper from 'Helper'\r\nimport DropdownItem from 'types/DropdownItem'\r\nimport PlotAxis from 'types/PlotAxis'\r\nimport Paddings from 'types/Paddings'\r\nimport Dropdown from 'Dropdown'\r\nimport HoverItem from 'types/HoverItem'\r\nimport PlotSeries from 'types/PlotSeries'\r\nimport Tooltip from 'Tooltip'\r\nimport Theme from 'Theme'\r\nimport Chart from 'Chart'\r\nimport TooltipValue from 'types/TooltipValue'\r\nimport Export from 'Export'\r\nimport Decomposition from 'Decomposition'\r\nimport Modal from 'Modal'\r\nimport TextResources from 'static/TextResources'\r\nimport Formatter from 'helpers/Formatter'\r\nimport Canvas from 'helpers/Canvas'\r\nimport { AnimationType, Icon, LineType, PlotAxisType, PlotType, RenderState } from 'static/Enums'\r\nimport * as Constants from 'static/constants/Index'\r\nimport TextStyles from 'helpers/TextStyles'\r\nimport Box from 'types/Box'\r\n\r\nclass PlotRenderer extends Renderer<PlotData> {\r\n    #x: PlotAxis\r\n\r\n    #y: PlotAxis\r\n\r\n    paddings: Paddings\r\n\r\n    #tooltipX: number\r\n\r\n    #tooltipY: number\r\n\r\n    #allValuesX: any[]\r\n\r\n    #allValuesY: any[]\r\n\r\n    plot: Box\r\n\r\n    #hoverX: HoverItem | undefined\r\n\r\n\r\n    base: PlotBase\r\n\r\n    tooltipValues: TooltipValue[]\r\n\r\n    constructor(chart: Chart) {\r\n        super(chart)\r\n\r\n        this.plot = new Box()\r\n    }\r\n\r\n    render() {\r\n        // TODO: move after empty ? or remove ?\r\n        super.render()\r\n\r\n        this.empty()\r\n\r\n        // TODO: if empty is rendered, then return\r\n\r\n        this.base.render()\r\n\r\n        this.series()\r\n\r\n        this.animate()\r\n        this.interact()\r\n\r\n        this.tooltip2()\r\n        this.dropdown2()\r\n\r\n        this.state = RenderState.Idle\r\n\r\n        this.nextFrame()\r\n    }\r\n\r\n    empty() { }\r\n\r\n    series() {\r\n        const ctx = Canvas.getContext(this.canvas),\r\n            paddings = this.paddings,\r\n            canvas = this.canvas\r\n\r\n        // setting default styles\r\n\r\n        // TextStyles.regular(ctx)\r\n        ctx.lineJoin = 'round'\r\n\r\n        //\r\n\r\n        const seriesClass = this.data.values.map(s => new PlotSeries2(s))\r\n\r\n        for (const series of seriesClass)\r\n            series.render()\r\n\r\n        //\r\n\r\n        let tooltipLines = []\r\n\r\n        const axisLineHoverColor = Theme.lineActive\r\n\r\n        let x = 0,\r\n            y = 0,\r\n            yValue = 0,\r\n            yHeight = 0,\r\n            columnWidth = 0\r\n\r\n        const seriesToRender = this.data.values.filter(s => !s.disabled)\r\n\r\n        let columnsIndex = 0,\r\n            columnsCount = seriesToRender.filter(s => s.type == PlotType.Column).length\r\n\r\n        let barsIndex = 0,\r\n            barsCount = seriesToRender.filter(s => s.type == PlotType.Bar).length\r\n\r\n        let stackingAccumulator = []\r\n        for (let i = 0; i < this.#allValuesY.length; i++)\r\n            stackingAccumulator.push(0)\r\n\r\n        for (const series of seriesToRender) {\r\n            ctx.beginPath()\r\n\r\n            ctx.strokeStyle = series.color\r\n            ctx.fillStyle = series.color\r\n            ctx.lineWidth = series.width\r\n            ctx.lineCap = 'round'\r\n\r\n            const anyHighlight = this.highlightItems.length != 0\r\n\r\n            if (!this.animations.contains(series.id, AnimationType.Init)) {\r\n                const changeColor = (transition: number, event: AnimationType) => {\r\n                    this.animations.reload(series.id, event)\r\n\r\n                    if (transition == 0)\r\n                        return\r\n\r\n                    let opacity = Math.round(255 - 127 * transition).toString(16)\r\n                    if (opacity.length < 2)\r\n                        opacity = 0 + opacity\r\n\r\n                    ctx.fillStyle = series.color + opacity\r\n                    ctx.strokeStyle = series.color + opacity\r\n                }\r\n\r\n                if (anyHighlight && !this.highlightItems.includes(series.id)) {\r\n                    this.animations.handle(\r\n                        series.id,\r\n                        AnimationType.AnotherItemOver,\r\n                        {\r\n                            duration: Constants.Animations.circular,\r\n                            body: transition => {\r\n                                changeColor(transition, AnimationType.AnotherItemLeave)\r\n                            }\r\n                        }\r\n                    )\r\n                } else if (!anyHighlight) {\r\n                    this.animations.handle(\r\n                        series.id,\r\n                        AnimationType.AnotherItemLeave,\r\n                        {\r\n                            timer: Constants.Dates.minDate,\r\n                            duration: Constants.Animations.circular,\r\n                            backward: true,\r\n                            body: transition => {\r\n                                changeColor(transition, AnimationType.AnotherItemOver)\r\n                            }\r\n                        }\r\n                    )\r\n                }\r\n            }\r\n\r\n            switch (series.lineType) {\r\n                case LineType.Dash:\r\n                    ctx.setLineDash([series.width * 3, series.width * 2])\r\n\r\n                    break\r\n\r\n                case LineType.Dotted:\r\n                    ctx.setLineDash([series.width, series.width])\r\n\r\n                    break\r\n\r\n                case LineType.Solid:\r\n                default:\r\n                    break\r\n            }\r\n\r\n            for (const value of series.values) {\r\n                let index = series.values.indexOf(value),\r\n                    xIndex = this.#allValuesX.indexOf(this.data.xType == PlotAxisType.Date ? value.x?.toString() : value.x),\r\n                    yIndex = this.#allValuesY.indexOf(value.y)\r\n\r\n                const getTooltipValue = () => {\r\n                    return {\r\n                        x: Formatter.format(value.x, this.data.xType),\r\n                        y: Formatter.format(value.y, PlotAxisType.Number, this.settings.valuePostfix)\r\n                    }\r\n                }\r\n\r\n                x = paddings.left\r\n                if (series.type != PlotType.Bar)\r\n                    x += xIndex * this.#x.step\r\n                if (series.type == PlotType.Line)\r\n                    x -= this.#x.step / 2 - this.#x.step\r\n\r\n                switch (series.type) {\r\n                    case PlotType.Line:\r\n                        y = paddings.top + this.plot.height - <number>value.y / this.#y.unit * this.#y.step\r\n                            - Math.abs(this.#y.min / this.#y.unit * this.#y.step)\r\n\r\n                        const pointDuration = 1500 / series.values.length * 1.2\r\n\r\n                        if (this.state == RenderState.Init || this.animations.contains(value.id, AnimationType.Init)) {\r\n                            this.animations.handle(value.id,\r\n                                AnimationType.Init,\r\n                                {\r\n                                    timer: new Date(Date.now()).addMilliseconds(pointDuration * index),\r\n                                    duration: pointDuration,\r\n                                    continuous: true,\r\n                                    body: transition => {\r\n                                        if (index == 0)\r\n                                            return\r\n\r\n                                        // TODO: if use gradient then no need to calculate intermediate values ?\r\n\r\n                                        x = paddings.left + (xIndex - .5) * this.#x.step\r\n                                        y = paddings.top + this.plot.height - <number>value.y / this.#y.unit * this.#y.step\r\n                                            - Math.abs(this.#y.min / this.#y.unit * this.#y.step)\r\n\r\n                                        const next = series.values[index - 1]\r\n\r\n                                        const prevValue = {\r\n                                            x: paddings.left + (xIndex - .5) * this.#x.step,\r\n                                            y: paddings.top + this.plot.height - <number>next.y / this.#y.unit * this.#y.step\r\n                                               - Math.abs(this.#y.min / this.#y.unit * this.#y.step)\r\n                                        },\r\n                                            endPoint = {\r\n                                                x: prevValue.x + (this.#x.step + (x - prevValue.x)) * transition,\r\n                                                y: prevValue.y + (y - prevValue.y) * transition\r\n                                            }\r\n\r\n                                        if (prevValue.x != endPoint.x && prevValue.y != endPoint.y) {\r\n                                            ctx.moveTo(prevValue.x, prevValue.y)\r\n                                            ctx.lineTo(endPoint.x, endPoint.y)\r\n                                        }\r\n                                    }\r\n                                })\r\n                        } else {\r\n                            ctx.lineTo(x, y)\r\n\r\n                            if (this.#isOnX(x)) {\r\n                                const mouse = this.getMousePosition(this.moveEvent)\r\n\r\n                                if (Math.abs(mouse.y - y) < 5) {\r\n                                    this.#hoverX = {\r\n                                        x: x,\r\n                                        y: y,\r\n                                        index: index,\r\n                                        data: value.data,\r\n                                        series: series\r\n                                    }\r\n\r\n                                    tooltipLines.push(new TooltipValue(`${ series.label }: ${ getTooltipValue().y }`, series.color))\r\n                                    this.#tooltipX = x - this.#x.step / 2\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        break\r\n\r\n                    case PlotType.AttentionLine:\r\n                        yValue = canvas.height - paddings.bottom - <number>value.y / this.#y.unit * this.#y.step\r\n\r\n                        ctx.moveTo(paddings.left, yValue)\r\n\r\n                        if (this.state == RenderState.Init || this.animations.contains(value.id, AnimationType.Init))\r\n                            this.animations.handle(value.id,\r\n                                AnimationType.Init,\r\n                                {\r\n                                    duration: 1500,\r\n                                    continuous: true,\r\n                                    body: transition => {\r\n                                        ctx.lineTo(paddings.left + (canvas.width - paddings.left - paddings.right) * transition,\r\n                                            canvas.height - paddings.bottom - <number>value.y / this.#y.unit * this.#y.step)\r\n                                    }\r\n                                })\r\n                        else\r\n                            ctx.lineTo(canvas.width - paddings.right, yValue)\r\n\r\n                        break\r\n\r\n                    case PlotType.Column:\r\n                        yValue = <number>value.y > this.data.yMax ? this.data.yMax : <number>value.y\r\n\r\n                        y = this.plot.height * yValue / this.#y.max\r\n                        if (y < this.#y.minStep)\r\n                            y = this.#y.minStep\r\n\r\n                        columnWidth = this.#x.step * (series.width ? series.width / 100 : .5) / columnsCount\r\n\r\n                        ctx.beginPath()\r\n\r\n                        if (this.state == RenderState.Init || this.animations.contains(value.id + columnsIndex, AnimationType.Init)) {\r\n                            this.animations.handle(value.id + columnsIndex,\r\n                                AnimationType.Init,\r\n                                {\r\n                                    duration: 800,\r\n                                    continuous: true,\r\n                                    body: transition => {\r\n                                        yValue = <number>value.y > this.data.yMax ? this.data.yMax : <number>value.y\r\n\r\n                                        x = paddings.left + xIndex * this.#x.step\r\n                                        y = this.plot.height * yValue / this.#y.max * transition\r\n\r\n                                        if (y < this.#y.minStep)\r\n                                            y = this.#y.minStep * transition\r\n\r\n                                        columnsIndex = this.data.values.filter(s => s.type == PlotType.Column)\r\n                                                           .indexOf(series)\r\n\r\n                                        ctx.roundRect(x + columnsIndex * columnWidth + (this.#x.step - columnsCount * columnWidth) / 2,\r\n                                            canvas.height - paddings.bottom - y,\r\n                                            columnWidth,\r\n                                            y,\r\n                                            [6, 6, 0, 0])\r\n                                        ctx.fill()\r\n                                    }\r\n                                })\r\n                        } else {\r\n                            if (this.#isInArea(x + columnsIndex * columnWidth + (this.#x.step - columnsCount * columnWidth) / 2,\r\n                                    canvas.height - paddings.bottom - y,\r\n                                    columnWidth,\r\n                                    y)\r\n                                && (this.contextMenu?.isActive == undefined\r\n                                    || this.contextMenu?.isActive == false)) {\r\n                                this.#hoverX = {\r\n                                    x: x,\r\n                                    y: y,\r\n                                    index: index,\r\n                                    data: value.data,\r\n                                    series: series\r\n                                }\r\n\r\n                                tooltipLines.push(new TooltipValue(`${ series.label }: ${ getTooltipValue().y }`, series.color))\r\n                                this.#tooltipX = x\r\n                            }\r\n\r\n                            ctx.roundRect(x + columnsIndex * columnWidth + (this.#x.step - columnsCount * columnWidth) / 2,\r\n                                canvas.height - paddings.bottom - y,\r\n                                columnWidth,\r\n                                y,\r\n                                [6, 6, 0, 0])\r\n                            ctx.fill()\r\n                        }\r\n\r\n                        break\r\n\r\n                    case PlotType.Bar:\r\n                        y = paddings.top + yIndex * this.#y.step + this.#y.step / 2\r\n                            + (100 - series.width) * this.#y.step / 100 / 2\r\n\r\n                        const seriesHeight = (series.width * this.#y.step / 100) / barsCount\r\n\r\n                        if (this.state == RenderState.Init || this.animations.contains(value.id + barsIndex, AnimationType.Init)) {\r\n                            this.animations.handle(value.id + barsIndex,\r\n                                AnimationType.Init,\r\n                                {\r\n                                    duration: 800,\r\n                                    continuous: true,\r\n                                    body: transition => {\r\n                                        y = paddings.top + yIndex * this.#y.step + this.#y.step / 2\r\n                                            + (100 - series.width) * this.#y.step / 100 / 2\r\n\r\n                                        barsIndex = this.data.values.filter(s => s.type == PlotType.Bar)\r\n                                                        .indexOf(series)\r\n\r\n                                        ctx.fillRect(x,\r\n                                            y - this.#y.step / 2 + barsIndex * seriesHeight,\r\n                                            <number>value.x / this.#x.unit * this.#x.step * transition,\r\n                                            seriesHeight)\r\n                                    }\r\n                                })\r\n                        } else {\r\n                            if (this.#isInArea(x,\r\n                                y - this.#y.step / 2 + barsIndex * seriesHeight,\r\n                                <number>value.x / this.#x.unit * this.#x.step,\r\n                                seriesHeight)) {\r\n                                this.#hoverX = {\r\n                                    x: x,\r\n                                    y: y,\r\n                                    index: index,\r\n                                    data: value.data,\r\n                                    series: series\r\n                                }\r\n\r\n                                tooltipLines.push(new TooltipValue(`${ series.label }: ${ getTooltipValue().x }`, series.color))\r\n                                this.#tooltipY = y - this.#y.step / 2\r\n                            }\r\n\r\n                            ctx.fillRect(x,\r\n                                y - this.#y.step / 2 + barsIndex * seriesHeight,\r\n                                <number>value.x / this.#x.unit * this.#x.step,\r\n                                seriesHeight)\r\n                        }\r\n\r\n                        break\r\n\r\n                    case PlotType.StackingColumn:\r\n                        y = canvas.height - paddings.bottom - <number>value.y / this.#y.unit * this.#y.step\r\n\r\n                        columnWidth = this.#x.step * (series.width ? series.width / 100 : .5)\r\n\r\n                        if (this.state == RenderState.Init || this.animations.contains(value.id + index, AnimationType.Init)) {\r\n                            this.animations.handle(value.id + index,\r\n                                AnimationType.Init,\r\n                                {\r\n                                    duration: 800,\r\n                                    continuous: true,\r\n                                    body: transition => {\r\n                                        columnsIndex = this.data.values.filter(s => s.type == PlotType.StackingColumn\r\n                                                                                    && s.values.filter(v => this.data.xType == PlotAxisType.Date\r\n                                                                                                            ? (v.x as Date).getTime() == (value.x as Date).getTime()\r\n                                                                                                            : v.x == value.x)\r\n                                                                                        .length > 0)\r\n                                                           .indexOf(series)\r\n\r\n                                        x = paddings.left + xIndex * this.#x.step\r\n                                        y = canvas.height - paddings.bottom - <number>value.y / this.#y.unit * this.#y.step\r\n\r\n                                        if (columnsIndex == 0)\r\n                                            stackingAccumulator[xIndex] = 0\r\n\r\n                                        let offset = stackingAccumulator[xIndex] != undefined\r\n                                                     ? stackingAccumulator[xIndex]\r\n                                                     : 0\r\n\r\n                                        yValue = canvas.height - paddings.bottom + offset\r\n                                        yHeight = (y - canvas.height + paddings.bottom) * transition\r\n\r\n                                        if (yValue > paddings.top) {\r\n                                            if (yValue + yHeight < paddings.top)\r\n                                                yHeight -= yValue + yHeight - paddings.top\r\n\r\n                                            ctx.fillRect(x + (this.#x.step - columnWidth) / 2,\r\n                                                yValue,\r\n                                                columnWidth,\r\n                                                yHeight)\r\n                                        }\r\n\r\n                                        stackingAccumulator[xIndex] += (y - canvas.height + paddings.bottom) * transition\r\n                                    }\r\n                                })\r\n                        } else {\r\n                            if (columnsIndex == 0)\r\n                                stackingAccumulator[xIndex] = 0\r\n\r\n                            let offset = stackingAccumulator[xIndex] != undefined\r\n                                         ? stackingAccumulator[xIndex]\r\n                                         : 0\r\n\r\n                            yValue = canvas.height - paddings.bottom + offset\r\n                            yHeight = y - canvas.height + paddings.bottom\r\n\r\n                            if (yValue > paddings.top) {\r\n                                if (yValue + yHeight < paddings.top)\r\n                                    yHeight -= yValue + yHeight - paddings.top\r\n\r\n                                if (this.#isInArea(x + (this.#x.step - columnWidth) / 2,\r\n                                    yValue + yHeight,\r\n                                    columnWidth,\r\n                                    Math.abs(yHeight))) {\r\n                                    this.#hoverX = {\r\n                                        x: x,\r\n                                        y: y,\r\n                                        index: xIndex,\r\n                                        data: value.data,\r\n                                        series: series\r\n                                    }\r\n\r\n                                    tooltipLines.push(new TooltipValue(`${ series.label }: ${ getTooltipValue().y }`, series.color))\r\n                                    this.#tooltipX = x\r\n                                }\r\n\r\n                                ctx.fillRect(x + (this.#x.step - columnWidth) / 2,\r\n                                    yValue,\r\n                                    columnWidth,\r\n                                    yHeight)\r\n                            }\r\n\r\n                            stackingAccumulator[xIndex] += (y - canvas.height + paddings.bottom)\r\n                        }\r\n\r\n                        break\r\n                }\r\n            }\r\n\r\n            ctx.setLineDash([])\r\n\r\n            switch (series.type) {\r\n                case PlotType.Line:\r\n                    ctx.stroke()\r\n\r\n                    if (this.#hoverX && this.#hoverX.series == series) {\r\n                        ctx.beginPath()\r\n                        ctx.lineWidth = 1\r\n                        ctx.strokeStyle = axisLineHoverColor\r\n                        ctx.moveTo(paddings.left, this.#hoverX.y)\r\n                        ctx.lineTo(canvas.width - paddings.right, this.#hoverX.y)\r\n                        ctx.stroke()\r\n\r\n                        let radius = Math.round(series.width * 1.1)\r\n                        if (radius < 5)\r\n                            radius = 5\r\n\r\n                        ctx.beginPath()\r\n                        ctx.arc(this.#hoverX.x, this.#hoverX.y, radius, 0, 2 * Math.PI)\r\n                        ctx.fill()\r\n                        ctx.lineWidth = Math.ceil(radius / 2)\r\n                        ctx.strokeStyle = Helper.adjustColor(series.color, 50)\r\n                        ctx.stroke()\r\n                    }\r\n\r\n                    break\r\n\r\n                case PlotType.AttentionLine:\r\n                    ctx.stroke()\r\n\r\n                    TextStyles.regular(ctx)\r\n                    ctx.fillText(series.label,\r\n                        paddings.left + (canvas.width - paddings.left - paddings.right) / 2,\r\n                        canvas.height - paddings.bottom - <number>series.values[0].y / this.#y.unit * this.#y.step + 16)\r\n\r\n                    break\r\n\r\n                case PlotType.Column:\r\n                case PlotType.StackingColumn:\r\n                case PlotType.Bar:\r\n                    if (this.#hoverX)\r\n                        this.highlight(this.#hoverX.series)\r\n\r\n                    columnsIndex++\r\n                    barsIndex++\r\n\r\n                    break\r\n            }\r\n        }\r\n\r\n        this.tooltipValues = tooltipLines\r\n    }\r\n\r\n    animate() { }\r\n\r\n    interact() { }\r\n\r\n    refresh() {\r\n        super.refresh()\r\n    }\r\n\r\n    resize() {\r\n        super.resize()\r\n\r\n        this.size()\r\n    }\r\n\r\n    // TODO: better name ?\r\n    prepareSettings() {\r\n        super.prepareSettings()\r\n\r\n        // v | map data\r\n        // v | flip bar series\r\n        // v | normalize data\r\n\r\n        let values = []\r\n\r\n        for (let series of this.data.values) {\r\n            series = new PlotSeries(series)\r\n\r\n            if (series.type == PlotType.Bar)\r\n                series.inverse()\r\n\r\n            series.normalize(this.data.xType)\r\n\r\n            values.push(series)\r\n        }\r\n\r\n        this.data.values = values\r\n\r\n        // v | set paddings\r\n\r\n        this.setPaddings()\r\n\r\n        // init tooltip\r\n\r\n        this.tooltip = new Tooltip(this.canvas, this.settings)\r\n\r\n        this.base = new PlotBase(this, this.data)\r\n    }\r\n\r\n    size() {\r\n        this.plot.set(\r\n            this.canvas.width - this.paddings.left - this.paddings.right,\r\n            this.canvas.height - this.paddings.top - this.paddings.bottom\r\n        )\r\n\r\n        // flat values\r\n\r\n        let xValues = this.data.values.flatMap(s => s.values.map(p => p.x)),\r\n            yValues = this.data.values.flatMap(s => s.values.map(p => p.y as number))\r\n\r\n        const isDate = this.data.xType == PlotAxisType.Date,\r\n            isText = this.data.xType == PlotAxisType.Text,\r\n            isNumber = !isDate && !isText\r\n\r\n        // adding missed dates to x-axis\r\n\r\n        const byAsc = (a: string | number | Date, b: string | number | Date) => b > a ? -1 : 1\r\n\r\n        if (isDate) {\r\n            let tempDate = new Date(Math.min(...(<number[]>xValues)))\r\n\r\n            while (tempDate.getTime() < Math.max(...(<number[]>xValues))) {\r\n                if (!xValues.includes(tempDate.getTime()))\r\n                    xValues.push(new Date(tempDate.getTime()))\r\n\r\n                tempDate = tempDate.addDays(1)\r\n            }\r\n\r\n            xValues.sort(byAsc)\r\n        }\r\n\r\n        // add rounded to last\r\n\r\n        if (this.base.isVertical)\r\n            xValues = Helper.getRoundedValues(xValues as number[])\r\n        else\r\n            yValues = Helper.getRoundedValues(yValues)\r\n\r\n        // setting all values\r\n\r\n        yValues.sort(byAsc)\r\n\r\n        this.#allValuesX = [...new Set(xValues.filter(x => x != undefined).map(x => isDate ? x.toString() : x))]\r\n        this.#allValuesY = [...new Set(yValues.filter(y => y != undefined))]\r\n\r\n        //\r\n\r\n        const plot = this.plot\r\n\r\n        // setting variables for x-axis\r\n\r\n        const xUnit = (xValues[1] as number) - (xValues[0] as number)\r\n\r\n        this.#x = {\r\n            min: Math.min(...(<number[]>xValues)),\r\n            max: Math.max(...(<number[]>xValues)),\r\n            unit: xUnit,\r\n            step: plot.width / this.#allValuesX.length,\r\n            minStep: 0\r\n        }\r\n\r\n        // setting variables for y-axis\r\n\r\n        const yMin = Math.min(Math.min(...yValues), 0)\r\n        const yUnit = yValues[1] - yValues[0]\r\n\r\n        const yStepOffset = this.base.isVertical ? 0 : 1\r\n\r\n        this.#y = {\r\n            min: yMin,\r\n            max: this.data.yMax ?? Math.max(...yValues),\r\n            unit: yUnit,\r\n            step: plot.height / (this.#allValuesY.length - yStepOffset),\r\n            minStep: 0\r\n        }\r\n\r\n        // init settings for stacking columns\r\n\r\n        let stackingColumns = this.data.values.filter(s => s.type == PlotType.StackingColumn)\r\n\r\n        let max\r\n\r\n        if (stackingColumns.length > 0) {\r\n            let values = stackingColumns.map(s => s.values.flatMap(v => +v.y))\r\n\r\n            max = this.#y.max\r\n\r\n            for (let i = 0; i < values[0].length; i++) {\r\n                let sum = 0\r\n\r\n                for (const v of values)\r\n                    sum += v[i]\r\n\r\n                if (sum > max)\r\n                    max = sum\r\n            }\r\n\r\n            this.#y.max = max > this.data.yMax ? this.data.yMax : max\r\n            this.#y.unit = (Math.abs(this.#y.min) + Math.abs(this.#y.max)) / (this.#allValuesY.length - 1)\r\n        }\r\n\r\n        // getting max width for y label and add offset to left padding\r\n        // TODO: remove ? rework ?\r\n\r\n        // const paddings = this.paddings,\r\n        //     canvas = this.canvas\r\n        //\r\n        // const yMaxWidth = Helper.stringWidth(Formatter.number(this.#y.max))\r\n        // if (yMaxWidth > this.paddings.left - 40 && !this.data.simple) {\r\n        //     this.paddings.left += yMaxWidth - this.paddings.left + 40\r\n        //     this.#x.step = (this.canvas.width - this.paddings.left - this.paddings.right) / this.#allValuesX.length\r\n        // }\r\n    }\r\n\r\n    initDropdown() {\r\n        super.initDropdown()\r\n\r\n        if (this.data.simple) {\r\n            this.dropdown = undefined\r\n\r\n            return\r\n        }\r\n\r\n        this.dropdown = new Dropdown(this.canvas,\r\n            {\r\n                x: -10,\r\n                y: 10,\r\n                icon: Icon.ThreeLines,\r\n                items: [\r\n                    DropdownItem.button(\r\n                        TextResources.exportPNG,\r\n                        () => Export.asPng(this.canvas, this.settings.title)\r\n                    ),\r\n                    DropdownItem.button(\r\n                        TextResources.exportCSV,\r\n                        () => Export.asCsv(\r\n                            Decomposition.toTable(PlotData.getRows(this.data)),\r\n                            this.settings.title\r\n                        )\r\n                    ),\r\n                    DropdownItem.divider(),\r\n                    DropdownItem.button(\r\n                        TextResources.decomposeToTable,\r\n                        () => new Modal(\r\n                            Decomposition.toTable(PlotData.getRows(this.data)),\r\n                            undefined,\r\n                            this.settings.title ?? TextResources.dataAsTable)\r\n                            .open()\r\n                    )\r\n                ]\r\n            })\r\n    }\r\n\r\n    tooltip2() {\r\n        if (this.data.simple)\r\n            return\r\n\r\n        if (this.tooltipValues.length > 0) {\r\n            const getValue = (labels: Map<number, string>, pos: number) => {\r\n                let curr = 0,\r\n                    index = 0\r\n\r\n                let keys = [...labels.keys()]\r\n\r\n                while (curr < pos)\r\n                    curr = keys[index++]\r\n\r\n                return labels.get(curr)\r\n            }\r\n\r\n            this.tooltipValues.unshift(\r\n                new TooltipValue(\r\n                    this.base.isVertical\r\n                    ? getValue(this.base.labelsY, this.#tooltipY)\r\n                    : getValue(this.base.labelsX, this.#tooltipX)\r\n                )\r\n            )\r\n        }\r\n\r\n        this.tooltip.render(\r\n            this.tooltipValues.length > 1 && !this.dropdown?.isActive,\r\n            this.moveEvent,\r\n            this.tooltipValues,\r\n            this.#hoverX\r\n            ? this.#hoverX.series!.values[this.#hoverX.index]\r\n            : undefined\r\n        )\r\n    }\r\n\r\n    dropdown2() {\r\n        super.renderDropdown()\r\n\r\n        if (this.menuEvent && !this.#hoverX)\r\n            this.menuEvent = undefined\r\n\r\n        if (this.#hoverX == undefined)\r\n            this.highlight()\r\n\r\n        // reset hover if context menu is open\r\n\r\n        if (this.#hoverX\r\n            && (this.renderContextMenu(this.#hoverX.data)\r\n                || !this.menuEvent))\r\n            this.#hoverX = undefined\r\n    }\r\n\r\n    nextFrame() {\r\n        if (!this.isDestroy)\r\n            requestAnimationFrame(this.render.bind(this))\r\n    }\r\n\r\n    private setPaddings() {\r\n        if (!this.data.simple)\r\n            this.paddings = {\r\n                top: 30,\r\n                right: 40,\r\n                bottom: 50,\r\n                left: 80\r\n            }\r\n        else\r\n            this.paddings = {\r\n                top: 10,\r\n                right: 10,\r\n                bottom: 10,\r\n                left: 10\r\n            }\r\n\r\n        if (this.settings.title)\r\n            this.paddings.top += Constants.Values.titleOffset\r\n    }\r\n\r\n\r\n\r\n    #isInArea(x: number, y: number, w: number, h: number) {\r\n        if (!this.moveEvent)\r\n            return false\r\n\r\n        const mouse = this.getMousePosition(this.moveEvent)\r\n\r\n        return !(this.dropdown?.isActive ?? false)\r\n               && mouse.x >= x && mouse.x <= x + w\r\n               && mouse.y >= y && mouse.y <= y + h\r\n    }\r\n\r\n    // TODO: combine with this.isInArea()\r\n    #isOnX(x: number) {\r\n        if (!this.moveEvent)\r\n            return false\r\n\r\n        const mouse = this.getMousePosition(this.moveEvent)\r\n\r\n        return !(this.dropdown?.isActive ?? false)\r\n               && x - this.#x.step / 2 <= mouse.x && mouse.x < x + this.#x.step / 2\r\n               && this.paddings.top <= mouse.y && mouse.y <= this.canvas.height - this.paddings.bottom\r\n               && this.paddings.left < mouse.x\r\n    }\r\n}\r\n\r\nclass PlotSeries2 extends PlotSeries {\r\n    constructor(obj: object) {\r\n        super(obj)\r\n\r\n        Object.assign(this, obj)\r\n    }\r\n\r\n    render() {\r\n        this.area()\r\n        this.label2()\r\n\r\n        this.animate()\r\n        this.interact()\r\n    }\r\n\r\n    animate() { }\r\n\r\n    interact() { }\r\n\r\n    area() { }\r\n\r\n    label2() { }\r\n\r\n    // isInArea(x: number, y: number, w: number, h: number) {\r\n    //     // if (!this.moveEvent)\r\n    //     //     return false\r\n    //     //\r\n    //     // const mouse = this.getMousePosition(this.moveEvent)\r\n    //     //\r\n    //     // return !(this.dropdown?.isActive ?? false)\r\n    //     //        && mouse.x >= x && mouse.x <= x + w\r\n    //     //        && mouse.y >= y && mouse.y <= y + h\r\n    // }\r\n    //\r\n    // // TODO: combine with this.isInArea()\r\n    // isOnX(x: number) {\r\n    //     // if (!this.moveEvent)\r\n    //     //     return false\r\n    //     //\r\n    //     // const mouse = this.getMousePosition(this.moveEvent)\r\n    //     //\r\n    //     // return !(this.dropdown?.isActive ?? false)\r\n    //     //        && x - this.#x.step / 2 <= mouse.x && mouse.x < x + this.#x.step / 2\r\n    //     //        && this.#paddings.top <= mouse.y && mouse.y <= this.canvas.height - this.#paddings.bottom\r\n    //     //        && this.#paddings.left < mouse.x\r\n    // }\r\n\r\n    canRenderLabel() { }\r\n}\r\n\r\nclass PlotBase {\r\n    renderer: PlotRenderer\r\n\r\n    data: PlotData\r\n\r\n    isVertical: boolean\r\n\r\n    labelsX: Map<number, string>\r\n\r\n    labelsY: Map<number, string>\r\n\r\n    // TODO: uncomment\r\n    // labels: PlotBaseLabels\r\n\r\n    constructor(renderer: PlotRenderer, data: PlotData) {\r\n        this.renderer = renderer\r\n        this.data = data\r\n\r\n        this.isVertical = data.values.filter(s => s.type == PlotType.Bar).length > 0\r\n\r\n        // this.calculateLabels()\r\n    }\r\n\r\n    render() {\r\n        this.clear()\r\n\r\n        if (this.data.simple)\r\n            return\r\n\r\n        this.calculateLabels()\r\n\r\n        this.lines()\r\n        this.backlines()\r\n        this.labels()\r\n        this.titles()\r\n\r\n        this.renderer.renderTitle()\r\n    }\r\n\r\n    clear() {\r\n        const canvas = this.renderer.canvas,\r\n            ctx = Canvas.getContext(canvas)\r\n\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height)\r\n    }\r\n\r\n    lines() {\r\n        const canvas = this.renderer.canvas,\r\n            paddings = this.renderer.paddings\r\n\r\n        const ctx = Canvas.getContext(canvas)\r\n\r\n        // clear area around this.#plot\r\n\r\n        ctx.fillStyle = Theme.canvasBackground\r\n\r\n        ctx.fillRect(0, 0, paddings.left, canvas.height)\r\n        ctx.fillRect(0, 0, canvas.width, paddings.top)\r\n        ctx.fillRect(canvas.width - paddings.right, 0, canvas.width, canvas.height)\r\n        ctx.fillRect(0, canvas.height - paddings.bottom, canvas.width, canvas.height)\r\n\r\n        ctx.setLineDash([])\r\n\r\n        // set baselines\r\n\r\n        ctx.beginPath()\r\n\r\n        ctx.strokeStyle = Theme.line\r\n        ctx.lineWidth = 1\r\n\r\n        ctx.moveTo(paddings.left, canvas.height - paddings.bottom)\r\n\r\n        if (this.isVertical)\r\n            ctx.lineTo(paddings.left, paddings.top)\r\n        else\r\n            ctx.lineTo(canvas.width - paddings.right, canvas.height - paddings.bottom)\r\n\r\n        ctx.stroke()\r\n    }\r\n\r\n    backlines() {\r\n        const canvas = this.renderer.canvas,\r\n            paddings = this.renderer.paddings\r\n\r\n        const ctx = Canvas.getContext(canvas)\r\n\r\n        ctx.lineWidth = 1\r\n        ctx.strokeStyle = Theme.lineAxis\r\n        ctx.setLineDash([6, 6])\r\n\r\n        if (this.isVertical) {\r\n            for (const l of this.labelsX) {\r\n                const x = l[0]\r\n\r\n                if (x == paddings.left)\r\n                    continue\r\n\r\n                ctx.beginPath()\r\n\r\n                ctx.moveTo(x, paddings.top)\r\n                ctx.lineTo(x, canvas.height - paddings.bottom)\r\n\r\n                ctx.stroke()\r\n            }\r\n        }\r\n\r\n        if (!this.isVertical) {\r\n            for (const l of this.labelsY) {\r\n                const y = l[0]\r\n\r\n                if (y == canvas.height - paddings.bottom)\r\n                    continue\r\n\r\n                ctx.beginPath()\r\n\r\n                ctx.moveTo(paddings.left, y)\r\n                ctx.lineTo(canvas.width - paddings.right, y)\r\n\r\n                ctx.stroke()\r\n            }\r\n        }\r\n    }\r\n\r\n    labels() {\r\n        const canvas = this.renderer.canvas,\r\n            paddings = this.renderer.paddings\r\n\r\n        const ctx = Canvas.getContext(canvas)\r\n\r\n        TextStyles.regular(ctx)\r\n\r\n        for (const point of this.labelsX) {\r\n            const x = point[0],\r\n                y = canvas.height - paddings.bottom + 20\r\n\r\n            if (Canvas.isCanRender(ctx, x, y, point[1], 20))\r\n                ctx.fillText(point[1], x, y)\r\n        }\r\n\r\n        for (const point of this.labelsY) {\r\n            const x = paddings.left - 10,\r\n                y = point[0]\r\n\r\n            ctx.textAlign = 'end'\r\n\r\n            if (Canvas.isCanRender(ctx, x, y, point[1], 20, true))\r\n                ctx.fillText(point[1], x, y)\r\n        }\r\n    }\r\n\r\n    titles() {\r\n        /*\r\n         * render x-axis title\r\n         * render y-axis title\r\n         */\r\n\r\n        const canvas = this.renderer.canvas,\r\n            paddings = this.renderer.paddings\r\n\r\n        const ctx = Canvas.getContext(canvas)\r\n\r\n        if (this.data.xTitle || this.data.yTitle) {\r\n            ctx.textAlign = 'center'\r\n            ctx.textBaseline = 'bottom'\r\n            ctx.fillStyle = Theme.text\r\n\r\n            if (this.data.xTitle)\r\n                ctx.fillText(this.data.xTitle,\r\n                    paddings.left + (canvas.width - paddings.left - paddings.right) / 2,\r\n                    canvas.height - 4)\r\n\r\n            if (this.data.yTitle) {\r\n                ctx.rotate(-Math.PI / 2)\r\n\r\n                ctx.textBaseline = 'top'\r\n\r\n                ctx.fillText(this.data.yTitle,\r\n                    -(paddings.top + (canvas.height - paddings.top - paddings.bottom) / 2),\r\n                    8)\r\n\r\n                ctx.resetTransform()\r\n            }\r\n        }\r\n    }\r\n\r\n    calculateLabels() {\r\n        const paddings = this.renderer.paddings\r\n\r\n        this.labelsX = new Map<number, string>()\r\n        this.labelsY = new Map<number, string>()\r\n\r\n        let uniqueX = [...new Set(this.data.values.flatMap(s => s.values).flatMap(v => v.x))],\r\n            uniqueY = [...new Set(this.data.values.flatMap(s => s.values).flatMap(v => v.y as number))]\r\n\r\n        // getting rounded values\r\n\r\n        if (this.isVertical)\r\n            uniqueX = Helper.getRoundedValues(uniqueX as number[])\r\n        else\r\n            uniqueY = Helper.getRoundedValues(uniqueY).reverse()\r\n\r\n        //\r\n\r\n        const stepXOffset = this.isVertical ? 1 : 0,\r\n            stepYOffset = this.isVertical ? 0 : 1\r\n        const xOffset = this.isVertical ? 0 : .5,\r\n            yOffset = this.isVertical ? .5 : 0\r\n\r\n        const stepX = this.renderer.plot.width / (uniqueX.length - stepXOffset),\r\n            stepY = this.renderer.plot.height / (uniqueY.length - stepYOffset)\r\n\r\n        for (let i = 0; i < uniqueX.length; i++)\r\n            this.labelsX.set(\r\n                Math.round(paddings.left + stepX * (i + xOffset)),\r\n                Formatter.format(\r\n                    uniqueX[i],\r\n                    this.renderer.data.xType\r\n                )\r\n            )\r\n\r\n        for (let i = 0; i < uniqueY.length; i++)\r\n            this.labelsY.set(\r\n                paddings.top + stepY * (i + yOffset),\r\n                Formatter.format(\r\n                    uniqueY[i],\r\n                    PlotAxisType.Number\r\n                )\r\n            )\r\n    }\r\n}\r\n\r\nclass PlotBaseLabels {\r\n    constructor() {\r\n\r\n    }\r\n\r\n    calculate() {\r\n\r\n    }\r\n\r\n    render() {\r\n\r\n    }\r\n\r\n    private round() {\r\n\r\n    }\r\n}\r\n\r\nexport default PlotRenderer","export class Dates {\r\n    static minDate = new Date(2000, 1, 1)\r\n}","import Theme from 'Theme'\r\n\r\nabstract class TextStyles {\r\n    static title(context: CanvasRenderingContext2D) {\r\n        context.fillStyle = Theme.text\r\n        context.textAlign = 'center'\r\n        context.textBaseline = 'middle'\r\n        context.font = '20px sans-serif'\r\n    }\r\n\r\n    static regular(context: CanvasRenderingContext2D) {\r\n        context.fillStyle = Theme.text\r\n        context.textAlign = 'center'\r\n        context.textBaseline = 'middle'\r\n        context.font = '14px sans-serif'\r\n    }\r\n\r\n    static large(context: CanvasRenderingContext2D) {\r\n        context.fillStyle = Theme.text\r\n        context.textAlign = 'center'\r\n        context.textBaseline = 'middle'\r\n        context.font = '16px sans-serif'\r\n    }\r\n\r\n    static tooltip(context: CanvasRenderingContext2D) {\r\n        context.font = '14px sans-serif'\r\n        context.textAlign = 'start'\r\n        context.textBaseline = 'alphabetic'\r\n    }\r\n\r\n    static circularLabel(context: CanvasRenderingContext2D, isRight: boolean) {\r\n        context.textAlign = isRight ? 'start' : 'end'\r\n        context.textBaseline = 'alphabetic'\r\n        context.font = '14px sans-serif'\r\n    }\r\n}\r\n\r\nexport default TextStyles","import ChartSettings from 'types/ChartSettings'\r\nimport Animations from 'Animations'\r\nimport Tooltip from 'Tooltip'\r\nimport Dropdown from 'Dropdown'\r\nimport Chart from 'Chart'\r\nimport Canvas from 'helpers/Canvas'\r\nimport { Events, RenderState, Tag } from 'static/Enums'\r\nimport Styles from 'static/constants/Styles'\r\nimport Theme from 'Theme'\r\n\r\nclass Renderable {\r\n    node: HTMLElement\r\n\r\n    canvas: HTMLCanvasElement\r\n\r\n    settings: ChartSettings\r\n\r\n    animations: Animations\r\n\r\n    tooltip: Tooltip\r\n\r\n    protected state: RenderState = RenderState.Init\r\n\r\n    protected canvasPosition: DOMRect\r\n\r\n    protected moveEvent: MouseEvent\r\n\r\n    protected clickEvent: MouseEvent | undefined\r\n\r\n    protected menuEvent: MouseEvent | undefined\r\n\r\n    protected contextMenu: Dropdown | undefined\r\n\r\n    constructor(chart: Chart) {\r\n        this.node = chart.node\r\n        this.settings = chart.settings\r\n        this.animations = new Animations()\r\n\r\n        this.canvas = document.createElement(Tag.Canvas)\r\n\r\n        this.canvas.style.imageRendering = Styles.ImageRendering.Pixelated\r\n\r\n        this.node.append(this.canvas)\r\n\r\n        this.initAnimations()\r\n    }\r\n\r\n    render() {\r\n        const ctx = Canvas.getContext(this.canvas)\r\n\r\n        ctx.fillStyle = Theme.canvasBackground\r\n        ctx.fillRect(0, 0, this.canvas.width, this.canvas.height)\r\n    }\r\n\r\n    refresh() {\r\n        this.tooltip.refresh()\r\n        this.state = this.settings.disableInitAnimation ? RenderState.Idle : RenderState.Init\r\n    }\r\n\r\n    resetMouse() {\r\n        this.moveEvent = new MouseEvent(Events.MouseMove)\r\n        this.clickEvent = new MouseEvent(Events.Click)\r\n        this.menuEvent = undefined\r\n    }\r\n\r\n    initAnimations() {\r\n        this.tooltip = new Tooltip(this.canvas, this.settings)\r\n\r\n        this.canvasPosition = this.canvas.getBoundingClientRect()\r\n\r\n        this.canvasPosition.x += scrollX\r\n        this.canvasPosition.y += scrollY\r\n\r\n        if (this.state == RenderState.Init && !this.settings.disableInteractions) {\r\n            this.canvas.onmousemove = event => this.moveEvent = event\r\n            this.canvas.onclick = event => this.clickEvent = event\r\n            this.canvas.oncontextmenu = event => {\r\n                event.preventDefault()\r\n                this.contextMenu = undefined\r\n                if (this.menuEvent)\r\n                    this.menuEvent = undefined\r\n                else\r\n                    this.menuEvent = event\r\n            }\r\n            this.canvas.onmouseleave = () => this.moveEvent = new MouseEvent(Events.MouseMove)\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        this.canvas.remove()\r\n    }\r\n}\r\n\r\nexport default Renderable","import TreeData from 'types/data/TreeData'\r\nimport Renderer from 'types/base/Renderer'\r\nimport Sector from 'types/Sector'\r\nimport * as Helper from 'Helper'\r\nimport DropdownItem from 'types/DropdownItem'\r\nimport Dropdown from 'Dropdown'\r\nimport Chart from 'Chart'\r\nimport TextStyles from 'helpers/TextStyles'\r\nimport TooltipValue from 'types/TooltipValue'\r\nimport Export from 'Export'\r\nimport Decomposition from 'Decomposition'\r\nimport Modal from 'Modal'\r\nimport TextResources from 'static/TextResources'\r\nimport Canvas from 'helpers/Canvas'\r\nimport TreeCell from 'types/TreeCell'\r\nimport Formatter from 'helpers/Formatter'\r\nimport { AnimationType, Icon, PlotAxisType, RenderState } from 'static/Enums'\r\nimport * as Constants from 'static/constants/Index'\r\n\r\nclass TreeRenderer extends Renderer<TreeData> {\r\n    constructor(chart: Chart) {\r\n        super(chart)\r\n\r\n        this.settings.enableLegend = false\r\n    }\r\n\r\n    render() {\r\n        super.render()\r\n\r\n        if (this.data.values.filter(v => v.value > 0).length == 0) {\r\n            this.#drawEmpty()\r\n            requestAnimationFrame(this.render.bind(this))\r\n            return\r\n        }\r\n\r\n        const titleOffset = this.settings.title ? Constants.Values.titleOffset : 0\r\n\r\n        const maxWidth = this.canvas.width - this.data.padding * 2,\r\n            maxHeight = this.canvas.height - this.data.padding * 2 - titleOffset\r\n\r\n        let sum = this.data.values.sum(cur => cur.value),\r\n            totalSquare = maxWidth * maxHeight\r\n\r\n        let x = this.data.padding,\r\n            y = this.data.padding + titleOffset\r\n\r\n        let minX = this.data.padding,\r\n            minY = this.data.padding + titleOffset\r\n\r\n        let tooltipCell: TreeCell | undefined = undefined\r\n        let contextMenuData = undefined\r\n\r\n        const ctx = Canvas.getContext(this.canvas)\r\n\r\n        let isVertical = true\r\n        for (let i = 0; i < this.data.values.length; i++) {\r\n            const item = this.data.values[i]\r\n\r\n            const remainWidth = maxWidth - (x - this.data.padding),\r\n                remainHeight = maxHeight - (y - this.data.padding - titleOffset)\r\n\r\n            let cells: TreeCell[] = [\r\n                {\r\n                    color: item.color,\r\n                    label: item.label,\r\n                    s: item.value / sum * totalSquare,\r\n                    value: item.value,\r\n                    id: item.id,\r\n                    x: x,\r\n                    y: y\r\n                } as TreeCell\r\n            ]\r\n\r\n            if (i + 1 <= this.data.values.length - 1) {\r\n                const next = this.data.values[i + 1]\r\n\r\n                cells.push({\r\n                    color: next.color,\r\n                    label: next.label,\r\n                    s: next.value / sum * totalSquare,\r\n                    value: next.value,\r\n                    id: next.id,\r\n                    x: x,\r\n                    y: y\r\n                } as TreeCell)\r\n\r\n                i++\r\n            }\r\n\r\n            const isSingle = cells.length == 1,\r\n                isLast = i == this.data.values.length - 1\r\n\r\n            if (isVertical) {\r\n                for (let j = 1; j <= remainWidth + i * i; j++) {\r\n                    const w = remainWidth - j,\r\n                        h1 = cells[0].s / w,\r\n                        h2 = isSingle ? 0 : cells[1].s / w\r\n\r\n                    if (h1 + h2 >= remainHeight) {\r\n                        cells[0].w = Math.floor(w)\r\n                        cells[0].h = Math.floor(h1)\r\n\r\n                        if (!isSingle) {\r\n                            cells[1].w = Math.floor(w)\r\n                            cells[1].h = remainHeight - cells[0].h\r\n\r\n                            cells[1].y += cells[0].h\r\n                        }\r\n\r\n                        break\r\n                    }\r\n                }\r\n            } else {\r\n                for (let j = 1; j <= remainHeight + i * i; j++) {\r\n                    const h = remainHeight - j,\r\n                        w1 = cells[0].s / h,\r\n                        w2 = isSingle ? 0 : cells[1].s / h\r\n\r\n                    if (w1 + w2 >= remainWidth) {\r\n                        cells[0].h = Math.floor(h)\r\n                        cells[0].w = Math.floor(w1)\r\n\r\n                        if (!isSingle) {\r\n                            cells[1].h = Math.floor(h)\r\n                            cells[1].w = remainWidth - cells[0].w\r\n\r\n                            cells[1].x += cells[0].w\r\n                        }\r\n\r\n                        break\r\n                    }\r\n                }\r\n            }\r\n\r\n            for (const cell of cells) {\r\n                if (isLast) {\r\n                    if (isVertical) {\r\n                        cell.w = remainWidth\r\n                        if (isSingle)\r\n                            cell.h = remainHeight\r\n                    } else {\r\n                        cell.h = remainHeight\r\n                        if (isSingle)\r\n                            cell.w = remainWidth\r\n                    }\r\n                }\r\n\r\n                ctx.beginPath()\r\n\r\n                ctx.fillStyle = cell.color\r\n\r\n                const cellInit = this.state != RenderState.Init\r\n                                 && !this.animations.contains(cell.id, AnimationType.Init)\r\n\r\n                const cellIndex = i + cells.indexOf(cell) + (isLast && isSingle ? 1 : 0),\r\n                    duration = 260\r\n\r\n                const getPrev = () => {\r\n                    let acc = 0\r\n                    for (let i = 0; i < cellIndex; i++)\r\n                        acc += duration - duration * (i / this.data.values.length) / Math.E\r\n\r\n                    return acc\r\n                }\r\n\r\n                const initAnimationDuration = duration - duration * cellIndex / (this.data.values.length + 1)\r\n\r\n                if (!cellInit) {\r\n                    this.animations.handle(cell.id,\r\n                        AnimationType.Init,\r\n                        {\r\n                            duration: getPrev(),\r\n                            continuous: true,\r\n                            body: transition => {\r\n                                if (transition * getPrev() - getPrev() + initAnimationDuration < 0)\r\n                                    return ctx.fillStyle += '00'\r\n\r\n                                transition = (transition * getPrev() - getPrev() + initAnimationDuration) / initAnimationDuration\r\n\r\n                                const center = {\r\n                                    x: cell.x + cell.w / 2,\r\n                                    y: cell.y + cell.h / 2\r\n                                }\r\n\r\n                                const minSize = .7,\r\n                                    rest = 1 - minSize\r\n\r\n                                ctx.translate(center.x - center.x * (minSize + transition * rest),\r\n                                    center.y - center.y * (minSize + transition * rest))\r\n                                ctx.scale((minSize + transition * rest), (minSize + transition * rest))\r\n\r\n                                let opacity = Math.round(255 * transition).toString(16)\r\n\r\n                                if (opacity.length < 2)\r\n                                    opacity = 0 + opacity\r\n\r\n                                ctx.fillStyle = cell.color + opacity\r\n                            }\r\n                        })\r\n                } else {\r\n                    const translate = (transition: number, event: AnimationType) => {\r\n                        const center = {\r\n                            x: cell.x + cell.w / 2,\r\n                            y: cell.y + cell.h / 2\r\n                        }\r\n\r\n                        const margin = 12,\r\n                            minSize = cell.w > cell.h\r\n                                      ? 1 - margin / cell.w\r\n                                      : 1 - margin / cell.h,\r\n                            rest = 1 - minSize\r\n\r\n                        ctx.translate(center.x - center.x * (minSize + transition * rest),\r\n                            center.y - center.y * (minSize + transition * rest))\r\n                        ctx.scale(minSize + transition * rest, minSize + transition * rest)\r\n\r\n                        this.animations.reload(cell.id, event)\r\n                    }\r\n\r\n                    if (this.#isInCell(cell)\r\n                        && !tooltipCell) {\r\n                        tooltipCell = cell\r\n                        contextMenuData = cell.data\r\n\r\n                        this.animations.handle(cell.id,\r\n                            AnimationType.MouseOver,\r\n                            {\r\n                                duration: Constants.Animations.tree,\r\n                                backward: true,\r\n                                body: transition => {\r\n                                    translate(transition, AnimationType.MouseLeave)\r\n                                }\r\n                            })\r\n                    } else {\r\n                        this.animations.handle(cell.id,\r\n                            AnimationType.MouseLeave,\r\n                            {\r\n                                timer: Constants.Dates.minDate,\r\n                                duration: Constants.Animations.tree,\r\n                                body: transition => {\r\n                                    translate(transition, AnimationType.MouseOver)\r\n                                }\r\n                            })\r\n                    }\r\n                }\r\n\r\n                const gap = 4\r\n\r\n                ctx.roundRect(x + gap, y + gap, cell.w - gap, cell.h - gap, gap * 2)\r\n                ctx.fill()\r\n\r\n                if (cell.label\r\n                    && Helper.stringWidth(cell.label) < cell.w - gap\r\n                    && cell.h - gap > 16\r\n                    && !this.animations.contains(cell.id, AnimationType.Init)) {\r\n                    ctx.beginPath()\r\n                    TextStyles.large(ctx)\r\n                    ctx.fillStyle = !Helper.isColorVisible(cell.color, '#ffffff')\r\n                                    ? '#000000'\r\n                                    : '#ffffff'\r\n                    ctx.fillText(cell.label,\r\n                        x + 2 + cell.w / 2,\r\n                        y + 2 + cell.h / 2)\r\n                }\r\n\r\n                ctx.resetTransform()\r\n\r\n                if (isVertical)\r\n                    y += cell.h\r\n                else\r\n                    x += cell.w\r\n\r\n                totalSquare -= cell.w * cell.h\r\n                sum -= cell.value\r\n            }\r\n\r\n            if (isVertical) {\r\n                x += cells[0].w\r\n                y = minY\r\n            } else {\r\n                y += cells[0].h\r\n                x = minX\r\n            }\r\n\r\n            minX = x\r\n            minY = y\r\n\r\n            isVertical = !isVertical\r\n        }\r\n\r\n        this.tooltip.render(\r\n            !!tooltipCell && !this.dropdown?.isActive,\r\n            this.moveEvent,\r\n            [\r\n                new TooltipValue(`${ tooltipCell?.label }: ${ Formatter.format(tooltipCell?.value, PlotAxisType.Number, this.settings.valuePostfix) }`)\r\n            ],\r\n            this.data.values.find(v => v.id == tooltipCell?.id)\r\n        )\r\n\r\n        if (!this.isDestroy)\r\n            requestAnimationFrame(this.render.bind(this))\r\n\r\n        this.state = RenderState.Idle\r\n\r\n        super.renderDropdown()\r\n\r\n        if (tooltipCell || this.contextMenu)\r\n            this.renderContextMenu(contextMenuData)\r\n        else\r\n            this.menuEvent = undefined\r\n    }\r\n\r\n    #isInCell(cell: TreeCell) {\r\n        if (!this.moveEvent || !cell)\r\n            return false\r\n\r\n        const mouse = this.getMousePosition(this.moveEvent)\r\n\r\n        return !(this.dropdown?.isActive ?? false)\r\n               && cell.x <= mouse.x && mouse.x <= cell.x + cell.w\r\n               && cell.y <= mouse.y && mouse.y <= cell.y + cell.h\r\n    }\r\n\r\n    #drawEmpty() {\r\n        const ctx = Canvas.getContext(this.canvas)\r\n\r\n        TextStyles.regular(ctx)\r\n        ctx.fillText(TextResources.treeMapIsEmpty,\r\n            this.canvas.width / 2,\r\n            this.canvas.height / 2)\r\n    }\r\n\r\n    refresh() {\r\n        super.refresh()\r\n    }\r\n\r\n    resize() {\r\n        super.resize()\r\n\r\n        this.initAnimations()\r\n        this.animations.clear()\r\n    }\r\n\r\n    prepareSettings() {\r\n        super.prepareSettings()\r\n\r\n        this.data.values = this.data.values.map(v => new Sector(v))\r\n\r\n        this.data.values = this.data.values.filter(v => v.value > 0)\r\n\r\n        this.data.values.sort((a, b) => (b.value ?? 0) - (a.value ?? 0))\r\n\r\n        this.calculateColors(true)\r\n\r\n        for (let item of this.data.values) {\r\n            item.disabled = !item.value\r\n            item.value ??= 0\r\n        }\r\n    }\r\n\r\n    initDropdown() {\r\n        super.initDropdown()\r\n\r\n        this.dropdown = new Dropdown(this.canvas,\r\n            {\r\n                x: -10,\r\n                y: 10,\r\n                icon: Icon.ThreeLines,\r\n                items: [\r\n                    {\r\n                        text: TextResources.exportCSV,\r\n                        action: () => {\r\n                            Export.asCsv(Decomposition.toTable(TreeData.getRows(this.data)), this.settings.title)\r\n                        }\r\n                    },\r\n                    {\r\n                        isDivider: true\r\n                    } as DropdownItem,\r\n                    {\r\n                        text: TextResources.decomposeToTable,\r\n                        action: () => {\r\n                            new Modal(Decomposition.toTable(TreeData.getRows(this.data)),\r\n                                undefined,\r\n                                this.settings.title ?? TextResources.dataAsTable)\r\n                                .open()\r\n                        }\r\n                    }\r\n                ]\r\n            })\r\n    }\r\n}\r\n\r\nexport default TreeRenderer","import TableData from 'types/TableData'\r\nimport * as Helper from 'Helper'\r\nimport Value from 'types/base/Value'\r\nimport ChartSettings from 'types/ChartSettings'\r\nimport Formatter from 'helpers/Formatter'\r\nimport Styles from 'static/constants/Styles'\r\nimport { Tag } from 'static/Enums'\r\n\r\nclass Decomposition {\r\n    static toTable(values: TableData) {\r\n        let table = document.createElement(Tag.Div)\r\n\r\n        table.classList.add('o-table')\r\n\r\n        let totals = new Map<string, number>()\r\n        let rows = '',\r\n            headers = '',\r\n            index = 0\r\n\r\n        let valuesMap = new Map<string, Map<string, any>>()\r\n\r\n        for (const tableValue of values.values) {\r\n            let allColumns = new Map<string, any>()\r\n\r\n            for (const header of values.headers)\r\n                allColumns.set(header.value, 0)\r\n\r\n            for (const [key, value] of tableValue.values)\r\n                allColumns.set(key, value)\r\n\r\n            let indexSpaces = ''\r\n            for (let i = 0; i < index; i++)\r\n                indexSpaces += ' '\r\n\r\n            valuesMap.set(tableValue.name + indexSpaces, allColumns)\r\n\r\n            index++\r\n        }\r\n\r\n        for (const tableHeader of values.headers)\r\n            headers += `\r\n                <div>\r\n                    ${ tableHeader.display }\r\n                </div>\r\n            `\r\n\r\n        for (const [key, value] of valuesMap) {\r\n            let columns = ''\r\n\r\n            for (const [vKey, vValue] of value) {\r\n                columns += `\r\n                    <div>\r\n                        ${ vValue == undefined ? '' : Formatter.number(vValue) }\r\n                    </div>\r\n                `\r\n\r\n                if (totals.has(vKey)) {\r\n                    let totalValue = +(totals.get(vKey) ?? 0)\r\n                    totals.set(vKey, totalValue + +vValue)\r\n                } else {\r\n                    totals.set(vKey, vValue)\r\n                }\r\n            }\r\n\r\n            rows += `\r\n                <div class=\"o-table-row\">\r\n                    <div>\r\n                        ${ key.trim() }\r\n                    </div>\r\n                    \r\n                    ${ columns } \r\n                </div>\r\n            `\r\n        }\r\n\r\n        let totalColumns = ''\r\n\r\n        for (const [, value] of totals)\r\n            totalColumns += `\r\n                <div>\r\n                    ${ value == undefined ? '' : Formatter.number(value) }\r\n                </div>\r\n            `\r\n\r\n        table.innerHTML = `\r\n            <div class=\"o-table-header\">\r\n                <div></div>\r\n\r\n                ${ headers }\r\n            </div>\r\n        \r\n            <div class=\"o-table-body\">\r\n                ${ rows }\r\n            </div>\r\n            \r\n            <div class=\"o-table-footer\">\r\n                <div></div>\r\n\r\n                ${ totalColumns }\r\n            </div>\r\n        `\r\n\r\n        return table\r\n    }\r\n\r\n    static toChart<T extends Value>(settings: ChartSettings, values: T[]) {\r\n        let container = document.createElement(Tag.Div),\r\n            div = document.createElement(Tag.Div),\r\n            script = document.createElement(Tag.Script),\r\n            id = Helper.guid()\r\n\r\n        container.style.display = Styles.Display.Flex\r\n        container.style.height = '100%'\r\n\r\n        div.id = id\r\n        div.style.flexGrow = '1'\r\n\r\n        let cloneSettings = JSON.parse(JSON.stringify(settings)) as ChartSettings\r\n\r\n        if (cloneSettings.title)\r\n            cloneSettings.title = cloneSettings.title + ' (Other)'\r\n        cloneSettings.data.values = values\r\n        cloneSettings.minWidth = undefined\r\n        cloneSettings.minHeight = undefined\r\n\r\n        script.innerHTML = `\r\n            new OCharts.chart(document.getElementById('${ id }'), ${ JSON.stringify(cloneSettings) })\r\n                .render()\r\n        `\r\n\r\n        container.append(div, script)\r\n\r\n        return container\r\n    }\r\n}\r\n\r\nexport default Decomposition","export { Animations } from './Animations'\r\nexport { Dates } from './Dates'\r\nexport { Values } from './Values'\r\nexport { Plot } from './Plot'","import Renderer from 'types/base/Renderer'\r\nimport GaugeData from 'types/data/GaugeData'\r\nimport * as Helper from 'Helper'\r\nimport Sector from 'types/Sector'\r\nimport Dropdown from 'Dropdown'\r\nimport Point from 'types/Point'\r\nimport Chart from 'Chart'\r\nimport Theme from 'Theme'\r\nimport TextStyles from 'helpers/TextStyles'\r\nimport TooltipValue from 'types/TooltipValue'\r\nimport Export from 'Export'\r\nimport Formatter from 'helpers/Formatter'\r\nimport Canvas from 'helpers/Canvas'\r\nimport TextResources from 'static/TextResources'\r\nimport { AnimationType, Icon, PlotAxisType, RenderState } from 'static/Enums'\r\n\r\nclass GaugeRenderer extends Renderer<GaugeData> {\r\n    #radius: number\r\n\r\n    #center: Point\r\n\r\n    constructor(chart: Chart) {\r\n        super(chart)\r\n\r\n        this.settings.enableLegend = false\r\n    }\r\n\r\n    render() {\r\n        super.render()\r\n\r\n        this.#draw()\r\n\r\n        const value = this.data.values[0]\r\n        this.tooltip.render(\r\n            this.#isInsideSector(this.moveEvent, value) && !this.dropdown?.isActive,\r\n            this.moveEvent,\r\n            [\r\n                new TooltipValue(`${ value?.label }: ${ Formatter.format(value?.current, PlotAxisType.Number, this.settings.valuePostfix) }`)\r\n            ],\r\n            value\r\n        )\r\n\r\n        if (!this.isDestroy)\r\n            requestAnimationFrame(this.render.bind(this))\r\n\r\n        this.state = RenderState.Idle\r\n\r\n        super.renderDropdown()\r\n    }\r\n\r\n    #draw() {\r\n        const ctx = Canvas.getContext(this.canvas)\r\n\r\n        const value = this.data.values[0] ?? { id: Helper.guid() }\r\n\r\n        if (this.state == RenderState.Init || this.animations.contains(value.id, AnimationType.Init))\r\n            this.animations.handle(value.id,\r\n                AnimationType.Init,\r\n                {\r\n                    duration: 450,\r\n                    continuous: true,\r\n                    body: transition => {\r\n                        value.current = value.value * transition\r\n                    }\r\n                })\r\n\r\n        ctx.beginPath()\r\n\r\n        ctx.strokeStyle = value.color\r\n        ctx.lineCap = 'round'\r\n        ctx.lineWidth = 40\r\n\r\n        const piece = value.current / this.data.max,\r\n            angle = (isNaN(piece) ? 1 : piece) * Math.PI\r\n\r\n        if (value.value) {\r\n            ctx.arc(this.#center.x, this.#center.y, this.#radius, Math.PI, angle - Math.PI)\r\n            ctx.stroke()\r\n        }\r\n\r\n        ctx.beginPath()\r\n\r\n        ctx.lineWidth = 1\r\n        ctx.lineCap = 'square'\r\n\r\n        let localAccumulator = 0,\r\n            localAngle = Math.PI\r\n\r\n        while (localAngle >= 0) {\r\n            let currentAngle = localAngle - Math.PI / 10 > 0\r\n                               ? Math.PI / 10\r\n                               : localAngle\r\n\r\n            const getPoint = (offset: number) => {\r\n                return {\r\n                    x: this.#center.x + (this.#radius + offset) * Math.cos(Math.PI + localAccumulator),\r\n                    y: this.#center.y + (this.#radius + offset) * Math.sin(Math.PI + localAccumulator)\r\n                }\r\n            }\r\n\r\n            let point1 = getPoint(50),\r\n                point2 = getPoint(90),\r\n                point3 = getPoint(115)\r\n\r\n            const opacity = Math.PI - localAngle > angle ? '66' : 'ff'\r\n\r\n            ctx.moveTo(point1.x, point1.y)\r\n            ctx.lineTo(point2.x, point2.y)\r\n            ctx.strokeStyle = Theme.text + opacity\r\n            ctx.stroke()\r\n\r\n            TextStyles.regular(ctx)\r\n            ctx.fillStyle = Theme.text + opacity\r\n            ctx.fillText(Formatter.number(this.data.max - localAngle / Math.PI * this.data.max), point3.x, point3.y)\r\n\r\n            localAccumulator += currentAngle\r\n\r\n            localAngle -= Math.PI / 10\r\n        }\r\n    }\r\n\r\n    #isInsideSector(event: MouseEvent, value: Sector): boolean {\r\n        if (!event)\r\n            return false\r\n\r\n        const isAngle = (point: Point) => {\r\n            let a = Math.atan2(point.y - this.#center.y, point.x - this.#center.x)\r\n            if (a < 0)\r\n                a += Math.PI * 2\r\n\r\n            const piece = value.current / this.data.max,\r\n                angle = (isNaN(piece) ? 1 : piece) * Math.PI\r\n\r\n            return a > Math.PI && Math.PI + angle >= a\r\n        }\r\n\r\n        const isWithinRadius = (v: Point) => {\r\n            const outerRadius = this.#radius + 20,\r\n                innerRadius = this.#radius - 20\r\n\r\n            return v.x * v.x + v.y * v.y <= outerRadius * outerRadius\r\n                   && v.x * v.x + v.y * v.y >= innerRadius * innerRadius\r\n        }\r\n\r\n        const point = this.getMousePosition(event),\r\n            inner = {\r\n                x: point.x - this.#center.x,\r\n                y: point.y - this.#center.y\r\n            }\r\n\r\n        return !(this.dropdown?.isActive ?? false)\r\n               && isAngle(point)\r\n               && isWithinRadius(inner)\r\n    }\r\n\r\n    #calculateSizes() {\r\n        const longSide = this.canvas.width < this.canvas.height / 2\r\n                         ? this.canvas.height / 2\r\n                         : this.canvas.width\r\n\r\n        this.#radius = longSide / 2 - 200\r\n\r\n        this.#center = {\r\n            x: this.canvas.width / 2,\r\n            y: this.canvas.height - this.#radius / 5\r\n        }\r\n    }\r\n\r\n    refresh() {\r\n        super.refresh()\r\n    }\r\n\r\n    resize() {\r\n        super.resize()\r\n\r\n        this.initAnimations()\r\n        this.#calculateSizes()\r\n    }\r\n\r\n    prepareSettings() {\r\n        super.prepareSettings()\r\n\r\n        for (let item of this.data.values) {\r\n            item.disabled = !item.value\r\n            item.value ??= 0\r\n        }\r\n\r\n        if (this.data.values.length > 0 && this.data.values[0].value > this.data.max)\r\n            this.data.values[0].value = this.data.max\r\n    }\r\n\r\n    initDropdown() {\r\n        super.initDropdown()\r\n\r\n        this.dropdown = new Dropdown(this.canvas,\r\n            {\r\n                x: -10,\r\n                y: 10,\r\n                icon: Icon.ThreeLines,\r\n                items: [\r\n                    {\r\n                        text: TextResources.exportPNG,\r\n                        action: () => {\r\n                            Export.asPng(this.canvas, this.settings.title)\r\n                        }\r\n                    }\r\n                ]\r\n            })\r\n    }\r\n}\r\n\r\nexport default GaugeRenderer","import Theme from 'Theme'\r\nimport * as Helper from 'Helper'\r\nimport Canvas from 'helpers/Canvas'\r\nimport { Icon, Tag } from 'static/Enums'\r\n\r\nclass Export {\r\n    static asPng(canvas: HTMLCanvasElement, title: string) {\r\n        requestAnimationFrame(() => {\r\n            const ctx = Canvas.getContext(canvas)\r\n\r\n            let width = Helper.stringWidth(Icon.ThreeLines) + 20,\r\n                height = 64\r\n\r\n            ctx.fillStyle = Theme.canvasBackground\r\n            ctx.fillRect(canvas.width - width, 0, width, height)\r\n\r\n            let leftEmpty = 0,\r\n                rightEmpty = 0\r\n\r\n            const imageData = new Uint32Array(ctx.getImageData(0, 0, canvas.width, canvas.height).data.buffer)\r\n\r\n            let isBusy = false\r\n\r\n            for (let i = 0; i < canvas.width; i++) {\r\n                for (let j = 0; j < canvas.height; j++) {\r\n                    if (Canvas.isPixelBusy(imageData[i + j * canvas.width])) {\r\n                        isBusy = true\r\n                        break\r\n                    }\r\n                }\r\n\r\n                if (isBusy)\r\n                    break\r\n\r\n                leftEmpty++\r\n            }\r\n\r\n            isBusy = false\r\n\r\n            for (let i = canvas.width; i >= 0; i--) {\r\n                for (let j = 0; j < canvas.height; j++) {\r\n                    if (Canvas.isPixelBusy(imageData[i + j * canvas.width])) {\r\n                        isBusy = true\r\n                        break\r\n                    }\r\n                }\r\n\r\n                if (isBusy)\r\n                    break\r\n\r\n                rightEmpty++\r\n            }\r\n\r\n            if (leftEmpty > 4)\r\n                leftEmpty -= 4\r\n            if (rightEmpty > 4)\r\n                rightEmpty -= 4\r\n\r\n            if (leftEmpty > rightEmpty)\r\n                leftEmpty = rightEmpty\r\n            if (rightEmpty > leftEmpty)\r\n                rightEmpty = leftEmpty\r\n\r\n            let destinationCanvas = document.createElement(Tag.Canvas)\r\n            destinationCanvas.width = canvas.width - leftEmpty - rightEmpty\r\n            destinationCanvas.height = canvas.height\r\n\r\n            const destCtx = Canvas.getContext(destinationCanvas)\r\n\r\n            destCtx.fillStyle = Theme.background\r\n            destCtx.fillRect(0, 0, canvas.width, canvas.height)\r\n\r\n            destCtx.drawImage(canvas, -leftEmpty, 0)\r\n\r\n            Export.saveAs((title ?? 'chart') + '.png',\r\n                destinationCanvas.toDataURL('image/png'))\r\n        })\r\n    }\r\n\r\n    static asCsv(table: HTMLElement, title: string) {\r\n        let rows = table.querySelectorAll('tr'),\r\n            csv = []\r\n\r\n        for (let i = 0; i < rows.length; i++) {\r\n            let row = [],\r\n                cols = rows[i].querySelectorAll('td, th')\r\n\r\n            for (let j = 0; j < cols.length; j++) {\r\n                let data = cols[j].innerHTML\r\n                                  .replace(/(\\r\\n|\\n|\\r)/gm, '')\r\n                                  .replace(/(\\s\\s)/gm, ' ')\r\n\r\n                data = data.replace(/\"/g, '\"\"')\r\n                row.push('\"' + data + '\"')\r\n            }\r\n\r\n            csv.push(row.join(','))\r\n        }\r\n\r\n        Export.saveAs((title ?? 'table') + '.csv',\r\n            csv.join('\\n'),\r\n            'data:text/csv;charset=utf-8,' + encodeURIComponent(csv.join('\\n')),\r\n            true)\r\n    }\r\n\r\n    static saveAs(name: string, dataURL: string, href?: string | undefined, isText?: boolean) {\r\n        if (window.showSaveFilePicker != undefined) {\r\n            const accept = isText\r\n                           ? { 'text/csv': '.csv' } as FilePickerAcceptType\r\n                           : { 'image/*': '.png' } as FilePickerAcceptType\r\n\r\n            const options = {\r\n                suggestedName: name,\r\n                types: [\r\n                    {\r\n                        accept: accept\r\n                    }\r\n                ],\r\n                excludeAcceptAllOption: true\r\n            } as SaveFilePickerOptions\r\n\r\n            function toBlob(dataURI: string) {\r\n                const byteString = atob(dataURI.split(',')[1]),\r\n                    mimeString = dataURI.split(',')[0]\r\n                        .split(':')[1]\r\n                        .split(';')[0],\r\n                    buffer = new ArrayBuffer(byteString.length),\r\n                    imageArray = new Uint8Array(buffer)\r\n\r\n                for (let i = 0; i < byteString.length; i++)\r\n                    imageArray[i] = byteString.charCodeAt(i)\r\n\r\n                return new Blob([buffer], { type: mimeString })\r\n            }\r\n\r\n            window.showSaveFilePicker(options)\r\n                  .then(fileHandle => {\r\n                      fileHandle.createWritable()\r\n                                .then(writableStream => {\r\n                                    writableStream.write(isText ? dataURL : toBlob(dataURL))\r\n                                                  .then(() => writableStream.close())\r\n                                })\r\n                  })\r\n        } else {\r\n            let download = document.createElement(Tag.A)\r\n            download.href = href ?? dataURL\r\n            download.download = name\r\n            download.click()\r\n        }\r\n    }\r\n}\r\n\r\nexport default Export","import { PlotAxisType } from 'static/Enums'\r\n\r\nabstract class Formatter {\r\n    static number = (value: number | undefined) =>\r\n        value?.toLocaleString(undefined, {\r\n            minimumFractionDigits: 2,\r\n            maximumFractionDigits: 2\r\n        }) ?? ''\r\n\r\n    static date = (value: Date | undefined) =>\r\n        value?.toLocaleDateString() ?? ''\r\n\r\n    static text = (value: string | undefined) =>\r\n        value ?? ''\r\n\r\n    static format(value: any | undefined, type: PlotAxisType, postfix?: string | undefined) {\r\n        let result = value\r\n\r\n        switch (type) {\r\n            case PlotAxisType.Number:\r\n                result = Formatter.number(value)\r\n                break\r\n\r\n            case PlotAxisType.Date:\r\n                result = Formatter.date(new Date(value))\r\n                break\r\n\r\n            case PlotAxisType.Text:\r\n                result = Formatter.text(value)\r\n                break\r\n        }\r\n\r\n        return result + (postfix ?? '')\r\n    }\r\n\r\n}\r\n\r\nexport default Formatter","import TextStyles from 'helpers/TextStyles'\r\nimport Theme from 'Theme'\r\nimport Animations from 'Animations'\r\nimport * as Helper from 'Helper'\r\nimport ButtonOptions from 'types/ButtonOptions'\r\nimport Canvas from 'helpers/Canvas'\r\nimport { AnimationType } from 'static/Enums'\r\nimport * as Constants from 'static/constants/Index'\r\nimport Styles from 'static/constants/Styles'\r\n\r\nclass Button {\r\n    #canvas: HTMLCanvasElement\r\n\r\n    #options: ButtonOptions\r\n\r\n    #canvasPosition: DOMRect\r\n\r\n    animations: Animations\r\n\r\n    #isInit: boolean\r\n\r\n    #position: DOMRect\r\n\r\n    constructor(canvas: HTMLCanvasElement, options: ButtonOptions) {\r\n        this.#canvas = canvas\r\n        this.#options = options\r\n\r\n        this.animations = new Animations()\r\n\r\n        this.#initAnimations()\r\n    }\r\n\r\n    render(moveEvent: MouseEvent, clickEvent: MouseEvent | undefined) {\r\n        if (!this.#isInit)\r\n            this.#initAnimations()\r\n\r\n        const ctx = Canvas.getContext(this.#canvas)\r\n\r\n        ctx.beginPath()\r\n\r\n        const translate = (transition: number, event: AnimationType) => {\r\n            this.animations.reload('animation-button', event)\r\n\r\n            ctx.fillStyle = Helper.adjustColor(Theme.canvasBackground, -Math.round(transition * 25))\r\n        }\r\n\r\n        if (this.#isOnButton(moveEvent)) {\r\n            this.#canvas.style.cursor = Styles.Cursor.Pointer\r\n\r\n            if (clickEvent && this.#isOnButton(clickEvent)) {\r\n                this.#options.action()\r\n                clickEvent = undefined\r\n            }\r\n\r\n            this.animations.handle('animation-button',\r\n                AnimationType.MouseOver,\r\n                {\r\n                    duration: 300,\r\n                    body: transition => {\r\n                        translate(transition, AnimationType.MouseLeave)\r\n                    }\r\n                })\r\n        } else {\r\n            this.animations.handle('animation-button',\r\n                AnimationType.MouseLeave,\r\n                {\r\n                    timer: Constants.Dates.minDate,\r\n                    duration: 300,\r\n                    backward: true,\r\n                    body: transition => {\r\n                        translate(transition, AnimationType.MouseOver)\r\n                    }\r\n                })\r\n        }\r\n\r\n        ctx.roundRect(this.#position.x, this.#position.y, this.#position.width, this.#position.height, 4)\r\n        ctx.fill()\r\n\r\n        TextStyles.regular(ctx)\r\n        ctx.fillText(this.#options.text,\r\n            this.#position.x + this.#position.width / 2,\r\n            this.#position.y + this.#position.height / 2)\r\n\r\n        this.#isInit = true\r\n\r\n        return clickEvent\r\n    }\r\n\r\n    resize() {\r\n        this.#initAnimations()\r\n    }\r\n\r\n    #initAnimations() {\r\n        this.#canvasPosition = this.#canvas.getBoundingClientRect()\r\n\r\n        this.#canvasPosition.x += scrollX\r\n        this.#canvasPosition.y += scrollY\r\n\r\n        const width = Helper.stringWidth(this.#options.text) + 12,\r\n            height = 20\r\n\r\n        this.#position = <DOMRect>{\r\n            x: this.#options.x + width > this.#canvas.width\r\n               ? this.#canvas.width - width\r\n               : this.#options.x < 0\r\n                 ? this.#canvas.width + this.#options.x - width\r\n                 : this.#options.x,\r\n            y: this.#options.y + height > this.#canvas.height\r\n               ? this.#canvas.height - height\r\n               : this.#options.y < 0\r\n                 ? this.#canvas.height + this.#options.y - height\r\n                 : this.#options.y,\r\n            width: width,\r\n            height: height\r\n        }\r\n    }\r\n\r\n    #isOnButton(event: MouseEvent): boolean {\r\n        if (!event)\r\n            return false\r\n\r\n        let trueX = event.clientX - this.#canvasPosition.x + scrollX,\r\n            trueY = event.clientY - this.#canvasPosition.y + scrollY\r\n\r\n        return trueX >= this.#position.x && trueX <= this.#position.x + this.#position.width\r\n               && trueY >= this.#position.y && trueY <= this.#position.y + this.#position.height\r\n    }\r\n}\r\n\r\nexport default Button","import Chart from 'Chart'\r\nimport ChartSettings from 'types/ChartSettings'\r\n\r\nfunction OCharts() {\r\n}\r\n\r\nOCharts.chart = function(context: HTMLElement, settings: ChartSettings) {\r\n    return new Chart(context, settings)\r\n}\r\n\r\n// @ts-ignore\r\nwindow.OCharts = OCharts","export enum AnimationType {\r\n    None,\r\n\r\n    MouseOver,\r\n\r\n    MouseLeave,\r\n\r\n    Init,\r\n\r\n    Click,\r\n\r\n    AnotherItemOver,\r\n\r\n    AnotherItemLeave\r\n}\r\n\r\nexport enum Attribute {\r\n    Name = 'name'\r\n}\r\n\r\nexport enum ChartType {\r\n    Plot,\r\n\r\n    Circular,\r\n\r\n    Gauge,\r\n\r\n    TreeMap\r\n}\r\n\r\nexport enum ErrorType {\r\n    NullContext = 'Can\\'t find context',\r\n\r\n    ElementNotExist = 'Element does not exist',\r\n\r\n    MaxCallsReach = 'Max calls reach'\r\n}\r\n\r\nexport enum Events {\r\n    VisibilityChanged = 'visibilitychange',\r\n\r\n    Blur = 'blur',\r\n\r\n    MouseMove = 'mousemove',\r\n\r\n    Click = 'click',\r\n\r\n    Change = 'change',\r\n\r\n    ContextMenu = 'contextmenu'\r\n}\r\n\r\nexport enum LegendPlace {\r\n    Bottom,\r\n\r\n    Left,\r\n\r\n    Top,\r\n\r\n    Right\r\n}\r\n\r\nexport enum LineType {\r\n    Solid,\r\n\r\n    Dash,\r\n\r\n    Dotted\r\n}\r\n\r\nexport enum PlotAxisType {\r\n    Number,\r\n\r\n    Date,\r\n\r\n    Text\r\n}\r\n\r\nexport enum PlotType {\r\n    Line,\r\n\r\n    AttentionLine,\r\n\r\n    Column,\r\n\r\n    Bar,\r\n\r\n    StackingColumn\r\n}\r\n\r\nexport enum Tag {\r\n    Canvas = 'canvas',\r\n\r\n    A = 'a',\r\n\r\n    Div = 'div',\r\n\r\n    Dialog = 'dialog',\r\n\r\n    Table = 'table',\r\n\r\n    Script = 'script',\r\n\r\n    Button = 'button',\r\n\r\n    Span = 'span'\r\n}\r\n\r\nexport enum RenderState {\r\n    Idle,\r\n\r\n    Init\r\n}\r\n\r\nexport enum Icon {\r\n    ThreeLines = '',\r\n\r\n    Close = ''\r\n}\r\n\r\nexport enum DrawPointType {\r\n    Move = 'move',\r\n\r\n    Line = 'line',\r\n\r\n    QuadraticCurve = 'quadratic-curve',\r\n\r\n    ArcTo = 'arc-to',\r\n\r\n    SemiCircle = 'semi-circle'\r\n}","import Errors from 'helpers/Errors'\r\nimport { ErrorType, Icon, Tag } from 'static/Enums'\r\n\r\nclass Modal {\r\n    modal: HTMLDialogElement | undefined\r\n\r\n    #content: HTMLDivElement | undefined\r\n\r\n    constructor(content?: HTMLElement, size?: DOMRect, title?: string) {\r\n        this.modal = document.createElement(Tag.Dialog)\r\n\r\n        this.modal.classList.add(ModalClasses.modal)\r\n\r\n        if (size) {\r\n            this.modal.style.width = `${ size.width }px`\r\n            this.modal.style.height = `${ size.height }px`\r\n        }\r\n\r\n        this.modal.oncancel = () => this.close()\r\n\r\n        document.body.appendChild(this.modal)\r\n\r\n        this.#setHeader(title)\r\n\r\n        this.#setContent(content)\r\n    }\r\n\r\n    open() {\r\n        Errors.throwIsUndefined(this.modal, ErrorType.ElementNotExist)\r\n\r\n        this.modal!.showModal()\r\n    }\r\n\r\n    close() {\r\n        Errors.throwIsUndefined(this.modal, ErrorType.ElementNotExist)\r\n\r\n        this.modal!.close()\r\n\r\n        this.modal!.remove()\r\n\r\n        this.modal = undefined\r\n    }\r\n\r\n    #setHeader(title: string | undefined) {\r\n        Errors.throwIsUndefined(this.modal, ErrorType.ElementNotExist)\r\n\r\n        let titleSpan = document.createElement(Tag.Span)\r\n\r\n        titleSpan.classList.add(ModalClasses.title)\r\n        titleSpan.innerHTML = title ?? ''\r\n\r\n        let closeButton = document.createElement(Tag.Button)\r\n\r\n        closeButton.classList.add(ModalClasses.close)\r\n        closeButton.innerHTML = Icon.Close\r\n\r\n        let header = document.createElement(Tag.Div)\r\n\r\n        header.classList.add(ModalClasses.header)\r\n\r\n        header.appendChild(titleSpan)\r\n        header.appendChild(closeButton)\r\n\r\n        this.modal!.appendChild(header)\r\n\r\n        closeButton.onclick = () => this.close()\r\n    }\r\n\r\n    #setContent(content: HTMLElement | undefined) {\r\n        if (this.#content == undefined) {\r\n            this.#content = document.createElement(Tag.Div)\r\n\r\n            this.#content.classList.add(ModalClasses.content)\r\n\r\n            this.modal?.appendChild(this.#content)\r\n        }\r\n\r\n        if (content != undefined)\r\n            this.#content.appendChild(content)\r\n    }\r\n}\r\n\r\nexport default Modal\r\n\r\nclass ModalClasses {\r\n    static modal = 'o-modal'\r\n\r\n    static title = 'o-modal-title'\r\n\r\n    static close = 'o-modal-close'\r\n\r\n    static header = 'o-modal-header'\r\n\r\n    static content = 'o-modal-content'\r\n}","import Value from 'types/base/Value'\r\nimport PlotPoint from 'types/PlotPoint'\r\nimport { LineType, PlotAxisType, PlotType } from 'static/Enums'\r\nimport * as Helper from '../Helper'\r\n\r\nclass PlotSeries extends Value {\r\n    values: PlotPoint[]\r\n\r\n    type: PlotType\r\n\r\n    width: number\r\n\r\n    lineType: LineType = LineType.Solid\r\n\r\n    constructor(obj: object) {\r\n        super()\r\n\r\n        Object.assign(this, obj)\r\n    }\r\n\r\n    toggle(transition: number) {\r\n        super.toggle(transition)\r\n    }\r\n\r\n    checkCondition(): boolean {\r\n        super.checkCondition()\r\n\r\n        return true\r\n    }\r\n\r\n    reset() {\r\n        super.reset()\r\n    }\r\n\r\n    // TODO: better name ?\r\n    inverse() {\r\n        this.values = this.values.map(v => new PlotPoint(v))\r\n\r\n        for (const value of this.values)\r\n            value.inverse()\r\n\r\n        this.values.sort((a, b) => b.x > a.x ? 1 : -1)\r\n    }\r\n\r\n    // TODO: better name ?\r\n    normalize(xType: PlotAxisType) {\r\n        this.disabled = !this.values\r\n        this.type ??= PlotType.Line\r\n\r\n        for (let value of this.values) {\r\n            value.id = Helper.guid()\r\n\r\n            if (xType == PlotAxisType.Date) {\r\n                if (Helper.isISOString(value.x as string))\r\n                    value.x = new Date(value.x)\r\n                else\r\n                    console.warn(`${ value.x } is not a date in ISO format.`)\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default PlotSeries","class DropdownItem {\r\n    isDivider?: boolean | undefined\r\n\r\n    condition?: (arg?: any) => boolean\r\n\r\n    id?: string | undefined\r\n\r\n    text: string\r\n\r\n    action: (arg?: any) => void\r\n\r\n    static divider() {\r\n        return {\r\n            isDivider: true\r\n        } as DropdownItem\r\n    }\r\n\r\n    static button(text: string, action: (arg?: any) => void) {\r\n        return {\r\n            text: text,\r\n            action: action\r\n        } as DropdownItem\r\n    }\r\n}\r\n\r\nexport default DropdownItem","import Value from 'types/base/Value'\r\nimport Renderable from 'types/base/Renderable'\r\nimport * as Helper from 'Helper'\r\nimport Sector from 'types/Sector'\r\nimport Point from 'types/Point'\r\nimport Theme from 'Theme'\r\nimport Chart from 'Chart'\r\nimport TextStyles from 'helpers/TextStyles'\r\nimport Canvas from 'helpers/Canvas'\r\nimport Button from 'Button'\r\nimport TextResources from 'static/TextResources'\r\nimport * as Constants from 'static/constants/Index'\r\nimport Styles from 'static/constants/Styles'\r\nimport { AnimationType, Events, LegendPlace, RenderState } from 'static/Enums'\r\nimport ChartSettings from './types/ChartSettings'\r\n\r\nclass Legend extends Renderable {\r\n    #button: Button\r\n\r\n    #offset: Point\r\n\r\n    #chart: Chart\r\n\r\n    #hoverCount: number\r\n\r\n    isDestroy: boolean = false\r\n\r\n    constructor(chart: Chart) {\r\n        super(chart)\r\n\r\n        this.#chart = chart\r\n\r\n        this.prepareSettings()\r\n    }\r\n\r\n    render() {\r\n        super.render()\r\n\r\n        const ctx = Canvas.getContext(this.canvas)\r\n\r\n        let nextPoint = { x: 20, y: 21 }\r\n\r\n        this.canvas.style.cursor = Styles.Cursor.Default\r\n\r\n        TextStyles.regular(ctx)\r\n        ctx.textAlign = 'start'\r\n        ctx.textBaseline = 'alphabetic'\r\n\r\n        ctx.translate(this.#offset.x, this.#offset.y)\r\n\r\n        this.#hoverCount = 0\r\n\r\n        for (const value of this.settings.data.values.filter(v => !v.hideInLegend))\r\n            nextPoint = this.#draw(value, nextPoint.x, nextPoint.y)\r\n\r\n        ctx.translate(-this.#offset.x, -this.#offset.y)\r\n\r\n        if (!this.isDestroy)\r\n            requestAnimationFrame(this.render.bind(this))\r\n\r\n        this.clickEvent = this.#button?.render(this.moveEvent, this.clickEvent)\r\n\r\n        this.state = RenderState.Idle\r\n    }\r\n\r\n    #draw(value: Value, x: number, y: number): Point {\r\n        const ctx = Canvas.getContext(this.canvas)\r\n\r\n        const textWidth = Helper.stringWidth(value.label),\r\n            circleRadius = 6\r\n\r\n        if (x + 48 + textWidth >= this.canvas.width - 40 - this.#offset.x) {\r\n            x = 20\r\n            y += 26\r\n        }\r\n\r\n        let rectX = x - circleRadius - circleRadius,\r\n            rectY = y - circleRadius / 2 - circleRadius,\r\n            rectW = circleRadius + circleRadius + textWidth + 18,\r\n            rectH = 20\r\n\r\n        const isHover = (event: MouseEvent | undefined) => {\r\n            if (!event)\r\n                return false\r\n\r\n            const px = event.clientX - this.canvasPosition.x + scrollX - this.#offset.x,\r\n                py = event.clientY - this.canvasPosition.y + scrollY - this.#offset.y\r\n\r\n            return px >= rectX && px <= rectX + rectW\r\n                   && py >= rectY && py <= rectY + rectH\r\n        }\r\n\r\n        const translate = (transition: number, event: AnimationType) => {\r\n            this.animations.reload(value.id, event)\r\n\r\n            ctx.beginPath()\r\n\r\n            ctx.roundRect(rectX, rectY, rectW, rectH, circleRadius)\r\n\r\n            ctx.fillStyle = Helper.adjustColor(Theme.canvasBackground, Math.round(-25 * transition))\r\n            ctx.fill()\r\n        }\r\n\r\n        this.animations.handle(value.id,\r\n            AnimationType.Click,\r\n            {\r\n                duration: Constants.Animations.legend,\r\n                continuous: true,\r\n                before: () => {\r\n                    return this.clickEvent != undefined\r\n                           && (isHover(this.clickEvent)\r\n                               || (value instanceof Sector\r\n                                   && value.current != 0\r\n                                   && value.value != value.current))\r\n                           && value.checkCondition()\r\n                },\r\n                body: transition => {\r\n                    value.toggle(transition)\r\n\r\n                    if (transition == 1)\r\n                        this.clickEvent = new PointerEvent(Events.Click)\r\n                }\r\n            })\r\n\r\n        if (isHover(this.moveEvent)) {\r\n            this.animations.handle(value.id,\r\n                AnimationType.MouseOver,\r\n                {\r\n                    duration: Constants.Animations.button,\r\n                    body: transition => {\r\n                        translate(transition, AnimationType.MouseLeave)\r\n                    }\r\n                })\r\n\r\n            if (!value.disabled) {\r\n                this.#hoverCount++\r\n\r\n                this.#chart.highlight(value)\r\n            }\r\n\r\n            this.canvas.style.cursor = Styles.Cursor.Pointer\r\n        } else {\r\n            this.animations.handle(value.id,\r\n                AnimationType.MouseLeave,\r\n                {\r\n                    timer: Constants.Dates.minDate,\r\n                    duration: Constants.Animations.button,\r\n                    backward: true,\r\n                    body: transition => {\r\n                        translate(transition, AnimationType.MouseOver)\r\n                    }\r\n                })\r\n        }\r\n\r\n        ctx.beginPath()\r\n\r\n        ctx.arc(x - 1, y + 1, 3, 0, 2 * Math.PI)\r\n        ctx.fillStyle = value.disabled ? Helper.grayScale(value.color) : value.color\r\n        ctx.fill()\r\n\r\n        ctx.fillStyle = Theme.text\r\n        if (value.disabled)\r\n            ctx.fillStyle += '7f'\r\n\r\n        ctx.fillText(value.label, x + circleRadius * 1.5 + 1, y + 6)\r\n\r\n        x += 20\r\n\r\n        if (value.disabled) {\r\n            ctx.moveTo(x - 10, y + 2)\r\n            ctx.lineTo(x + textWidth - 10, y + 2)\r\n            ctx.strokeStyle = Theme.text + '7f'\r\n            ctx.stroke()\r\n        }\r\n\r\n        x += textWidth + 22\r\n\r\n        return {\r\n            x: x,\r\n            y: y\r\n        }\r\n    }\r\n\r\n    destroy() {\r\n        this.isDestroy = true\r\n\r\n        this.canvas.remove()\r\n    }\r\n\r\n    refresh() {\r\n        this.state = RenderState.Init\r\n    }\r\n\r\n    resize() {\r\n        this.calculateSizes()\r\n        this.#button?.resize()\r\n        this.initAnimations()\r\n    }\r\n\r\n    calculateSizes() {\r\n        switch (this.settings.legendPlace) {\r\n            case LegendPlace.Bottom:\r\n            default:\r\n                this.canvas.width = this.settings.width\r\n                this.canvas.height = Legend.getLegendHeight(this.settings.data.values, this.canvas.width)\r\n\r\n                this.node.style.flexDirection = Styles.FlexDirection.Column\r\n\r\n                break\r\n\r\n            case LegendPlace.Top:\r\n                this.canvas.width = this.settings.width\r\n                this.canvas.height = Legend.getLegendHeight(this.settings.data.values, this.canvas.width)\r\n\r\n                this.node.style.flexDirection = Styles.FlexDirection.ColumnReverse\r\n\r\n                break\r\n\r\n            case LegendPlace.Left:\r\n                this.canvas.width = 500\r\n                this.canvas.height = this.settings.height\r\n\r\n                this.node.style.flexDirection = Styles.FlexDirection.Row\r\n\r\n                break\r\n\r\n            case LegendPlace.Right:\r\n                this.canvas.width = 500\r\n                this.canvas.height = this.settings.height\r\n\r\n                this.node.style.flexDirection = Styles.FlexDirection.RowReverse\r\n\r\n                break\r\n        }\r\n\r\n        this.#offset = {\r\n            x: Legend.getOffsetToCenter(this.settings.data.values, this.canvas.width),\r\n            y: (this.canvas.height - Legend.getLegendHeight(this.settings.data.values, this.canvas.width)) / 2\r\n        }\r\n    }\r\n\r\n    applySettings(settings: ChartSettings) {\r\n        this.settings = settings\r\n\r\n        this.prepareSettings()\r\n    }\r\n\r\n    prepareSettings() {\r\n        this.resize()\r\n\r\n        if (!this.settings.disableInteractions)\r\n            this.#button = new Button(this.canvas,\r\n                {\r\n                    x: -10,\r\n                    y: 12,\r\n                    text: TextResources.reset,\r\n                    action: () => {\r\n                        for (let value of this.settings.data.values)\r\n                            value.reset()\r\n                    }\r\n                })\r\n    }\r\n\r\n    static getOffsetToCenter(values: Value[], width: number): number {\r\n        let maxWidth = 20\r\n\r\n        for (const value of values.filter(v => !v.hideInLegend)) {\r\n            const labelWidth = Helper.stringWidth(value.label)\r\n\r\n            if (maxWidth + labelWidth + 47 >= width - 100)\r\n                break\r\n\r\n            maxWidth += labelWidth + 47\r\n        }\r\n\r\n        return width / 2 - maxWidth / 2\r\n    }\r\n\r\n    static getLegendHeight(values: Value[], width: number): number {\r\n        let count = 1,\r\n            acc = 20,\r\n            offset = Legend.getOffsetToCenter(values, width)\r\n\r\n        for (const value of values.filter(v => !v.hideInLegend)) {\r\n            const labelWidth = Helper.stringWidth(value.label)\r\n\r\n            if (acc + labelWidth + 48 >= width - 32 - offset) {\r\n                acc = 20\r\n                count++\r\n            }\r\n\r\n            acc += labelWidth + 48\r\n        }\r\n\r\n        return 24 + count * 20 + (count - 1) * 6\r\n    }\r\n}\r\n\r\nexport default Legend","export class Values {\r\n    static readonly titleOffset = 30\r\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n__webpack_require__(281);\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(832);\n"],"names":["Animations","constructor","this","Map","handle","id","type","value","key","has","set","contains","reload","get","timer","Date","clear","forEach","_value","AnimationType","Init","delete","reverse","item","stamp","passed","getTime","reversedPassed","duration","backward","isBackward","isEnd","end","Constants","Dates","minDate","initializeTransitions","i","t","x","Math","pow","y","transitionCurve","toFixed","getTransition","transition","before","body","continuous","endsWith","color","amount","replace","min","max","parseInt","toString","slice","Array","join","round","reduce","a","v","padStart","floor","random","str","font","widths","from","String","acc","cur","charCodeAt","S4","substring","toLowerCase","background","foreground","backgroundAsRgb","hexToRgb","foregroundAsRgb","r","g","b","test","opacity","hex","result","getHexValues","getColor","rgb","bg","canvasBackground","alpha","toHex","c","length","rgbToHex","all","hasNegative","filter","countOfElements","includes","Plot","maxLabelsCount","isSatisfyDividing","divides","satisfied","abs","d","isSatisfyElementsCount","values","amplitude","startValue","attempt","step","isFractional","Number","EPSILON","startIndex","endIndex","negativeWeight","isFinite","push","throw","ErrorType","MaxCallsReach","red","green","blue","getShortHexValues","exec","text","Errors","error","Error","throwIsUndefined","object","undefined","settings","enableTooltip","disableInteractions","destroy","ChartType","Circular","Gauge","TreeMap","applySettings","prepareSettings","initDropdown","initAnimations","resize","refresh","initialize","isDarkThemeFunction","node","style","display","Display","Flex","flexDirection","FlexDirection","Column","alignItems","AlignItems","Center","justifyContent","JustifyContent","height","ResizeObserver","canvas","observe","context","document","addEventListener","Events","VisibilityChanged","resetMouse","window","Blur","Click","event","target","closeDropdowns","render","disconnect","highlight","reset","isNeedRestartRender","enableLegend","circular","legend","tree","tooltip","button","PlotPoint","obj","super","Object","assign","inverse","Sector","baseColor","canRenderLabel","isMouseInside","toggle","disabled","current","checkCondition","TextResources","exportPNG","decomposeToTable","exportCSV","menu","allDataIsHidden","other","thousandShort","millionShort","billionShort","show","noLabel","treeMapIsEmpty","dataAsTable","Canvas","getContext","willReadFrequently","NullContext","isPixelBusy","pixel","canvasBackgroundInt","isCanRender","ctx","w","h","isLeft","width","Helper","stringWidth","pos","imageData","Uint32Array","getImageData","data","buffer","textWidth","map","line","offsetX","offsetY","beginPath","roundRect","baseOpacity","strokeStyle","dropdownBorder","lineWidth","fillStyle","stroke","fill","offset","arc","PI","fillText","padding","getElementById","updateVisibility","visibility","Visibility","Visible","regex","content","cloneNode","createElement","Tag","Div","innerHTML","position","Position","Absolute","pointerEvents","PointerEvents","None","setAttribute","Attribute","Name","matches","matchAll","html","match","property","replaceAll","appendChild","getBoundingClientRect","Hidden","pageX","pageY","left","top","tooltips","querySelectorAll","opacityValue","templateId","condition","lines","ThemeOptions","colors","backgrounds","lineAxes","lineActives","dropdownBorders","canvasBackgrounds","args","base","JSON","parse","stringify","getRows","headers","series","seriesValues","xType","PlotAxisType","date","name","label","unique","Set","uniqueHeaders","add","sort","prototype","isAnyEquals","addDays","days","setDate","getDate","addMilliseconds","milliseconds","setMilliseconds","getMilliseconds","trySet","sum","predicate","CanvasRenderingContext2D","resetLine","lineJoin","lineCap","Styles","Cursor","Default","Pointer","ColumnReverse","Row","RowReverse","ImageRendering","Pixelated","options","isActive","icon","animations","moveEvent","clickEvent","translate","adjustColor","cursor","MouseOver","MouseLeave","regular","iconOffset","navigator","platform","borderRadius","items","dividers","maxWidth","dropdownOpacity","itemOpacityDec","itemBackground","dropdownItemHoverColor","borderColor","rect","setLineDash","isDivider","moveTo","lineTo","animationKey","isReturn","action","textAlign","textBaseline","close","Theme","callback","isDark","function","matchMedia","setTheme","Change","index","currentTheme","lineAxis","lineActive","CircularRenderer","chart","startAngle","isMousePositionChanged","prevMousePos","MouseEvent","MouseMove","calculateAngles","valuesSum","anglesSum","angles","flatMap","sector","angle","getAngle","find","o","getAccumulator","calculatePoint","accumulator","getPoint","radius","center","cos","sin","startPoint","nextPoint","points","direction","labelStartPoint","labelMidPoint","dir","endPoint","labelPoints","DrawPointType","Move","QuadraticCurve","isDonut","localAccumulator","localAngle","currentAngle","p1Angle","p1","ArcTo","innerRadius","innerPoint2","Line","SemiCircle","scale","centerOfSector","setArgs","p","sqrt","ratio","xx","yy","isNaN","focus","applyAlpha","textColor","outline","lineStyles","state","isBusy","imageDataX","imageDataY","drawLabel","quadraticCurveTo","circularLabel","drawSector","point","arcTo","closePath","animate","indexOf","_transition","s","AnotherItemOver","AnotherItemLeave","isInsideCircle","isInsideSector","isInsideSectorClick","hover","pinned","isAnyCollapsing","clientX","clientY","getMousePosition","isWithinRadius","empty","renderDropdown","currentHover","isAnyHover","contextMenu","renderContextMenu","menuEvent","dropdown","format","valuePostfix","innerTitle","isDestroy","requestAnimationFrame","bind","atan2","findIndex","sumBefore","isAngle","canRenderInnerTitle","innerTitleStyle","calculateSizes","titleOffset","title","Values","shortSide","longestLabel","large","console","warn","enableOther","_other","toChart","innerWidth","innerHeight","open","splice","guid","disableInitAnimation","Icon","ThreeLines","asPng","asCsv","toTable","Renderer","highlightItems","RenderState","Idle","renderTitle","remove","domRect","parentElement","minWidth","minHeight","calculateColors","dispatchEvent","CustomEvent","detail","force","randomColor","clone","canvasPosition","isClick","scrollX","scrollY","legendPlace","LegendPlace","Top","Bottom","getLegendHeight","Left","Right","PlotRenderer","plot","interact","tooltip2","dropdown2","nextFrame","paddings","seriesClass","PlotSeries2","tooltipLines","axisLineHoverColor","yValue","yHeight","columnWidth","seriesToRender","columnsIndex","columnsCount","PlotType","barsIndex","barsCount","Bar","stackingAccumulator","anyHighlight","changeColor","lineType","LineType","Dash","Dotted","Solid","xIndex","yIndex","getTooltipValue","unit","pointDuration","now","next","prevValue","mouse","AttentionLine","bottom","right","yMax","minStep","seriesHeight","fillRect","StackingColumn","ceil","tooltipValues","size","normalize","setPaddings","PlotBase","xValues","yValues","isDate","byAsc","Text","tempDate","isVertical","getRoundedValues","xUnit","yMin","yUnit","yStepOffset","stackingColumns","simple","divider","getValue","labels","curr","keys","unshift","labelsY","labelsX","area","label2","renderer","calculateLabels","backlines","titles","clearRect","l","xTitle","yTitle","rotate","resetTransform","uniqueX","uniqueY","stepXOffset","stepYOffset","xOffset","yOffset","stepX","stepY","isRight","imageRendering","append","onmousemove","onclick","oncontextmenu","preventDefault","onmouseleave","TreeRenderer","maxHeight","tooltipCell","contextMenuData","totalSquare","minX","minY","remainWidth","remainHeight","cells","isSingle","isLast","j","h1","w1","cell","cellInit","cellIndex","getPrev","E","initAnimationDuration","minSize","rest","gap","isColorVisible","table","classList","totals","rows","valuesMap","tableValue","allColumns","header","indexSpaces","tableHeader","columns","vKey","vValue","number","totalValue","trim","totalColumns","container","div","script","Script","flexGrow","cloneSettings","GaugeRenderer","piece","point1","point2","point3","inner","outerRadius","longSide","Export","leftEmpty","rightEmpty","destinationCanvas","destCtx","drawImage","saveAs","toDataURL","csv","row","cols","encodeURIComponent","dataURL","href","isText","showSaveFilePicker","suggestedName","types","accept","excludeAcceptAllOption","toBlob","dataURI","byteString","atob","split","mimeString","ArrayBuffer","imageArray","Uint8Array","Blob","then","fileHandle","createWritable","writableStream","write","download","A","click","Formatter","postfix","toLocaleString","minimumFractionDigits","maximumFractionDigits","toLocaleDateString","trueX","trueY","OCharts","modal","ElementNotExist","titleSpan","Span","ModalClasses","closeButton","Button","Close","Dialog","oncancel","showModal","PlotSeries","isISOString","Legend","hideInLegend","getOffsetToCenter","labelWidth","count","rectX","rectY","circleRadius","rectW","isHover","px","py","PointerEvent","grayScale","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call"],"sourceRoot":""}